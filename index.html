

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Graylog 3.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link href="_static/theme_overrides.css" rel="stylesheet" type="text/css">


<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="https://docs.graylog.org/en/3.0/" />

<link rel="stylesheet" href="https://assets.readthedocs.org/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = 'index'
</script>

<script type="text/javascript" src="https://assets.readthedocs.org/static/javascript/readthedocs-analytics.js"></script>

<!-- end RTD <extrahead> -->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html#document-index" class="icon icon-home"> Graylog
          

          
          </a>

          
            
            
            
              <div class="version">
                3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
            
              <!-- Local TOC -->
              <div class="local-toc"><p class="caption"><span class="caption-text">Graylog</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/architecture">对于架构的思考</a>
  <ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#minimum-setup">最小化配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#bigger-production-setup">生产环境下更大规模的配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-architecture-deep-dive">Graylog 架构深入</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/getting_started">开始</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/getting_started/planning">规划您的日志收集</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/getting_started/download_install">下载&amp;安装Graylog</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/getting_started/configure">初始化配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/getting_started/web_console">连接到Web控制台</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/getting_started/explore">探索Graylog</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/getting_started/collect">收集消息</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/installation">安装Graylog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/installation/virtual_machine_appliances">虚拟机应用程序</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/installation/operating_system_packages">操作系统软件包</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/installation/config_management_tools">Chef, Puppet, Ansible</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/installation/docker">Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/installation/aws">Amazon Web Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/installation/windows">Microsoft Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/installation/manual_setup">手动配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#system-requirements">系统要求</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/upgrade">升级 Graylog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/upgrade/graylog-2.0">升级到Graylog 2.0.x</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/upgrade/graylog-2.1">升级到Graylog 2.1.x</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/upgrade/graylog-2.2">升级到Graylog 2.2.x</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/upgrade/graylog-2.3">升级到Graylog 2.3.x</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/upgrade/graylog-2.4">升级到Graylog 2.4.x</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/upgrade/graylog-2.5">升级到Graylog 2.5.x</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/upgrade/graylog-3.0">升级到Graylog 3.0.x</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#upgrading-graylog-originally-installed-from-image">Upgrading Graylog Originally Installed from Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#upgrading-graylog-originally-installed-from-package">Upgrading Graylog Originally Installed from Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#upgrading-elasticsearch">升级Elasticsearch</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/configuration">配置Graylog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/configuration/server.conf">server.conf</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/configuration/web_interface">Web界面</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/configuration/load_balancers">负载均衡器集成</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/configuration/https">使用HTTPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/configuration/multinode_setup">多节点配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/configuration/elasticsearch">Elasticsearch</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/configuration/index_model">索引模型</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/configuration/backup">备份</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/configuration/file_location">默认的文件路径</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/configuration/rest_api">Graylog其它的API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/secure/securing">加固Graylog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#default-ports">Default ports</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#configuring-tls-ciphers">配置 TLS ciphers</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#security-related-topics">与安全相关的话题</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/sending_data">日志文件接入</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#what-are-graylog-message-inputs">什么是Graylog消息输入?</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#content-packs">内容包</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#syslog">Syslog</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#gelf-sending-from-applications">GELF / 从应用程序中发送</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#using-apache-kafka-as-transport-queue">使用Apache Kafka作为传输队列</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#using-rabbitmq-amqp-as-transport-queue">使用 RabbitMQ (AMQP) 作为传输队列</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#microsoft-windows">Microsoft Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#ruby-on-rails">Ruby on Rails</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#raw-plaintext-inputs">原始的/纯文本的输入</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#json-path-from-http-api-input">来自HTTP API 的JSON 路径输入</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#reading-from-files">从文件读取</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#input-throttling">输入限流</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/sidecar">Graylog Sidecar</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#installation">安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#sidecar-configuration">Sidecar 配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#step-by-step-guide">分步指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#creating-a-new-log-collector">创建一个新的日志收集器</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#using-configuration-variables">使用配置变量</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#secure-sidecar-communication">安全的Sidecar通信</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#run-sidecar-as-non-root-user">以非root用户运行Sidecar</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#upgrading-from-the-collector-sidecar">从Collector Sidecar升级</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#sidecar-glossary">Sidecar术语表</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#debug">诊断</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#uninstall">卸载</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#known-problems">已知的问题</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/queries">搜索</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#search-query-language">搜索查询语法</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#time-frame-selector">时间选择器</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#saved-searches">已保存的搜索</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#histogram">直方图</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#analysis">分析</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#decorators">装饰器</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#export-results-as-csv">导出结果至CSV</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#search-result-highlighting">搜索结果突出显示</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#search-configuration">搜索配置</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/streams">数据流</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#what-are-streams">什么是数据流?</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#how-do-i-create-a-stream">我如何创建数据流?</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#index-sets">索引集</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#outputs">输出</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#use-cases">使用案例</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#how-are-streams-processed-internally">How are streams processed internally?</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#stream-processing-runtime-limits">Stream Processing Runtime Limits</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#programmatic-access-via-the-rest-api">Programmatic access via the REST API</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#faqs">FAQs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/streams/alerts">告警</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#alert-states">告警状态</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#alerts-overview">告警总览</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#conditions">条件</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#notifications">通知</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/dashboards">仪表盘</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#why-dashboards-matter">为什么仪表板很重要</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#how-to-use-dashboards">如何使用仪表板</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#examples">例子</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#widgets-from-streams">来自数据流的小工具</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#result">结果</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#widget-types-explained">小工具类型说明</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#modifying-dashboards">修改仪表盘</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#dashboard-permissions">仪表盘权限</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/extractors">提取器</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#the-problem-explained">对问题的解释</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-extractors-explained">Graylog装饰器的解释</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#import-extractors">导入装饰器</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#using-regular-expressions-to-extract-data">使用正则表达式提取数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#using-grok-patterns-to-extract-data">使用 Grok 模式提取数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#using-the-json-extractor">使用JSON装饰器</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#automatically-extract-all-key-value-pairs">自动提取所有“键=值”对</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#normalization">规范化</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/pipelines">管道处理</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/pipelines/pipelines">管道</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/pipelines/rules">规则</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/pipelines/stream_connections">流连接</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/pipelines/functions">功能</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/pipelines/usage">用法</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/lookuptables">查询表</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#components">组件</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#setup">设置</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#usage">用法</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#built-in-data-adapters">内置数据适配器</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/geolocation">地理定位</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#setup">设置</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#visualize-geolocations-in-a-map">在地图中的可视化地理定位</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#faqs">常见问题</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/indexer_failures">索引器故障</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#common-indexer-failure-reasons">常见的索引器故障原因</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/users_and_roles">用户和角色</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/users_and_roles/users">用户</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/users_and_roles/roles">角色</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/users_and_roles/permission_system">许可制度</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/users_and_roles/external_auth">外部验证</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#authentication-providers">身份验证提供程序</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/integrations">集成</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/integrations/setup">集成设置</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#open-source">开源</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#enterprise">企业级</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/plugins">插件</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#about-plugins">关于插件</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#plugin-types">插件类型</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#writing-plugins">编写插件</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#installing-and-loading-plugins">安装和加载插件</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/content_packs">内容包</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#what-are-content-packs">什么是内容包?</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#how-do-i-create-a-content-pack">我如何创建内容包?</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#upload-a-content-pack">上传内容包</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#installing-a-content-pack">安装内容包</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#uninstalling-a-content-pack">卸载内容包</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/external_dashboards">外部仪表盘</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#cli-stream-dashboard">CLI流的仪表盘</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/marketplace">Graylog市场</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#github-integration">GitHub集成</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#general-best-practices">通常最佳实践</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#types-of-add-ons">4种类型的附加组件</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#contributing-plug-ins">贡献插件</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#contributing-content-packs">贡献内容包</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#contributing-gelf-libraries">贡献GELF库</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#contributing-other-content">贡献其它内容</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/faq">FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#general">常规</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#architecture">架构</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#installation-setup">安装/设置</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#functionality">功能</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-integrations">Graylog &amp; 集成</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#troubleshooting">故障排除</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#support">支持</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/gelf">GELF</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#structured-events-from-anywhere-compressed-and-chunked">来自任何地方的结构化事件。压缩且分片的</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#gelf-via-udp">GELF（ UDP）</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#gelf-via-tcp">GELF（ TCP）</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#gelf-payload-specification">GELF Payload规范</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#example-payload">payload例子</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/ideas_explained">Graylog体系结构背后的想法以及为什么它对你很重要</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#a-short-history-of-graylog">Graylog简史</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#the-log-management-market-today">现在的日志管理市场</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#the-future">未来</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/changelog">更新日志</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-3-0-2">Graylog 3.0.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-3-0-1">Graylog 3.0.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-3-0-0">Graylog 3.0.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-5-2">Graylog 2.5.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-5-1">Graylog 2.5.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-5-0">Graylog 2.5.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-4-7">Graylog 2.4.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-4-6">Graylog 2.4.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-4-5">Graylog 2.4.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-4-4">Graylog 2.4.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-4-3">Graylog 2.4.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-4-2">Graylog 2.4.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-4-1">Graylog 2.4.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-4-0">Graylog 2.4.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-4-0-rc-2">Graylog 2.4.0-rc.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-4-0-rc-1">Graylog 2.4.0-rc.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-4-0-beta-4">Graylog 2.4.0-beta.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-4-0-beta-3">Graylog 2.4.0-beta.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-4-0-beta-2">Graylog 2.4.0-beta.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-4-0-beta-1">Graylog 2.4.0-beta.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-3-2">Graylog 2.3.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-3-1">Graylog 2.3.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-3-0">Graylog 2.3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-2-3">Graylog 2.2.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-2-2">Graylog 2.2.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-2-1">Graylog 2.2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-2-0">Graylog 2.2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-1-3">Graylog 2.1.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-1-2">Graylog 2.1.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-1-1">Graylog 2.1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-1-0">Graylog 2.1.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-0-3">Graylog 2.0.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-0-2">Graylog 2.0.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-0-1">Graylog 2.0.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-2-0-0">Graylog 2.0.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-3-4">Graylog 1.3.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-3-3">Graylog 1.3.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-3-2">Graylog 1.3.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-3-1">Graylog 1.3.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-3-0">Graylog 1.3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-2-2">Graylog 1.2.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-2-1">Graylog 1.2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-2-0">Graylog 1.2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-2-0-rc-4">Graylog 1.2.0-rc.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-2-0-rc-2">Graylog 1.2.0-rc.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-1-6">Graylog 1.1.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-1-5">Graylog 1.1.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-1-4">Graylog 1.1.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-1-3">Graylog 1.1.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-1-2">Graylog 1.1.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-1-1">Graylog 1.1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-1-0">Graylog 1.1.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-1-0-rc-3">Graylog 1.1.0-rc.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-1-0-rc-1">Graylog 1.1.0-rc.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-1-0-beta-3">Graylog 1.1.0-beta.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-1-0-beta-2">Graylog 1.1.0-beta.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-0-2">Graylog 1.0.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-0-1">Graylog 1.0.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-0-0">Graylog 1.0.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-0-0-rc-4">Graylog 1.0.0-rc.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-0-0-rc-3">Graylog 1.0.0-rc.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-0-0-rc-2">Graylog 1.0.0-rc.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-0-0-rc-1">Graylog 1.0.0-rc.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-0-0-beta-2">Graylog 1.0.0-beta.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#id65">Graylog 1.0.0-beta.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog2-0-92-4">Graylog2 0.92.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-1-0-0-beta-1">Graylog 1.0.0-beta.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog2-0-92-3">Graylog2 0.92.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog2-0-92-1">Graylog2 0.92.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog2-0-92-0">Graylog2 0.92.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog2-0-92-0-rc-1">Graylog2 0.92.0-rc.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog2-0-91-3">Graylog2 0.91.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#id68">Graylog2 0.91.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog2-0-92-0-beta-1">Graylog2 0.92.0-beta.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog2-0-91-1">Graylog2 0.91.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog2-0-90-1">Graylog2 0.90.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog2-0-91-0-rc-1">Graylog2 0.91.0-rc.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog2-0-90-0">Graylog2 0.90.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog2-0-20-3">Graylog2 0.20.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog2-0-20-2">Graylog2 0.20.2</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Graylog Enterprise</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/enterprise/intro">介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/enterprise/setup">设置</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#requirements">要求</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#installation">安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#server-restart">服务器重启</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#cluster-setup">集群配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#license-installation">许可证安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#license-verification">许可证验证</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/archiving">归档</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/archiving/setup">设置</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/archiving/usage">用法</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/auditlog">审计日志</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/auditlog/setup">设置</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/auditlog/usage">用法</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/reporting">报表</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/reporting/setup">设置</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pages/reporting/usage">用法</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pages/enterprise/changelog">更新日志</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-3-0-2">Graylog Enterprise 3.0.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-3-0-1">Graylog Enterprise 3.0.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-3-0-0">Graylog Enterprise 3.0.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-5-2">Graylog Enterprise 2.5.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-5-1">Graylog Enterprise 2.5.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-5-0">Graylog Enterprise 2.5.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-4-7">Graylog Enterprise 2.4.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-4-6">Graylog Enterprise 2.4.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-4-5">Graylog Enterprise 2.4.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-4-4">Graylog Enterprise 2.4.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-4-3">Graylog Enterprise 2.4.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-4-2">Graylog Enterprise 2.4.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-4-1">Graylog Enterprise 2.4.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-4-0">Graylog Enterprise 2.4.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-4-0-rc-2">Graylog Enterprise 2.4.0-rc.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-4-0-rc-1">Graylog Enterprise 2.4.0-rc.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-4-0-beta-4">Graylog Enterprise 2.4.0-beta.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-4-0-beta-3">Graylog Enterprise 2.4.0-beta.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-4-0-beta-2">Graylog Enterprise 2.4.0-beta.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-4-0-beta-1">Graylog Enterprise 2.4.0-beta.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-3-2">Graylog Enterprise 2.3.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-3-1">Graylog Enterprise 2.3.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-3-0">Graylog Enterprise 2.3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-2-3">Graylog Enterprise 2.2.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-2-2">Graylog Enterprise 2.2.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-2-1">Graylog Enterprise 2.2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-2-2-0">Graylog Enterprise 2.2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-1-2-1">Graylog Enterprise 1.2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-1-2-0">Graylog Enterprise 1.2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-1-1">Graylog Enterprise 1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-1-0-1">Graylog Enterprise 1.0.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#graylog-enterprise-1-0-0">Graylog Enterprise 1.0.0</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html#document-index">Graylog</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html#document-index">Docs</a> &raquo;</li>
        
      <li>Graylog 3.0.0 documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/Graylog2/documentation/blob/3.0/index.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="welcome-to-the-graylog-documentation">
<h1>欢迎来到Graylog中文站<a class="headerlink" href="#welcome-to-the-graylog-documentation" title="Permalink to this headline">¶</a></h1>
<p>（维护：<a class="reference external" href="https://www.fansdoc.com">FansDoc.com</a>，目前只翻译一部分，先挖个坑以后慢慢填）</p>
<div class="toctree-wrapper compound">
<span id="document-pages/architecture"></span><div class="section" id="architectural-considerations">
<h2>对于架构的思考<a class="headerlink" href="#architectural-considerations" title="Permalink to this headline">¶</a></h2>
<p>在为Graylog扩充资源时，有一些经验法则:</p>
<ul class="simple">
<li>Graylog节点应重点关注CPU性能。这对于运行在浏览器中用户界面也有改善。</li>
<li>Elasticsearch节点应该有尽可能多的 RAM 和你能得到的最快的磁盘。
一切都取决于I/O的速度。</li>
<li>MongoDB 存储元数据和配置信息，不需要太多资源。</li>
</ul>
<p>还要记住，获取的消息<strong>只是</strong> 存储在Elasticsearch。如果您在Elasticsearch群集中有数据丢失
，消息将彻底消失，除非您已创建索引的备份。</p>
<div class="section" id="minimum-setup">
<h3>最小化配置<a class="headerlink" href="#minimum-setup" title="Permalink to this headline">¶</a></h3>
<p>这是一个最小化的Graylog配置，可用于较小、非关键或测试用途的配置。没有一个组件是冗余的，而且它们配置起来也简捷。</p>
<img alt="_images/architec_small_setup.png" src="http://res.fansdoc.com/graylog/_images/architec_small_setup.png" />
<p>我们的 <a class="reference internal" href="index.html#virtual-machine-appliances"><span class="std std-ref">虚拟机应用程序</span></a> 默认使用这种设计，将nginx部署为 <a class="reference internal" href="index.html#configuring-webif-nginx"><span class="std std-ref">前端代理</span></a>.</p>
</div>
<div class="section" id="bigger-production-setup">
<span id="big-production-setup"></span><h3>生产环境下更大规模的配置<a class="headerlink" href="#bigger-production-setup" title="Permalink to this headline">¶</a></h3>
<p>这是针对更大规模的生产环境的配置。在负责分发负载任务的负载均衡器之下，存在若干个Graylog节点。</p>
<p>负载均衡器通过HTTP协议，调用Graylog REST API来ping Graylog节点，以检查它们是否处于活动状态，并将失效节点移出群集。</p>
<img alt="_images/architec_bigger_setup.png" src="http://res.fansdoc.com/graylog/_images/architec_bigger_setup.png" />
<p>如何来规划配置这类环境请参考我们的<a class="reference internal" href="index.html#configure-multinode"><span class="std std-ref">多节点配置指南</span></a>。</p>
<p>在<a class="reference external" href="https://marketplace.graylog.org/">Graylog市场</a>的某些指南也提供了一些思路，指导您使用<a class="reference external" href="https://marketplace.graylog.org/addons/246dc332-7da7-4016-b2f9-b00f722a8e79">RabbitMQ (AMQP)</a> 或 <a class="reference external" href="https://marketplace.graylog.org/addons/113fd1cb-f7d2-4176-b427-32831bd554ee">Apache Kafka</a> 来向您的环境中添加一些队列。</p>
</div>
<div class="section" id="graylog-architecture-deep-dive">
<h3>Graylog架构深入<a class="headerlink" href="#graylog-architecture-deep-dive" title="Permalink to this headline">¶</a></h3>
<p>如果您真的对更详细的Graylog架构感兴趣--无论您是想了解更多架构设计、性能调优，还是仅仅因为您喜欢这样的内容，我们厚脸皮的工程团队汇总了这个<a class="reference external" href="http://www.slideshare.net/Graylog/graylog-engineering-design-your-architecture">深层架构指南</a>。我们倒不是心虚，但我们希望您喜欢它。</p>
</div>
</div>
<span id="document-pages/getting_started"></span><div class="section" id="getting-started">
<span id="gettingstarted"></span><h2>开始<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>本指南是为首次使用的用户设计的，旨在提供足够的关键信息，以便初始化安装和配置Graylog。每个部分都链接到与主题相关的其他细节阐述。</p>
<p>Graylog是一个非常灵活的解决方案。它能以许多不同的方式部署。对于那些希望对Graylog进行初步试验评估的用户，我们建议从虚拟机应用程序开始。</p>
<p>虚拟化应用是最快的入门方式。然而，由于虚拟化应用通常不适合在生产中使用，<strong>它应仅限于概念验证、评估或试验环境</strong>。对于生产环境的部署，用户应规划选择一项其他更灵活的安装方法。</p>
<p>如果您在规划和构建日志环境方面需要协助，<a class="reference external" href="https://www.graylog.org/professional-support">我们提供专业的支持</a> 以适应您的需求。</p>
<div class="toctree-wrapper compound">
<span id="document-pages/getting_started/planning"></span><div class="section" id="planning-your-log-collection">
<h3>规划您的日志收集<a class="headerlink" href="#planning-your-log-collection" title="Permalink to this headline">¶</a></h3>
<p>我们知道您迫切需要Graylog安装和运行，但我们要求您花一些时间来回顾此部分并合理地规划部署。是否合理的规划，决定了这是一个能够满足各利益方需求的有用的解决方案，还是一个消耗资源、几乎没有价值的乱摊子。在设计日志管理的解决方案时，必须考虑许多因素。</p>
<div class="section" id="strategies">
<h4>策略<a class="headerlink" href="#strategies" title="Permalink to this headline">¶</a></h4>
<p>即使在小型组织中，现代环境也会生成大量日志数据。不久前，每天500MB被认为是一家小企业的正常日志量。如今，对于一个小环境来说，每天5GB并不鲜见。一个大的环境可以产生一千倍以上的日志量。</p>
<p>假设单个事件占用空间大小平均为500k，若一天增长5GB空间，这相当于每秒125个日志事件，每天约108万个事件。生成这么多信息后，您将需要一个有效管理的策略。主要有两种方法。</p>
<div class="section" id="minimalist">
<h5>极简主义者<a class="headerlink" href="#minimalist" title="Permalink to this headline">¶</a></h5>
<p><strong>“只做必要的事”</strong></p>
<p>在决定收集哪些事件时， 极简主义策略从“默认否”的立场出发。这意味着您不会收集任何日志，除非它是在已确定的商业案例中所必需的。此策略具有一些优点，它减少了收集的事件的数量，从而降低了许可和存储的成本。它还最大限度地减少了不相关事件产生的“杂音”，使分析者能够专注于具有最大价值的事件。最后，它提高了系统和查询效率，整体上提升了性能。</p>
</div>
<div class="section" id="maximalist">
<h5>极多主义者<a class="headerlink" href="#maximalist" title="Permalink to this headline">¶</a></h5>
<p><strong>“收集这一切，让Graylog搞定它。”</strong></p>
<p>极多主义策略是收集任何来源所产生的全部事件。人们的想法是，所有的日志数据都有潜在的价值，特别是对取证而言。收集这一切，并久保存，确保当需要的时候你就能取得它。然而，由于预算或其他因素制约，这一策略往往不合实际。这一策略的成本可能高得令人望而却步，因为必须将更多的技术和人力资源用于事件的收集、处理和储存。在线保有庞大的数据集也会造成性能上的损失，这一点也必须考虑在内。</p>
</div>
</div>
<div class="section" id="use-cases">
<h4>使用案例<a class="headerlink" href="#use-cases" title="Permalink to this headline">¶</a></h4>
<p><strong>“您要如何处理事件数据？”</strong></p>
<p>使用案例应在规划阶段为大多数决策提供信息。其中一些决策包括确定应从哪些源中收集事件、如何从这些源中收集、每种事件类型要存储的数量、应如何富态化事件以及数据应保留多久。</p>
<p>使用案例，广义的定义，是指实现技术和/或业务成果所需的技术性步骤。一个更简单的思路是，使用案例是您在收集事件日志后，要对其所执行的操作的描述。用例通常被按组分类，类似于“活动”。一些常见的用例类别是“安全”、“操作”和“DevOps”。安全用例的一个示例是监控用户对关键资源的登录。操作用例可能监控网络或硬件性能，而DevOps用例将侧重于应用层实时监控或故障排除。</p>
</div>
<div class="section" id="event-log-sources">
<h4>事件日志源<a class="headerlink" href="#event-log-sources" title="Permalink to this headline">¶</a></h4>
<p><strong>“您想收集什么日志？”</strong></p>
<p>在一个看起来万物都能生成事件日志的环境中，可能很难知道需要收集哪些内容。在大多数情况下，事件源的选择应由已确定的用例来决定。例如，如果用例是监控用户对关键资源的登录，则所选择的事件源应是那些关键资源。可能是LDAP目录服务器、本地服务器、防火墙、网络设备和关键应用程序。</p>
<p>按类别划分的其他一些潜在事件源。</p>
<p><strong>安全</strong></p>
<ul class="simple">
<li>防火墙</li>
<li>终端安全（EDR，AV等）</li>
<li>网页代理/网关</li>
<li>LDAP/活动目录</li>
<li>IDS</li>
<li>DNS</li>
<li>DHCP</li>
<li>服务器</li>
<li>工作站</li>
<li>NetFlow</li>
</ul>
<p><strong>Ops</strong></p>
<ul class="simple">
<li>应用程序</li>
<li>网络设备</li>
<li>服务器</li>
<li>报文捕获/网络录像机</li>
<li>DNS</li>
<li>DHCP</li>
<li>Email</li>
</ul>
<p><strong>DevOps</strong></p>
<ul class="simple">
<li>应用日志</li>
<li>负载均衡器日志</li>
<li>自动化系统日志</li>
<li>业务逻辑</li>
</ul>
</div>
<div class="section" id="collection-method">
<h4>收集方式<a class="headerlink" href="#collection-method" title="Permalink to this headline">¶</a></h4>
<p><strong>“您将如何收集它？”</strong></p>
<p>确定好事件源的列表之后，下一步是对于每个源，确定它的收集方式。尽管许多硬件和软件产品支持常见的方式，如通过syslog发送日志数据，但许多产品并不支持这种。了解每个事件源适用的方法，以及可能需要的资源是至关重要的。例如，如果要从所有服务器上的本地文件读取日志，需要用到日志传送器。需要选择一种日志传送器，在部署前进行测试。在其他情况下，必须应用和集成专有API或软件工具。</p>
<p>在某些情况下，可能需要更改事件源本身 （安全设备、网络硬件或应用程序）。久而久之，部署维护这些收集方式通常需要额外的规划。</p>
<p>Graylog支持开箱即用的多种输入类型。Graylog市场中提供了更多的输入类型。在编写本文时，Graylog支持以下内容：</p>
<ul class="simple">
<li>Syslog (TCP, UDP, AMQP, Kafka)</li>
<li>GELF (TCP, UDP, AMQP, Kafka, HTTP)</li>
<li>AWS (AWS Logs, FlowLogs, CloudTrail)</li>
<li>Beats/Logstash</li>
<li>CEF (TCP, UDP, AMQP, Kafka)</li>
<li>HTTP API 中的 JSON Path</li>
<li>Netflow (UDP)</li>
<li>纯/原始 文本 (TCP, UDP, AMQP, Kafka)</li>
</ul>
<p><a class="reference external" href="http://marketplace.graylog.org">Graylog市场</a>是Graylog附加组件的中央目录。它包含插件、内容包、GELF库和更多由Graylog开发人员和社区成员构建的内容。</p>
<img alt="_images/marketplace.png" src="http://res.fansdoc.com/graylog/_images/marketplace.png" />
</div>
<div class="section" id="users">
<h4>用户<a class="headerlink" href="#users" title="Permalink to this headline">¶</a></h4>
<p><strong>“谁将使用该解决方案？”</strong></p>
<p>需考虑的最重要的用户相关因素是用户数量。如果数量很大, 或者许多用户将同时查询数据, 则在架构设计时可能需要考虑到这一点。</p>
<p>应考虑用户的技能水平。技术水平较低的用户可能需要更多的预制的内容，如仪表盘。他们还可能需要更多的培训。</p>
<p>还应考虑每个用户组应访问哪些事件源。与所有访问控制一样, 应采用最小特权原则。</p>
<p>一些典型的用户组包括：</p>
<ul class="simple">
<li>安全分析师</li>
<li>工程师</li>
<li>管理</li>
<li>服务台</li>
</ul>
</div>
<div class="section" id="retention">
<h4>保留期<a class="headerlink" href="#retention" title="Permalink to this headline">¶</a></h4>
<p><strong>“您要将数据保留多长时间？”</strong></p>
<p>规划日志管理系统时的一个关键问题是日志保留。可以通过两种方式保留：在线或归档。在线数据存储在Elasticsearch中，可通过Graylog GUI进行搜索。归档的数据以压缩格式存储在Graylog服务器或网络共享文件中。它仍然是可搜索的，例如，通过GREP，但必须在Graylog中重组，以便能再次通过 GUI 进行搜索。</p>
<p>有些监管制度要求将事件日志保留到规定期限。在没有明确要求的情况下, 问题变成了如何来平衡储存成本与保有历史数据的效用。没有单一的答案, 因为每种情况都不一样。</p>
<p>大多数 Graylog 客户保留30~90天的在线事件日志(在Elasticsearch里能够搜索)和6~13月的归档事件日志。</p>
<p><strong>计算存储需求</strong></p>
<p>与大多数数据存储一样，Elasticsearch 在耗尽所有可用存储后会表现得糟糕。为了防止这种情况发生，必须进行适当的规划和监控。</p>
<p>许多变量会影响存储需求，例如留存了多少消息，分析完成之后是否保留原始消息，以及在存储之前进行了多少富态化。</p>
<p>规划存储的一个简单经验法则是，将您的数据摄取率乘以需在线保留数据的天数，然后将该值乘以1.3（考虑到元数据开销）。（GB/天 x 天数 x 1.3 = 存储量）</p>
<p>Elasticsearch 在其操作过程中广泛利用了松散的存储空间。上面计算出了数据摄取率对应的最小存储空间，强烈建议用户的实际配置超过这个值。在到达最大保留期时，Elasticsearch 存储空间不应超过总空间的75%。</p>
</div>
</div>
<span id="document-pages/getting_started/download_install"></span><div class="section" id="download-install-graylog">
<h3>下载&amp;安装Graylog<a class="headerlink" href="#download-install-graylog" title="Permalink to this headline">¶</a></h3>
<p>Graylog能以许多不同的方式部署，您应该下载最适合您的东西。对于那些希望对Graylog进行初步试验评估的用户，我们建议从虚拟机应用程序开始。</p>
<p>虚拟化应用绝对是最快的入门方式。然而，由于虚拟化应用通常不适合在生产中使用，<strong>它应仅限于概念验证、评估或试验环境。</strong>.</p>
<p>虚拟化应用也完全是不安全的。它未进行强化，并默认开启所有服务。</p>
<p>对于生产部署，用户应选择并部署其他更灵活的安装方法之一。对于生产环境的部署，用户应规划选择一项其他更灵活的安装方法。</p>
<div class="section" id="operating-system-packages">
<h4>操作系统软件包<a class="headerlink" href="#operating-system-packages" title="Permalink to this headline">¶</a></h4>
<p>可以在以下操作系统上安装Graylog。</p>
<ul class="simple">
<li>Ubuntu</li>
<li>Debian</li>
<li>RHEL/CentOS</li>
<li>SLES</li>
</ul>
<p>大多数客户使用DEB或RPM等软件包工具来安装Graylog软件。详细信息在这节里，<a class="reference internal" href="index.html#ospackages"><span class="std std-ref">操作系统软件包</span></a>.</p>
</div>
<div class="section" id="configuration-management">
<h4>配置管理<a class="headerlink" href="#configuration-management" title="Permalink to this headline">¶</a></h4>
<p>喜欢通过配置管理工具部署Graylog的客户可能会这样做。Graylog 当前支持<a class="reference internal" href="index.html#confmgt"><span class="std std-ref">Chef, Puppet, Ansible</span></a>.</p>
</div>
<div class="section" id="containers">
<h4>容器<a class="headerlink" href="#containers" title="Permalink to this headline">¶</a></h4>
<p>Graylog支持Docker部署Graylog、MongoDB和Elasticsearch组件。可在<a class="reference internal" href="index.html#here"><span class="std std-ref">Docker</span></a>安装页找到安装配置说明。</p>
</div>
<div class="section" id="virtual-appliances">
<h4>虚拟化应用<a class="headerlink" href="#virtual-appliances" title="Permalink to this headline">¶</a></h4>
<p>可以在<a class="reference external" href="https://packages.graylog2.org/appliances/ova">虚拟化应用下载页</a>下载虚拟化应用。如果您不确定最新稳定版的版本号是什么，看看我们的<a class="reference external" href="https://www.graylog.org/downloads">发布页面</a>.</p>
<img alt="_images/download.png" src="http://res.fansdoc.com/graylog/_images/download.png" />
<p><strong>受支持的虚拟化应用</strong></p>
<ul class="simple">
<li>OVA</li>
<li>AWS-AMI</li>
</ul>
<p><a class="reference internal" href="index.html#virtual-machine-appliances"><span class="std std-ref">虚拟机应用程序</span></a>部署指南。</p>
<p><a class="reference internal" href="index.html#ami"><span class="std std-ref">Amazon Web Services</span></a>部署指南。</p>
<div class="section" id="virtual-appliance-caveats">
<h5>虚拟化应用警告<a class="headerlink" href="#virtual-appliance-caveats" title="Permalink to this headline">¶</a></h5>
<p><strong>虚拟化应用不适合生产环境的开箱即用部署</strong>。它们没有足够的存储空间，也不提供适应高可用需求的索引复制等功能。</p>
<p>虚拟化应用没有强化或以其他方式保护。您应自行承担风险，并采取所在机构要求的所有安全措施。</p>
</div>
</div>
</div>
<span id="document-pages/getting_started/configure"></span><div class="section" id="initial-configuration">
<h3>初始化配置<a class="headerlink" href="#initial-configuration" title="Permalink to this headline">¶</a></h3>
<p>安装应用程序后，必须先配置几个项目，然后才能首次启动Graylog。Graylog的<code class="docutils literal notranslate"><span class="pre">server.conf</span></code> 和Elasticsearch的<code class="docutils literal notranslate"><span class="pre">elasticsearch.yml</span></code>文件都是包含了初始化配置所需的关键信息的配置文件。</p>
<p>本指南将为您提供必要的设置，使Graylog启动并运行。这些文件中还有许多其他重要设置，我们建议您在启动并运行后查看它们。欲了解更多详情，请参阅<a class="reference internal" href="index.html#server-conf"><span class="std std-ref">server.conf</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">提示</p>
<p class="last">如果您使用的是虚拟化应用，请跳过此部分，直接转到<a class="reference internal" href="index.html#connect"><span class="std std-ref">连接到Web控制台</span></a>.</p>
</div>
<div class="section" id="server-conf">
<h4>server.conf<a class="headerlink" href="#server-conf" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">server.conf</span></code>文件是Graylog的配置文件。<code class="docutils literal notranslate"><span class="pre">server.conf</span></code>的默认路径是：<code class="docutils literal notranslate"><span class="pre">/etc/graylog/server/server.conf</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">提示</p>
<p class="last">所有文件的默认路径列在<a class="reference internal" href="index.html#default-file-location"><span class="std std-ref">这里</span></a>.</p>
</div>
<ul class="simple">
<li><dl class="first docutils">
<dt>条目通常应是单行的形式，以下之一：</dt>
<dd><ul class="first last">
<li><code class="docutils literal notranslate"><span class="pre">属性名称=属性值</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">属性名称:属性值</span></code></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>在属性名称和属性值之间显示的空白将被忽略，因此以下是等同的：</dt>
<dd><ul class="first last">
<li><code class="docutils literal notranslate"><span class="pre">name=Stephen</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">=</span> <span class="pre">Stephen</span></code></li>
</ul>
</dd>
</dl>
</li>
<li>行首的空白也会被忽略。</li>
<li>以注释符!<code class="docutils literal notranslate"><span class="pre">!</span></code>或<code class="docutils literal notranslate"><span class="pre">#</span></code>开头的行会被忽略。空白行也会被忽略。</li>
<li>属性值通常在行尾结束。</li>
<li>属性值后面的空白不会被忽略，并被视为属性值的一部分。</li>
<li>可用字符<code class="docutils literal notranslate"><span class="pre">\n</span></code>，<code class="docutils literal notranslate"><span class="pre">\r</span></code>，和<code class="docutils literal notranslate"><span class="pre">\t</span></code>分别插入换行符、回车和制表符。</li>
</ul>
<div class="section" id="general-properties">
<h5>常规属性<a class="headerlink" href="#general-properties" title="Permalink to this headline">¶</a></h5>
<ul>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">is_master</span> <span class="pre">=</span> <span class="pre">true</span></code></dt>
<dd><ul class="first last simple">
<li>如果您正在运行多个Graylog实例，则必须（仅）指定一个<code class="docutils literal notranslate"><span class="pre">graylog-server</span></code>节点作为主节点。此节点将执行周期性和维护性的操作，从节点不会去执行。</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">password_secret</span> <span class="pre">=</span> <span class="pre">&lt;secret&gt;</span></code></dt>
<dd><ul class="first simple">
<li>您必须设置一个用于加密和加盐的密钥。如果未设置此值，服务将拒绝启动。至少使用64个字符。如果您运行多个
<code class="docutils literal notranslate"><span class="pre">graylog-server</span></code> 节点，应确保对它们使用同样的<code class="docutils literal notranslate"><span class="pre">password_secret</span></code>！</li>
</ul>
<div class="last admonition note">
<p class="first admonition-title">提示</p>
<p class="last">例如，生成一个密钥<code class="docutils literal notranslate"><span class="pre">pwgen</span> <span class="pre">-N</span> <span class="pre">1</span> <span class="pre">-s</span> <span class="pre">96</span></code>.</p>
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">root_username</span> <span class="pre">=</span> <span class="pre">admin</span></code></dt>
<dd><ul class="first last simple">
<li>默认的根用户名为 <strong>admin</strong>.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">root_password_sha2</span> <span class="pre">=</span> <span class="pre">&lt;SHA2&gt;</span></code></dt>
<dd><ul class="first simple">
<li>您初始登录密码的SHA2哈希值。用<code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">-n</span> <span class="pre">&quot;Enter</span> <span class="pre">Password:</span> <span class="pre">&quot;</span> <span class="pre">&amp;&amp;</span> <span class="pre">head</span> <span class="pre">-1</span> <span class="pre">&lt;/dev/stdin</span> <span class="pre">|</span> <span class="pre">tr</span> <span class="pre">-d</span> <span class="pre">'\n'</span> <span class="pre">|</span> <span class="pre">sha256sum</span> <span class="pre">|</span> <span class="pre">cut</span> <span class="pre">-d&quot;</span> <span class="pre">&quot;</span> <span class="pre">-f1</span></code>来生成SHA2哈希值，插入到上面的选项中，您将能够以用户名<strong> admin </strong>和密码<strong> 您的密码 </strong>登录到 web 界面。</li>
</ul>
<div class="last admonition caution">
<p class="first admonition-title">注意</p>
<p class="last">您必须为根用户指定一个哈希密码（您只在系统初始化配置时用到它，以及在与身份验证后端失去连接的情况下）。不能使用API或通过web界面更改此密码。如果需要更改它，请在此文件中对其进行修改。</p>
</div>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="web-properties">
<h5>Web属性<a class="headerlink" href="#web-properties" title="Permalink to this headline">¶</a></h5>
<ul>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">http_bind_address</span> <span class="pre">=</span> <span class="pre">127.0.0.1:9000</span></code></dt>
<dd><ul class="first last simple">
<li>由Graylog HTTP界面使用的网络接口。</li>
<li><code class="docutils literal notranslate"><span class="pre">http_publish_uri</span></code>中默认使用此地址和端口。</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">http_publish_uri</span> <span class="pre">=</span> <span class="pre">http://$http_bind_address/</span></code></p>
<blockquote>
<div><ul class="simple">
<li>Web界面监听URI。</li>
<li>此Graylog节点的HTTP URI，所有使用Graylog web接口的客户端都用到它。</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="elasticsearch-properties">
<h5>Elasticsearch属性<a class="headerlink" href="#elasticsearch-properties" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_hosts</span> <span class="pre">=</span> <span class="pre">http://node1:9200,http://user:password&#64;node2:19200</span></code></dt>
<dd><ul class="first last">
<li>Graylog应连接到的Elasticsearch主机列表。</li>
<li>需要为您的elasticsearch节点的http端口指定一个逗号分隔的有效URI列表。</li>
<li>如果一个或多个elasticsearch主机需要身份验证，请在需要身份验证的各个节点URI中包含凭据。</li>
<li>默认：<code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:9200</span></code> 只有当Elasticsearch与Graylog服务安装在相同的主机上时，才可以保留默认设置。</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="mongodb">
<h5>MongoDB<a class="headerlink" href="#mongodb" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">mongodb_uri</span> <span class="pre">=</span> <span class="pre">mongdb://...</span></code></dt>
<dd><ul class="first last">
<li>MongoDB连接字符串。在这里输入您的MongoDB连接和身份验证信息。</li>
<li>详情请参阅<a class="reference external" href="https://docs.mongodb.com/manual/reference/connection-string/">https://docs.mongodb.com/manual/reference/connection-string/</a> 。</li>
<li><dl class="first docutils">
<dt>例子：</dt>
<dd><ul class="first last">
<li>简易版：<code class="docutils literal notranslate"><span class="pre">mongodb_uri</span> <span class="pre">=</span> <span class="pre">mongodb://localhost/graylog</span></code></li>
<li>针对MongoDB服务器进行身份验证：<code class="docutils literal notranslate"><span class="pre">mongodb_uri</span> <span class="pre">=</span> <span class="pre">mongodb://grayloguser:secret&#64;localhost:27017/graylog</span></code></li>
<li>使用副本集而非单个主机：<br><code class="docutils literal notranslate"><span class="pre">mongodb_uri</span> <span class="pre">=</span> <span class="pre">mongodb://grayloguser:secret&#64;localhost:27017,localhost:27018,localhost:27019/graylog</span></code></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="outgoing-http">
<h5>传出的HTTP<a class="headerlink" href="#outgoing-http" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">http_proxy_uri</span> <span class="pre">=</span></code></dt>
<dd><ul class="first last">
<li>用于传出HTTP连接的HTTP代理</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">http_non_proxy_hosts</span> <span class="pre">=</span></code></dt>
<dd><ul class="first last">
<li>应绕过所配置的代理服务器，直接进行访问的主机列表。</li>
<li>这是一个由“,”分隔的样式清单。这些样式可能以通配符“*”开头或结尾。</li>
<li>任何匹配这些样式之一的主机都将通过直连而不是代理来访问。</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="elasticsearch-yml">
<h4>elasticsearch.yml<a class="headerlink" href="#elasticsearch-yml" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Elasticsearch.yml</span></code>是Elasticsearch的配置文件。server.conf的默认路径是：<code class="docutils literal notranslate"><span class="pre">/etc/elasticsearch/elasticsearch.yml</span></code>.</p>
<p>必须正确配置几个值，才能使elasticsearch正常工作。</p>
<ul>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">cluster.name:</span> <span class="pre">graylog</span></code></dt>
<dd><ul class="first last simple">
<li>这个值可以设置为客户希望的任何值，不过我们建议使用”graylog“。</li>
<li>对于集群中的每个Elasticsearch节点，此值必须相同。</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">network.host:</span> <span class="pre">172.30.4.105</span></code></dt>
<dd><ul class="first last simple">
<li>默认情况下，Elasticsearch只绑定到环回地址（例如127.0.0.1）。这对于在服务器上运行单个开发节点来说足够了。</li>
<li>为了与其他服务器上的节点通信并形成集群，您的节点需要绑定到一个非环回地址。</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">http.port:</span> <span class="pre">9200</span></code></dt>
<dd><ul class="first last simple">
<li>Elasticsearch将监听的端口。我们建议使用默认值。</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">discovery.zen.ping.unicast.hosts:</span> <span class="pre">[&quot;es01.acme.org&quot;,</span> <span class="pre">&quot;es02.acme.org&quot;]</span></code></p>
<blockquote>
<div><ul class="simple">
<li>Elasticsearch使用称为“Zen 发现”的自定义发现，来实现节点间的集群和主节点选择。若要与其他服务器上的节点形成集群，必须提供集群中可能是活动节点且可联络的其他节点的种子列表。</li>
<li>可以指定为 IP 地址或 FQDN。</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
</div>
<span id="document-pages/getting_started/web_console"></span><div class="section" id="connect-to-the-web-console">
<span id="connect"></span><h3>连接到Web控制台<a class="headerlink" href="#connect-to-the-web-console" title="Permalink to this headline">¶</a></h3>
<p>打开浏览器并导航到URL <code class="docutils literal notranslate"><span class="pre">http://xxx.xxx.xxx.xxx:9000</span></code>，替换为您的graylog服务器IP。您应该会看到一个类似于以下截图的Graylog登录页面。</p>
<p>如果使用VM应用，登录的用户名和密码都是<code class="docutils literal notranslate"><span class="pre">admin</span></code>。如果使用容器或操作系统版本的Graylog，则以admin身份登录，并使用在安装Graylog时，password_secret项衍生出的密码。</p>
<img alt="_images/graylog_login.png" src="http://res.fansdoc.com/graylog/_images/graylog_login.png" />
<p>登录后将来到“入门”界面。但是，如果您正在阅读这篇文章，那么您已经找到了“入门指南”，所以只要继续下去。</p>
<p>另外，随时可以将指南解除或保留以后使用。</p>
<img alt="_images/first_login.png" src="http://res.fansdoc.com/graylog/_images/first_login.png" />
</div>
<span id="document-pages/getting_started/explore"></span><div class="section" id="explore-graylog">
<h3>探索Graylog<a class="headerlink" href="#explore-graylog" title="Permalink to this headline">¶</a></h3>
<p>一旦接收到消息，您可能想四处查看一下。有几个页面可用，但并不是全部页面都对所有用户可见，这取决于各自的权限。下面是对每个页面的用途和功能的简要描述。</p>
<div class="section" id="streams">
<h4>数据流<a class="headerlink" href="#streams" title="Permalink to this headline">¶</a></h4>
<p>数据流（Streams）是Graylog的一个核心特征，可以看作是对传入消息进行标记的一种方式。数据流是用于将消息实时转发到相应类别中的一种机制。流规则指明Graylog将哪个消息转发到哪个数据流。</p>
<p>数据流有很多用途。首先，它们用于将存储的数据路由到索引中。它们还用于控制对数据的访问，转发消息以供解析，富态化或其它修改，并确定将哪些消息归档。</p>
<p>数据流可以与告警（Alerts）一起使用，以便在消息满足一组条件时通知用户，或以其他方式响应。</p>
<p>消息可以属于一个或多个数据流。有关更多细节，请参阅<a class="reference internal" href="index.html#streams"><span class="std std-ref">数据流</span></a>。</p>
</div>
<div class="section" id="searches">
<h4>搜索<a class="headerlink" href="#searches" title="Permalink to this headline">¶</a></h4>
<p>Graylog搜索页（Search）是用来直接搜索日志的。Graylog使用了一种简化的语法，非常类似于Lucene。可从下拉菜单中配置相对或绝对时间范围。搜索结果可以保存或显示为仪表盘的小工具，可以从搜索界面将这些小工具直接添加到仪表盘。</p>
<p>用户可以配置自定义视图，并可以选择查看事件消息的摘要或完整数据。</p>
<p>有关更多细节，请参阅<a class="reference internal" href="index.html#queries"><span class="std std-ref">搜索</span></a>。</p>
</div>
<div class="section" id="dashboards">
<h4>仪表盘<a class="headerlink" href="#dashboards" title="Permalink to this headline">¶</a></h4>
<p>Graylog仪表盘（Dashboards）是日志事件所包含的信息的可视化或汇总。每个仪表盘由一个或多个小工具填充，小工具利用日志数据的字段值（如计数、平均值或总数），来可视化或汇总事件。趋势指示器、图表、图形和地图很容易创建，以便数据的可视化呈现。</p>
<p>仪表盘小工具和仪表盘布局是可配置的。通过Graylog基于角色的访问控制来限制对仪表盘的访问。可以通过内容包导入和导出仪表盘。</p>
<p>有关更多细节，请参阅<a class="reference internal" href="index.html#dashboards"><span class="std std-ref">仪表盘</span></a>。</p>
</div>
<div class="section" id="alerts">
<h4>告警<a class="headerlink" href="#alerts" title="Permalink to this headline">¶</a></h4>
<p>告警（Alerts）由两个相关元素组成，告警条件和告警通知。告警条件与数据流绑定，可能是基于字段的内容、字段的聚合值或消息计数阈值。告警通知在条件满足时触发，通常向分析师或其他系统发送电子邮件或HTTP回调。</p>
<p>额外的输出类型也可以通过插件创建。可以通过内容包导入和导出告警。</p>
<p>有关更多细节，请参阅<a class="reference internal" href="index.html#alerts"><span class="std std-ref">告警</span></a>。</p>
</div>
<div class="section" id="system">
<h4>系统<a class="headerlink" href="#system" title="Permalink to this headline">¶</a></h4>
<div class="section" id="overview">
<h5>总览<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h5>
<p>总览页（Overview）显示与Graylog实例管理相关的信息。它包括系统通知、系统作业状态、数据摄取率、Elasticsearch集群健康状况、索引器故障、时间配置和系统事件消息等方面的信息。</p>
</div>
<div class="section" id="configuration">
<h5>配置<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h5>
<p>配置页（Configuration）允许用户设置与搜索、消息处理器和插件相关的选项和变量。</p>
</div>
<div class="section" id="nodes">
<h5>节点<a class="headerlink" href="#nodes" title="Permalink to this headline">¶</a></h5>
<p>节点页（Nodes）包含每个Graylog节点的状态信息汇总。详细的健康信息和指标可从本页上显示的按钮获得</p>
</div>
<div class="section" id="inputs">
<h5>输入<a class="headerlink" href="#inputs" title="Permalink to this headline">¶</a></h5>
<p>输入（Inputs）用于告诉Graylog侦听哪个端口，或者如何取得事件日志，通常是在系统初始化配置之后的第一件事。输入页允许用户创建和配置新的输入、管理提取器、启动和停止输入、获取每个输入的指标，以及为传入消息添加静态字段。</p>
</div>
<div class="section" id="outputs">
<h5>输出<a class="headerlink" href="#outputs" title="Permalink to this headline">¶</a></h5>
<p>输出（Outputs）用于定义将数据转发到远端系统的方法，包括端口、协议和任何其他必要信息。在开箱即用的情况下，Graylog支持STDOUT和GELF输出，但是用户可以编写自己的输出，而且在<a class="reference internal" href="index.html#marketplace"><span class="std std-ref">Graylog市场</span></a>还有更多。</p>
</div>
<div class="section" id="authentication">
<h5>身份验证<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h5>
<p>身份验证页（Authentication）用于配置Graylog的身份验证提供者，并管理这个Graylog集群的活动用户。Graylog支持以LDAP或活动目录进行身份验证和授权。</p>
</div>
<div class="section" id="content-packs">
<h5>内容包<a class="headerlink" href="#content-packs" title="Permalink to this headline">¶</a></h5>
<p>内容包（Content packs）加快了特定数据源的设置过程。内容包可以包含输入/提取器、数据流、仪表盘、告警和管道处理器。</p>
<p>在Graylog中创建的任何程序元素都可以作为内容包导出，以供其他系统使用。这些元素可以由作者保持私有，以便在内部快速部署新节点，也可以通过Graylog市场与社区共享。例如，用户可以创建自定义输入、数据流、仪表盘和告警来形成一个安全的使用案例。这些元素可以导出到内容包中，然后导入到新安装的Graylog实例中，以节省配置过程中的时间和精力。</p>
<p>用户可以通过<a class="reference internal" href="index.html#marketplace"><span class="std std-ref">Graylog市场</span></a>来下载由其他用户创建和共享的内容包。用户创建的内容包不受Graylog支持，而是由其作者支持。</p>
<p><strong>内容包中支持的元素列表</strong></p>
<ul class="simple">
<li>输入</li>
<li>Grok模型</li>
<li>输出</li>
<li>数据流</li>
<li>仪表盘</li>
<li>查询表</li>
<li>查询缓存</li>
<li>查询数据适配器</li>
</ul>
</div>
<div class="section" id="indices">
<h5>索引<a class="headerlink" href="#indices" title="Permalink to this headline">¶</a></h5>
<p>索引（Indices）是Elasticsearch中数据的基本存储单元。索引集作用是配置所存储数据的保留期、分片和复制。</p>
<p>值(如保留期和旋转策略)是根据每个索引设置的，因此不同的数据可能从属于不同的处理规则。</p>
<p>有关更多细节，请参阅<a class="reference internal" href="index.html#index-model"><span class="std std-ref">索引模型</span></a>.</p>
</div>
<div class="section" id="sidecars">
<h5>Sidecars<a class="headerlink" href="#sidecars" title="Permalink to this headline">¶</a></h5>
<p>Graylog创建了Sidecar代理来管理Beats或NXLog等日志传送的编队。这些日志传送程序用于从Linux和Windows服务器收集系统日志。日志传送程序从写入到本地的平面文件中读取，然后将其发送到集中日志管理解决方案，它通常是最简单的方法。</p>
<p>有关更多细节，请参阅<a class="reference internal" href="index.html#graylog-sidecar"><span class="std std-ref">Graylog Sidecar</span></a>.</p>
</div>
<div class="section" id="pipelines">
<h5>管道<a class="headerlink" href="#pipelines" title="Permalink to this headline">¶</a></h5>
<p>Graylog的管道处理是一个功能强大的特性，允许用户针对特定类型的事件运行单条规则或一系列规则。管道与数据流绑定在一起，允许对流经Graylog的消息进行转发、黑名单、修改和富态化。基本上，如果您要解析、改变、转换、添加、删除某条消息的部分或全部时，管道可以派上用场。</p>
<p>有关更多细节，请参阅<a class="reference internal" href="index.html#pipelinestoc"><span class="std std-ref">管道处理</span></a>.</p>
</div>
</div>
</div>
<span id="document-pages/getting_started/collect"></span><div class="section" id="collect-messages">
<h3>收集消息<a class="headerlink" href="#collect-messages" title="Permalink to this headline">¶</a></h3>
<p>一旦运行了Graylog和相关组件，下一步就是开始收集日志。</p>
<p>第一步是创建一个输入。输入定义了Graylog收集日志的方法。Graylog支持多种开箱即用的方法来收集日志，包括:</p>
<ul class="simple">
<li>Syslog (TCP, UDP, AMQP, Kafka)</li>
<li>GELF(TCP, UDP, AMQP, Kafka, HTTP)</li>
<li>AWS - AWS Logs, FlowLogs, CloudTrail</li>
<li>Beats/Logstash</li>
<li>CEF (TCP, UDP, AMQP, Kafka)</li>
<li>HTTP API 中的 JSON Path</li>
<li>Netflow (UDP)</li>
<li>纯/原始 文本(TCP, UDP, AMQP, Kafka)</li>
</ul>
<div class="section" id="content-packs">
<h4>内容包<a class="headerlink" href="#content-packs" title="Permalink to this headline">¶</a></h4>
<p>可以通过内容包安装其他输入源。内容包是由能Graylog输入、提取器、数据流、仪表盘和输出这些配置信息的合集组成，它能够为数据源提供全面的支撑。有些内容包是默认随Graylog一起发布的，有些则可以从网站上获得。从<a class="reference external" href="http://marketplace.graylog.org">Graylog市场</a>下载的内容包可以使用Graylog web界面导入。</p>
<p>在Graylog的web界面<code class="docutils literal notranslate"><span class="pre">System</span> <span class="pre">/</span> <span class="pre">Content</span> <span class="pre">Packs</span></code>中，您可以加载甚至创建自己的内容包。</p>
</div>
<div class="section" id="create-an-input">
<h4>创建一个输入<a class="headerlink" href="#create-an-input" title="Permalink to this headline">¶</a></h4>
<p>打开上方菜单的<code class="docutils literal notranslate"><span class="pre">System</span> <span class="pre">/</span> <span class="pre">Inputs</span></code>页，来创建一个输入，单击下拉框中的箭头，选择您的输入类型并单击标为<em>Launch new input</em>的绿色按钮。</p>
<p>通常，默认设置是正确的，但是您可以随意更改。某些输入类型可能需要验证，或填入针对该输入源的其他信息。</p>
<div class="admonition note">
<p class="first admonition-title">提示</p>
<p class="last">如果Graylog不是作为root用户运行的，那么您将无法使用低于1024的端口作为输入。可能需要重新配置发送设备。由于最佳实践规定应用程序不应以root用户身份运行，因此对于不能更改事件来源的客户，鼓励使用负载均衡器或其他外部方法来实现端口转换。</p>
</div>
<p>保存输入后，它会自动启动。</p>
<p>如果事件源已配置为将事件发送到所选端口，对于像Syslog或CEF这样的主动<em>推送</em>事件的源，您应该在几秒钟内开始接收消息。</p>
<p>如果您想了解更多关于Graylog摄取消息时所支持的选项，请查阅<a class="reference internal" href="index.html#ingest-data"><span class="std std-ref">日志文件接入</span></a>。</p>
</div>
<div class="section" id="verify-messages-are-being-collected">
<h4>验证是否正在收集消息<a class="headerlink" href="#verify-messages-are-being-collected" title="Permalink to this headline">¶</a></h4>
<p>一旦定义了输入，就需要验证是否正从输入源接收消息。检查输入源右侧的<em>Throughput / Metrics</em>部分。您应该看到<em>NetworkIO</em>值开始攀升，显示在这个输入源上消耗的数据量。</p>
<img alt="_images/input_page.png" src="http://res.fansdoc.com/graylog/_images/input_page.png" />
<p>单击刚刚创建的输入旁边的<em>Show received messages</em>按钮。您现在应该看到在这个输入上接收到的消息。</p>
<img alt="_images/gs_10-messages.png" src="http://res.fansdoc.com/graylog/_images/gs_10-messages.png" />
<p>如果您单击顶部菜单中的<em>Sources</em>，您将看到向Graylog发送数据的所有设备、服务器或应用程序的详细概述，以及从每个源接收到的消息数量。最初，您可能不会在此页面上看到太多内容。然而，一旦您开始从更多的系统发送数据，他们的主机名或 IP 地址也将在此页上列出。</p>
<img alt="_images/sources_page.png" src="http://res.fansdoc.com/graylog/_images/sources_page.png" />
<p><em>如果一切正常, 请跳过以下部分。</em></p>
<div class="section" id="if-you-don-t-have-messages">
<h5>如果您没有看到消息<a class="headerlink" href="#if-you-don-t-have-messages" title="Permalink to this headline">¶</a></h5>
<ol class="arabic simple">
<li>检查您在上述输入源配置中输入了正确的条目。</li>
<li>检查事件源的配置，并确保它与输入中定义的端口和其他选项相匹配。例如，如果将Syslog UDP的输入端口更改为5014，请确保发送设备也定义了相同的端口。</li>
<li>检查流量是否正在流向定义的端口。 您可以使用<a class="reference external" href="http://manpages.ubuntu.com/manpages/xenial/en/man8/tcpdump.8.html">tcpdump</a>命令来查看：</li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">sudo</span> <span class="pre">tcpdump</span> <span class="pre">-i</span> <span class="pre">lo</span> <span class="pre">host</span> <span class="pre">127.0.0.1</span> <span class="pre">and</span> <span class="pre">udp</span> <span class="pre">port</span> <span class="pre">5014</span></code></p>
<ol class="arabic simple" start="4">
<li>检查服务器是否正在侦听其他主机：</li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">sudo</span> <span class="pre">netstat</span> <span class="pre">-peanut</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">&quot;:5014&quot;</span></code></p>
<p>如果您仍有问题，连接到我们的<a class="reference external" href="https://www.graylog.org/community-support">社区支持</a>或通过我们提供的<a class="reference external" href="https://www.graylog.org/professional-support">专业支持</a>与我们联系。</p>
</div>
</div>
</div>
</div>
</div>
<span id="document-pages/installation"></span><div class="section" id="installing-graylog">
<span id="installing"></span><h2>安装Graylog<a class="headerlink" href="#installing-graylog" title="Permalink to this headline">¶</a></h2>
<p>现代服务器架构和配置以许多不同的方式进行管理。有些人仍然对于每台服务器，手动将新软件安装在<code class="docutils literal notranslate"><span class="pre">opt</span></code>下的某个地方，而其他人已经跳上配置管理快车，可完全自动化、可重复地配置。</p>
<p>Graylog 可以通过许多不同的方式安装, 这样你就可以选择最适合你的方法。我们建议从<a class="reference internal" href="index.html#virtual-machine-appliances"><span class="std std-ref">虚拟机应用程序</span></a>开始, 以最快的方式开始, 然后选择一个其他更灵活的安装方法, 以构建更易于扩展的配置。</p>
<p>本章解释许多了安装 Graylog 的方法, 旨在帮助选择适合您需求的方法。</p>
<div class="toctree-wrapper compound">
<span id="document-pages/installation/virtual_machine_appliances"></span><div class="section" id="virtual-machine-appliances">
<span id="id1"></span><h3>虚拟机应用程序<a class="headerlink" href="#virtual-machine-appliances" title="Permalink to this headline">¶</a></h3>
<div class="section" id="pre-considerations">
<h4>预先考虑<a class="headerlink" href="#pre-considerations" title="Permalink to this headline">¶</a></h4>
<p>请始终在与internet隔离的独立网络中运行此应用。还要阅读关于生产<a class="reference internal" href="#readiness">准备</a>的说明！</p>
</div>
<div class="section" id="download">
<h4>下载<a class="headerlink" href="#download" title="Permalink to this headline">¶</a></h4>
<p>下载<a class="reference external" href="https://packages.graylog2.org/appliances/ova">OVA镜像</a>。如果您不确定最新稳定版的版本号是什么，看看我们的<a class="reference external" href="https://www.graylog.org/downloads">发布页面</a>。</p>
</div>
<div class="section" id="run-the-image">
<h4>运行镜像<a class="headerlink" href="#run-the-image" title="Permalink to this headline">¶</a></h4>
<p>您可以在<a class="reference external" href="http://www.vmware.com">VMware</a>或<a class="reference external" href="https://www.virtualbox.org">Virtualbox</a>等许多系统中运行OVA。在这个例子中，我们将指导您通过OSX上免费的Virtualbox来运行OVA。</p>
<p>在Virtualbox中，选择<em>File -&gt; Import appliance</em>:</p>
<img alt="_images/virtualbox1.png" src="http://res.fansdoc.com/graylog/_images/virtualbox1.png" />
<p>点击<em>Continue</em>并在下一页保留建议的设置。确保本地机器上有足够的RAM和CPU。你可以降低分配至虚拟机的资源，但我们建议不要降低，它保证了良好的Graylog体验。事实上，如果您以后计划扩展它并向Graylog发送更多消息，您可能要提高它。</p>
<p>点击<em>Import</em>，将OVA加载到Virtualbox中：</p>
<img alt="_images/virtualbox2.png" src="http://res.fansdoc.com/graylog/_images/virtualbox2.png" />
<p>现在，您可以启动 VM，启动完成时应看到这样的登录shell：</p>
<img alt="_images/virtualbox3.png" src="http://res.fansdoc.com/graylog/_images/virtualbox3.png" />
<div class="admonition note">
<p class="first admonition-title">提示</p>
<p>如果您的虚拟机没有能工作的DHCP服务器，您将收到错误消息：</p>
<blockquote>
<div>“Your appliance came up without a configured IP address. Graylog is probably not running correctly!”</div></blockquote>
<p class="last">在这种情况下，您必须登录并编辑<code class="docutils literal notranslate"><span class="pre">/etc/network/interfaces</span></code>，以便设置固定的IP地址。然后创建文件<code class="docutils literal notranslate"><span class="pre">/var/lib/graylog-server/firstboot</span></code>并重新启动。</p>
</div>
</div>
<div class="section" id="logging-in">
<h4>登录<a class="headerlink" href="#logging-in" title="Permalink to this headline">¶</a></h4>
<p>您可以使用用户<em>ubuntu</em>和密码<em>ubuntu</em>登录到应用程序所在操作系统的shell。当然，您应该更改这些凭据。</p>
<p>可在您的虚拟机IP地址的80上端口访问web界面。Shell的登录提示也显示了此IP地址。（请参见上图）。</p>
<p>Web界面的标准用户是<em>admin</em>，密码显示在虚拟机第一次启动时的控制台中。</p>
</div>
<div class="section" id="configuration">
<h4>配置<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h4>
<p>如果需要进一步自定义应用，请查看<a class="reference internal" href="index.html#document-pages/configuration/server.conf"><span class="doc"> Graylog 配置文件</span></a>
说明文档。</p>
</div>
<div class="section" id="vmware-tools">
<h4>VMWare工具<a class="headerlink" href="#vmware-tools" title="Permalink to this headline">¶</a></h4>
<p>如果您在VMWare主机上使用该应用，则可能需要安装虚拟机管理程序工具：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="nb">open</span><span class="o">-</span><span class="n">vm</span><span class="o">-</span><span class="n">tools</span>
</pre></div>
</div>
</div>
<div class="section" id="update-ova-to-latest-version">
<h4>更新OVA到最新版本<a class="headerlink" href="#update-ova-to-latest-version" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>2.x</dt>
<dd>不可能将以前的OVAs升级到Graylog 3.0.0。</dd>
<dt>3.0</dt>
<dd>从Graylog 3.0.0开始，OVAs使用操作系统包，所以您可以通过这个
<a class="reference internal" href="index.html#operating-package-upgrade-deb-apt"><span class="std std-ref">升级指南</span></a>来升级您的应用。</dd>
</dl>
</div>
<div class="section" id="production-readiness">
<span id="readiness"></span><h4>生产准备<a class="headerlink" href="#production-readiness" title="Permalink to this headline">¶</a></h4>
<p>创建Graylog应用不是为了提供一个现成的生产解决方案。它设计初衷是提供了一个快速和简单的方法来体验软件本身，而不是将浪费时间在如何去安装Graylog或它的组件到任何类型的服务器上。</p>
</div>
</div>
<span id="document-pages/installation/operating_system_packages"></span><div class="section" id="operating-system-packages">
<span id="ospackages"></span><h3>操作系统软件包<a class="headerlink" href="#operating-system-packages" title="Permalink to this headline">¶</a></h3>
<p>在配置管理系统进入更广泛的市场和众多数据中心之前，在Linux服务器上的安装软件最常见的方式之一是使用操作系统包。Debian是<code class="docutils literal notranslate"><span class="pre">DEB</span></code>，红帽是<code class="docutils literal notranslate"><span class="pre">RPM</span></code>
许多其他发行版是基于这些或自带的包格式。软件包的在线存储库和相应的软件包管理器使得进行新软件的安装配置只需一个命令和几分钟的时间。</p>
<p>Graylog提供了<code class="docutils literal notranslate"><span class="pre">DEB</span></code>和 <code class="docutils literal notranslate"><span class="pre">RPM</span></code>官方软件包仓库。这些软件包已在下列操作系统上测试：</p>
<ul class="simple">
<li>Ubuntu 12.04, 14.04, 16.04, 18.04</li>
<li>Debian 7, 8, 9</li>
<li>RHEL/CentOS 6, 7</li>
</ul>
<p>可以通过安装单个包来设置存储库。一旦完成，就能通过<code class="docutils literal notranslate"><span class="pre">apt-get</span></code>或<code class="docutils literal notranslate"><span class="pre">yum</span></code>来安装Graylog包。如果需要，还可以通过web浏览器访问<a class="reference external" href="https://packages.graylog2.org/">https://packages.graylog2.org/</a>来下载这些包。</p>
<div class="section" id="prerequisites">
<h4>先决条件<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h4>
<p>在安装和启动任何Graylog服务之前，请确保安装和配置以下软件：</p>
<ul class="simple">
<li>Java (&gt;= 8)</li>
<li>Elasticsearch (5.x 或 6.x)</li>
<li>MongoDB (&gt;= 3.6)</li>
</ul>
<div class="admonition caution">
<p class="first admonition-title">注意</p>
<p class="last">Graylog 3 <strong>不支持</strong>Elasticsearch 7.x！</p>
</div>
</div>
<div class="section" id="deb-apt">
<span id="operating-package-deb-apt"></span><h4>DEB / APT<a class="headerlink" href="#deb-apt" title="Permalink to this headline">¶</a></h4>
<p>通过<code class="docutils literal notranslate"><span class="pre">dpkg(1)</span></code>下载和安装<a class="reference external" href="https://packages.graylog2.org/repo/packages/graylog-3.0-repository_latest.deb">graylog-3.0-repository_latest.deb</a>并且确保已安装<code class="docutils literal notranslate"><span class="pre">apt-transport-https</span></code>包：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apt-get install apt-transport-https
$ wget https://packages.graylog2.org/repo/packages/graylog-3.0-repository_latest.deb
$ sudo dpkg -i graylog-3.0-repository_latest.deb
$ sudo apt-get update
$ sudo apt-get install graylog-server
</pre></div>
</div>
<p>安装成功后，可以使用以下命令启动Graylog。请确保为您的操作系统使用正确的命令。</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="13%" />
<col width="47%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">操作系统</th>
<th class="head">Init系统</th>
<th class="head">命令</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Ubuntu 14.04, 12.04</td>
<td>upstart</td>
<td><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">start</span> <span class="pre">graylog-server</span></code></td>
</tr>
<tr class="row-odd"><td>Debian 7</td>
<td>SysV</td>
<td><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">service</span> <span class="pre">graylog-server</span> <span class="pre">start</span></code></td>
</tr>
<tr class="row-even"><td>Debian 8 &amp; 9, Ubuntu 16.04, 18.04</td>
<td>systemd</td>
<td><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">start</span> <span class="pre">graylog-server</span></code></td>
</tr>
</tbody>
</table>
<p>这些包被配置为在引导期间<strong>不</strong>启动任何Graylog服务。在操作系统启动时，可以使用以下命令启动Graylog。</p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="12%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">操作系统</th>
<th class="head">Init系统</th>
<th class="head">命令</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Ubuntu 14.04, 12.04</td>
<td>upstart</td>
<td><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">rm</span> <span class="pre">-f</span> <span class="pre">/etc/init/graylog-server.override</span></code></td>
</tr>
<tr class="row-odd"><td>Debian 7</td>
<td>SysV</td>
<td><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">update-rc.d</span> <span class="pre">graylog-server</span> <span class="pre">defaults</span> <span class="pre">95</span> <span class="pre">10</span></code></td>
</tr>
<tr class="row-even"><td>Debian 8 &amp; 9, Ubuntu 16.06, 18.04</td>
<td>systemd</td>
<td><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">enable</span> <span class="pre">graylog-server</span></code></td>
</tr>
</tbody>
</table>
<div class="section" id="update-to-latest-version">
<span id="operating-package-upgrade-deb-apt"></span><h5>升级至最新版本<a class="headerlink" href="#update-to-latest-version" title="Permalink to this headline">¶</a></h5>
<p>如果您以前一直使用存储库的包安装Graylog，那么首先必须更新它。新包将替换存储库URL，没有它，您只能获得以前安装的Graylog版本的bug修复版本。</p>
<p>更新的过程基本上像一个全新安装：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ wget https://packages.graylog2.org/repo/packages/graylog-3.0-repository_latest.deb
$ sudo dpkg -i graylog-3.0-repository_latest.deb
$ sudo apt-get update
$ sudo apt-get install graylog-server
</pre></div>
</div>
</div>
<div class="section" id="manual-repository-installation">
<h5>手动存储库安装<a class="headerlink" href="#manual-repository-installation" title="Permalink to this headline">¶</a></h5>
<p>如果您不喜欢通过安装DEB存储库，来在系统中获取存储库配置，您可以手动安装(尽管我们不建议这样做)。</p>
<p>首先，添加<a class="reference external" href="https://packages.graylog2.org/repo/debian/keyring.gpg">Graylog GPG keyring</a>，它用于将包签发到您的系统。</p>
<div class="admonition hint">
<p class="first admonition-title">提示</p>
<p class="last">我们假设您已将GPG密钥放入<code class="docutils literal notranslate"><span class="pre">/etc/apt/trusted.gpg.d/</span></code>中。</p>
</div>
<p>现在创建一个文件<code class="docutils literal notranslate"><span class="pre">/etc/apt/sources.list.d/graylog.list</span></code>，内容如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">deb</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">packages</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">repo</span><span class="o">/</span><span class="n">debian</span><span class="o">/</span> <span class="n">stable</span> <span class="mf">3.0</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="rpm-yum-dnf">
<span id="operating-package-rpm-yum-dnf"></span><h4>RPM / YUM / DNF<a class="headerlink" href="#rpm-yum-dnf" title="Permalink to this headline">¶</a></h4>
<p>通过<code class="docutils literal notranslate"><span class="pre">rpm(8)</span></code>下载和安装<a class="reference external" href="https://packages.graylog2.org/repo/packages/graylog-3.0-repository_latest.rpm">graylog-3.0-repository_latest.rpm</a>：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo rpm -Uvh https://packages.graylog2.org/repo/packages/graylog-3.0-repository_latest.rpm
$ sudo yum install graylog-server
</pre></div>
</div>
<p>安装成功后，可以使用以下命令启动Graylog。请确保为您的操作系统使用正确的命令。</p>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="16%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">操作系统</th>
<th class="head">Init系统</th>
<th class="head">命令</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>CentOS 6</td>
<td>SysV</td>
<td><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">service</span> <span class="pre">graylog-server</span> <span class="pre">start</span></code></td>
</tr>
<tr class="row-odd"><td>CentOS 7</td>
<td>systemd</td>
<td><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">start</span> <span class="pre">graylog-server</span></code></td>
</tr>
</tbody>
</table>
<p>这些包被配置为在引导期间<strong>不</strong>启动任何Graylog服务。在操作系统启动时，可以使用以下命令启动Graylog。</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="14%" />
<col width="63%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">操作系统</th>
<th class="head">Init系统</th>
<th class="head">命令</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>CentOS 6</td>
<td>SysV</td>
<td><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">update-rc.d</span> <span class="pre">graylog-server</span> <span class="pre">defaults</span> <span class="pre">95</span> <span class="pre">10</span></code></td>
</tr>
<tr class="row-odd"><td>CentOS 7</td>
<td>systemd</td>
<td><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">enable</span> <span class="pre">graylog-server</span></code></td>
</tr>
</tbody>
</table>
<div class="section" id="operating-package-upgrade-rpm-yum-dnf">
<span id="id1"></span><h5>升级至最新版本<a class="headerlink" href="#operating-package-upgrade-rpm-yum-dnf" title="Permalink to this headline">¶</a></h5>
<p>如果您以前一直使用存储库的包安装Graylog，那么首先必须更新它。新包将替换存储库URL，没有它，您只能获得以前安装的Graylog版本的bug修复版本。</p>
<p>更新的过程基本上像一个全新安装：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo rpm -Uvh https://packages.graylog2.org/repo/packages/graylog-3.0-repository_latest.rpm
$ sudo yum clean all
$ sudo yum install graylog-server
</pre></div>
</div>
<p>运行<code class="docutils literal notranslate"><span class="pre">yum</span> <span class="pre">clean</span> <span class="pre">all</span></code>是必需的，因为yum可能使用陈旧的缓存，从而可能无法找到最新版本的<code class="docutils literal notranslate"><span class="pre">graylog-server</span></code>包。</p>
</div>
<div class="section" id="id2">
<h5>手动存储库安装<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h5>
<p>如果您不喜欢通过安装RPM存储库，来在系统中获取存储库配置，您可以手动安装(尽管我们不建议这样做)。</p>
<p>首先，添加<a class="reference external" href="https://github.com/Graylog2/fpm-recipes/blob/master/recipes/graylog-repository/files/rpm/RPM-GPG-KEY-graylog">Graylog GPG key</a>，它用于将包签发到您的系统。</p>
<div class="admonition hint">
<p class="first admonition-title">提示</p>
<p class="last">我们假设您已将GPG密钥放入<code class="docutils literal notranslate"><span class="pre">/etc/pki/rpm-gpg/RPM-GPG-KEY-graylog</span></code>中。</p>
</div>
<p>现在创建一个文件<code class="docutils literal notranslate"><span class="pre">/etc/yum.repos.d/graylog.repo</span></code>，内容如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[graylog]
name=graylog
baseurl=https://packages.graylog2.org/repo/el/stable/3.0/$basearch/
gpgcheck=1
repo_gpgcheck=0
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-graylog
</pre></div>
</div>
</div>
</div>
<div class="section" id="step-by-step-guides">
<span id="id3"></span><h4>分步指南<a class="headerlink" href="#step-by-step-guides" title="Permalink to this headline">¶</a></h4>
<div class="toctree-wrapper compound">
<span id="document-pages/installation/os/ubuntu"></span><div class="section" id="ubuntu-installation">
<h5>Ubuntu安装<a class="headerlink" href="#ubuntu-installation" title="Permalink to this headline">¶</a></h5>
<p>本指南描述了在Ubuntu 18.04 LTS上安装Graylog的最快方法。在编写本文时，所有链接和包都已存在，但以后可能会更新。</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">此设置不应在公开暴露的服务器上执行。本指南<strong>不包括</strong>安全设置！</p>
</div>
<div class="section" id="prerequisites">
<h6>先决条件<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h6>
<p>以最小化安装的服务器作为基础，将需要这个额外的包：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apt-get update &amp;&amp; sudo apt-get upgrade
$ sudo apt-get install apt-transport-https openjdk-8-jre-headless uuid-runtime pwgen
</pre></div>
</div>
</div>
<div class="section" id="mongodb">
<h6>MongoDB<a class="headerlink" href="#mongodb" title="Permalink to this headline">¶</a></h6>
<p>官方的MongoDB存储库提供了最新的版本，是安装MongoDB的推荐方法：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 9DA31620334BD75D9DCB49F368818C72E52529D4
$ echo &quot;deb [ arch=amd64 ] https://repo.mongodb.org/apt/ubuntu bionic/mongodb-org/4.0 multiverse&quot; | sudo tee /etc/apt/sources.list.d/mongodb-org-4.0.list
$ sudo apt-get update
$ sudo apt-get install -y mongodb-org
</pre></div>
</div>
<p>最后一步是在操作系统启动时开启MongoDB:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo systemctl daemon-reload
$ sudo systemctl enable mongod.service
$ sudo systemctl restart mongod.service
</pre></div>
</div>
</div>
<div class="section" id="elasticsearch">
<h6>Elasticsearch<a class="headerlink" href="#elasticsearch" title="Permalink to this headline">¶</a></h6>
<p>Graylog可以和Elasticsearch 6.x一起使用。请按照<a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.6/deb.html">Elasticsearch安装指南</a>中的安装说明进行安装：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo apt-key add -
$ echo &quot;deb https://artifacts.elastic.co/packages/oss-6.x/apt stable main&quot; | sudo tee -a /etc/apt/sources.list.d/elastic-6.x.list
$ sudo apt-get update &amp;&amp; sudo apt-get install elasticsearch-oss
</pre></div>
</div>
<p>确保修改了auto_create_index:对配置文件为false:
Make sure to modify the <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.x/settings.html#settings">Elasticsearch配置文件</a>  (<code class="docutils literal notranslate"><span class="pre">/etc/elasticsearch/elasticsearch.yml</span></code>)，并将集群名称设置为<code class="docutils literal notranslate"><span class="pre">graylog</span></code>另外需要取消注释（除去行首的#）此行，并添加<code class="docutils literal notranslate"><span class="pre">action.auto_create_index:</span> <span class="pre">false</span></code>到配置文件：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cluster</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">graylog</span>
<span class="n">action</span><span class="o">.</span><span class="n">auto_create_index</span><span class="p">:</span> <span class="n">false</span>
</pre></div>
</div>
<p>After you have modified the configuration, you can start Elasticsearch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo systemctl daemon-reload
$ sudo systemctl enable elasticsearch.service
$ sudo systemctl restart elasticsearch.service
</pre></div>
</div>
</div>
<div class="section" id="graylog">
<h6>Graylog<a class="headerlink" href="#graylog" title="Permalink to this headline">¶</a></h6>
<p>Now install the Graylog repository configuration and Graylog itself with the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ wget https://packages.graylog2.org/repo/packages/graylog-3.0-repository_latest.deb
$ sudo dpkg -i graylog-3.0-repository_latest.deb
$ sudo apt-get update &amp;&amp; sudo apt-get install graylog-server
</pre></div>
</div>
<p>Follow the instructions in your <code class="docutils literal notranslate"><span class="pre">/etc/graylog/server/server.conf</span></code> and add <code class="docutils literal notranslate"><span class="pre">password_secret</span></code> and <code class="docutils literal notranslate"><span class="pre">root_password_sha2</span></code>. These settings are mandatory and without them, Graylog will not start!</p>
<p>You need to use the following command to create your <code class="docutils literal notranslate"><span class="pre">root_password_sha2</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="o">-</span><span class="n">n</span> <span class="s2">&quot;Enter Password: &quot;</span> <span class="o">&amp;&amp;</span> <span class="n">head</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&lt;/</span><span class="n">dev</span><span class="o">/</span><span class="n">stdin</span> <span class="o">|</span> <span class="n">tr</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">|</span> <span class="n">sha256sum</span> <span class="o">|</span> <span class="n">cut</span> <span class="o">-</span><span class="n">d</span><span class="s2">&quot; &quot;</span> <span class="o">-</span><span class="n">f1</span>
</pre></div>
</div>
<p>To be able to connect to Graylog you should set <code class="docutils literal notranslate"><span class="pre">http_bind_address</span></code> to the public host name or a public IP address of the machine you can connect to. More information about these settings can be found in <a class="reference internal" href="index.html#configuring-webif"><span class="std std-ref">Configuring the web interface</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you’re operating a single-node setup and would like to use HTTPS for the Graylog web interface and the Graylog REST API, it’s possible to use <a class="reference internal" href="index.html#configuring-webif-nginx"><span class="std std-ref">NGINX or Apache as a reverse proxy</span></a>.</p>
</div>
<p>The last step is to enable Graylog during the operating system’s startup:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo systemctl daemon-reload
$ sudo systemctl enable graylog-server.service
$ sudo systemctl start graylog-server.service
</pre></div>
</div>
<p>The next step is to <a class="reference internal" href="index.html#ingest-data"><span class="std std-ref">ingest messages</span></a> into your Graylog and extract the messages with <a class="reference internal" href="index.html#extractors"><span class="std std-ref">extractors</span></a> or use <a class="reference internal" href="index.html#pipelinestoc"><span class="std std-ref">the Pipelines</span></a> to work with the messages.</p>
</div>
<div class="section" id="multiple-server-setup">
<h6>Multiple Server Setup<a class="headerlink" href="#multiple-server-setup" title="Permalink to this headline">¶</a></h6>
<p>If you plan to have multiple server taking care of different roles in your cluster <a class="reference internal" href="index.html#big-production-setup"><span class="std std-ref">like we have in this big production setup</span></a> you need to modify only a few settings. This is covered in our <a class="reference internal" href="index.html#configure-multinode"><span class="std std-ref">Multi-node Setup guide</span></a>. The <a class="reference internal" href="index.html#default-file-location"><span class="std std-ref">default file location guide</span></a> will give you the file you need to modify in your setup.</p>
</div>
</div>
<span id="document-pages/installation/os/debian"></span><div class="section" id="debian-installation">
<h5>Debian installation<a class="headerlink" href="#debian-installation" title="Permalink to this headline">¶</a></h5>
<p>This guide describes the fastest way to install Graylog on Debian Linux 9 (Stretch). All links and packages are present at the time of writing but might need to be updated later on.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This setup should not be done on publicly exposed servers. This guide <strong>does not cover</strong> security settings!</p>
</div>
<div class="section" id="prerequisites">
<h6>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h6>
<p>If you’re starting from a minimal server setup, you will need to install these additional packages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apt update &amp;&amp; sudo apt upgrade
$ sudo apt install apt-transport-https openjdk-8-jre-headless uuid-runtime pwgen dirmngr
</pre></div>
</div>
</div>
<div class="section" id="mongodb">
<h6>MongoDB<a class="headerlink" href="#mongodb" title="Permalink to this headline">¶</a></h6>
<p>The official MongoDB repository provides the most up-to-date version and is the recommended way of installing MongoDB:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 9DA31620334BD75D9DCB49F368818C72E52529D4
$ echo &quot;deb http://repo.mongodb.org/apt/debian stretch/mongodb-org/4.0 main&quot; | sudo tee /etc/apt/sources.list.d/mongodb-org-4.0.list
$ sudo apt-get update
$ sudo apt-get install -y mongodb-org
</pre></div>
</div>
<p>The last step is to enable MongoDB during the operating system’s startup:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo systemctl daemon-reload
$ sudo systemctl enable mongod.service
$ sudo systemctl restart mongod.service
</pre></div>
</div>
</div>
<div class="section" id="elasticsearch">
<h6>Elasticsearch<a class="headerlink" href="#elasticsearch" title="Permalink to this headline">¶</a></h6>
<p>Graylog can be used with Elasticsearch 6.x, please follow the installation instructions from <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.6/deb.html">the Elasticsearch installation guide</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo apt-key add -
$ echo &quot;deb https://artifacts.elastic.co/packages/oss-6.x/apt stable main&quot; | sudo tee -a /etc/apt/sources.list.d/elastic-6.x.list
$ sudo apt update &amp;&amp; sudo apt install elasticsearch-oss
</pre></div>
</div>
<p>Make sure to modify the <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.x/settings.html#settings">Elasticsearch configuration file</a>  (<code class="docutils literal notranslate"><span class="pre">/etc/elasticsearch/elasticsearch.yml</span></code>) and set the cluster name to <code class="docutils literal notranslate"><span class="pre">graylog</span></code> additionally you need to uncomment (remove the # as first character) the line, and add <code class="docutils literal notranslate"><span class="pre">action.auto_create_index:</span> <span class="pre">false</span></code> to the configuration file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cluster</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">graylog</span>
<span class="n">action</span><span class="o">.</span><span class="n">auto_create_index</span><span class="p">:</span> <span class="n">false</span>
</pre></div>
</div>
<p>After you have modified the configuration, you can start Elasticsearch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo systemctl daemon-reload
$ sudo systemctl enable elasticsearch.service
$ sudo systemctl restart elasticsearch.service
</pre></div>
</div>
</div>
<div class="section" id="graylog">
<h6>Graylog<a class="headerlink" href="#graylog" title="Permalink to this headline">¶</a></h6>
<p>Now install the Graylog repository configuration and Graylog itself with the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ wget https://packages.graylog2.org/repo/packages/graylog-3.0-repository_latest.deb
$ sudo dpkg -i graylog-3.0-repository_latest.deb
$ sudo apt update &amp;&amp; sudo apt install graylog-server
</pre></div>
</div>
<p>Follow the instructions in your <code class="docutils literal notranslate"><span class="pre">/etc/graylog/server/server.conf</span></code> and add <code class="docutils literal notranslate"><span class="pre">password_secret</span></code> and <code class="docutils literal notranslate"><span class="pre">root_password_sha2</span></code>. These settings are mandatory and without them, Graylog will not start!</p>
<p>You need to use the following command to create your <code class="docutils literal notranslate"><span class="pre">root_password_sha2</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="o">-</span><span class="n">n</span> <span class="s2">&quot;Enter Password: &quot;</span> <span class="o">&amp;&amp;</span> <span class="n">head</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&lt;/</span><span class="n">dev</span><span class="o">/</span><span class="n">stdin</span> <span class="o">|</span> <span class="n">tr</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">|</span> <span class="n">sha256sum</span> <span class="o">|</span> <span class="n">cut</span> <span class="o">-</span><span class="n">d</span><span class="s2">&quot; &quot;</span> <span class="o">-</span><span class="n">f1</span>
</pre></div>
</div>
<p>To be able to connect to Graylog you should set <code class="docutils literal notranslate"><span class="pre">http_bind_address</span></code> to the public host name or a public IP address of the machine you can connect to. More information about these settings can be found in <a class="reference internal" href="index.html#configuring-webif"><span class="std std-ref">Configuring the web interface</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you’re operating a single-node setup and would like to use HTTPS for the Graylog web interface and the Graylog REST API, it’s possible to use <a class="reference internal" href="index.html#configuring-webif-nginx"><span class="std std-ref">NGINX or Apache as a reverse proxy</span></a>.</p>
</div>
<p>The last step is to enable Graylog during the operating system’s startup:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo systemctl daemon-reload
$ sudo systemctl enable graylog-server.service
$ sudo systemctl start graylog-server.service
</pre></div>
</div>
<p>The next step is to <a class="reference internal" href="index.html#ingest-data"><span class="std std-ref">ingest messages</span></a> into your Graylog and extract the messages with <a class="reference internal" href="index.html#extractors"><span class="std std-ref">extractors</span></a> or use <a class="reference internal" href="index.html#pipelinestoc"><span class="std std-ref">the Pipelines</span></a> to work with the messages.</p>
</div>
<div class="section" id="multiple-server-setup">
<h6>Multiple Server Setup<a class="headerlink" href="#multiple-server-setup" title="Permalink to this headline">¶</a></h6>
<p>If you plan to have multiple server taking care of different roles in your cluster <a class="reference internal" href="index.html#big-production-setup"><span class="std std-ref">like we have in this big production setup</span></a> you need to modify only a few settings. This is covered in our <a class="reference internal" href="index.html#configure-multinode"><span class="std std-ref">Multi-node Setup guide</span></a>. The <a class="reference internal" href="index.html#default-file-location"><span class="std std-ref">default file location guide</span></a> will give you the file you need to modify in your setup.</p>
</div>
</div>
<span id="document-pages/installation/os/centos"></span><div class="section" id="centos-installation">
<h5>CentOS installation<a class="headerlink" href="#centos-installation" title="Permalink to this headline">¶</a></h5>
<p>This guide describes the fastest way to install Graylog on CentOS 7. All links and packages are present at the time of writing but might need to be updated later on.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This setup should not be done on publicly exposed servers. This guide <strong>does not cover</strong> security settings!</p>
</div>
<div class="section" id="prerequisites">
<h6>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h6>
<p>Taking a minimal server setup as base will need this additional packages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo yum install java-1.8.0-openjdk-headless.x86_64
</pre></div>
</div>
<p>If you want to use <code class="docutils literal notranslate"><span class="pre">pwgen</span></code> later on you need to Setup <a class="reference external" href="https://fedoraproject.org/wiki/EPEL">EPEL</a> on your system with <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">yum</span> <span class="pre">install</span> <span class="pre">epel-release</span></code> and install the package with <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">yum</span> <span class="pre">install</span> <span class="pre">pwgen</span></code>.</p>
</div>
<div class="section" id="mongodb">
<h6>MongoDB<a class="headerlink" href="#mongodb" title="Permalink to this headline">¶</a></h6>
<p>Installing MongoDB on CentOS should follow <a class="reference external" href="https://docs.mongodb.com/master/tutorial/install-mongodb-on-red-hat">the tutorial for RHEL and CentOS</a> from the MongoDB documentation. First add the repository file <code class="docutils literal notranslate"><span class="pre">/etc/yum.repos.d/mongodb-org.repo</span></code> with the following contents:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[mongodb-org-4.0]
name=MongoDB Repository
baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/4.0/x86_64/
gpgcheck=1
enabled=1
gpgkey=https://www.mongodb.org/static/pgp/server-4.0.asc
</pre></div>
</div>
<p>After that, install the latest release of MongoDB with <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">yum</span> <span class="pre">install</span> <span class="pre">mongodb-org</span></code>.</p>
<p>Additionally, run these last steps to start MongoDB during the operating system’s boot and start it right away:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo chkconfig --add mongod
$ sudo systemctl daemon-reload
$ sudo systemctl enable mongod.service
$ sudo systemctl start mongod.service
</pre></div>
</div>
</div>
<div class="section" id="elasticsearch">
<h6>Elasticsearch<a class="headerlink" href="#elasticsearch" title="Permalink to this headline">¶</a></h6>
<p>Graylog can be used with Elasticsearch 6.x, please follow the installation instructions from <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.6/rpm.html">the Elasticsearch installation guide</a>.</p>
<p>First install the Elastic GPG key with <code class="docutils literal notranslate"><span class="pre">rpm</span> <span class="pre">--import</span> <span class="pre">https://artifacts.elastic.co/GPG-KEY-elasticsearch</span></code> then add the repository file <code class="docutils literal notranslate"><span class="pre">/etc/yum.repos.d/elasticsearch.repo</span></code> with the following contents:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">elasticsearch</span><span class="o">-</span><span class="mf">6.</span><span class="n">x</span><span class="p">]</span>
<span class="n">name</span><span class="o">=</span><span class="n">Elasticsearch</span> <span class="n">repository</span> <span class="k">for</span> <span class="mf">6.</span><span class="n">x</span> <span class="n">packages</span>
<span class="n">baseurl</span><span class="o">=</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">artifacts</span><span class="o">.</span><span class="n">elastic</span><span class="o">.</span><span class="n">co</span><span class="o">/</span><span class="n">packages</span><span class="o">/</span><span class="n">oss</span><span class="o">-</span><span class="mf">6.</span><span class="n">x</span><span class="o">/</span><span class="n">yum</span>
<span class="n">gpgcheck</span><span class="o">=</span><span class="mi">1</span>
<span class="n">gpgkey</span><span class="o">=</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">artifacts</span><span class="o">.</span><span class="n">elastic</span><span class="o">.</span><span class="n">co</span><span class="o">/</span><span class="n">GPG</span><span class="o">-</span><span class="n">KEY</span><span class="o">-</span><span class="n">elasticsearch</span>
<span class="n">enabled</span><span class="o">=</span><span class="mi">1</span>
<span class="n">autorefresh</span><span class="o">=</span><span class="mi">1</span>
<span class="nb">type</span><span class="o">=</span><span class="n">rpm</span><span class="o">-</span><span class="n">md</span>
</pre></div>
</div>
<p>followed by the installation of the latest release with <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">yum</span> <span class="pre">install</span> <span class="pre">elasticsearch-oss</span></code>.</p>
<p>Make sure to modify the <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.x/settings.html#settings">Elasticsearch configuration file</a>  (<code class="docutils literal notranslate"><span class="pre">/etc/elasticsearch/elasticsearch.yml</span></code>) and set the cluster name to <code class="docutils literal notranslate"><span class="pre">graylog</span></code> additionally you need to uncomment (remove the # as first character) the line, and add <code class="docutils literal notranslate"><span class="pre">action.auto_create_index:</span> <span class="pre">false</span></code> to the configuration file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cluster</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">graylog</span>
<span class="n">action</span><span class="o">.</span><span class="n">auto_create_index</span><span class="p">:</span> <span class="n">false</span>
</pre></div>
</div>
<p>After you have modified the configuration, you can start Elasticsearch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo chkconfig --add elasticsearch
$ sudo systemctl daemon-reload
$ sudo systemctl enable elasticsearch.service
$ sudo systemctl restart elasticsearch.service
</pre></div>
</div>
</div>
<div class="section" id="graylog">
<h6>Graylog<a class="headerlink" href="#graylog" title="Permalink to this headline">¶</a></h6>
<p>Now install the Graylog repository configuration and Graylog itself with the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo rpm -Uvh https://packages.graylog2.org/repo/packages/graylog-3.0-repository_latest.rpm
$ sudo yum install graylog-server
</pre></div>
</div>
<p>Follow the instructions in your <code class="docutils literal notranslate"><span class="pre">/etc/graylog/server/server.conf</span></code> and add <code class="docutils literal notranslate"><span class="pre">password_secret</span></code> and <code class="docutils literal notranslate"><span class="pre">root_password_sha2</span></code>. These settings are mandatory and without them, Graylog will not start!</p>
<p>You need to use the following command to create your <code class="docutils literal notranslate"><span class="pre">root_password_sha2</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="o">-</span><span class="n">n</span> <span class="s2">&quot;Enter Password: &quot;</span> <span class="o">&amp;&amp;</span> <span class="n">head</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&lt;/</span><span class="n">dev</span><span class="o">/</span><span class="n">stdin</span> <span class="o">|</span> <span class="n">tr</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">|</span> <span class="n">sha256sum</span> <span class="o">|</span> <span class="n">cut</span> <span class="o">-</span><span class="n">d</span><span class="s2">&quot; &quot;</span> <span class="o">-</span><span class="n">f1</span>
</pre></div>
</div>
<p>To be able to connect to Graylog you should set <code class="docutils literal notranslate"><span class="pre">http_bind_address</span></code> to the public host name or a public IP address of the machine you can connect to. More information about these settings can be found in <a class="reference internal" href="index.html#configuring-webif"><span class="std std-ref">Configuring the web interface</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you’re operating a single-node setup and would like to use HTTPS for the Graylog web interface and the Graylog REST API, it’s possible to use <a class="reference internal" href="index.html#configuring-webif-nginx"><span class="std std-ref">NGINX or Apache as a reverse proxy</span></a>.</p>
</div>
<p>The last step is to enable Graylog during the operating system’s startup:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo chkconfig --add graylog-server
$ sudo systemctl daemon-reload
$ sudo systemctl enable graylog-server.service
$ sudo systemctl start graylog-server.service
</pre></div>
</div>
<p>The next step is to <a class="reference internal" href="index.html#ingest-data"><span class="std std-ref">ingest messages</span></a> into your Graylog and extract the messages with <a class="reference internal" href="index.html#extractors"><span class="std std-ref">extractors</span></a> or use <a class="reference internal" href="index.html#pipelinestoc"><span class="std std-ref">the Pipelines</span></a> to work with the messages.</p>
</div>
<div class="section" id="selinux-information">
<span id="selinux"></span><h6>SELinux information<a class="headerlink" href="#selinux-information" title="Permalink to this headline">¶</a></h6>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">We assume that you have <code class="docutils literal notranslate"><span class="pre">policycoreutils-python</span></code> installed to manage SELinux.</p>
</div>
<p>If you’re using SELinux on your system, you need to take care of the following settings:</p>
<ul class="simple">
<li>Allow the web server to access the network: <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">setsebool</span> <span class="pre">-P</span> <span class="pre">httpd_can_network_connect</span> <span class="pre">1</span></code></li>
<li><dl class="first docutils">
<dt>If the policy above does not comply with your security policy, you can also allow access to each port individually:</dt>
<dd><ul class="first last">
<li>Graylog REST API and web interface: <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">semanage</span> <span class="pre">port</span> <span class="pre">-a</span> <span class="pre">-t</span> <span class="pre">http_port_t</span> <span class="pre">-p</span> <span class="pre">tcp</span> <span class="pre">9000</span></code></li>
<li>Elasticsearch (only if the HTTP API is being used): <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">semanage</span> <span class="pre">port</span> <span class="pre">-a</span> <span class="pre">-t</span> <span class="pre">http_port_t</span> <span class="pre">-p</span> <span class="pre">tcp</span> <span class="pre">9200</span></code></li>
</ul>
</dd>
</dl>
</li>
<li>Allow using MongoDB’s default port (27017/tcp): <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">semanage</span> <span class="pre">port</span> <span class="pre">-a</span> <span class="pre">-t</span> <span class="pre">mongod_port_t</span> <span class="pre">-p</span> <span class="pre">tcp</span> <span class="pre">27017</span></code></li>
</ul>
<p>If you run a single server environment with <a class="reference internal" href="index.html#configuring-webif-nginx"><span class="std std-ref">NGINX or Apache proxy</span></a>, enabling the Graylog REST API is enough. All other rules are only required in a multi-node setup.
Having SELinux disabled during installation and enabling it later, requires you to manually check the policies for MongoDB, Elasticsearch and Graylog.</p>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Depending on your actual setup and configuration, you might need to add more SELinux rules to get to a running setup.</p>
</div>
<div class="section" id="further-reading">
<h7>Further reading<a class="headerlink" href="#further-reading" title="Permalink to this headline">¶</a></h7>
<ul class="simple">
<li><a class="reference external" href="https://www.nginx.com/blog/nginx-se-linux-changes-upgrading-rhel-6-6/">https://www.nginx.com/blog/nginx-se-linux-changes-upgrading-rhel-6-6/</a></li>
<li><a class="reference external" href="https://wiki.centos.org/HowTos/SELinux">https://wiki.centos.org/HowTos/SELinux</a></li>
<li><a class="reference external" href="https://wiki.centos.org/TipsAndTricks/SelinuxBooleans">https://wiki.centos.org/TipsAndTricks/SelinuxBooleans</a></li>
<li><a class="reference external" href="http://www.serverlab.ca/tutorials/linux/administration-linux/troubleshooting-selinux-centos-red-hat/">http://www.serverlab.ca/tutorials/linux/administration-linux/troubleshooting-selinux-centos-red-hat/</a></li>
<li><a class="reference external" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/SELinux_Users_and_Administrators_Guide/">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/SELinux_Users_and_Administrators_Guide/</a></li>
<li><a class="reference external" href="https://www.digitalocean.com/community/tutorials/an-introduction-to-selinux-on-centos-7-part-1-basic-concepts">https://www.digitalocean.com/community/tutorials/an-introduction-to-selinux-on-centos-7-part-1-basic-concepts</a></li>
</ul>
</div>
</div>
<div class="section" id="multiple-server-setup">
<h6>Multiple Server Setup<a class="headerlink" href="#multiple-server-setup" title="Permalink to this headline">¶</a></h6>
<p>If you plan to have multiple server taking care of different roles in your cluster <a class="reference internal" href="index.html#big-production-setup"><span class="std std-ref">like we have in this big production setup</span></a> you need to modify only a few settings. This is covered in our <a class="reference internal" href="index.html#configure-multinode"><span class="std std-ref">Multi-node Setup guide</span></a>. The <a class="reference internal" href="index.html#default-file-location"><span class="std std-ref">default file location guide</span></a> will give you the file you need to modify in your setup.</p>
</div>
</div>
<span id="document-pages/installation/os/sles"></span><div class="section" id="sles-installation">
<h5>SLES installation<a class="headerlink" href="#sles-installation" title="Permalink to this headline">¶</a></h5>
<p>This guide describes the fastest way to install Graylog on SLES 12 SP3. All links and packages are present at the time of writing but might need to be updated later on.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This setup should not be done on publicly exposed servers. This guide <strong>does not cover</strong> security settings!</p>
</div>
<div class="section" id="prerequisites">
<h6>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h6>
<p>The following patterns are required for a minimal setup (see <a class="reference external" href="https://www.suse.com/documentation/sles-12/singlehtml/book_sle_deployment/book_sle_deployment.html#sec.i.yast2.proposal.sofware">SLES 12 SP3 Deployment Guide</a>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">Base</span> <span class="n">System</span>
<span class="o">-</span> <span class="n">Minimal</span> <span class="n">System</span> <span class="p">(</span><span class="n">Appliances</span><span class="p">)</span>
<span class="o">-</span> <span class="n">YaST</span> <span class="n">configuration</span> <span class="n">packages</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This Guide assumes that the firewall is disabled and communication is possible to the outside world.</p>
</div>
<p>Assuming a minimal setup, you have to install the Java runtime environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo zypper install java-1_8_0-openjdk
</pre></div>
</div>
</div>
<div class="section" id="mongodb">
<h6>MongoDB<a class="headerlink" href="#mongodb" title="Permalink to this headline">¶</a></h6>
<p>Installing MongoDB on SLES should follow <a class="reference external" href="https://docs.mongodb.com/v4.0/tutorial/install-mongodb-on-suse/">the tutorial for SLES</a> from the MongoDB documentation. Add the GPG key and the repository before installing MongoDB:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo rpm --import https://www.mongodb.org/static/pgp/server-4.0.asc
$ sudo zypper addrepo --gpgcheck &quot;https://repo.mongodb.org/zypper/suse/12/mongodb-org/4.0/x86_64/&quot; mongodb
$ sudo zypper -n install mongodb-org
</pre></div>
</div>
<p>In order to automatically start MongoDB on system boot, you have to activate the MongoDB service by running the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo chkconfig mongod on
$ sudo systemctl daemon-reload
$ sudo systemctl restart mongod.service
</pre></div>
</div>
</div>
<div class="section" id="elasticsearch">
<h6>Elasticsearch<a class="headerlink" href="#elasticsearch" title="Permalink to this headline">¶</a></h6>
<p>Graylog can be used with Elasticsearch 6.x, please follow the installation instructions from <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.6/rpm.html">the Elasticsearch installation guide</a>.</p>
<p>First install the Elastic GPG key with <code class="docutils literal notranslate"><span class="pre">rpm</span> <span class="pre">--import</span> <span class="pre">https://artifacts.elastic.co/GPG-KEY-elasticsearch</span></code> then add the repository file <code class="docutils literal notranslate"><span class="pre">/etc/zypp/repos.d/elasticsearch.repo</span></code> with the following contents:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">elasticsearch</span><span class="o">-</span><span class="mf">6.</span><span class="n">x</span><span class="p">]</span>
<span class="n">name</span><span class="o">=</span><span class="n">Elasticsearch</span> <span class="n">repository</span> <span class="k">for</span> <span class="mf">6.</span><span class="n">x</span> <span class="n">packages</span>
<span class="n">baseurl</span><span class="o">=</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">artifacts</span><span class="o">.</span><span class="n">elastic</span><span class="o">.</span><span class="n">co</span><span class="o">/</span><span class="n">packages</span><span class="o">/</span><span class="n">oss</span><span class="o">-</span><span class="mf">6.</span><span class="n">x</span><span class="o">/</span><span class="n">yum</span>
<span class="n">gpgcheck</span><span class="o">=</span><span class="mi">1</span>
<span class="n">gpgkey</span><span class="o">=</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">artifacts</span><span class="o">.</span><span class="n">elastic</span><span class="o">.</span><span class="n">co</span><span class="o">/</span><span class="n">GPG</span><span class="o">-</span><span class="n">KEY</span><span class="o">-</span><span class="n">elasticsearch</span>
<span class="n">enabled</span><span class="o">=</span><span class="mi">1</span>
<span class="n">autorefresh</span><span class="o">=</span><span class="mi">1</span>
<span class="nb">type</span><span class="o">=</span><span class="n">rpm</span><span class="o">-</span><span class="n">md</span>
</pre></div>
</div>
<p>followed by the installation of the latest release with <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">zypper</span> <span class="pre">install</span> <span class="pre">elasticsearch-oss</span></code>.</p>
<p>Make sure to modify the <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.x/settings.html#settings">Elasticsearch configuration file</a>  (<code class="docutils literal notranslate"><span class="pre">/etc/elasticsearch/elasticsearch.yml</span></code>) and set the cluster name to <code class="docutils literal notranslate"><span class="pre">graylog</span></code> additionally you need to uncomment (remove the # as first character) the line, and add <code class="docutils literal notranslate"><span class="pre">action.auto_create_index:</span> <span class="pre">false</span></code> to the configuration file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cluster</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">graylog</span>
<span class="n">action</span><span class="o">.</span><span class="n">auto_create_index</span><span class="p">:</span> <span class="n">false</span>
</pre></div>
</div>
<p>In order to automatically start Elasticsearch on system boot, you have to activate the Elasticsearch service by running the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo chkconfig elasticsearch on
$ sudo systemctl daemon-reload
$ sudo systemctl restart elasticsearch.service
</pre></div>
</div>
</div>
<div class="section" id="graylog">
<h6>Graylog<a class="headerlink" href="#graylog" title="Permalink to this headline">¶</a></h6>
<p>First install the Graylog GPG Key with <code class="docutils literal notranslate"><span class="pre">rpm</span> <span class="pre">--import</span> <span class="pre">https://packages.graylog2.org/repo/debian/keyring.gpg</span></code> then add the repository file <code class="docutils literal notranslate"><span class="pre">/etc/zypp/repos.d/graylog.repo</span></code> with the following content:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[graylog]
name=graylog
baseurl=https://packages.graylog2.org/repo/el/stable/3.0/$basearch/
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-graylog
</pre></div>
</div>
<p>After that, install the latest release with <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">zypper</span> <span class="pre">install</span> <span class="pre">graylog-server</span></code>.</p>
<p>Make sure to follow the instructions in your <code class="docutils literal notranslate"><span class="pre">/etc/graylog/server/server.conf</span></code> and add <code class="docutils literal notranslate"><span class="pre">password_secret</span></code> and <code class="docutils literal notranslate"><span class="pre">root_password_sha2</span></code>. These settings are mandatory and without them, Graylog will not start!</p>
<p>You can use the following command to create your <code class="docutils literal notranslate"><span class="pre">password_secret</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">urandom</span> <span class="o">|</span> <span class="n">base64</span> <span class="o">|</span> <span class="n">cut</span> <span class="o">-</span><span class="n">c1</span><span class="o">-</span><span class="mi">96</span> <span class="o">|</span> <span class="n">head</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
<p>You need to use the following command to create your <code class="docutils literal notranslate"><span class="pre">root_password_sha2</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="o">-</span><span class="n">n</span> <span class="s2">&quot;Enter Password: &quot;</span> <span class="o">&amp;&amp;</span> <span class="n">head</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&lt;/</span><span class="n">dev</span><span class="o">/</span><span class="n">stdin</span> <span class="o">|</span> <span class="n">tr</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">|</span> <span class="n">sha256sum</span> <span class="o">|</span> <span class="n">cut</span> <span class="o">-</span><span class="n">d</span><span class="s2">&quot; &quot;</span> <span class="o">-</span><span class="n">f1</span>
</pre></div>
</div>
<p>To be able to connect to Graylog you should set <code class="docutils literal notranslate"><span class="pre">http_bind_address</span></code> to the public host name or a public IP address of the machine you can connect to. More information about these settings can be found in <a class="reference internal" href="index.html#configuring-webif"><span class="std std-ref">Configuring the web interface</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you’re operating a single-node setup and would like to use HTTPS for the Graylog web interface and the Graylog REST API, it’s possible to use <a class="reference internal" href="index.html#configuring-webif-nginx"><span class="std std-ref">NGINX or Apache as a reverse proxy</span></a>.</p>
</div>
<p>The last step is to enable Graylog during the operating system’s startup:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo chkconfig graylog-server on
$ sudo systemctl daemon-reload
$ sudo systemctl start graylog-server.service
</pre></div>
</div>
<p>The next step is to <a class="reference internal" href="index.html#ingest-data"><span class="std std-ref">ingest messages</span></a> into your new Graylog Cluster and extract the messages with <a class="reference internal" href="index.html#extractors"><span class="std std-ref">extractors</span></a> or use <a class="reference internal" href="index.html#pipelinestoc"><span class="std std-ref">the Pipelines</span></a> to work with the messages.</p>
</div>
<div class="section" id="cluster-setup">
<h6>Cluster Setup<a class="headerlink" href="#cluster-setup" title="Permalink to this headline">¶</a></h6>
<p>If you plan to have multiple servers assuming different roles in your cluster <a class="reference internal" href="index.html#big-production-setup"><span class="std std-ref">like we have in this big production setup</span></a> you need to modify only a few settings. This is covered in our <a class="reference internal" href="index.html#configure-multinode"><span class="std std-ref">Multi-node Setup guide</span></a>. The <a class="reference internal" href="index.html#default-file-location"><span class="std std-ref">default file location guide</span></a> lists the locations of the files you need to modify.</p>
</div>
</div>
</div>
</div>
<div class="section" id="feedback">
<h4>Feedback<a class="headerlink" href="#feedback" title="Permalink to this headline">¶</a></h4>
<p>Please file a <a class="reference external" href="https://github.com/Graylog2/fpm-recipes">bug report in the GitHub repository for the operating system packages</a> if you
run into any packaging related issues.</p>
<p>If you found this documentation confusing or have more questions, please open an <a class="reference external" href="https://github.com/Graylog2/documentation/issues">issue in the Github repository for the documentation</a>.</p>
</div>
</div>
<span id="document-pages/installation/config_management_tools"></span><div class="section" id="chef-puppet-ansible">
<span id="confmgt"></span><h3>Chef, Puppet, Ansible<a class="headerlink" href="#chef-puppet-ansible" title="Permalink to this headline">¶</a></h3>
<p>The DevOps movement turbocharged market adoption of the newest generation of configuration management and orchestration tools like
<a class="reference external" href="https://www.chef.io">Chef</a>, <a class="reference external" href="http://puppet.com">Puppet</a> or <a class="reference external" href="http://www.ansible.com">Ansible</a>. Graylog offers official scripts for
all three of them:</p>
<ul class="simple">
<li><a class="reference external" href="https://supermarket.chef.io/cookbooks/graylog2">https://supermarket.chef.io/cookbooks/graylog2</a></li>
<li><a class="reference external" href="https://forge.puppet.com/graylog/graylog">https://forge.puppet.com/graylog/graylog</a></li>
<li><a class="reference external" href="https://galaxy.ansible.com/Graylog2/graylog-ansible-role">https://galaxy.ansible.com/Graylog2/graylog-ansible-role</a></li>
</ul>
</div>
<span id="document-pages/installation/docker"></span><div class="section" id="docker">
<span id="here"></span><h3>Docker<a class="headerlink" href="#docker" title="Permalink to this headline">¶</a></h3>
<div class="section" id="requirements">
<h4>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h4>
<p>You will need a fairly recent version of <a class="reference external" href="https://docs.docker.com/installation/">Docker</a>.</p>
<p>We will use the following Docker images in this chapter:</p>
<ul class="simple">
<li>Graylog: <a class="reference external" href="https://hub.docker.com/r/graylog/graylog/">graylog/graylog</a></li>
<li>MongoDB: <a class="reference external" href="https://hub.docker.com/_/mongo/">mongo</a></li>
<li>Elasticsearch: <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.5/docker.html">docker.elastic.co/elasticsearch/elasticsearch</a></li>
</ul>
</div>
<div class="section" id="quick-start">
<h4>Quick start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h4>
<p>If you want to checkout Graylog on your local desktop without any further customization, you can run the following three commands to create the necessary environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run --name mongo -d mongo:3
$ docker run --name elasticsearch \
    -e &quot;http.host=0.0.0.0&quot; \
    -e &quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot; \
    -d docker.elastic.co/elasticsearch/elasticsearch-oss:6.6.1
$ docker run --name graylog --link mongo --link elasticsearch \
    -p 9000:9000 -p 12201:12201 -p 1514:1514 \
    -e GRAYLOG_HTTP_EXTERNAL_URI=&quot;http://127.0.0.1:9000/&quot; \
    -d graylog/graylog:3.0
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">All configuration examples are created to run on the local computer. Should those be used on external servers, adjust <code class="docutils literal notranslate"><span class="pre">GRAYLOG_HTTP_EXTERNAL_URI</span></code> and add <code class="docutils literal notranslate"><span class="pre">GRAYLOG_HTTP_PUBLISH_URI</span></code> and <code class="docutils literal notranslate"><span class="pre">GRAYLOG_HTTP_EXTERNAL_URI</span></code> according to the <a class="reference internal" href="index.html#web-rest-api-options"><span class="std std-ref">server.conf documentation</span></a>.</p>
</div>
<div class="section" id="how-to-get-log-data-in">
<h5>How to get log data in<a class="headerlink" href="#how-to-get-log-data-in" title="Permalink to this headline">¶</a></h5>
<p>You can create different kinds of inputs under <em>System / Inputs</em>, however you can only use ports that have been properly mapped to your docker container, otherwise data will not go through.</p>
<p>For example, to start a Raw/Plaintext TCP input on port 5555, stop your container and recreate it, while appending <code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">5555:5555</span></code> to your <a class="reference external" href="https://docs.docker.com/engine/reference/run/">docker run</a> command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run --link mongo --link elasticsearch \
    -p 9000:9000 -p 12201:12201 -p 1514:1514 -p 5555:5555 \
    -e GRAYLOG_HTTP_EXTERNAL_URI=&quot;http://127.0.0.1:9000/&quot; \
    -d graylog/graylog:3.0
</pre></div>
</div>
<p>Similarly, the same can be done for UDP by appending <code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">5555:5555/udp</span></code>.</p>
<p>After that you can send a plaintext message to the Graylog Raw/Plaintext TCP input running on port 5555 using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ echo &#39;First log message&#39; | nc localhost 5555
</pre></div>
</div>
</div>
<div class="section" id="settings">
<h5>Settings<a class="headerlink" href="#settings" title="Permalink to this headline">¶</a></h5>
<p>Graylog comes with a default configuration that works out of the box but you have to set a password for the admin user and the web interface needs to know how to connect from your browser to the Graylog REST API.</p>
<p>Both settings can be configured via environment variables (also see <a class="reference internal" href="#configuration"><span class="std std-ref">Configuration</span></a>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">e</span> <span class="n">GRAYLOG_ROOT_PASSWORD_SHA2</span><span class="o">=</span><span class="mi">8</span><span class="n">c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918</span>
<span class="o">-</span><span class="n">e</span> <span class="n">GRAYLOG_HTTP_EXTERNAL_URI</span><span class="o">=</span><span class="s2">&quot;http://127.0.0.1:9000/&quot;</span>
</pre></div>
</div>
<p>In this case you can login to Graylog with the username and password <code class="docutils literal notranslate"><span class="pre">admin</span></code>.</p>
<p>Generate your own admin password with the following command and put the SHA-256 hash into the <code class="docutils literal notranslate"><span class="pre">GRAYLOG_ROOT_PASSWORD_SHA2</span></code> environment variable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="o">-</span><span class="n">n</span> <span class="s2">&quot;Enter Password: &quot;</span> <span class="o">&amp;&amp;</span> <span class="n">head</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&lt;/</span><span class="n">dev</span><span class="o">/</span><span class="n">stdin</span> <span class="o">|</span> <span class="n">tr</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">|</span> <span class="n">sha256sum</span> <span class="o">|</span> <span class="n">cut</span> <span class="o">-</span><span class="n">d</span><span class="s2">&quot; &quot;</span> <span class="o">-</span><span class="n">f1</span>
</pre></div>
</div>
<p>All these settings and command line parameters can be put in a <code class="docutils literal notranslate"><span class="pre">docker-compose.yml</span></code> file, so that they don’t have to be executed one after the other.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">version</span><span class="p">:</span> <span class="s1">&#39;2&#39;</span>
<span class="n">services</span><span class="p">:</span>
  <span class="c1"># MongoDB: https://hub.docker.com/_/mongo/</span>
  <span class="n">mongodb</span><span class="p">:</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">mongo</span><span class="p">:</span><span class="mi">3</span>
  <span class="c1"># Elasticsearch: https://www.elastic.co/guide/en/elasticsearch/reference/6.6/docker.html</span>
  <span class="n">elasticsearch</span><span class="p">:</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">docker</span><span class="o">.</span><span class="n">elastic</span><span class="o">.</span><span class="n">co</span><span class="o">/</span><span class="n">elasticsearch</span><span class="o">/</span><span class="n">elasticsearch</span><span class="o">-</span><span class="n">oss</span><span class="p">:</span><span class="mf">6.6</span><span class="o">.</span><span class="mi">1</span>
    <span class="n">environment</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">http</span><span class="o">.</span><span class="n">host</span><span class="o">=</span><span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span>
      <span class="o">-</span> <span class="n">transport</span><span class="o">.</span><span class="n">host</span><span class="o">=</span><span class="n">localhost</span>
      <span class="o">-</span> <span class="n">network</span><span class="o">.</span><span class="n">host</span><span class="o">=</span><span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span>
      <span class="o">-</span> <span class="s2">&quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;</span>
    <span class="n">ulimits</span><span class="p">:</span>
      <span class="n">memlock</span><span class="p">:</span>
        <span class="n">soft</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">hard</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>
    <span class="n">mem_limit</span><span class="p">:</span> <span class="mi">1</span><span class="n">g</span>
  <span class="c1"># Graylog: https://hub.docker.com/r/graylog/graylog/</span>
  <span class="n">graylog</span><span class="p">:</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">graylog</span><span class="o">/</span><span class="n">graylog</span><span class="p">:</span><span class="mf">3.0</span>
    <span class="n">environment</span><span class="p">:</span>
      <span class="c1"># CHANGE ME (must be at least 16 characters)!</span>
      <span class="o">-</span> <span class="n">GRAYLOG_PASSWORD_SECRET</span><span class="o">=</span><span class="n">somepasswordpepper</span>
      <span class="c1"># Password: admin</span>
      <span class="o">-</span> <span class="n">GRAYLOG_ROOT_PASSWORD_SHA2</span><span class="o">=</span><span class="mi">8</span><span class="n">c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918</span>
      <span class="o">-</span> <span class="n">GRAYLOG_HTTP_EXTERNAL_URI</span><span class="o">=</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">9000</span><span class="o">/</span>
    <span class="n">links</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">mongodb</span><span class="p">:</span><span class="n">mongo</span>
      <span class="o">-</span> <span class="n">elasticsearch</span>
    <span class="n">depends_on</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">mongodb</span>
      <span class="o">-</span> <span class="n">elasticsearch</span>
    <span class="n">ports</span><span class="p">:</span>
      <span class="c1"># Graylog web interface and REST API</span>
      <span class="o">-</span> <span class="mi">9000</span><span class="p">:</span><span class="mi">9000</span>
      <span class="c1"># Syslog TCP</span>
      <span class="o">-</span> <span class="mi">1514</span><span class="p">:</span><span class="mi">1514</span>
      <span class="c1"># Syslog UDP</span>
      <span class="o">-</span> <span class="mi">1514</span><span class="p">:</span><span class="mi">1514</span><span class="o">/</span><span class="n">udp</span>
      <span class="c1"># GELF TCP</span>
      <span class="o">-</span> <span class="mi">12201</span><span class="p">:</span><span class="mi">12201</span>
      <span class="c1"># GELF UDP</span>
      <span class="o">-</span> <span class="mi">12201</span><span class="p">:</span><span class="mi">12201</span><span class="o">/</span><span class="n">udp</span>
</pre></div>
</div>
<p>After starting all three Docker containers by running <code class="docutils literal notranslate"><span class="pre">docker-compose</span> <span class="pre">up</span></code>, you can open the URL <code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:9000</span></code> in a web browser and log in with username <code class="docutils literal notranslate"><span class="pre">admin</span></code> and password <code class="docutils literal notranslate"><span class="pre">admin</span></code> (make sure to change the password later). Change <code class="docutils literal notranslate"><span class="pre">GRAYLOG_HTTP_EXTERNAL_URI=</span></code> to your server IP if you run Docker remotely.</p>
</div>
</div>
<div class="section" id="configuration">
<span id="id1"></span><h4>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h4>
<p>Every configuration option can be set via <a class="reference external" href="https://github.com/Graylog2/graylog2-server/blob/3.0/misc/graylog.conf">environment variables</a>.
Simply prefix the parameter name with <code class="docutils literal notranslate"><span class="pre">GRAYLOG_</span></code> and put it all in upper case.</p>
<p>For example, setting up the SMTP configuration for sending Graylog alert notifications via email, the <code class="docutils literal notranslate"><span class="pre">docker-compose.yml</span></code> would look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">version</span><span class="p">:</span> <span class="s1">&#39;2&#39;</span>
<span class="n">services</span><span class="p">:</span>
  <span class="n">mongo</span><span class="p">:</span>
    <span class="n">image</span><span class="p">:</span> <span class="s2">&quot;mongo:3&quot;</span>
    <span class="c1"># Other settings [...]</span>
  <span class="n">elasticsearch</span><span class="p">:</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">docker</span><span class="o">.</span><span class="n">elastic</span><span class="o">.</span><span class="n">co</span><span class="o">/</span><span class="n">elasticsearch</span><span class="o">/</span><span class="n">elasticsearch</span><span class="o">-</span><span class="n">oss</span><span class="p">:</span><span class="mf">6.6</span><span class="o">.</span><span class="mi">1</span>
    <span class="c1"># Other settings [...]</span>
  <span class="n">graylog</span><span class="p">:</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">graylog</span><span class="o">/</span><span class="n">graylog</span><span class="p">:</span><span class="mf">3.0</span>
    <span class="c1"># Other settings [...]</span>
    <span class="n">environment</span><span class="p">:</span>
      <span class="n">GRAYLOG_TRANSPORT_EMAIL_ENABLED</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span>
      <span class="n">GRAYLOG_TRANSPORT_EMAIL_HOSTNAME</span><span class="p">:</span> <span class="n">smtp</span>
      <span class="n">GRAYLOG_TRANSPORT_EMAIL_PORT</span><span class="p">:</span> <span class="mi">25</span>
      <span class="n">GRAYLOG_TRANSPORT_EMAIL_USE_AUTH</span><span class="p">:</span> <span class="s2">&quot;false&quot;</span>
      <span class="n">GRAYLOG_TRANSPORT_EMAIL_USE_TLS</span><span class="p">:</span> <span class="s2">&quot;false&quot;</span>
      <span class="n">GRAYLOG_TRANSPORT_EMAIL_USE_SSL</span><span class="p">:</span> <span class="s2">&quot;false&quot;</span>
</pre></div>
</div>
<p>Another option would be to store the configuration file outside of the container and edit it directly.</p>
<div class="section" id="custom-configuration-files">
<h5>Custom configuration files<a class="headerlink" href="#custom-configuration-files" title="Permalink to this headline">¶</a></h5>
<p>Instead of using a long list of environment variables to configure Graylog (see <a class="reference internal" href="#configuration"><span class="std std-ref">Configuration</span></a>), you can also overwrite the bundled Graylog configuration files.</p>
<p>The bundled configuration files are stored in <code class="docutils literal notranslate"><span class="pre">/usr/share/graylog/data/config/</span></code> inside the Docker container.</p>
<p>Create the new configuration directory next to the <code class="docutils literal notranslate"><span class="pre">docker-compose.yml</span></code> file and copy the default files from GitHub:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkdir -p ./graylog/config
$ cd ./graylog/config
$ wget https://raw.githubusercontent.com/Graylog2/graylog-docker/3.0/config/graylog.conf
$ wget https://raw.githubusercontent.com/Graylog2/graylog-docker/3.0/config/log4j2.xml
</pre></div>
</div>
<p>The newly created directory <code class="docutils literal notranslate"><span class="pre">./graylog/config/</span></code> with the custom configuration files now has to be mounted into the Graylog Docker container.</p>
<p>This can be done by adding an entry to the <a class="reference external" href="https://docs.docker.com/compose/compose-file/#volume-configuration-reference">volumes</a> section of the <code class="docutils literal notranslate"><span class="pre">docker-compose.yml</span></code> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">version</span><span class="p">:</span> <span class="s1">&#39;2&#39;</span>
<span class="n">services</span><span class="p">:</span>
  <span class="n">mongodb</span><span class="p">:</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">mongo</span><span class="p">:</span><span class="mi">3</span>
    <span class="c1"># Other settings [...]</span>
  <span class="n">elasticsearch</span><span class="p">:</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">docker</span><span class="o">.</span><span class="n">elastic</span><span class="o">.</span><span class="n">co</span><span class="o">/</span><span class="n">elasticsearch</span><span class="o">/</span><span class="n">elasticsearch</span><span class="o">-</span><span class="n">oss</span><span class="p">:</span><span class="mf">6.6</span><span class="o">.</span><span class="mi">1</span>
    <span class="c1"># Other settings [...]</span>
  <span class="n">graylog</span><span class="p">:</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">graylog</span><span class="o">/</span><span class="n">graylog</span><span class="p">:</span><span class="mf">3.0</span>
    <span class="c1"># Other settings [...]</span>
    <span class="n">volumes</span><span class="p">:</span>
      <span class="c1"># Mount local configuration directory into Docker container</span>
      <span class="o">-</span> <span class="o">./</span><span class="n">graylog</span><span class="o">/</span><span class="n">config</span><span class="p">:</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">graylog</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">config</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="persisting-data">
<span id="id2"></span><h4>Persisting data<a class="headerlink" href="#persisting-data" title="Permalink to this headline">¶</a></h4>
<p>In order to make the recorded data persistent, you can use external volumes to store all data.</p>
<p>In case of a container restart, this will simply re-use the existing data from the former instances.</p>
<p>Using Docker volumes for the data of MongoDB, Elasticsearch, and Graylog, the <code class="docutils literal notranslate"><span class="pre">docker-compose.yml</span></code> file looks as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">version</span><span class="p">:</span> <span class="s1">&#39;2&#39;</span>
<span class="n">services</span><span class="p">:</span>
  <span class="c1"># MongoDB: https://hub.docker.com/_/mongo/</span>
  <span class="n">mongodb</span><span class="p">:</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">mongo</span><span class="p">:</span><span class="mi">3</span>
    <span class="n">volumes</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">mongo_data</span><span class="p">:</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">db</span>
  <span class="c1"># Elasticsearch: https://www.elastic.co/guide/en/elasticsearch/reference/5.6/docker.html</span>
  <span class="n">elasticsearch</span><span class="p">:</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">docker</span><span class="o">.</span><span class="n">elastic</span><span class="o">.</span><span class="n">co</span><span class="o">/</span><span class="n">elasticsearch</span><span class="o">/</span><span class="n">elasticsearch</span><span class="o">-</span><span class="n">oss</span><span class="p">:</span><span class="mf">6.6</span><span class="o">.</span><span class="mi">1</span>
    <span class="n">volumes</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">es_data</span><span class="p">:</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">elasticsearch</span><span class="o">/</span><span class="n">data</span>
    <span class="n">environment</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">http</span><span class="o">.</span><span class="n">host</span><span class="o">=</span><span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span>
      <span class="o">-</span> <span class="n">transport</span><span class="o">.</span><span class="n">host</span><span class="o">=</span><span class="n">localhost</span>
      <span class="o">-</span> <span class="n">network</span><span class="o">.</span><span class="n">host</span><span class="o">=</span><span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span>
      <span class="o">-</span> <span class="s2">&quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;</span>
    <span class="n">ulimits</span><span class="p">:</span>
      <span class="n">memlock</span><span class="p">:</span>
        <span class="n">soft</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">hard</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>
    <span class="n">mem_limit</span><span class="p">:</span> <span class="mi">1</span><span class="n">g</span>
  <span class="c1"># Graylog: https://hub.docker.com/r/graylog/graylog/</span>
  <span class="n">graylog</span><span class="p">:</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">graylog</span><span class="o">/</span><span class="n">graylog</span><span class="p">:</span><span class="mf">3.0</span>
    <span class="n">volumes</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">graylog_journal</span><span class="p">:</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">graylog</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">journal</span>
    <span class="n">environment</span><span class="p">:</span>
      <span class="c1"># CHANGE ME (must be at least 16 characters)!</span>
      <span class="o">-</span> <span class="n">GRAYLOG_PASSWORD_SECRET</span><span class="o">=</span><span class="n">somepasswordpepper</span>
      <span class="c1"># Password: admin</span>
      <span class="o">-</span> <span class="n">GRAYLOG_ROOT_PASSWORD_SHA2</span><span class="o">=</span><span class="mi">8</span><span class="n">c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918</span>
      <span class="o">-</span> <span class="n">GRAYLOG_HTTP_EXTERNAL_URI</span><span class="o">=</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">9000</span><span class="o">/</span>
    <span class="n">links</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">mongodb</span><span class="p">:</span><span class="n">mongo</span>
      <span class="o">-</span> <span class="n">elasticsearch</span>
    <span class="n">depends_on</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">mongodb</span>
      <span class="o">-</span> <span class="n">elasticsearch</span>
    <span class="n">ports</span><span class="p">:</span>
      <span class="c1"># Graylog web interface and REST API</span>
      <span class="o">-</span> <span class="mi">9000</span><span class="p">:</span><span class="mi">9000</span>
      <span class="c1"># Syslog TCP</span>
      <span class="o">-</span> <span class="mi">1514</span><span class="p">:</span><span class="mi">1514</span>
      <span class="c1"># Syslog UDP</span>
      <span class="o">-</span> <span class="mi">1514</span><span class="p">:</span><span class="mi">1514</span><span class="o">/</span><span class="n">udp</span>
      <span class="c1"># GELF TCP</span>
      <span class="o">-</span> <span class="mi">12201</span><span class="p">:</span><span class="mi">12201</span>
      <span class="c1"># GELF UDP</span>
      <span class="o">-</span> <span class="mi">12201</span><span class="p">:</span><span class="mi">12201</span><span class="o">/</span><span class="n">udp</span>
<span class="c1"># Volumes for persisting data, see https://docs.docker.com/engine/admin/volumes/volumes/</span>
<span class="n">volumes</span><span class="p">:</span>
  <span class="n">mongo_data</span><span class="p">:</span>
    <span class="n">driver</span><span class="p">:</span> <span class="n">local</span>
  <span class="n">es_data</span><span class="p">:</span>
    <span class="n">driver</span><span class="p">:</span> <span class="n">local</span>
  <span class="n">graylog_journal</span><span class="p">:</span>
    <span class="n">driver</span><span class="p">:</span> <span class="n">local</span>
</pre></div>
</div>
<p>Start all services with exposed data directories:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker-compose up
</pre></div>
</div>
</div>
<div class="section" id="plugins">
<h4>Plugins<a class="headerlink" href="#plugins" title="Permalink to this headline">¶</a></h4>
<p>In order to add plugins you can build a new image based on the existing <a class="reference external" href="https://hub.docker.com/r/graylog/graylog/">graylog/graylog</a> Docker image with the needed plugin included or you add a volume that points to the locally downloaded plugin file.</p>
<div class="section" id="new-docker-image">
<h5>New Docker image<a class="headerlink" href="#new-docker-image" title="Permalink to this headline">¶</a></h5>
<p>Simply create a new <a class="reference external" href="https://docs.docker.com/engine/reference/builder/">Dockerfile</a> in an empty directory with the following contents:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FROM</span> <span class="n">graylog</span><span class="o">/</span><span class="n">graylog</span><span class="p">:</span><span class="mf">3.0</span>
<span class="n">RUN</span> <span class="n">wget</span> <span class="o">-</span><span class="n">O</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">graylog</span><span class="o">/</span><span class="n">plugin</span><span class="o">/</span><span class="n">graylog</span><span class="o">-</span><span class="n">plugin</span><span class="o">-</span><span class="n">auth</span><span class="o">-</span><span class="n">sso</span><span class="o">-</span><span class="mf">3.0</span><span class="o">.</span><span class="mf">0.</span><span class="n">jar</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">Graylog2</span><span class="o">/</span><span class="n">graylog</span><span class="o">-</span><span class="n">plugin</span><span class="o">-</span><span class="n">auth</span><span class="o">-</span><span class="n">sso</span><span class="o">/</span><span class="n">releases</span><span class="o">/</span><span class="n">download</span><span class="o">/</span><span class="mf">3.0</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">graylog</span><span class="o">-</span><span class="n">plugin</span><span class="o">-</span><span class="n">auth</span><span class="o">-</span><span class="n">sso</span><span class="o">-</span><span class="mf">3.0</span><span class="o">.</span><span class="mf">0.</span><span class="n">jar</span>
</pre></div>
</div>
<p>Build a new image from the new <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> (also see <a class="reference external" href="https://docs.docker.com/engine/reference/commandline/build/">docker build</a>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker build -t graylog-with-sso-plugin .
</pre></div>
</div>
<p>In this example, we created a new image with the <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-auth-sso">SSO plugin</a> installed. From now on reference to the newly built image instead of <a class="reference external" href="https://hub.docker.com/r/graylog/graylog/">graylog/graylog</a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">docker-compose.yml</span></code> file has to reference the new Docker image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">version</span><span class="p">:</span> <span class="s1">&#39;2&#39;</span>
<span class="n">services</span><span class="p">:</span>
  <span class="n">mongo</span><span class="p">:</span>
    <span class="n">image</span><span class="p">:</span> <span class="s2">&quot;mongo:3&quot;</span>
    <span class="c1"># Other settings [...]</span>
  <span class="n">elasticsearch</span><span class="p">:</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">docker</span><span class="o">.</span><span class="n">elastic</span><span class="o">.</span><span class="n">co</span><span class="o">/</span><span class="n">elasticsearch</span><span class="o">/</span><span class="n">elasticsearch</span><span class="o">-</span><span class="n">oss</span><span class="p">:</span><span class="mf">6.6</span><span class="o">.</span><span class="mi">1</span>
    <span class="c1"># Other settings [...]</span>
  <span class="n">graylog</span><span class="p">:</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">graylog</span><span class="o">-</span><span class="k">with</span><span class="o">-</span><span class="n">sso</span><span class="o">-</span><span class="n">plugin</span>
    <span class="c1"># Other settings [...]</span>
</pre></div>
</div>
</div>
<div class="section" id="volume-mounted-plugin">
<h5>Volume-mounted plugin<a class="headerlink" href="#volume-mounted-plugin" title="Permalink to this headline">¶</a></h5>
<p>Instead of building a new docker image, you can also add additional plugins by mounting them directly and individually into the <code class="docutils literal notranslate"><span class="pre">plugin</span></code> folder of the original Docker image. This way, you don’t have to create a new docker image every time you want to add a new plugin (or remove an old one).</p>
<p>Simply create a <code class="docutils literal notranslate"><span class="pre">plugin</span></code> folder, download the plugin(s) you want to install into it and mount each file as an additional volume into the docker container:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkdir -p ./graylog/plugin
$ wget -O ./graylog/plugin/graylog-plugin-auth-sso-2.3.0.jar https://github.com/Graylog2/graylog-plugin-auth-sso/releases/download/2.3.0/graylog-plugin-auth-sso-2.3.0.jar
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">docker-compose.yml</span></code> file has to reference the new Docker image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">version</span><span class="p">:</span> <span class="s1">&#39;2&#39;</span>
<span class="n">services</span><span class="p">:</span>
  <span class="n">mongo</span><span class="p">:</span>
    <span class="n">image</span><span class="p">:</span> <span class="s2">&quot;mongo:3&quot;</span>
    <span class="c1"># Other settings [...]</span>
  <span class="n">elasticsearch</span><span class="p">:</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">docker</span><span class="o">.</span><span class="n">elastic</span><span class="o">.</span><span class="n">co</span><span class="o">/</span><span class="n">elasticsearch</span><span class="o">/</span><span class="n">elasticsearch</span><span class="o">-</span><span class="n">oss</span><span class="p">:</span><span class="mf">6.6</span><span class="o">.</span><span class="mi">1</span>
    <span class="c1"># Other settings [...]</span>
  <span class="n">graylog</span><span class="p">:</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">graylog</span><span class="o">/</span><span class="n">graylog</span><span class="p">:</span><span class="mf">3.0</span>
    <span class="c1"># Other settings [...]</span>
    <span class="n">volumes</span><span class="p">:</span>
      <span class="c1"># Mount local plugin file into Docker container</span>
      <span class="o">-</span> <span class="o">./</span><span class="n">graylog</span><span class="o">/</span><span class="n">plugin</span><span class="o">/</span><span class="n">graylog</span><span class="o">-</span><span class="n">plugin</span><span class="o">-</span><span class="n">auth</span><span class="o">-</span><span class="n">sso</span><span class="o">-</span><span class="mf">2.3</span><span class="o">.</span><span class="mf">0.</span><span class="n">jar</span><span class="p">:</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">graylog</span><span class="o">/</span><span class="n">plugin</span><span class="o">/</span><span class="n">graylog</span><span class="o">-</span><span class="n">plugin</span><span class="o">-</span><span class="n">auth</span><span class="o">-</span><span class="n">sso</span><span class="o">-</span><span class="mf">2.3</span><span class="o">.</span><span class="mf">0.</span><span class="n">jar</span>
</pre></div>
</div>
<p>You can add as many of these links as you wish in your <code class="docutils literal notranslate"><span class="pre">docker-compose.yml</span></code> file. Simply restart the container and docker will recreate the graylog container with the new volumes included:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker-compose restart
</pre></div>
</div>
</div>
</div>
<div class="section" id="kubernetes-automatic-master-selection">
<h4>Kubernetes automatic master selection<a class="headerlink" href="#kubernetes-automatic-master-selection" title="Permalink to this headline">¶</a></h4>
<p>Running Graylog in Kubernetes opens the challenge to set the <code class="docutils literal notranslate"><span class="pre">is_master=true</span></code> setting only for one node in the cluster. The problem can be solved by calculating the name of the pod if Graylog is running in a stafeful set with the following environment variable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">env</span><span class="p">:</span>
<span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">POD_NAME</span>
  <span class="n">valueFrom</span><span class="p">:</span>
    <span class="n">fieldRef</span><span class="p">:</span>
      <span class="n">fieldPath</span><span class="p">:</span> <span class="n">metadata</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<p>For a stateful set, the name of the first pod in a cluster always ends with <code class="docutils literal notranslate"><span class="pre">-0</span></code>. See the <a class="reference external" href="https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/#pod-identity">Documentation about stateful set</a> . The master selection mechanism in docker-entrypoint.sh file does the following:</p>
<ul class="simple">
<li>Examine if Graylog is running inside Kubernetes</li>
<li>Verify that the pod name ends in <code class="docutils literal notranslate"><span class="pre">-0</span></code></li>
<li>Set <code class="docutils literal notranslate"><span class="pre">is_master=true</span></code> for this container</li>
</ul>
</div>
<div class="section" id="troubleshooting">
<h4>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first">In case you see warnings regarding open file limit, try to set ulimit from the outside of the container:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run --ulimit nofile=64000:64000 ...
</pre></div>
</div>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">devicemapper</span></code> storage driver can produce problems with Graylogs disk journal on some systems.
In this case please <a class="reference external" href="https://docs.docker.com/engine/userguide/storagedriver/selectadriver">pick another driver</a> like <code class="docutils literal notranslate"><span class="pre">aufs</span></code> or <code class="docutils literal notranslate"><span class="pre">overlay</span></code>.</p>
</li>
</ul>
</div>
<div class="section" id="testing-a-beta-version">
<h4>Testing a beta version<a class="headerlink" href="#testing-a-beta-version" title="Permalink to this headline">¶</a></h4>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">We only recommend running pre-release versions if you are an experienced Graylog user and know what you are doing.</p>
</div>
<p>You can also run a pre-release (alpha, beta, or release candidate) version of Graylog using Docker.</p>
<p>The pre-releases are tagged in the <a class="reference external" href="https://hub.docker.com/r/graylog/graylog/">graylog/graylog</a> Docker image.</p>
<p>Follow the <a class="reference external" href="https://hub.docker.com/r/graylog/graylog/">documentation for the Graylog image on Docker Hub</a> and pick an alpha/beta/rc tag like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run --link mongo --link elasticsearch -p 9000:9000 -p 12201:12201 -p 1514:1514 \
    -e GRAYLOG_HTTP_BIND_ADDRESS=&quot;127.0.0.1:9000&quot; \
    -d graylog/graylog:3.0.0-beta.3-1
</pre></div>
</div>
</div>
</div>
<span id="document-pages/installation/aws"></span><div class="section" id="amazon-web-services">
<span id="ami"></span><h3>Amazon Web Services<a class="headerlink" href="#amazon-web-services" title="Permalink to this headline">¶</a></h3>
<div class="section" id="amis">
<h4>AMIs<a class="headerlink" href="#amis" title="Permalink to this headline">¶</a></h4>
<p>Select your <a class="reference external" href="https://github.com/Graylog2/graylog2-images/tree/3.0/aws">AMI and AWS Region</a>.</p>
</div>
<div class="section" id="usage">
<h4>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Click on <em>Launch instance</em> for your AWS region to start Graylog into.</li>
<li>Choose an instance type <strong>with at least 4GB memory</strong>.</li>
<li>Finish the wizard and spin up the VM.</li>
<li>Open port 80 and 22 in the applied security group to access the web interface.</li>
<li>Login to the instance via SSH as user <cite>ubuntu</cite> to see web login credentials.</li>
<li>additionally open more ports for ingesting log data, like 514 for syslog or 12201 for the GELF protocol.</li>
</ul>
</div></blockquote>
<p>Open <cite>http://&lt;private ip&gt;</cite> in your browser to access the Graylog web interface. Default username is <cite>admin</cite>
with the password shown on the first SSH login.</p>
</div>
<div class="section" id="networking">
<h4>Networking<a class="headerlink" href="#networking" title="Permalink to this headline">¶</a></h4>
<p>Your browser needs access to port 80 for reaching the web interface. Make sure that a security group is opening that
port. On the appliance a NGINX instance is used as proxy to simplify network access. Take a look
in the configuration <cite>/etc/nginx/sites-available/default</cite> for further fine tuning.</p>
</div>
<div class="section" id="https">
<h4>HTTPS<a class="headerlink" href="#https" title="Permalink to this headline">¶</a></h4>
<p>In order to enable HTTPS for the web interface port 443 needs also be open. The configuration can be done with NGINX
as well. See <a class="reference internal" href="index.html#ssl-setup"><span class="std std-ref">Using HTTPS</span></a> for a full reference.</p>
</div>
<div class="section" id="basic-configuration">
<h4>Basic configuration<a class="headerlink" href="#basic-configuration" title="Permalink to this headline">¶</a></h4>
<p>The Graylog appliance is based on Ubuntu system packages so all configuration changes can be done analog to the rest of
this documentation. See <a class="reference internal" href="index.html#graylog-configuration"><span class="std std-ref">Configuring Graylog</span></a></p>
</div>
<div class="section" id="production-readiness">
<h4>Production readiness<a class="headerlink" href="#production-readiness" title="Permalink to this headline">¶</a></h4>
<p>The Graylog appliance is not created to provide a production ready solution. It is build to offer a fast and easy way to try the software itself and not wasting time to install Graylog and it components to any kind of server.</p>
</div>
</div>
<span id="document-pages/installation/windows"></span><div class="section" id="microsoft-windows">
<h3>Microsoft Windows<a class="headerlink" href="#microsoft-windows" title="Permalink to this headline">¶</a></h3>
<p>Unfortunately there is no supported way to run Graylog on Microsoft
Windows operating systems even though all parts run on the Java Virtual
Machine. We recommend to run the <a class="reference internal" href="index.html#virtual-machine-appliances"><span class="std std-ref">virtual machine appliances</span></a>  on a Windows host. It should be technically
possible to run Graylog on Windows but it is most probably not worth the time
to work your way around the cliffs.</p>
<p>Should you require running Graylog on Windows, you need to disable the message
journal in <code class="docutils literal notranslate"><span class="pre">graylog-server</span></code> by changing the following setting in the
<code class="docutils literal notranslate"><span class="pre">graylog.conf</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">message_journal_enabled</span> <span class="o">=</span> <span class="n">false</span>
</pre></div>
</div>
<p>Due to restrictions of how Windows handles file locking the journal will not
work correctly.</p>
<p><strong>Please note that this impacts Graylog’s ability to buffer messages, so we
strongly recommend running Graylog on Linux. Consider a Linux virtual machine
on a Windows host. Graylog setups on Windows are no fun and not officially
supported.</strong></p>
</div>
<span id="document-pages/installation/manual_setup"></span><div class="section" id="manual-setup">
<h3>Manual Setup<a class="headerlink" href="#manual-setup" title="Permalink to this headline">¶</a></h3>
<div class="section" id="graylog-server-on-linux">
<h4>Graylog server on Linux<a class="headerlink" href="#graylog-server-on-linux" title="Permalink to this headline">¶</a></h4>
<div class="section" id="prerequisites">
<h5>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h5>
<p>Graylog depends on MongoDB and Elasticsearch to operate, please refer to <a class="reference internal" href="index.html#system-requirements"><span class="std std-ref">the system requirements</span></a> for details.</p>
</div>
<div class="section" id="downloading-and-extracting-the-server">
<h5>Downloading and extracting the server<a class="headerlink" href="#downloading-and-extracting-the-server" title="Permalink to this headline">¶</a></h5>
<p>Download the tar archive from the <a class="reference external" href="https://www.graylog.org/downloads/">download pages</a> and extract it on your system:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>~$ tar xvfz graylog-VERSION.tgz
~$ cd graylog-VERSION
</pre></div>
</div>
</div>
<div class="section" id="configuration">
<h5>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h5>
<p>Now copy the example configuration file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">~</span><span class="c1"># cp graylog.conf.example /etc/graylog/server/server.conf</span>
</pre></div>
</div>
<p>You can leave most variables as they are for a first start. All of them should be well documented.</p>
<p>Configure at least the following variables in <code class="docutils literal notranslate"><span class="pre">/etc/graylog/server/server.conf</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">is_master</span> <span class="pre">=</span> <span class="pre">true</span></code></dt>
<dd><ul class="first last">
<li>Set only one <code class="docutils literal notranslate"><span class="pre">graylog-server</span></code> node as the master. This node will perform periodical and maintenance actions that slave nodes won’t.
Every slave node will accept messages just as the master nodes. Nodes will fall back to slave mode if there already is a master in the
cluster.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">password_secret</span></code></dt>
<dd><ul class="first last">
<li>You must set a secret that is used for password encryption and salting here. The server will refuse to start if it’s not set. Generate
a secret with for example <code class="docutils literal notranslate"><span class="pre">pwgen</span> <span class="pre">-N</span> <span class="pre">1</span> <span class="pre">-s</span> <span class="pre">96</span></code>.  If you run multiple <code class="docutils literal notranslate"><span class="pre">graylog-server</span></code> nodes, make sure you use the same
<code class="docutils literal notranslate"><span class="pre">password_secret</span></code> for all of them!</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">root_password_sha2</span></code></dt>
<dd><ul class="first last">
<li>A SHA2 hash of a password you will use for your initial login. Set this to a SHA2 hash generated with <code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">-n</span> <span class="pre">&quot;Enter</span> <span class="pre">Password:</span> <span class="pre">&quot;</span> <span class="pre">&amp;&amp;</span> <span class="pre">head</span> <span class="pre">-1</span> <span class="pre">&lt;/dev/stdin</span> <span class="pre">|</span> <span class="pre">tr</span> <span class="pre">-d</span> <span class="pre">'\n'</span> <span class="pre">|</span> <span class="pre">sha256sum</span> <span class="pre">|</span> <span class="pre">cut</span> <span class="pre">-d&quot;</span> <span class="pre">&quot;</span> <span class="pre">-f1</span></code>
and you will be able to log in to the web interface with username <strong>admin</strong> and password <strong>yourpassword</strong>.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_hosts</span></code></dt>
<dd><ul class="first last">
<li>List of Elasticsearch hosts Graylog should connect to.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">mongodb_uri</span></code></dt>
<dd><ul class="first last">
<li>Enter your MongoDB connection and authentication information here.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="starting-the-server">
<h5>Starting the server<a class="headerlink" href="#starting-the-server" title="Permalink to this headline">¶</a></h5>
<p>You need to have Java installed. Running the OpenJDK is totally fine and should be available on all platforms. For example on Debian it is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>~$ apt-get install openjdk-8-jre
</pre></div>
</div>
<p>Start the server:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>~$ cd bin/
~$ ./graylogctl start
</pre></div>
</div>
<p>The server will try to write a <code class="docutils literal notranslate"><span class="pre">node_id</span></code> to the <code class="docutils literal notranslate"><span class="pre">graylog-server-node-id</span></code> file. It won’t start if it can’t write there because of for
example missing permissions.</p>
<p>See the startup parameters description below to learn more about available startup parameters. Note that you might have to be <cite>root</cite>
to bind to the popular port 514 for syslog inputs.</p>
<p>You should see a line like this in the debug output of Graylog successfully connected to your Elasticsearch cluster:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2013</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">01</span> <span class="mi">12</span><span class="p">:</span><span class="mi">13</span><span class="p">:</span><span class="mi">22</span><span class="p">,</span><span class="mi">382</span> <span class="n">DEBUG</span><span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">elasticsearch</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">netty</span> <span class="o">-</span> <span class="p">[</span><span class="n">graylog</span><span class="o">-</span><span class="n">server</span><span class="p">]</span> <span class="n">connected</span> <span class="n">to</span> <span class="n">node</span> <span class="p">[[</span><span class="n">Unuscione</span><span class="p">,</span> <span class="n">Angelo</span><span class="p">][</span><span class="n">thN_gIBkQDm2ab7k</span><span class="o">-</span><span class="mi">2</span><span class="n">Zaaw</span><span class="p">][</span><span class="n">inet</span><span class="p">[</span><span class="o">/</span><span class="mf">10.37</span><span class="o">.</span><span class="mf">160.227</span><span class="p">:</span><span class="mi">9300</span><span class="p">]]]</span>
</pre></div>
</div>
<p>You can find the logs of Graylog in the directory <code class="docutils literal notranslate"><span class="pre">logs/</span></code>.</p>
<p><strong>Important:</strong> All systems running Graylog must have synchronised system time. We strongly recommend to use
<a class="reference external" href="http://en.wikipedia.org/wiki/Network_Time_Protocol">NTP</a> or similar mechanisms on all machines of your Graylog infrastructure.</p>
</div>
<div class="section" id="supplying-external-logging-configuration">
<h5>Supplying external logging configuration<a class="headerlink" href="#supplying-external-logging-configuration" title="Permalink to this headline">¶</a></h5>
<p>Graylog is using <a class="reference external" href="https://logging.apache.org/log4j/2.x/">Apache Log4j 2</a> for its internal logging and ships with a
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/blob/3.0/graylog2-server/src/main/resources/log4j2.xml">default log configuration file</a>
which is embedded within the shipped JAR.</p>
<p>In case you need to modify Graylog’s logging configuration, you can supply a Java system property specifying the path to
the configuration file in your start script (e. g. <code class="docutils literal notranslate"><span class="pre">graylogctl</span></code>).</p>
<p>Append this before the <code class="docutils literal notranslate"><span class="pre">-jar</span></code> parameter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">Dlog4j</span><span class="o">.</span><span class="n">configurationFile</span><span class="o">=</span><span class="n">file</span><span class="p">:</span><span class="o">///</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">log4j2</span><span class="o">.</span><span class="n">xml</span>
</pre></div>
</div>
<p>Substitute the actual path to the file for the <code class="docutils literal notranslate"><span class="pre">/path/to/log4j2.xml</span></code> in the example.</p>
<p>In case you do not have a log rotation system already in place, you can also configure Graylog to rotate logs based on their size to prevent the
log files to grow without bounds using the <a class="reference external" href="https://logging.apache.org/log4j/2.x/manual/appenders.html#RollingFileAppender">RollingFileAppender</a>.</p>
<p>One such example <code class="docutils literal notranslate"><span class="pre">log4j2.xml</span></code> configuration is shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration packages=&quot;org.graylog2.log4j&quot; shutdownHook=&quot;disable&quot;&gt;
  &lt;Appenders&gt;
      &lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;/tmp/logs/graylog.log&quot;
                   filePattern=&quot;/tmp/logs/graylog-%d{yyyy-MM-dd}.log.gz&quot;&gt;
        &lt;PatternLayout&gt;
          &lt;Pattern&gt;%d %-5p: %c - %m%n&lt;/Pattern&gt;
        &lt;/PatternLayout&gt;
        &lt;!-- Rotate logs every day or when the size exceeds 10 MB (whichever comes first) --&gt;
        &lt;Policies&gt;
          &lt;TimeBasedTriggeringPolicy modulate=&quot;true&quot;/&gt;
          &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;
        &lt;/Policies&gt;
        &lt;!-- Keep a maximum of 10 log files --&gt;
        &lt;DefaultRolloverStrategy max=&quot;10&quot;/&gt;
      &lt;/RollingFile&gt;

      &lt;Console name=&quot;STDOUT&quot; target=&quot;SYSTEM_OUT&quot;&gt;
          &lt;PatternLayout pattern=&quot;%d %-5p: %c - %m%n&quot;/&gt;
      &lt;/Console&gt;

      &lt;!-- Internal Graylog log appender. Please do not disable. This makes internal log messages available via REST calls. --&gt;
      &lt;Memory name=&quot;graylog-internal-logs&quot; bufferSize=&quot;500&quot;/&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
      &lt;Logger name=&quot;org.graylog2&quot; level=&quot;info&quot;/&gt;
      &lt;Logger name=&quot;com.github.joschi.jadconfig&quot; level=&quot;warn&quot;/&gt;
      &lt;Logger name=&quot;org.apache.directory.api.ldap.model.message.BindRequestImpl&quot; level=&quot;error&quot;/&gt;
      &lt;Logger name=&quot;org.elasticsearch.script&quot; level=&quot;warn&quot;/&gt;
      &lt;Logger name=&quot;org.graylog2.periodical.VersionCheckThread&quot; level=&quot;off&quot;/&gt;
      &lt;Logger name=&quot;com.joestelmach.natty.Parser&quot; level=&quot;warn&quot;/&gt;
      &lt;Logger name=&quot;kafka.log.Log&quot; level=&quot;warn&quot;/&gt;
      &lt;Logger name=&quot;kafka.log.OffsetIndex&quot; level=&quot;warn&quot;/&gt;
      &lt;Logger name=&quot;org.apache.shiro.session.mgt.AbstractValidatingSessionManager&quot; level=&quot;warn&quot;/&gt;
      &lt;Root level=&quot;warn&quot;&gt;
          &lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;
          &lt;AppenderRef ref=&quot;RollingFile&quot;/&gt;
          &lt;AppenderRef ref=&quot;graylog-internal-logs&quot;/&gt;
      &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;
</pre></div>
</div>
</div>
<div class="section" id="command-line-cli-parameters">
<h5>Command line (CLI) parameters<a class="headerlink" href="#command-line-cli-parameters" title="Permalink to this headline">¶</a></h5>
<p>There are a number of CLI parameters you can pass to the call in your <code class="docutils literal notranslate"><span class="pre">graylogctl</span></code> script:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-h</span></code>, <code class="docutils literal notranslate"><span class="pre">--help</span></code>: Show help message</li>
<li><code class="docutils literal notranslate"><span class="pre">-f</span> <span class="pre">CONFIGFILE</span></code>, <code class="docutils literal notranslate"><span class="pre">--configfile</span> <span class="pre">CONFIGFILE</span></code>: Use configuration file <code class="docutils literal notranslate"><span class="pre">CONFIGFILE</span></code> for Graylog; default: <code class="docutils literal notranslate"><span class="pre">/etc/graylog/server/server.conf</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">-d</span></code>, <code class="docutils literal notranslate"><span class="pre">--debug</span></code>: Run in debug mode</li>
<li><code class="docutils literal notranslate"><span class="pre">-l</span></code>, <code class="docutils literal notranslate"><span class="pre">--local</span></code>: Run in local mode. Automatically invoked if in debug mode. Will not send system statistics, even if enabled and allowed. Only interesting for development and testing purposes.</li>
<li><code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">PIDFILE</span></code>, <code class="docutils literal notranslate"><span class="pre">--pidfile</span> <span class="pre">PIDFILE</span></code>: Set the file containing the PID of graylog to <code class="docutils literal notranslate"><span class="pre">PIDFILE</span></code>; default: <code class="docutils literal notranslate"><span class="pre">/tmp/graylog.pid</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">-np</span></code>, <code class="docutils literal notranslate"><span class="pre">--no-pid-file</span></code>: Do not write PID file (overrides <code class="docutils literal notranslate"><span class="pre">-p</span></code>/<code class="docutils literal notranslate"><span class="pre">--pidfile</span></code>)</li>
<li><code class="docutils literal notranslate"><span class="pre">--version</span></code>: Show version of Graylog and exit</li>
</ul>
</div>
<div class="section" id="problems-with-ipv6-vs-ipv4">
<h5>Problems with IPv6 vs. IPv4?<a class="headerlink" href="#problems-with-ipv6-vs-ipv4" title="Permalink to this headline">¶</a></h5>
<p>If your Graylog node refuses to listen on IPv4 addresses and always chooses for example a <code class="docutils literal notranslate"><span class="pre">http_bind_address</span></code> like <code class="docutils literal notranslate"><span class="pre">:::9000</span></code>
you can tell the JVM to prefer the IPv4 stack.</p>
<p>Add the <code class="docutils literal notranslate"><span class="pre">java.net.preferIPv4Stack</span></code> flag in your <code class="docutils literal notranslate"><span class="pre">graylogctl</span></code> script or from wherever you are calling the <code class="docutils literal notranslate"><span class="pre">graylog.jar</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>~$ sudo -u graylog java -Djava.net.preferIPv4Stack=true -jar graylog.jar
</pre></div>
</div>
</div>
<div class="section" id="create-a-message-input-and-send-a-first-message">
<h5>Create a message input and send a first message<a class="headerlink" href="#create-a-message-input-and-send-a-first-message" title="Permalink to this headline">¶</a></h5>
<p>Log in to the web interface on port 9000 (e.g. <code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:9000</span></code>) and navigate to <em>System</em> -&gt; <em>Inputs</em>.</p>
<img alt="_images/create_input.png" src="http://res.fansdoc.com/graylog/_images/create_input.png" />
<p>Launch a new <em>Raw/Plaintext UDP</em> input, listening on <code class="docutils literal notranslate"><span class="pre">127.0.0.1</span></code> on port <code class="docutils literal notranslate"><span class="pre">9099</span></code>. There’s no need to configure anything else for now.</p>
<p>The list of running inputs on that node should show you your new input right away.</p>
<p>Let’s send a message in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="s2">&quot;Hello Graylog, let&#39;s be friends.&quot;</span> <span class="o">|</span> <span class="n">nc</span> <span class="o">-</span><span class="n">w</span> <span class="mi">1</span> <span class="o">-</span><span class="n">u</span> <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span> <span class="mi">9099</span>
</pre></div>
</div>
<p>This has sent a short string to the raw UDP input you just opened. Now search for <em>friends</em> using the search bar on the top and you should already
see the message you just sent in. Click on it in the table and see it in detail:</p>
<img alt="_images/setup_1.png" src="http://res.fansdoc.com/graylog/_images/setup_1.png" />
<p>You have just sent your first message to Graylog! Why not spawn a syslog input and point some of your servers to it? You could also create some user
accounts for your colleagues.</p>
</div>
</div>
</div>
</div>
<div class="section" id="system-requirements">
<span id="id1"></span><h3>System requirements<a class="headerlink" href="#system-requirements" title="Permalink to this headline">¶</a></h3>
<p>The Graylog server application has the following prerequisites:</p>
<ul class="simple">
<li>Some modern Linux distribution (Debian Linux, Ubuntu Linux, or CentOS recommended)</li>
<li><a class="reference external" href="https://www.elastic.co/downloads/elasticsearch">Elasticsearch 5 or 6</a></li>
<li><a class="reference external" href="https://docs.mongodb.org/manual/administration/install-on-linux/">MongoDB 3.6 or later</a> (latest stable version is recommended)</li>
<li>Oracle Java SE 8 (OpenJDK 8 also works; latest stable update is recommended)</li>
</ul>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">Graylog prior to 2.3 <strong>does not</strong> work with Elasticsearch 5.x!</p>
</div>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">Graylog 3 <strong>does not</strong> work with Elasticsearch 7.x!</p>
</div>
</div>
</div>
<span id="document-pages/upgrade"></span><div class="section" id="upgrading-graylog">
<h2>Upgrading Graylog<a class="headerlink" href="#upgrading-graylog" title="Permalink to this headline">¶</a></h2>
<p>When upgrading from a previous version of Graylog you follow the previous used installation method (ex. from image or package) using the new version numbers.</p>
<p>The following Upgrade notes should be read carefully before you start the upgrade process. Breaking changes and dependency upgrades are documented in those upgrade notes.</p>
<p>You should always follow minor versions when updating across multiple versions to make sure necessary migrations are run correctly. The upgrade notes are always written coming from the stable release before.</p>
<div class="toctree-wrapper compound">
<span id="document-pages/upgrade/graylog-2.0"></span><div class="section" id="upgrading-to-graylog-2-0-x">
<span id="upgrade-notes-graylog-2-0"></span><h3>Upgrading to Graylog 2.0.x<a class="headerlink" href="#upgrading-to-graylog-2-0-x" title="Permalink to this headline">¶</a></h3>
<div class="section" id="elasticsearch-2-x">
<h4>Elasticsearch 2.x<a class="headerlink" href="#elasticsearch-2-x" title="Permalink to this headline">¶</a></h4>
<p>The embedded Elasticsearch node being used by Graylog has been upgraded to Elasticsearch 2.x which includes some breaking changes.
Graylog 2.x does not work with Elasticsearch 1.x anymore and cannot communicate with existing Elasticsearch 1.x clusters.</p>
<p>Please see <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.0/breaking-changes.html">Breaking changes in Elasticsearch 2.x</a> for details.</p>
<p>The blog article <a class="reference external" href="https://www.elastic.co/blog/key-point-to-be-aware-of-when-upgrading-from-elasticsearch-1-to-2">Key points to be aware of when upgrading from Elasticsearch 1.x to 2.x</a> also contains interesting information about the upgrade path from Elasticsearch 1.x to 2.x.</p>
<div class="section" id="multicast-discovery">
<h5>Multicast Discovery<a class="headerlink" href="#multicast-discovery" title="Permalink to this headline">¶</a></h5>
<p>Multicast discovery has been removed from Elasticsearch 2.x (although it is still provided as an Elasticsearch plugin for now).</p>
<p>To reflect this change, the <code class="docutils literal notranslate"><span class="pre">elasticsearch_discovery_zen_ping_unicast_hosts</span></code> now has to contain the address of at least one
Elasticsearch node in the cluster which Graylog can connect to.</p>
</div>
<div class="section" id="default-network-host">
<h5>Default network host<a class="headerlink" href="#default-network-host" title="Permalink to this headline">¶</a></h5>
<p>The network interface which Elasticsearch binds to (<code class="docutils literal notranslate"><span class="pre">elasticsearch_network_host</span></code>) has been changed to localhost (i. e. <code class="docutils literal notranslate"><span class="pre">127.0.0.1</span></code> or <code class="docutils literal notranslate"><span class="pre">::1</span></code>); see <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.0/breaking_20_network_changes.html#_bind_to_localhost">Network changes/Bind to localhost</a>.</p>
<p>If Elasticsearch is not running on the same machine, <code class="docutils literal notranslate"><span class="pre">elasticsearch_network_host</span></code> must be set to a host name or an IP address which can be accessed by the other Elasticsearch nodes in the cluster.</p>
</div>
<div class="section" id="index-range-types">
<h5>Index range types<a class="headerlink" href="#index-range-types" title="Permalink to this headline">¶</a></h5>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This step needs to be performed before the update to Elasticsearch 2.x!</p>
</div>
<p>Some Graylog versions stored meta information about indices in elasticsearch, alongside the messages themselves. Since Elasticsearch 2.0
having multiple types with conflicting mappings is no longer possible, which means that the <code class="docutils literal notranslate"><span class="pre">index_range</span></code> type must be removed before
upgrading to Elasticsearch 2.x.</p>
<p>Find out if your setup is affected by running (replace <code class="docutils literal notranslate"><span class="pre">$elasticsearch</span></code> with the address of one of your Elasticsearch nodes)
<code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-XGET</span> <span class="pre">$elasticsearch:9200/_all/_mapping/index_range;</span> <span class="pre">echo</span></code></p>
<p>If the output is <code class="docutils literal notranslate"><span class="pre">{}</span></code> you are not affected and can skip this step.</p>
<p>Otherwise, you need to delete the <code class="docutils literal notranslate"><span class="pre">index_range</span></code> type, Graylog does not use it anymore.</p>
<p>As Graylog sets older indices to read-only, first we need to remove the write block on those indices.
Since we’ll be working with Elasticsearch’s JSON output, we recommend installing the <code class="docutils literal notranslate"><span class="pre">jq</span></code> utility which should be
available on all popular package managers or directly at <a class="reference external" href="https://stedolan.github.io/jq/">GitHub</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>for i in `curl -s -XGET $elasticsearch:9200/_all/_mapping/index_range | jq -r &quot;keys[]&quot;`; do
    echo -n &quot;Updating index $i: &quot;
    echo -n &quot;curl -XPUT $elasticsearch:9200/$i/_settings -d &#39;{\&quot;index.blocks.read_only\&quot;:false, \&quot;index.blocks.write\&quot;:false}&#39; : &quot;
    curl -XPUT $elasticsearch:9200/$i/_settings -d &#39;{&quot;index.blocks.read_only&quot;:false, &quot;index.blocks.write&quot;:false}&#39;
    echo
done
</pre></div>
</div>
<p>The output for each of the curl commands should be <code class="docutils literal notranslate"><span class="pre">{&quot;acknowledged&quot;:true}</span></code>.
Next we have to delete the <code class="docutils literal notranslate"><span class="pre">index_range</span></code> mapping. We can perform this via the next command.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We strongly recommend to perform this on a single index before running this bulk command.
This operation can be expensive to perform if you have a lot of affected indices.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>for i in `curl -s -XGET $elasticsearch:9200/_all/_mapping/index_range | jq -r &quot;keys[]&quot;`; do
    echo -n &quot;Updating index $i: &quot;
    curl -XDELETE $elasticsearch:9200/$i/index_range
    echo
done
</pre></div>
</div>
<p>It is not strictly necessary to set the indices back to read only, but if you prefer to do that, note the index names and
commands during the first step and change the <code class="docutils literal notranslate"><span class="pre">false</span></code> into <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
</div>
<div class="section" id="graylog-index-template">
<h5>Graylog Index Template<a class="headerlink" href="#graylog-index-template" title="Permalink to this headline">¶</a></h5>
<p>Graylog applies a custom <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.0/indices-templates.html">index template</a> to ensure
that the indexed messages adhere to a specific schema.</p>
<p>Unfortunately the index template being used by Graylog 1.x is incompatible with Elasticsearch 2.x and has to be removed prior to upgrading.</p>
<p>In order to <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.0/indices-templates.html#delete">delete the index template</a> the
following curl command has to be issued against on of the Elasticsearch nodes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">DELETE</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">9200</span><span class="o">/</span><span class="n">_template</span><span class="o">/</span><span class="n">graylog</span><span class="o">-</span><span class="n">internal</span>
</pre></div>
</div>
<p>Graylog will automatically create the new index template on the next startup.</p>
</div>
<div class="section" id="dots-in-field-names">
<h5>Dots in field names<a class="headerlink" href="#dots-in-field-names" title="Permalink to this headline">¶</a></h5>
<p>One of the most important breaking changes in Elasticsearch 2.x is that
<a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.0/breaking_20_mapping_changes.html#_field_names_may_not_contain_dots">field names may not contain dots</a> anymore.</p>
<p>Using the <a class="reference external" href="https://github.com/elastic/elasticsearch-migration">Elasticsearch Migration Plugin</a> might help to highlight
some potential pitfalls if an existing Elasticsearch 1.x cluster should be upgraded to Elasticsearch 2.x.</p>
</div>
</div>
<div class="section" id="mongodb">
<h4>MongoDB<a class="headerlink" href="#mongodb" title="Permalink to this headline">¶</a></h4>
<p>Graylog 2.x requires MongoDB 2.4 or newer. We recommend using MongoDB 3.x and the
<a class="reference external" href="https://docs.mongodb.org/v3.2/core/wiredtiger/">WiredTiger storage engine</a>.</p>
<p>When upgrading from MongoDB 2.0 or 2.2 to a supported version, make sure to read the
<a class="reference external" href="https://docs.mongodb.org/manual/release-notes/">Release Notes</a> for the particular version.</p>
</div>
<div class="section" id="log4j-2-migration">
<h4>Log4j 2 migration<a class="headerlink" href="#log4j-2-migration" title="Permalink to this headline">¶</a></h4>
<p>Graylog switched its logging backend from <a class="reference external" href="https://logging.apache.org/log4j/1.2/">Log4j 1.2</a>
to <a class="reference external" href="https://logging.apache.org/log4j/2.x/">Log4j 2</a>.</p>
<p>Please refer to the <a class="reference external" href="https://logging.apache.org/log4j/2.x/manual/migration.html">Log4j Migration Guide</a> for information
on how to update your existing logging configuration.</p>
</div>
<div class="section" id="dead-letters-feature-removed">
<h4>Dead Letters feature removed<a class="headerlink" href="#dead-letters-feature-removed" title="Permalink to this headline">¶</a></h4>
<p>The Dead Letters feature, which stored messages that couldn’t be indexed into Elasticsearch for various reasons, has been removed.</p>
<p>This feature has been disabled by default. If you have enabled the feature the configuration file, please check the <code class="docutils literal notranslate"><span class="pre">dead_letters_enabled</span></code>
collection in MongoDB and remove it afterwards.</p>
</div>
<div class="section" id="removed-configuration-settings">
<h4>Removed configuration settings<a class="headerlink" href="#removed-configuration-settings" title="Permalink to this headline">¶</a></h4>
<div class="section" id="index-retention-and-rotation-settings">
<h5>Index Retention and Rotation Settings<a class="headerlink" href="#index-retention-and-rotation-settings" title="Permalink to this headline">¶</a></h5>
<p>In 2.0.0 the index rotation and retention settings have been moved from the Graylog server config file to the database and are
now configurable via the web interface.</p>
<p>The old settings from the <code class="docutils literal notranslate"><span class="pre">graylog.conf</span></code> or <code class="docutils literal notranslate"><span class="pre">/etc/graylog/server/server.conf</span></code> will be migrated to the database.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">When you upgrade from a 1.x version and you modified any rotation/retention settings,
please make sure you <strong>KEEP</strong> your old settings in the config file so the migration process
will add your old settings to the database!
Otherwise the retention process will use the default settings and might remove a lot of indices.</p>
</div>
</div>
<div class="section" id="overview">
<h5>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h5>
<p>Some settings, which have been deprecated in previous versions, have finally been removed from the Graylog configuration file.</p>
<table border="1" class="docutils" id="id1">
<caption><span class="caption-text">Removed configuration settings</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Setting name</th>
<th class="head">Replacement</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">mongodb_host</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">mongodb_uri</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">mongodb_port</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">mongodb_uri</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">mongodb_database</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">mongodb_uri</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">mongodb_useauth</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">mongodb_uri</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">mongodb_user</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">mongodb_uri</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">mongodb_password</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">mongodb_uri</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_node_name</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">elasticsearch_node_name_prefix</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">collector_expiration_threshold</span></code></td>
<td>(moved to collector plugin)</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">collector_inactive_threshold</span></code></td>
<td>(moved to collector plugin)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">rotation_strategy</span></code></td>
<td>UI in web interface (System/Indices)</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">retention_strategy</span></code></td>
<td>UI in web interface (System/Indices)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_max_docs_per_index</span></code></td>
<td>UI in web interface (System/Indices)</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_max_size_per_index</span></code></td>
<td>UI in web interface (System/Indices)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_max_time_per_index</span></code></td>
<td>UI in web interface (System/Indices)</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_max_number_of_indices</span></code></td>
<td>UI in web interface (System/Indices)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">dead_letters_enabled</span></code></td>
<td>None</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="changed-configuration-defaults">
<h4>Changed configuration defaults<a class="headerlink" href="#changed-configuration-defaults" title="Permalink to this headline">¶</a></h4>
<p>For better consistency, the defaults of some configuration settings have been changed after the project has
been renamed from <em>Graylog2</em> to <em>Graylog</em>.</p>
<table border="1" class="docutils" id="id2">
<caption><span class="caption-text">Configuration defaults</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Setting name</th>
<th class="head">Old default</th>
<th class="head">New default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_cluster_name</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">graylog2</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">graylog</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_node_name</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">graylog2-server</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">graylog-server</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_index_prefix</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">graylog2</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">graylog</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_discovery_zen_ping_unicast_hosts</span></code></td>
<td>empty</td>
<td><code class="docutils literal notranslate"><span class="pre">127.0.0.1:9300</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_discovery_zen_ping_multicast_enabled</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">false</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">mongodb_uri</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">mongodb://127.0.0.1/graylog2</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">mongodb://localhost/graylog</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="changed-prefixes-for-configuration-override">
<h4>Changed prefixes for configuration override<a class="headerlink" href="#changed-prefixes-for-configuration-override" title="Permalink to this headline">¶</a></h4>
<p>In the past it was possible to override configuration settings in Graylog using environment
variables or Java system properties with a specific prefix.</p>
<p>For better consistency, these prefixes have been changed after the project has been renamed
from <em>Graylog2</em> to <em>Graylog</em>.</p>
<table border="1" class="docutils" id="id3">
<caption><span class="caption-text">Configuration override prefixes</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Override</th>
<th class="head">Old prefix</th>
<th class="head">New prefix</th>
<th class="head">Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Environment variables</td>
<td><code class="docutils literal notranslate"><span class="pre">GRAYLOG2_</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">GRAYLOG_</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">GRAYLOG_IS_MASTER</span></code></td>
</tr>
<tr class="row-odd"><td>System properties</td>
<td><code class="docutils literal notranslate"><span class="pre">graylog2.</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">graylog.</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">graylog.is_master</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="rest-api-changes">
<h4>REST API Changes<a class="headerlink" href="#rest-api-changes" title="Permalink to this headline">¶</a></h4>
<p>The output ID key for the list of outputs in the <code class="docutils literal notranslate"><span class="pre">/streams/*</span></code> endpoints has been changed from <code class="docutils literal notranslate"><span class="pre">_id</span></code> to <code class="docutils literal notranslate"><span class="pre">id</span></code>.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span> <span class="p">{</span>
   <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;564f47c41ec8fe7d920ef561&quot;</span><span class="p">,</span>
   <span class="s2">&quot;creator_user_id&quot;</span><span class="o">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
   <span class="s2">&quot;outputs&quot;</span><span class="o">:</span> <span class="p">[</span>
     <span class="p">{</span>
<span class="hll">       <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;56d6f2cce45e0e52d1e4b9cb&quot;</span><span class="p">,</span> <span class="c1">// ==&gt; Changed from `_id` to `id`</span>
</span>       <span class="s2">&quot;title&quot;</span><span class="o">:</span> <span class="s2">&quot;GELF Output&quot;</span><span class="p">,</span>
       <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;org.graylog2.outputs.GelfOutput&quot;</span><span class="p">,</span>
       <span class="s2">&quot;creator_user_id&quot;</span><span class="o">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
       <span class="s2">&quot;created_at&quot;</span><span class="o">:</span> <span class="s2">&quot;2016-03-02T14:03:56.686Z&quot;</span><span class="p">,</span>
       <span class="s2">&quot;configuration&quot;</span><span class="o">:</span> <span class="p">{</span>
         <span class="s2">&quot;hostname&quot;</span><span class="o">:</span> <span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span>
         <span class="s2">&quot;protocol&quot;</span><span class="o">:</span> <span class="s2">&quot;TCP&quot;</span><span class="p">,</span>
         <span class="s2">&quot;connect_timeout&quot;</span><span class="o">:</span> <span class="mi">1000</span><span class="p">,</span>
         <span class="s2">&quot;reconnect_delay&quot;</span><span class="o">:</span> <span class="mi">500</span><span class="p">,</span>
         <span class="s2">&quot;port&quot;</span><span class="o">:</span> <span class="mi">12202</span><span class="p">,</span>
         <span class="s2">&quot;tcp_no_delay&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
         <span class="s2">&quot;tcp_keep_alive&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
         <span class="s2">&quot;tls_trust_cert_chain&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
         <span class="s2">&quot;tls_verification_enabled&quot;</span><span class="o">:</span> <span class="kc">false</span>
       <span class="p">},</span>
       <span class="s2">&quot;content_pack&quot;</span><span class="o">:</span> <span class="kc">null</span>
     <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">&quot;matching_type&quot;</span><span class="o">:</span> <span class="s2">&quot;AND&quot;</span><span class="p">,</span>
   <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;All incoming messages&quot;</span><span class="p">,</span>
   <span class="s2">&quot;created_at&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-11-20T16:18:12.416Z&quot;</span><span class="p">,</span>
   <span class="s2">&quot;disabled&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
   <span class="s2">&quot;rules&quot;</span><span class="o">:</span> <span class="p">[],</span>
   <span class="s2">&quot;alert_conditions&quot;</span><span class="o">:</span> <span class="p">[],</span>
   <span class="s2">&quot;title&quot;</span><span class="o">:</span> <span class="s2">&quot;ALL&quot;</span><span class="p">,</span>
   <span class="s2">&quot;content_pack&quot;</span><span class="o">:</span> <span class="kc">null</span>
 <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="web-interface-config-changes">
<h4>Web Interface Config Changes<a class="headerlink" href="#web-interface-config-changes" title="Permalink to this headline">¶</a></h4>
<p>The web interface has been integrated into the Graylog server and was rewritten in React. Therefore configuring it has changed fundamentally since the last version(s). Please consult <a class="reference internal" href="index.html#configuring-webif"><span class="std std-ref">Web interface</span></a> for details.</p>
<p>Please take note that the <code class="docutils literal notranslate"><span class="pre">application.context</span></code> configuration parameter present in Graylog 1.x (and earlier) is not existing anymore. The web interface can currently only be served without a path prefix.</p>
</div>
</div>
<span id="document-pages/upgrade/graylog-2.1"></span><div class="section" id="upgrading-to-graylog-2-1-x">
<h3>Upgrading to Graylog 2.1.x<a class="headerlink" href="#upgrading-to-graylog-2-1-x" title="Permalink to this headline">¶</a></h3>
<div class="section" id="https-setup">
<h4>HTTPS Setup<a class="headerlink" href="#https-setup" title="Permalink to this headline">¶</a></h4>
<p>Previous versions of Graylog were automatically generating a private key/certificate pair for HTTPS if either the private key or the certificate (or both) for <code class="docutils literal notranslate"><span class="pre">rest_tls_key_file</span></code>, <code class="docutils literal notranslate"><span class="pre">rest_tls_cert_file</span></code>, <code class="docutils literal notranslate"><span class="pre">web_tls_key_file</span></code>, or <code class="docutils literal notranslate"><span class="pre">web_tls_cert_file</span></code> couldn’t be read. While this feature is very comfortable for inexperienced users, it has lots of serious drawbacks like very weak key sizes (only 1024 bits), being untrusted by all TLS libraries used by web browsers and other client software (because they are self-signed and not included in the system’s CA/trust store), and problems with inter-node communications with other Graylog nodes.</p>
<p>Due to those shortcomings, the feature has been removed completely. Users need to use proper certificates or generate their own self-signed certificates and configure them with the appropriate settings, see <a class="reference internal" href="index.html#https-setup"><span class="std std-ref">Using HTTPS</span></a> for reference.</p>
</div>
<div class="section" id="web-interface-listener">
<h4>Web Interface Listener<a class="headerlink" href="#web-interface-listener" title="Permalink to this headline">¶</a></h4>
<p>Graylog 2.0.x has been using separate listeners for the REST API and the web interface by default. The Graylog REST API on <code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:12900</span></code>, the Graylog web interface on <code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:9000</span></code>.
Beginning with Graylog 2.1.0 it is possible to run both the REST API and the web interface on the same host/port-combination and this is now the default. This means that the REST API is now running on <code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:9000/api/</span></code> by default and the web interface is now running on <code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:9000/</span></code>.
Furthermore, all requests going to <code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:9000/api/</span></code> requesting a content-type of <code class="docutils literal notranslate"><span class="pre">text/html</span></code> or <code class="docutils literal notranslate"><span class="pre">application/xhtml+xml</span></code> are redirected to the web interface, therefore making it even easier to set up Graylog and use it behind proxies, expose it externally etc.</p>
<p>Please take note that you can still run the REST API and the web interface on two separate listeners. If you are running a Graylog 2.0.x configuration specifying <code class="docutils literal notranslate"><span class="pre">web_listen_uri</span></code> explicitly and you want to keep that, you do not have to change anything.</p>
<p>Please also take note, that when you have configured <code class="docutils literal notranslate"><span class="pre">rest_listen_uri</span></code> and <code class="docutils literal notranslate"><span class="pre">web_listen_uri</span></code> to run on the same host/port-combination, the following configuration directives will have no effect:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">web_enable_tls</span></code>, <code class="docutils literal notranslate"><span class="pre">web_tls_cert_file</span></code>, <code class="docutils literal notranslate"><span class="pre">web_tls_key_file</span></code>, <code class="docutils literal notranslate"><span class="pre">web_tls_key_password</span></code> (These will depend on the TLS configuration of the REST listener).</li>
<li><code class="docutils literal notranslate"><span class="pre">web_enable_cors</span></code>, <code class="docutils literal notranslate"><span class="pre">web_enable_gzip</span></code>, <code class="docutils literal notranslate"><span class="pre">web_thread_pool_size</span></code>, <code class="docutils literal notranslate"><span class="pre">web_max_initial_line_length</span></code>, <code class="docutils literal notranslate"><span class="pre">web_max_header_size</span></code> (Those will depend on the corresponding settings of the REST listener).</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="internal-metrics-to-mongodb">
<h4>Internal Metrics to MongoDB<a class="headerlink" href="#internal-metrics-to-mongodb" title="Permalink to this headline">¶</a></h4>
<p>Previous versions of Graylog included a (long deprecated) metrics reporter for writing internal <a class="reference external" href="http://metrics.dropwizard.io/3.1.0/">metrics</a> into MongoDB in a fixed interval of 1 second.</p>
<p>This feature has been removed completely and can be optionally pulled in by using the <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-metrics-reporter">Graylog Metrics Reporter Plugins</a>.</p>
</div>
<div class="section" id="configuration-file-changes">
<h4>Configuration file changes<a class="headerlink" href="#configuration-file-changes" title="Permalink to this headline">¶</a></h4>
<div class="section" id="network-settings">
<h5>Network settings<a class="headerlink" href="#network-settings" title="Permalink to this headline">¶</a></h5>
<p>The network settings in the Graylog configuration file (<code class="docutils literal notranslate"><span class="pre">rest_listen_uri</span></code>, <code class="docutils literal notranslate"><span class="pre">rest_transport_uri</span></code>, and <code class="docutils literal notranslate"><span class="pre">web_listen_uri</span></code>) are now using the default ports for the HTTP (80) and HTTPS (443) if no custom port was given. Previously those settings were using the custom ports 12900 (Graylog REST API) and 9000 (Graylog web interface) if no explicit port was given.</p>
<p>Examples:</p>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="28%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Configuration setting</th>
<th class="head">Old effective URI</th>
<th class="head">New effective URI</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">rest_listen_uri</span> <span class="pre">=</span> <span class="pre">http://127.0.0.1:12900/</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:12900/</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:12900/</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">rest_listen_uri</span> <span class="pre">=</span> <span class="pre">http://127.0.0.1/</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:12900/</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:80/</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">rest_listen_uri</span> <span class="pre">=</span> <span class="pre">https://127.0.0.1/</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">https://127.0.0.1:12900/</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">https://127.0.0.1:443/</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="collector-sidecar">
<h5>Collector Sidecar<a class="headerlink" href="#collector-sidecar" title="Permalink to this headline">¶</a></h5>
<p>The network changes are reflected in the Sidecar configuration as well and should be adopted. However it’s still possible to use the old API port by setting it explicitly.
In case a mass deployment is too hard to change, just run the following to switch back to the old REST API port (OVA based installation):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">graylog</span><span class="o">-</span><span class="n">ctl</span> <span class="nb">set</span><span class="o">-</span><span class="n">listen</span><span class="o">-</span><span class="n">address</span> <span class="o">--</span><span class="n">service</span> <span class="n">rest</span> <span class="o">--</span><span class="n">address</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">:</span><span class="mi">12900</span>
<span class="n">sudo</span> <span class="n">graylog</span><span class="o">-</span><span class="n">ctl</span> <span class="n">reconfigure</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="graylog-rest-api">
<h4>Graylog REST API<a class="headerlink" href="#graylog-rest-api" title="Permalink to this headline">¶</a></h4>
<div class="section" id="removed-resources">
<h5>Removed resources<a class="headerlink" href="#removed-resources" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Original resource</th>
<th class="head">Replacement</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="6"><code class="docutils literal notranslate"><span class="pre">/system/buffers</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">/system/metrics/org.graylog2.buffers.input.size</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">/system/metrics/org.graylog2.buffers.input.usage</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">/system/metrics/org.graylog2.buffers.process.size</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">/system/metrics/org.graylog2.buffers.process.usage</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">/system/metrics/org.graylog2.buffers.output.size</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">/system/metrics/org.graylog2.buffers.output.usage</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">/system/buffers/classes</span></code></td>
<td>None</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="removed-index-rotation-retention-settings-from-system-configuration">
<h5>Removed index rotation/retention settings from “/system/configuration”<a class="headerlink" href="#removed-index-rotation-retention-settings-from-system-configuration" title="Permalink to this headline">¶</a></h5>
<p>The index rotation and retention settings have been moved to MongoDB in Graylog 2.0.0 but the representation of the old configuration options was still present in the <code class="docutils literal notranslate"><span class="pre">/system/configuration</span></code> resource.</p>
<p>In order to stay in sync with the actual configuration file, the following values have been removed:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">rotation_strategy</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">retention_strategy</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">elasticsearch_max_docs_per_index</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">elasticsearch_max_size_per_index</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">elasticsearch_max_time_per_index</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">elasticsearch_max_number_of_indices</span></code></li>
</ul>
<p>The retention and rotation configuration settings can be retrieved using the following resources:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">/system/indices/rotation/config</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">/system/indices/retention/config</span></code></li>
</ul>
</div>
</div>
<div class="section" id="for-plugin-authors">
<h4>For Plugin Authors<a class="headerlink" href="#for-plugin-authors" title="Permalink to this headline">¶</a></h4>
<p>Between Graylog 2.0.x and 2.1.0 we also made changes to the Plugin API. These include:</p>
<ul class="simple">
<li>Removing <code class="docutils literal notranslate"><span class="pre">org.graylog2.plugin.streams.Stream#getAlertCondition</span></code>, as it was faulty and not easily replaceable with a working version without breaking our separation of models and persistence services.</li>
</ul>
<p>If you are maintaining a plugin that was originally written for Graylog 1.x or 2.0.x, you need to make sure that your plugin is still compiling and working under Graylog 2.1.x or adapt it if necessary.</p>
<div class="section" id="ui-plugins">
<h5>UI Plugins<a class="headerlink" href="#ui-plugins" title="Permalink to this headline">¶</a></h5>
<p>The new app prefix feature requires some changes in UI plugins to make them work with that.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">webpackEntry</span> <span class="pre">from</span> <span class="pre">'webpack-entry';</span></code> needs to be added at the very top of the <code class="docutils literal notranslate"><span class="pre">src/web/index.jsx</span></code> file</li>
<li>The <code class="docutils literal notranslate"><span class="pre">Routes.pluginRoute()</span></code> function needs to be used instead of a literal string to build URLs for links and buttons</li>
</ul>
<p>Please check the <a class="reference internal" href="index.html#plugins"><span class="std std-ref">updated plugins documentation</span></a> for details.</p>
</div>
</div>
<div class="section" id="changed-elasticsearch-cluster-status-behavior">
<h4>Changed Elasticsearch Cluster Status Behavior<a class="headerlink" href="#changed-elasticsearch-cluster-status-behavior" title="Permalink to this headline">¶</a></h4>
<p>In previous versions Graylog stopped indexing into the current write index if the <a class="reference internal" href="index.html#es-cluster-status"><span class="std std-ref">Elasticsearch cluster status</span></a> turned RED. Since Graylog 2.1.0 only checks the status of the current write index when it tries to index messages.</p>
<p>If the current write index is GREEN or YELLOW, Graylog will continue to index messages even though the overall cluster status is RED. This avoids Graylog downtimes when doing Elasticsearch maintenance or when older indices have problems.</p>
</div>
<div class="section" id="changes-in-message-field-values-trimming">
<h4>Changes in message field values trimming<a class="headerlink" href="#changes-in-message-field-values-trimming" title="Permalink to this headline">¶</a></h4>
<p>Previous versions of Graylog were trimming message field values inconsistently, depending on the codec used. We have changed that behaviour in Graylog 2.1.0, so all message field values are trimmed by default. This means that leading or trailing whitespace of every field is removed during ingestion.</p>
<p><strong>Important</strong>: This change will break your existing stream rules, extractors, and Drool rules if you are expecting leading or trailing white spaces in them. Please adapt them so they do not require those white spaces.</p>
</div>
</div>
<span id="document-pages/upgrade/graylog-2.2"></span><div class="section" id="upgrading-to-graylog-2-2-x">
<h3>Upgrading to Graylog 2.2.x<a class="headerlink" href="#upgrading-to-graylog-2-2-x" title="Permalink to this headline">¶</a></h3>
<div class="section" id="email-alarm-callback">
<span id="upgrade-from-21-to-22"></span><h4>Email Alarm Callback<a class="headerlink" href="#email-alarm-callback" title="Permalink to this headline">¶</a></h4>
<p>Previous versions of Graylog created an implicit email alarm callback if no explicit callback existed for a stream.</p>
<p>Due to the extensive rework done in alerting, this behavior has been modified to be explicit, and more consistent with other entities within Graylog: from now on <strong>there will not be a default alarm callback</strong>.</p>
<p>To simplify the transition for people relying on this behavior, we have added a migration step that will create an email alarm callback for each stream that has alert conditions, has alert receivers, but has no associated alarm callbacks.</p>
<p>With to the introduction of email templates in 0.21, the <code class="docutils literal notranslate"><span class="pre">transport_email_subject_prefix</span></code> config setting became unused. It is now being removed completely. In early versions it was used to add a prefix to the generated subject of alerting emails. Since 0.21 it is possible to define a complete template used for the generation of alert email subjects.</p>
</div>
<div class="section" id="alert-notifications-previously-known-as-alarm-callbacks">
<h4>Alert Notifications (previously known as Alarm Callbacks)<a class="headerlink" href="#alert-notifications-previously-known-as-alarm-callbacks" title="Permalink to this headline">¶</a></h4>
<p>Graylog 2.2.0 introduces some changes in alerting. Alerts have now states, helping you to know in an easier way if something requires your attention.</p>
<p>These changes also affect the way we send notifications: Starting in Graylog 2.2.0, alert notifications are only executed <strong>once</strong>, just when a new alert is triggered. As long as the alert is unresolved or in grace period, <strong>Graylog will not send further notifications</strong>. This will help you reducing the noise and annoyance of getting notified way too often when a problem persists for a while.</p>
<p>If you are using Graylog for alerting, please take a moment to ensure this change will not break any of your processes when an alert occurs.</p>
</div>
<div class="section" id="default-stream-index-sets">
<h4>Default stream/Index Sets<a class="headerlink" href="#default-stream-index-sets" title="Permalink to this headline">¶</a></h4>
<p>With the introduction of index sets, and the ability to change a stream’s write target, the default stream needs additional information, which is calculated when starting a new Graylog 2.2 master node.</p>
<p>It requires recalculation of the index ranges of the default stream’s index set, which when updating from pre-2.2 versions is stored in the <code class="docutils literal notranslate"><span class="pre">graylog_</span></code> index. This is potentially expensive, because it has to calculate three aggregations across every open index to detect which streams are stored in which index.</p>
<p>Please be advised that this necessary migration can put additional load on your cluster.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Make sure that all rotation and retention strategy plugins you had installed in 2.1 are updated to a version that is compatible with 2.2 before you start the Graylog 2.2 version for the first time. (e.g. Graylog Enterprise) This is needed so the required data migrations will run without problems.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The option to remove a message from the default stream is currently not available when using the pipeline function <cite>route_to_stream</cite>. This will be fixed in a subsequent bug fix release. Please see <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/117">the corresponding Github issue</a>.</p>
</div>
</div>
<div class="section" id="rotationstrategy-retentionstrategy-interfaces">
<h4>RotationStrategy &amp; RetentionStrategy Interfaces<a class="headerlink" href="#rotationstrategy-retentionstrategy-interfaces" title="Permalink to this headline">¶</a></h4>
<p>The Java interfaces for <code class="docutils literal notranslate"><span class="pre">RetentionStrategy</span></code> and <code class="docutils literal notranslate"><span class="pre">RotationStrategy</span></code> changed in 2.2. The <code class="docutils literal notranslate"><span class="pre">#rotate()</span></code> and <code class="docutils literal notranslate"><span class="pre">#retain()</span></code> methods are now getting an <code class="docutils literal notranslate"><span class="pre">IndexSet</span></code> as first parameter.</p>
<p>This only affects you if you are using custom rotation or retention strategies.</p>
</div>
<div class="section" id="changes-in-exposed-configuration">
<h4>Changes in Exposed Configuration<a class="headerlink" href="#changes-in-exposed-configuration" title="Permalink to this headline">¶</a></h4>
<p>The exposed configuration settings on the <code class="docutils literal notranslate"><span class="pre">/system/configuration</span></code> resource of the Graylog REST API doesn’t contain the following (deprecated) Elasticsearch-related settings anymore:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">elasticsearch_shards</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">elasticsearch_replicas</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">index_optimization_max_num_segments</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">disable_index_optimization</span></code></li>
</ul>
</div>
<div class="section" id="changes-in-split-count-converter">
<h4>Changes in Split &amp; Count Converter<a class="headerlink" href="#changes-in-split-count-converter" title="Permalink to this headline">¶</a></h4>
<p>The behavior of the split &amp; count converter has been changed to that it resembles typical <code class="docutils literal notranslate"><span class="pre">split()</span></code> functions.</p>
<p>Previously, the split &amp; count converter returned 0, if the split pattern didn’t occur in the string. Now it will return 1.</p>
<p>Examples:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="29%" />
<col width="22%" />
<col width="0%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">String</th>
<th class="head">Split Pattern</th>
<th class="head" colspan="3">Old Result | New Result</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&lt;empty&gt;</td>
<td><code class="docutils literal notranslate"><span class="pre">-</span></code></td>
<td>0</td>
<td colspan="2">0</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">foo</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">-</span></code></td>
<td>0</td>
<td colspan="2">1</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">foo-bar</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">-</span></code></td>
<td>2</td>
<td colspan="2">2</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="graylog-rest-api">
<h4>Graylog REST API<a class="headerlink" href="#graylog-rest-api" title="Permalink to this headline">¶</a></h4>
<div class="section" id="streams-api">
<h5>Streams API<a class="headerlink" href="#streams-api" title="Permalink to this headline">¶</a></h5>
<p>Due to the introduction of index sets, the payload for creating, updating and cloning of streams now requires the <code class="docutils literal notranslate"><span class="pre">index_set_id</span></code> field. The value for this needs to be the ID of an existing index set.</p>
<p>Affected endpoints:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/streams</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PUT</span>&#160; <span class="pre">/streams/{streamId}</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/streams/{streamId}/clone</span></code></li>
</ul>
</div>
</div>
</div>
<span id="document-pages/upgrade/graylog-2.3"></span><div class="section" id="upgrading-to-graylog-2-3-x">
<h3>Upgrading to Graylog 2.3.x<a class="headerlink" href="#upgrading-to-graylog-2-3-x" title="Permalink to this headline">¶</a></h3>
<div class="section" id="graylog-switches-to-elasticsearch-http-client">
<span id="upgrade-from-22-to-23"></span><h4>Graylog switches to Elasticsearch HTTP client<a class="headerlink" href="#graylog-switches-to-elasticsearch-http-client" title="Permalink to this headline">¶</a></h4>
<p>In all prior versions, Graylog used the Elasticsearch node client to connect to an Elasticsearch cluster, which was acting as a client-only Elasticsearch node. For compatibility reasons of the used binary transfer protocol, the range of Elasticsearch versions Graylog could connect to was limited. For more information and differences between the different ways to connect to Elasticsearch, you can check the <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/guide/5.4/_talking_to_elasticsearch.html">Elasticsearch documentation</a>.</p>
<p>Starting with version 2.3.0, we are switching over to using a lightweight HTTP client, which is almost version-agnostic. The biggest change is that it does not connect to the Elasticsearch native protocol port (defaulting to 9300/tcp), but the Elasticsearch HTTP port (defaulting to 9200/tcp).</p>
<p>Due to the differences in connecting to the Elasticsearch cluster, configuring Graylog has changed. These configuration settings have been removed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">elasticsearch_cluster_discovery_timeout</span>
<span class="n">elasticsearch_cluster_name</span>
<span class="n">elasticsearch_config_file</span>
<span class="n">elasticsearch_discovery_initial_state_timeout</span>
<span class="n">elasticsearch_discovery_zen_ping_unicast_hosts</span>
<span class="n">elasticsearch_http_enabled</span>
<span class="n">elasticsearch_network_bind_host</span>
<span class="n">elasticsearch_network_host</span>
<span class="n">elasticsearch_network_publish_host</span>
<span class="n">elasticsearch_node_data</span>
<span class="n">elasticsearch_node_master</span>
<span class="n">elasticsearch_node_name_prefix</span>
<span class="n">elasticsearch_path_data</span>
<span class="n">elasticsearch_path_home</span>
<span class="n">elasticsearch_transport_tcp_port</span>
</pre></div>
</div>
<p>The following configuration options are now being used to configure connectivity to Elasticsearch:</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="7%" />
<col width="40%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Config Setting</th>
<th class="head">Type</th>
<th class="head">Comments</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_connect_timeout</span></code></td>
<td>Duration</td>
<td>Timeout when connection to individual Elasticsearch hosts</td>
<td><code class="docutils literal notranslate"><span class="pre">10s</span></code> (10 Seconds)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_hosts</span></code></td>
<td>List&lt;URI&gt;</td>
<td>Comma-separated list of URIs of Elasticsearch hosts</td>
<td><code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:9200</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_idle_timeout</span></code></td>
<td>Duration</td>
<td>Timeout after which idle connections are terminated</td>
<td><code class="docutils literal notranslate"><span class="pre">-1s</span></code> (Never)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_max_total_connections</span></code></td>
<td>int</td>
<td>Maximum number of total Elasticsearch connections</td>
<td><code class="docutils literal notranslate"><span class="pre">20</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_max_total_connections_per_route</span></code></td>
<td>int</td>
<td>Maximum number of Elasticsearch connections per route/host</td>
<td><code class="docutils literal notranslate"><span class="pre">2</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_max_retries</span></code></td>
<td>int</td>
<td>Maximum number of retries for requests to Elasticsearch</td>
<td><code class="docutils literal notranslate"><span class="pre">2</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_socket_timeout</span></code></td>
<td>Duration</td>
<td>Timeout when sending/receiving from Elasticsearch connection</td>
<td><code class="docutils literal notranslate"><span class="pre">60s</span></code> (60 Seconds)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_discovery_enabled</span></code></td>
<td>boolean</td>
<td>Enable automatic Elasticsearch node discovery</td>
<td><code class="docutils literal notranslate"><span class="pre">false</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_discovery_filter</span></code></td>
<td>String</td>
<td>Filter by node attributes for the discovered nodes</td>
<td>empty (use all nodes)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_discovery_frequency</span></code></td>
<td>Duration</td>
<td>Frequency of the Elasticsearch node discovery</td>
<td><code class="docutils literal notranslate"><span class="pre">30s</span></code> (30 Seconds)</td>
</tr>
</tbody>
</table>
<p>In most cases, the only configuration setting that needs to be set explicitly is <code class="docutils literal notranslate"><span class="pre">elasticsearch_hosts</span></code>. All other configuration settings should be tweaked only in case of errors.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The automatic node discovery does not work if Elasticsearch requires authentication, e. g. when using Shield (X-Pack).</p>
</div>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">Graylog does not react to externally triggered index changes (creating/closing/reopening/deleting an index) anymore. All of these actions need to be performed through the Graylog REST API in order to retain index consistency.</p>
</div>
<div class="section" id="special-note-for-upgrading-from-an-existing-graylog-setup-with-a-new-elasticsearch-cluster">
<h5>Special note for upgrading from an existing Graylog setup with a new Elasticsearch cluster<a class="headerlink" href="#special-note-for-upgrading-from-an-existing-graylog-setup-with-a-new-elasticsearch-cluster" title="Permalink to this headline">¶</a></h5>
<p>If you are upgrading the Elasticsearch cluster of an existing Graylog setup without migrating the indices, your Graylog setup contains stale index ranges causing nonexisting index errors upon search/alerting. To remediate this, you need to manually trigger an index range recalculation for all index sets once. This is possible using the web interface using the System-&gt;Indices functionality or by using the REST API using the <code class="docutils literal notranslate"><span class="pre">/system/indices/ranges/&lt;index</span> <span class="pre">set</span> <span class="pre">id&gt;/rebuild</span></code> endpoint.</p>
</div>
</div>
<div class="section" id="graylog-rest-api">
<h4>Graylog REST API<a class="headerlink" href="#graylog-rest-api" title="Permalink to this headline">¶</a></h4>
<div class="section" id="rotation-and-retention-strategies">
<h5>Rotation and Retention strategies<a class="headerlink" href="#rotation-and-retention-strategies" title="Permalink to this headline">¶</a></h5>
<p>The deprecated HTTP resources at <code class="docutils literal notranslate"><span class="pre">/system/indices/rotation/config</span></code> and <code class="docutils literal notranslate"><span class="pre">/system/indices/retention/config</span></code>, which didn’t work since Graylog 2.2.0, have been removed.</p>
<p>These settings are part of the index set configuration and can be configured under <code class="docutils literal notranslate"><span class="pre">/system/indices/index_sets</span></code>.</p>
</div>
<div class="section" id="stream-list-response-structure-does-not-include-in-grace-field-anymore">
<h5>Stream List Response structure does not include <cite>in_grace</cite> field anymore<a class="headerlink" href="#stream-list-response-structure-does-not-include-in-grace-field-anymore" title="Permalink to this headline">¶</a></h5>
<p>The response to <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/streams</span></code>, <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/streams/&lt;id&gt;</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/streams/&lt;id&gt;</span></code> does not contain the <code class="docutils literal notranslate"><span class="pre">in_grace</span></code> field for configured alert conditions anymore.</p>
<p>The value of this flag can be retrieved using the <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/alerts/conditions</span></code> endpoint, or per stream using the <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/streams/&lt;streamId&gt;/alerts/conditions</span></code> endpoint.</p>
</div>
</div>
</div>
<span id="document-pages/upgrade/graylog-2.4"></span><div class="section" id="upgrading-to-graylog-2-4-x">
<h3>Upgrading to Graylog 2.4.x<a class="headerlink" href="#upgrading-to-graylog-2-4-x" title="Permalink to this headline">¶</a></h3>
<p id="upgrade-from-23-to-24">You can upgrade from Graylog 2.3.x to Graylog 2.4.x without the need to change the configuration of your Graylog server.</p>
<div class="section" id="more-plugins-shipped-by-default">
<h4>More plugins shipped by default<a class="headerlink" href="#more-plugins-shipped-by-default" title="Permalink to this headline">¶</a></h4>
<p>The following Graylog plugins are now shipped as part of the Graylog server release.</p>
<ul class="simple">
<li>AWS Plugin - <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-aws">https://github.com/Graylog2/graylog-plugin-aws</a></li>
<li>Threat Intelligence Plugin - <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-threatintel">https://github.com/Graylog2/graylog-plugin-threatintel</a></li>
<li>NetFlow Plugin - <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-netflow">https://github.com/Graylog2/graylog-plugin-netflow</a></li>
<li>CEF Plugin - <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-cef">https://github.com/Graylog2/graylog-plugin-cef</a></li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Make sure you remove all previous versions of these plugins from your <code class="docutils literal notranslate"><span class="pre">plugin/</span></code> folder before starting the new Graylog version!</p>
</div>
</div>
</div>
<span id="document-pages/upgrade/graylog-2.5"></span><div class="section" id="upgrading-to-graylog-2-5-x">
<h3>Upgrading to Graylog 2.5.x<a class="headerlink" href="#upgrading-to-graylog-2-5-x" title="Permalink to this headline">¶</a></h3>
<div class="section" id="protecting-against-csrf-http-header-required">
<span id="upgrade-from-24-to-25"></span><h4>Protecting against CSRF, HTTP header required<a class="headerlink" href="#protecting-against-csrf-http-header-required" title="Permalink to this headline">¶</a></h4>
<p>Using the Graylog server API requires all clients sending non-GET requests to include a custom HTTP header
(<code class="docutils literal notranslate"><span class="pre">X-Requested-By</span></code>). The value of the header is not important, but it’s presence is, as all requests without it will
be ignored and will return a 400 error.</p>
<p><strong>This is important for people using scripts that modify Graylog in any way through the REST API</strong>. We already adapted
Graylog web interface and our plugins, so if you don’t use any scripts or 3rd party products to access Graylog, you
don’t have to do anything else.</p>
<p>If you are using the Graylog Sidecar, you either have to use Graylog version 2.5.1 or update the Sidecar to <a class="reference external" href="https://github.com/Graylog2/collector-sidecar/releases/tag/0.1.7">version 0.1.7</a>. That version is using the correct CSRF headers for HTTP requests against the Graylog server API.</p>
</div>
<div class="section" id="elasticsearch-6-changes">
<h4>Elasticsearch 6 changes<a class="headerlink" href="#elasticsearch-6-changes" title="Permalink to this headline">¶</a></h4>
<p>There is a breaking change in Elasticsearch 6 that may affect some queries on your searches and dashboards:</p>
<p>Before Elasticsearch 6, queries for keyword fields were split by whitespaces and combined with <code class="docutils literal notranslate"><span class="pre">OR</span></code> operators
resulting, for example, in <code class="docutils literal notranslate"><span class="pre">type:(ssh</span> <span class="pre">login)</span></code> and <code class="docutils literal notranslate"><span class="pre">type:(ssh</span> <span class="pre">OR</span> <span class="pre">login)</span></code> being equivalent. This is no longer
the case in Elasticsearch 6 and now those queries are different: the former looking for the <code class="docutils literal notranslate"><span class="pre">ssh</span> <span class="pre">login</span></code> value,
the second for either <code class="docutils literal notranslate"><span class="pre">ssh</span></code> or <code class="docutils literal notranslate"><span class="pre">login</span></code> values.</p>
<p>Please ensure to look for those queries in your Graylog setup before upgrading to Elasticsearch 6 and add the
<code class="docutils literal notranslate"><span class="pre">OR</span></code> operators where needed.</p>
</div>
</div>
<span id="document-pages/upgrade/graylog-3.0"></span><div class="section" id="upgrading-to-graylog-3-0-x">
<h3>Upgrading to Graylog 3.0.x<a class="headerlink" href="#upgrading-to-graylog-3-0-x" title="Permalink to this headline">¶</a></h3>
<div class="section" id="elasticsearch-version-requirements">
<span id="upgrade-from-25-to-30"></span><h4>Elasticsearch Version Requirements<a class="headerlink" href="#elasticsearch-version-requirements" title="Permalink to this headline">¶</a></h4>
<p>Graylog 3.0 drops support for Elasticsearch versions before 5.6.x. That means you have to upgrade Elasticsearch to at least version 5.6.13 before upgrading Graylog to version 3.0. Make sure to read the Elasticsearch upgrade guides before doing that.</p>
</div>
<div class="section" id="simplified-http-interface-configuration">
<h4>Simplified HTTP interface configuration<a class="headerlink" href="#simplified-http-interface-configuration" title="Permalink to this headline">¶</a></h4>
<p>Graylog used to have a lot of different settings regarding the various HTTP interfaces it provides, namely the Graylog REST API and the Graylog web interface.</p>
<p>This mostly originates from the fact that Graylog used to consist of two components before Graylog 2.0.0, a server component and a separate web interface.</p>
<p>The changes in this release finally merge the HTTP listeners for the Graylog REST API and web interface into a single HTTP listener, which should make the initial configuration of Graylog simpler and reduce errors caused by conflicting settings.</p>
<p>The path of the Graylog REST API is now hard-coded to <code class="docutils literal notranslate"><span class="pre">/api</span></code>, so if you’re still using the legacy URI on port 12900/tcp or have been using a custom path (via the <code class="docutils literal notranslate"><span class="pre">rest_listen_uri</span></code> or <code class="docutils literal notranslate"><span class="pre">rest_transport_uri</span></code> settings), you’ll have to update the URI used to access the Graylog REST API.</p>
<p>This might also affect your <strong>Graylog Collector Sidecars</strong>. Make sure to check each <code class="docutils literal notranslate"><span class="pre">collector_sidecar.yml</span></code> and update the <code class="docutils literal notranslate"><span class="pre">server_url</span></code> accordingly.</p>
<p>If you are using a reverse proxy in front of Graylog (like nginx) and configured it to set the <code class="docutils literal notranslate"><span class="pre">X-Graylog-Server-URL</span></code> HTTP header, you have to remove the <code class="docutils literal notranslate"><span class="pre">api/</span></code> suffix because that is now the default. (as mentioned above)</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># This nginx setting in Graylog &lt;3.0 ...</span>
<span class="n">header_upstream</span> <span class="n">X</span><span class="o">-</span><span class="n">Graylog</span><span class="o">-</span><span class="n">Server</span><span class="o">-</span><span class="n">URL</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="p">{</span><span class="n">host</span><span class="p">}</span><span class="o">/</span><span class="n">api</span>

<span class="c1"># ... needs to be changed to the following with Graylog 3.0</span>
<span class="n">header_upstream</span> <span class="n">X</span><span class="o">-</span><span class="n">Graylog</span><span class="o">-</span><span class="n">Server</span><span class="o">-</span><span class="n">URL</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="p">{</span><span class="n">host</span><span class="p">}</span><span class="o">/</span>
</pre></div>
</div>
<p>For a more detailed description of the new HTTP settings, please consult the annotated <a class="reference external" href="https://github.com/Graylog2/graylog2-server/blob/d9bb656275eeac7027e3fe12d9ee1b6a0905dcd1/misc/graylog.conf#L79-L81">Graylog configuration file</a>.</p>
<p>Overview of removed Graylog REST API settings:</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="34%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Removed Setting</th>
<th class="head">New Setting</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">rest_listen_uri</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http_bind_address</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">127.0.0.1:9000</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">rest_transport_uri</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http_publish_uri</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http://$http_bind_address/</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">web_endpoint_uri</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http_external_uri</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">$http_publish_uri</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">rest_enable_cors</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http_enable_cors</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">rest_enable_gzip</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http_enable_gzip</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">rest_max_header_size</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http_max_header_size</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">8192</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">rest_max_initial_line_length</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http_max_initial_line_length</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">4096</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">rest_thread_pool_size</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http_thread_pool_size</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">16</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">rest_enable_tls</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http_enable_tls</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">false</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">rest_tls_cert_file</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http_tls_cert_file</span></code></td>
<td>Empty</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">rest_tls_key_file</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http_tls_key_file</span></code></td>
<td>Empty</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">rest_tls_key_password</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http_tls_key_password</span></code></td>
<td>Empty</td>
</tr>
</tbody>
</table>
<p>Overview of removed Graylog web interface settings:</p>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="39%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Removed Setting</th>
<th class="head">New Setting</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">web_enable</span></code></td>
<td>None</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">web_listen_uri</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http_bind_address</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">127.0.0.1:9000</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">web_enable_cors</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http_enable_cors</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">web_enable_gzip</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http_enable_gzip</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">web_max_header_size</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http_max_header_size</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">8192</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">web_max_initial_line_length</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http_max_initial_line_length</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">4096</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">web_thread_pool_size</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http_thread_pool_size</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">16</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">web_enable_tls</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http_enable_tls</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">false</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">web_tls_cert_file</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http_tls_cert_file</span></code></td>
<td>Empty</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">web_tls_key_file</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http_tls_key_file</span></code></td>
<td>Empty</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">web_tls_key_password</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">http_tls_key_password</span></code></td>
<td>Empty</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="plugins-merged-into-the-graylog-server">
<h4>Plugins merged into the Graylog server<a class="headerlink" href="#plugins-merged-into-the-graylog-server" title="Permalink to this headline">¶</a></h4>
<p>Starting with Graylog 3.0.0, the following official plugins were merged into the Graylog server:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Graylog2/graylog-plugin-beats">Beats Input</a></li>
<li><a class="reference external" href="https://github.com/Graylog2/graylog-plugin-cef">CEF Input</a></li>
<li><a class="reference external" href="https://github.com/Graylog2/graylog-plugin-collector">Collector Plugin</a></li>
<li><a class="reference external" href="https://github.com/Graylog2/graylog-plugin-enterprise-integration">Enterprise Integration Page</a></li>
<li><a class="reference external" href="https://github.com/Graylog2/graylog-plugin-map-widget">Map Widget</a></li>
<li><a class="reference external" href="https://github.com/Graylog2/graylog-plugin-netflow">NetFlow Input</a></li>
<li><a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor">Pipeline Processor</a></li>
</ul>
<p>That means these plugins are not available as separate plugins anymore. If you manually update your Graylog installation (without using operating system packages), make sure to remove all old plugin files from the <a class="reference external" href="http://docs.graylog.org/en/3.0/pages/configuration/server.conf.html">plugin_dir</a> folder.</p>
<p>The old issues in these repositories are still available for reference but new issues should only be created in the <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues">Graylog server issue tracker</a>.</p>
<p>The following HTTP API paths changed due to the plugin merge:</p>
<table border="1" class="docutils">
<colgroup>
<col width="66%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Old Path</th>
<th class="head">New Path</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">/plugins/org.graylog.plugins.map/mapdata</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">/search/mapdata</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">/plugins/org.graylog.plugins.pipelineprocessor/system/pipelines/pipeline</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">/system/pipelines/pipeline</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">/plugins/org.graylog.plugins.pipelineprocessor/system/pipelines/pipeline/parse</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">/system/pipelines/pipeline/parse</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">/plugins/org.graylog.plugins.pipelineprocessor/system/pipelines/rule</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">/system/pipelines/rule</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">/plugins/org.graylog.plugins.pipelineprocessor/system/pipelines/rule/functions</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">/system/pipelines/rule/functions</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">/plugins/org.graylog.plugins.pipelineprocessor/system/pipelines/rule/multiple</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">/system/pipelines/rule/multiple</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">/plugins/org.graylog.plugins.pipelineprocessor/system/pipelines/rule/parse</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">/system/pipelines/rule/parse</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">/plugins/org.graylog.plugins.pipelineprocessor/system/pipelines/connections</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">/system/pipelines/connections</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">/plugins/org.graylog.plugins.pipelineprocessor/system/pipelines/connections/to_stream</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">/system/pipelines/connections/to_stream</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">/plugins/org.graylog.plugins.pipelineprocessor/system/pipelines/connections/to_pipeline</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">/system/pipelines/connections/to_pipeline</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">/plugins/org.graylog.plugins.pipelineprocessor/system/pipelines/simulate</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">/system/pipelines/simulate</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="new-bin-dir-and-data-dir-configuration-parameters">
<h4>New “bin_dir” and “data_dir” configuration parameters<a class="headerlink" href="#new-bin-dir-and-data-dir-configuration-parameters" title="Permalink to this headline">¶</a></h4>
<p>We introduced two new configuration parameters related to file system paths.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">bin_dir</span></code> config option points to the directory that contains scripts like <code class="docutils literal notranslate"><span class="pre">graylogctl</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">data_dir</span></code> option configures the base directory for Graylog server state.</li>
</ul>
<p>Please check the updated default <code class="docutils literal notranslate"><span class="pre">graylog.conf</span></code> configuration file for required changes to your existing file.</p>
</div>
<div class="section" id="removed-support-for-drools-based-filters">
<h4>Removed support for Drools-based filters<a class="headerlink" href="#removed-support-for-drools-based-filters" title="Permalink to this headline">¶</a></h4>
<p>For a long time, Graylog allowed to use <a class="reference external" href="https://www.drools.org/">Drools</a> to filter messages. Unfortunately, using Drools to perform complex filter logic came with a performance penalty and wasn’t as flexible as we would have liked it to be.</p>
<p>Starting with Graylog 3.0.0, the support for Drools-based message filters has been removed from Graylog. The <code class="docutils literal notranslate"><span class="pre">rules_file</span></code> configuration setting has been removed accordingly.</p>
<p>We recommend migrating the Drools-based logic to <a class="reference external" href="http://docs.graylog.org/en/3.0/pages/pipelines.html">Processing Pipelines</a>.</p>
<div class="section" id="drools-based-blacklist">
<h5>Drools-based blacklist<a class="headerlink" href="#drools-based-blacklist" title="Permalink to this headline">¶</a></h5>
<p>Graylog provided undocumented blacklist-functionality based on Drools. This blacklist could only be modified via the Graylog REST API on the <code class="docutils literal notranslate"><span class="pre">/filters/blacklist</span></code> resource.</p>
<p>If you’ve been using this functionality, you’ll have to migrate these blacklist rules to the <a class="reference external" href="http://docs.graylog.org/en/3.0/pages/pipelines.html">Processing Pipelines</a>.</p>
<p>To check if you’re using the Drools-based blacklist in Graylog prior to version 3.0.0, you can run the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># curl -u admin:password -H &#39;Accept: application/json&#39; &#39;http://graylog.example.com/api/filters/blacklist?pretty=true&#39;</span>
</pre></div>
</div>
<div class="section" id="string-based-blacklist-rule">
<h6>String-based blacklist rule<a class="headerlink" href="#string-based-blacklist-rule" title="Permalink to this headline">¶</a></h6>
<p>Old blacklist rule:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;id&quot;</span> <span class="p">:</span> <span class="s2">&quot;54e300001234123412340001&quot;</span><span class="p">,</span>
   <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
   <span class="s2">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;String Blacklist&quot;</span><span class="p">,</span>
   <span class="s2">&quot;description&quot;</span> <span class="p">:</span> <span class="s2">&quot;Drop messages based on case-insensitive string comparison&quot;</span><span class="p">,</span>
   <span class="s2">&quot;fieldName&quot;</span> <span class="p">:</span> <span class="s2">&quot;custom_field&quot;</span><span class="p">,</span>
   <span class="s2">&quot;pattern&quot;</span> <span class="p">:</span> <span class="s2">&quot;EXAMPLE pattern&quot;</span><span class="p">,</span>
   <span class="s2">&quot;creator_user_id&quot;</span> <span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
   <span class="s2">&quot;created_at&quot;</span> <span class="p">:</span> <span class="s2">&quot;2018-04-04T12:00:00.000Z&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>New pipeline rule:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>rule &quot;string-blacklist&quot;
when
  has_field(&quot;custom_field&quot;) &amp;&amp;
  lowercase(to_string($message.custom_field)) == &quot;example pattern&quot;
then
  drop_message();
end
</pre></div>
</div>
<p>See also:</p>
<ul class="simple">
<li><a class="reference external" href="http://docs.graylog.org/en/3.0/pages/pipelines/functions.html#has-field">has_field()</a></li>
<li><a class="reference external" href="http://docs.graylog.org/en/3.0/pages/pipelines/functions.html#lowercase">lowercase()</a></li>
<li><a class="reference external" href="http://docs.graylog.org/en/3.0/pages/pipelines/functions.html#drop-message">drop_message()</a></li>
</ul>
</div>
<div class="section" id="regex-based-blacklist-rule">
<h6>Regex-based blacklist rule<a class="headerlink" href="#regex-based-blacklist-rule" title="Permalink to this headline">¶</a></h6>
<p>Old blacklist rule:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;id&quot;</span> <span class="p">:</span> <span class="s2">&quot;54e300001234123412340002&quot;</span><span class="p">,</span>
   <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;regex&quot;</span><span class="p">,</span>
   <span class="s2">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;Regex Blacklist&quot;</span><span class="p">,</span>
   <span class="s2">&quot;description&quot;</span> <span class="p">:</span> <span class="s2">&quot;Drop messages based on regular expression&quot;</span><span class="p">,</span>
   <span class="s2">&quot;fieldName&quot;</span> <span class="p">:</span> <span class="s2">&quot;custom_field&quot;</span><span class="p">,</span>
   <span class="s2">&quot;pattern&quot;</span> <span class="p">:</span> <span class="s2">&quot;^EXAMPLE.*&quot;</span><span class="p">,</span>
   <span class="s2">&quot;creator_user_id&quot;</span> <span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
   <span class="s2">&quot;created_at&quot;</span> <span class="p">:</span> <span class="s2">&quot;2018-04-04T12:00:00.000Z&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>New pipeline rule:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>rule &quot;regex-blacklist&quot;
when
  has_field(&quot;custom_field&quot;) &amp;&amp;
  regex(&quot;^EXAMPLE.*&quot;, to_string($message.custom_field)).matches == true
then
  drop_message();
end
</pre></div>
</div>
<p>See also:</p>
<ul class="simple">
<li><a class="reference external" href="http://docs.graylog.org/en/3.0/pages/pipelines/functions.html#has-field">has_field()</a></li>
<li><a class="reference external" href="http://docs.graylog.org/en/3.0/pages/pipelines/functions.html#regex">regex()</a></li>
<li><a class="reference external" href="http://docs.graylog.org/en/3.0/pages/pipelines/functions.html#drop-message">drop_message()</a></li>
</ul>
</div>
<div class="section" id="ip-range-based-blacklist-rule">
<h6>IP Range-based blacklist rule<a class="headerlink" href="#ip-range-based-blacklist-rule" title="Permalink to this headline">¶</a></h6>
<p>Old blacklist rule:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;id&quot;</span> <span class="p">:</span> <span class="s2">&quot;54e300001234123412340003&quot;</span><span class="p">,</span>
   <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;iprange&quot;</span><span class="p">,</span>
   <span class="s2">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;IP Blacklist&quot;</span><span class="p">,</span>
   <span class="s2">&quot;description&quot;</span> <span class="p">:</span> <span class="s2">&quot;Drop messages based on IP address&quot;</span><span class="p">,</span>
   <span class="s2">&quot;fieldName&quot;</span> <span class="p">:</span> <span class="s2">&quot;custom_field&quot;</span><span class="p">,</span>
   <span class="s2">&quot;pattern&quot;</span> <span class="p">:</span> <span class="s2">&quot;192.168.0.0/16&quot;</span><span class="p">,</span>
   <span class="s2">&quot;creator_user_id&quot;</span> <span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
   <span class="s2">&quot;created_at&quot;</span> <span class="p">:</span> <span class="s2">&quot;2018-04-04T12:00:00.000Z&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>New pipeline rule:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>rule &quot;ip-blacklist&quot;
when
  has_field(&quot;custom_field&quot;) &amp;&amp;
  cidr_match(&quot;192.168.0.0/16&quot;, to_ip($message.custom_field))
then
  drop_message();
end
</pre></div>
</div>
<p>See also:</p>
<ul class="simple">
<li><a class="reference external" href="http://docs.graylog.org/en/3.0/pages/pipelines/functions.html#has-field">has_field()</a></li>
<li><a class="reference external" href="http://docs.graylog.org/en/3.0/pages/pipelines/functions.html#to-ip">to_ip()</a></li>
<li><a class="reference external" href="http://docs.graylog.org/en/3.0/pages/pipelines/functions.html#cidr-match">cidr_match()</a></li>
<li><a class="reference external" href="http://docs.graylog.org/en/3.0/pages/pipelines/functions.html#drop-message">drop_message()</a></li>
</ul>
</div>
</div>
</div>
<div class="section" id="changed-metrics-name-for-stream-rules">
<h4>Changed metrics name for stream rules<a class="headerlink" href="#changed-metrics-name-for-stream-rules" title="Permalink to this headline">¶</a></h4>
<p>The name of the metrics for stream rules have been changed to include the stream ID which helps identifying the actual stream they are related to.</p>
<p>Old metric name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>org.graylog2.plugin.streams.StreamRule.${stream-rule-id}.executionTime
</pre></div>
</div>
<p>New metric name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>org.graylog2.plugin.streams.Stream.${stream-id}.StreamRule.${stream-rule-id}.executionTime
</pre></div>
</div>
</div>
<div class="section" id="email-alarm-callback-default-settings">
<h4>Email alarm callback default settings<a class="headerlink" href="#email-alarm-callback-default-settings" title="Permalink to this headline">¶</a></h4>
<p>The defaults of the configuration settings for the email alarm callback with regard to encrypted connections have been changed.</p>
<table border="1" class="docutils">
<colgroup>
<col width="53%" />
<col width="24%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Setting</th>
<th class="head">Old default</th>
<th class="head">New default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">transport_email_use_tls</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">false</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">transport_email_use_ssl</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">false</span></code></td>
</tr>
</tbody>
</table>
<p>Furthermore, it’s not possible anymore to enable both settings (SMTP with STARTTLS and SMTP over SSL) at the same time because this led to errors at runtime when Graylog tried to upgrade the connection to TLS with STARTTLS in an already existing SMTPS connection.</p>
<p>Most SMTP services prefer SMTP with STARTTLS to provide an encrypted connection.</p>
</div>
<div class="section" id="collector-sidecar-is-deprecated">
<h4>Collector Sidecar is deprecated<a class="headerlink" href="#collector-sidecar-is-deprecated" title="Permalink to this headline">¶</a></h4>
<p>Graylog 3.0 comes with a new Sidecar implementation.
We still support the old <strong>Collector Sidecars</strong>, which can be found in the <code class="docutils literal notranslate"><span class="pre">System</span> <span class="pre">/</span> <span class="pre">Collectors</span> <span class="pre">(legacy)</span></code> menu entry.
For more information check the <a class="reference internal" href="index.html#graylog-sidecar"><span class="std std-ref">Sidecar documentation</span></a> and the <a class="reference internal" href="index.html#graylog-upgrade-sidecar"><span class="std std-ref">Upgrade guide</span></a>.</p>
</div>
<div class="section" id="legacy-content-packs">
<h4>Legacy Content Packs<a class="headerlink" href="#legacy-content-packs" title="Permalink to this headline">¶</a></h4>
<p>The implementation of content packs where fundamentally reworked. Parameters
were added and checks implemented to give the user better usability.
This rework did come with the cost that old content packs might not
work any longer and stop the new content packs from loading.
If the content packs page does not finish loading we recommend to remove
the old content packs from your MongoDB.
For that, please connect to your MongoDB shell and remove all content packs
with the following command:</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">db</span><span class="o">.</span><span class="n">content_packs</span><span class="o">.</span><span class="n">deleteMany</span><span class="p">({})</span>
</pre></div>
</div>
<p>This command will only remove the content packs, it will not remove the
installed configurations.</p>
</div>
<div class="section" id="elasticsearch-6-changes">
<h4>Elasticsearch 6 changes<a class="headerlink" href="#elasticsearch-6-changes" title="Permalink to this headline">¶</a></h4>
<p>There is a breaking change in Elasticsearch 6 that may affect some queries on your searches and dashboards:</p>
<p>Before Elasticsearch 6, queries for keyword fields were split by whitespaces and combined with <code class="docutils literal notranslate"><span class="pre">OR</span></code> operators
resulting, for example, in <code class="docutils literal notranslate"><span class="pre">type:(ssh</span> <span class="pre">login)</span></code> and <code class="docutils literal notranslate"><span class="pre">type:(ssh</span> <span class="pre">OR</span> <span class="pre">login)</span></code> being equivalent. This is no longer
the case in Elasticsearch 6 and now those queries are different: the former looking for the <code class="docutils literal notranslate"><span class="pre">ssh</span> <span class="pre">login</span></code> value,
the second for either <code class="docutils literal notranslate"><span class="pre">ssh</span></code> or <code class="docutils literal notranslate"><span class="pre">login</span></code> values.</p>
<p>Please ensure to look for those queries in your Graylog setup before upgrading to Elasticsearch 6 and add the
<code class="docutils literal notranslate"><span class="pre">OR</span></code> operators where needed.</p>
</div>
</div>
</div>
<div class="section" id="upgrading-graylog-originally-installed-from-image">
<h3>Upgrading Graylog Originally Installed from Image<a class="headerlink" href="#upgrading-graylog-originally-installed-from-image" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>2.x</dt>
<dd>It is not possible to upgrade previous OVAs to Graylog 3.0.0.</dd>
<dt>3.0</dt>
<dd>Starting with Graylog 3.0.0, OVAs use the Operating System packages, so
you can upgrade your appliance by following
<a class="reference internal" href="index.html#operating-package-upgrade-deb-apt"><span class="std std-ref">this update guide</span></a>.</dd>
</dl>
</div>
<div class="section" id="upgrading-graylog-originally-installed-from-package">
<h3>Upgrading Graylog Originally Installed from Package<a class="headerlink" href="#upgrading-graylog-originally-installed-from-package" title="Permalink to this headline">¶</a></h3>
<p>If the current installation was installed using a package manager (ex. yum, apt), update the repository package to the target version, and use the system tools to upgrade the package.
For .rpm based systems <a class="reference internal" href="index.html#operating-package-upgrade-rpm-yum-dnf"><span class="std std-ref">this update guide</span></a> and for .deb based systems <a class="reference internal" href="index.html#operating-package-upgrade-deb-apt"><span class="std std-ref">this update guide</span></a> should help.</p>
</div>
<div class="section" id="upgrading-elasticsearch">
<h3>Upgrading Elasticsearch<a class="headerlink" href="#upgrading-elasticsearch" title="Permalink to this headline">¶</a></h3>
<p>Since Graylog 2.3 Elasticsearch 5.x is supported. This Graylog version supports Elasticsearch 2.x and 5.x. It is recommended to update Elasticsearch 2.x to the latest stable 5.x version, after you have Graylog 2.3 or later running. This Elasticsearch upgrade does not need to be made during the Graylog update.</p>
<p>When upgrading from Elasticsearch 2.x to Elasticsearch 5.x, make sure to read <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.6/setup-upgrade.html">the upgrade guide</a> provided by Elastic. The Graylog <a class="reference internal" href="index.html#configuring-es"><span class="std std-ref">Elasticsearch configuration documentation</span></a> contains information about the compatible Elasticsearch version. After the upgrade you must <a class="reference internal" href="index.html#rotate-es-indices"><span class="std std-ref">rotate the indices once manually</span></a>.</p>
<p>Graylog 2.5 is the first Graylog version that supports Elasticsearch 6, the upgrade is recommended as soon as possible but might need more attention and include the need to reindex your data. Make sure to check <a class="reference internal" href="index.html#es6-reindex"><span class="std std-ref">our Elasticsearch 6 upgrade notes</span></a> for this and other requirements.</p>
<p>When upgrading from Elasticsearch 5.x to Elasticsearch 6.x, make sure to read the <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.x/setup-upgrade.html">upgrade guide</a> provided by Elastic. The Graylog <a class="reference internal" href="index.html#configuring-es"><span class="std std-ref">Elasticsearch configuration documentation</span></a> contains information about the compatible Elasticsearch version. After the upgrade you must <a class="reference internal" href="index.html#rotate-es-indices"><span class="std std-ref">rotate the indices once manually</span></a>.</p>
<div class="toctree-wrapper compound">
<span id="document-pages/upgrade/elasticsearch-6"></span><div class="section" id="elasticsearch-6-notes">
<span id="es6-reindex"></span><h4>Elasticsearch 6 notes<a class="headerlink" href="#elasticsearch-6-notes" title="Permalink to this headline">¶</a></h4>
<p>Upgrades from Elasticsearch 2.x direct to the latest Elasticsearch 6.x are not supported. Only the upgrade from Elasticsearch 5.x is supported and covered by this document.</p>
<p>At first check if the data in Elasticsearch need to be re-indexed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ http :9200/_settings | \
 jq &#39;[ path(.[] |select(.settings.index.version.created &lt; &quot;5000000&quot;))[] ]&#39;
</pre></div>
</div>
<p>The above example use the tools <a class="reference external" href="https://httpie.org/">httpie</a> and <a class="reference external" href="https://stedolan.github.io/jq/">jq</a> to query the Elasticsearch API and check if any indices are created with Elasticsearch prior to Version 5. If that returns any index names, you need to re-index your data to make them work with Elasticseach 6.</p>
<p>Upgrading to Elasticsearch 6 is always a <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.x/restart-upgrade.html">full-cluster-restart</a> and all breaking changes need to checked carefully. Once started their is no going back or downgrade possible.</p>
<p>The <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/breaking-changes-6.0.html">Elasticsearch breaking changes notes</a> contain a complete list of changes in Elasticsearch that should be checked against your configuration. The most notable is the cluster name is no longer allowed in <cite>path.data</cite> (see <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/breaking-changes-6.0.html#_cluster_name_no_longer_allowed_in_path_data">breaking changes in Elasticsearch 6</a>) and the release of <a class="reference external" href="https://www.elastic.co/products/x-pack/open">Elasticseach OSS Packages</a>.</p>
<div class="section" id="upgrade-without-re-index">
<h5>Upgrade without re-index<a class="headerlink" href="#upgrade-without-re-index" title="Permalink to this headline">¶</a></h5>
<p>When no re-index is needed the easiest way is to follow the <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.5/restart-upgrade.html">elastic upgrade guide for Elasticsearch</a> this gives all needed commands.</p>
</div>
<div class="section" id="upgrade-with-re-index">
<h5>Upgrade with re-index<a class="headerlink" href="#upgrade-with-re-index" title="Permalink to this headline">¶</a></h5>
<p>First a brief overview what steps need to be performed followed by the list of commands. Once you started the process of reindex your data you need to finish all steps to get a working Graylog and Elasticsearch cluster again.</p>
<ol class="arabic simple">
<li>Upgrade to Graylog latest 2.4 release (2.4.6 at time of writing)</li>
<li><dl class="first docutils">
<dt>Upgrade ES to the latest 5.6.x on all cluster nodes. (5.6.14 as of this writing)</dt>
<dd><ul class="first last">
<li>See: <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.6/setup-upgrade.html">https://www.elastic.co/guide/en/elasticsearch/reference/5.6/setup-upgrade.html</a></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Wait until all shards are initialized after updating ES</dt>
<dd><ul class="first last">
<li>If the active write index is still a 2.x ES index, a manual index rotation needs to be triggered</li>
</ul>
</dd>
</dl>
</li>
<li>Upgrade to Graylog 2.5 (2.5.1 at time of writing)</li>
<li>Update the index template for every index set to the latest ES 6 one by using the Graylog HTTP API. (otherwise a user has to rotate the active write index just to install the latest index template)</li>
<li><dl class="first docutils">
<dt>Check which indices have been created with ES 2.x and need re-indexing</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>For each index to re-index do the following</dt>
<dd><ul class="first last">
<li>Check that index is not the active write index</li>
<li>Create a re-index target index: &lt;index-name&gt;_reindex (e.g. graylog_0_reindex) (with correct settings for shards and replicas)</li>
<li>Check that mapping and settings of the new index are correct</li>
<li>Start re-index task in ES (using requests_per_second URL param and size param in the payload to avoid overloading the ES cluster)</li>
<li>Check progress of re-index task and wait until it is done</li>
<li>Check that the document counts in the old and the new index match</li>
<li>Delete old index</li>
<li>Recreate the old index: &lt;index-name&gt; (e.g. graylog_0) (with correct settings for shards and replicas)</li>
<li>Check that mapping and settings of the new index are correct</li>
<li>Start re-index task in ES to re-index documents back into the old index (using requests_per_second URL param and size param in the payload to avoid overloading the ES cluster)</li>
<li>Check that the document counts in the old and the new index match</li>
<li>Recreate Graylog index ranges for the old index</li>
<li>Delete temporary re-index target index (e.g. graylog_0_reindex)</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li>Delete old re-index tasks from ES</li>
<li>Upgrade to the latest ES 6.x version. (6.5.1 as of this writing)</li>
</ol>
<div class="section" id="detailed-list-of-commands">
<h6>Detailed list of commands<a class="headerlink" href="#detailed-list-of-commands" title="Permalink to this headline">¶</a></h6>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is not a copy&amp;paste tutorial and you need to read and adjust the commands to your local needs. We use the tools <a class="reference external" href="https://httpie.org/">httpie</a> and <a class="reference external" href="https://stedolan.github.io/jq/">jq</a> in the following commands.</p>
</div>
<div class="section" id="prerequisites">
<h7>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h7>
<div class="section" id="check-es-versions-of-all-nodes">
<h8>Check ES versions of all nodes<a class="headerlink" href="#check-es-versions-of-all-nodes" title="Permalink to this headline">¶</a></h8>
<p>The ES version needs to be the same on all ES nodes in the cluster before we can start the re-index process!:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="s2">&quot;:9200/_cat/nodes?v&amp;h=name,ip,version&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="check-that-all-shards-are-initialized-green">
<h8>Check that all shards are initialized (“green”)<a class="headerlink" href="#check-that-all-shards-are-initialized-green" title="Permalink to this headline">¶</a></h8>
<p>All shards need to be initialized before we can start the re-index process.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="s2">&quot;:9200/_cat/indices?h=health,status,index&quot;</span> <span class="o">|</span> <span class="n">grep</span> <span class="o">-</span><span class="n">v</span> <span class="s1">&#39;^green&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="update-graylog-index-templates-in-elasticsearch">
<h8>Update Graylog index templates in Elasticsearch<a class="headerlink" href="#update-graylog-index-templates-in-elasticsearch" title="Permalink to this headline">¶</a></h8>
<p>The index templates that Graylog writes to Elasticsearch need to be updated before we can start the re-index process.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">post</span> <span class="p">:</span><span class="mi">9000</span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">indexer</span><span class="o">/</span><span class="n">indices</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="n">update</span> <span class="n">x</span><span class="o">-</span><span class="n">requested</span><span class="o">-</span><span class="n">by</span><span class="p">:</span><span class="n">httpie</span>
</pre></div>
</div>
</div>
<div class="section" id="collect-indices-that-need-a-re-index-to-work-with-es-6">
<h8>Collect indices that need a re-index to work with ES 6<a class="headerlink" href="#collect-indices-that-need-a-re-index-to-work-with-es-6" title="Permalink to this headline">¶</a></h8>
<p>All indices which have not been created with ES 5 need to be re-index to work with ES 6. (or deleted if they are not needed anymore…):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="p">:</span><span class="mi">9200</span><span class="o">/</span><span class="n">_settings</span> <span class="o">|</span> <span class="n">jq</span> <span class="s1">&#39;[ path(.[] | select(.settings.index.version.created &lt; &quot;5000000&quot;))[] ]&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="re-index-commands-for-every-index">
<h7>Re-Index commands for every index<a class="headerlink" href="#re-index-commands-for-every-index" title="Permalink to this headline">¶</a></h7>
<p>The following commands need to be executed for every index that needs to be re-indexed. Replace the graylog_0 index name in the examples below with the index name you are currently working on.</p>
<div class="section" id="check-if-index-is-an-active-write-index">
<h8>Check if index is an active write index<a class="headerlink" href="#check-if-index-is-an-active-write-index" title="Permalink to this headline">¶</a></h8>
<p>We should never re-index the active write target because that index is actively written to. If the active write index is still a 2.x ES index, a manual index rotation needs to be triggered.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="p">:</span><span class="mi">9200</span><span class="o">/*</span><span class="n">_deflector</span><span class="o">/</span><span class="n">_alias</span> <span class="o">|</span> <span class="n">jq</span> <span class="s1">&#39;keys&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="create-new-index">
<h8>Create new index<a class="headerlink" href="#create-new-index" title="Permalink to this headline">¶</a></h8>
<p>The new index needs to be created before it can be used as a re-index target. The request needs to include the correct settings for the number of shards and replicas. These settings can be different for each index set! (actual settings can be found in the Graylog “System / Indices” page for each index set):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">put</span> <span class="p">:</span><span class="mi">9200</span><span class="o">/</span><span class="n">graylog_0_reindex</span> <span class="n">settings</span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;{&quot;number_of_shards&quot;:4,&quot;number_of_replicas&quot;:0}&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="check-mapping-and-index-settings">
<h8>Check mapping and index settings<a class="headerlink" href="#check-mapping-and-index-settings" title="Permalink to this headline">¶</a></h8>
<p>Use these commands to check if the settings and index mapping for the new index are correct.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="p">:</span><span class="mi">9200</span><span class="o">/</span><span class="n">graylog_0_reindex</span><span class="o">/</span><span class="n">_mapping</span>
<span class="n">http</span> <span class="p">:</span><span class="mi">9200</span><span class="o">/</span><span class="n">graylog_0_reindex</span><span class="o">/</span><span class="n">_settings</span>
</pre></div>
</div>
</div>
<div class="section" id="start-re-index-process">
<h8>Start re-index process<a class="headerlink" href="#start-re-index-process" title="Permalink to this headline">¶</a></h8>
<p>This command starts the actual re-index process. It will return a task ID that can be used to check the progress of the re-index task in Elasticsearch.</p>
<p>The size value in the payload is the batch size that will be used for the re-index process. It defaults to 1000 and can be adjusted to tune the re-indexing process.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">post</span> <span class="p">:</span><span class="mi">9200</span><span class="o">/</span><span class="n">_reindex</span> <span class="n">wait_for_completion</span><span class="o">==</span><span class="n">false</span> <span class="n">source</span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;{&quot;index&quot;:&quot;graylog_0&quot;,&quot;size&quot;: 1000}&#39;</span> <span class="n">dest</span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;{&quot;index&quot;:&quot;graylog_0_reindex&quot;}&#39;</span>
</pre></div>
</div>
<p>The re-index API supports the requests_per_second URL parameter to throttle the re-index process. This can be useful to make sure that the re-index process doesn’t take too much resources. See this document for an explanation on how the parameter works: <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.0/docs-reindex.html#_url_parameters_3">https://www.elastic.co/guide/en/elasticsearch/reference/6.0/docs-reindex.html#_url_parameters_3</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">post</span> <span class="p">:</span><span class="mi">9200</span><span class="o">/</span><span class="n">_reindex</span> <span class="n">wait_for_completion</span><span class="o">==</span><span class="n">false</span> <span class="n">requests_per_second</span><span class="o">==</span><span class="mi">500</span> <span class="n">source</span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;{&quot;index&quot;:&quot;graylog_0&quot;,&quot;size&quot;: 1000}&#39;</span> <span class="n">dest</span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;{&quot;index&quot;:&quot;graylog_0_reindex&quot;}&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="wait-for-the-re-index-to-complete-and-check-re-index-progress">
<h8>Wait for the re-index to complete and check re-index progress<a class="headerlink" href="#wait-for-the-re-index-to-complete-and-check-re-index-progress" title="Permalink to this headline">¶</a></h8>
<p>The re-index progress can be checked with the following command using the task ID that has been returned by the re-index request.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="p">:</span><span class="mi">9200</span><span class="o">/</span><span class="n">_tasks</span><span class="o">/&lt;</span><span class="n">task</span><span class="o">-</span><span class="nb">id</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="compare-documents-in-the-old-and-new-index">
<h8>Compare documents in the old and new index<a class="headerlink" href="#compare-documents-in-the-old-and-new-index" title="Permalink to this headline">¶</a></h8>
<p>Before we continue, we should check that all documents have been re-indexed into the new index by comparing the document counts.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="p">:</span><span class="mi">9200</span><span class="o">/</span><span class="n">graylog_0</span><span class="o">/</span><span class="n">_count</span>
<span class="n">http</span> <span class="p">:</span><span class="mi">9200</span><span class="o">/</span><span class="n">graylog_0_reindex</span><span class="o">/</span><span class="n">_count</span>
</pre></div>
</div>
</div>
<div class="section" id="delete-old-index">
<h8>Delete old index<a class="headerlink" href="#delete-old-index" title="Permalink to this headline">¶</a></h8>
<p>Now delete the old index so we can recreate it for re-indexing.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">delete</span> <span class="p">:</span><span class="mi">9200</span><span class="o">/</span><span class="n">graylog_0</span>
</pre></div>
</div>
</div>
<div class="section" id="recreate-old-index">
<h8>Recreate old index<a class="headerlink" href="#recreate-old-index" title="Permalink to this headline">¶</a></h8>
<p>Recreate the old index again so we can use it as a re-index target. The request needs to include the correct settings for the number of shards and replicas. These settings can be different for each index set! (actual settings can be found in the Graylog “System / Indices” page for each index set):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">put</span> <span class="p">:</span><span class="mi">9200</span><span class="o">/</span><span class="n">graylog_0</span> <span class="n">settings</span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;{&quot;number_of_shards&quot;:4,&quot;number_of_replicas&quot;:0}&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h8>Check mapping and index settings<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h8>
<p>Use these commands to check if the settings and index mapping for the recreated index are correct.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="p">:</span><span class="mi">9200</span><span class="o">/</span><span class="n">graylog_0</span><span class="o">/</span><span class="n">_mapping</span>
<span class="n">http</span> <span class="p">:</span><span class="mi">9200</span><span class="o">/</span><span class="n">graylog_0</span><span class="o">/</span><span class="n">_settings</span>
</pre></div>
</div>
</div>
<div class="section" id="start-re-index-process-for-old-index">
<h8>Start re-index process for old index<a class="headerlink" href="#start-re-index-process-for-old-index" title="Permalink to this headline">¶</a></h8>
<p>This command starts the re-index process to move back the documents into the old index. It will return a task ID that can be used to check the progress of the re-index task in Elasticsearch.</p>
<p>The size value in the payload is the batch size that will be used for the re-index process. It defaults to 1000 and can be adjusted to tune the re-indexing process.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">post</span> <span class="p">:</span><span class="mi">9200</span><span class="o">/</span><span class="n">_reindex</span> <span class="n">wait_for_completion</span><span class="o">==</span><span class="n">false</span> <span class="n">source</span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;{&quot;index&quot;:&quot;graylog_0_reindex&quot;,&quot;size&quot;: 1000}&#39;</span> <span class="n">dest</span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;{&quot;index&quot;:&quot;graylog_0&quot;}&#39;</span>
</pre></div>
</div>
<p>The re-index API supports the requests_per_second URL parameter to throttle the re-index process. This can be useful to make sure that the re-index process doesn’t take too much resources. See this document for an explanation on how the parameter works: <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.0/docs-reindex.html#_url_parameters_3">https://www.elastic.co/guide/en/elasticsearch/reference/6.0/docs-reindex.html#_url_parameters_3</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">post</span> <span class="p">:</span><span class="mi">9200</span><span class="o">/</span><span class="n">_reindex</span> <span class="n">wait_for_completion</span><span class="o">==</span><span class="n">false</span> <span class="n">requests_per_second</span><span class="o">==</span><span class="mi">500</span> <span class="n">source</span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;{&quot;index&quot;:&quot;graylog_0_reindex&quot;,&quot;size&quot;: 1000}&#39;</span> <span class="n">dest</span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;{&quot;index&quot;:&quot;graylog_0&quot;}&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h8>Compare documents in the old and new index<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h8>
<p>Before we continue, we should check that all documents have been re-indexed into the re-created old index by comparing the document counts with the temporary index.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="p">:</span><span class="mi">9200</span><span class="o">/</span><span class="n">graylog_0</span><span class="o">/</span><span class="n">_count</span>
<span class="n">http</span> <span class="p">:</span><span class="mi">9200</span><span class="o">/</span><span class="n">graylog_0_reindex</span><span class="o">/</span><span class="n">_count</span>
</pre></div>
</div>
</div>
<div class="section" id="create-index-range-for-the-recreated-index">
<h8>Create index range for the recreated index<a class="headerlink" href="#create-index-range-for-the-recreated-index" title="Permalink to this headline">¶</a></h8>
<p>Graylog needs to know about the recreated index by creating an index range for it.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">post</span> <span class="p">:</span><span class="mi">9000</span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">indices</span><span class="o">/</span><span class="n">ranges</span><span class="o">/</span><span class="n">graylog_0</span><span class="o">/</span><span class="n">rebuild</span> <span class="n">x</span><span class="o">-</span><span class="n">requested</span><span class="o">-</span><span class="n">by</span><span class="p">:</span><span class="n">httpie</span>
</pre></div>
</div>
</div>
<div class="section" id="delete-temporary-re-index-target-index">
<h8>Delete temporary re-index target index<a class="headerlink" href="#delete-temporary-re-index-target-index" title="Permalink to this headline">¶</a></h8>
<p>The temporary re-index target index can now be deleted because we don’t use it anymore.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">delete</span> <span class="p">:</span><span class="mi">9200</span><span class="o">/</span><span class="n">graylog_0_reindex</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="cleanup">
<h7>Cleanup<a class="headerlink" href="#cleanup" title="Permalink to this headline">¶</a></h7>
<p>The re-index process leaves some tasks in Elasticsearch that need to be cleaned up automatically.</p>
<div class="section" id="find-completed-re-index-tasks-for-deletion">
<h8>Find completed re-index tasks for deletion<a class="headerlink" href="#find-completed-re-index-tasks-for-deletion" title="Permalink to this headline">¶</a></h8>
<p>Execute the following command to get all the tasks we should remove.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="p">:</span><span class="mi">9200</span><span class="o">/.</span><span class="n">tasks</span><span class="o">/</span><span class="n">_search</span> <span class="o">|</span> <span class="n">jq</span> <span class="s1">&#39;[.hits.hits[] | select(._source.task.action == &quot;indices:data/write/reindex&quot; and ._source.completed == true) | {&quot;task_id&quot;: ._id, &quot;description&quot;: ._source.task.description}]&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="remove-completed-re-index-tasks">
<h8>Remove completed re-index tasks<a class="headerlink" href="#remove-completed-re-index-tasks" title="Permalink to this headline">¶</a></h8>
<p>Execute the following command for every completed task ID.
Re-Index Commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">delete</span> <span class="p">:</span><span class="mi">9200</span><span class="o">/.</span><span class="n">tasks</span><span class="o">/</span><span class="n">task</span><span class="o">/&lt;</span><span class="n">task</span><span class="o">-</span><span class="nb">id</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<span id="document-pages/configuration"></span><div class="section" id="configuring-graylog">
<span id="graylog-configuration"></span><h2>Configuring Graylog<a class="headerlink" href="#configuring-graylog" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<span id="document-pages/configuration/server.conf"></span><div class="section" id="server-conf">
<span id="id1"></span><h3>server.conf<a class="headerlink" href="#server-conf" title="Permalink to this headline">¶</a></h3>
<p>The file <code class="docutils literal notranslate"><span class="pre">server.conf</span></code> is the Graylog configuration file.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Check <a class="reference internal" href="index.html#default-file-location"><span class="std std-ref">Default file locations</span></a> to locate it in your installation.</p>
</div>
<p>It has to use ISO 8859-1/Latin-1 character encoding.
Characters that cannot be directly represented in this encoding can be written using Unicode escapes as defined in <a class="reference external" href="https://docs.oracle.com/javase/specs/jls/se8/html/jls-3.html#jls-3.3">Java SE Specifications</a>, using the u prefix.
For example, u002c.</p>
<ul>
<li><dl class="first docutils">
<dt>Entries are generally expected to be a single line of the form, one of the following:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal notranslate"><span class="pre">propertyName=propertyValue</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">propertyName:propertyValue</span></code></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>White space that appears between the property name and property value is ignored, so the following are equivalent:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal notranslate"><span class="pre">name=Stephen</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">=</span> <span class="pre">Stephen</span></code></li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">White space at the beginning of the line is also ignored.</p>
</li>
<li><p class="first">Lines that start with the comment characters <code class="docutils literal notranslate"><span class="pre">!</span></code> or <code class="docutils literal notranslate"><span class="pre">#</span></code> are ignored. Blank lines are also ignored.</p>
</li>
<li><p class="first">The property value is generally terminated by the end of the line. White space following the property value is not ignored, and is treated as part of the property value.</p>
</li>
<li><p class="first">A property value can span several lines if each line is terminated by a backslash (<code class="docutils literal notranslate"><span class="pre">\</span></code>) character. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">targetCities</span><span class="o">=</span>\
       <span class="n">Detroit</span><span class="p">,</span>\
       <span class="n">Chicago</span><span class="p">,</span>\
       <span class="n">Los</span> <span class="n">Angeles</span>
</pre></div>
</div>
<p>This is equivalent to <code class="docutils literal notranslate"><span class="pre">targetCities=Detroit,Chicago,Los</span> <span class="pre">Angeles</span></code> (white space at the beginning of lines is ignored).</p>
</li>
<li><p class="first">The characters newline, carriage return, and tab can be inserted with characters <code class="docutils literal notranslate"><span class="pre">\n</span></code>, <code class="docutils literal notranslate"><span class="pre">\r</span></code>, and <code class="docutils literal notranslate"><span class="pre">\t</span></code>, respectively.</p>
</li>
<li><p class="first">The backslash character must be escaped as a double backslash. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">path</span><span class="o">=</span><span class="n">c</span><span class="p">:</span>\\<span class="n">docs</span>\\<span class="n">doc1</span>
</pre></div>
</div>
</li>
</ul>
<div class="section" id="properties">
<h4>Properties<a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h4>
<div class="section" id="general">
<h5>General<a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h5>
<ul>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">is_master</span> <span class="pre">=</span> <span class="pre">true</span></code></dt>
<dd><ul class="first last simple">
<li>If you are running more than one instances of Graylog server you have to select only one <code class="docutils literal notranslate"><span class="pre">graylog-server</span></code> node as the master. This node will perform periodical and maintenance actions that slave nodes won’t.</li>
<li>Every slave node will accept messages just as the master nodes. Nodes will fall back to slave mode if there already is a master in the cluster.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">node_id_file</span> <span class="pre">=</span> <span class="pre">/etc/graylog/server/&lt;node-id&gt;</span></code></dt>
<dd><ul class="first last simple">
<li>The auto-generated node ID will be stored in this file and read after restarts. It is a good idea to use an absolute file path here if you are starting Graylog server from init scripts or similar.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">password_secret</span> <span class="pre">=</span> <span class="pre">&lt;secret&gt;</span></code></dt>
<dd><ul class="first simple">
<li>You MUST set a secret that is used for password encryption and salting. The server will refuse to start if it’s not set. Use at least 64 characters.  If you run multiple <code class="docutils literal notranslate"><span class="pre">graylog-server</span></code> nodes, make sure you use the same <code class="docutils literal notranslate"><span class="pre">password_secret</span></code> for all of them!</li>
</ul>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Generate a secret with for example <code class="docutils literal notranslate"><span class="pre">pwgen</span> <span class="pre">-N</span> <span class="pre">1</span> <span class="pre">-s</span> <span class="pre">96</span></code></p>
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">root_username</span> <span class="pre">=</span> <span class="pre">admin</span></code></dt>
<dd><ul class="first last simple">
<li>The default root user is named <strong>admin</strong>.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">root_password_sha2</span> <span class="pre">=</span> <span class="pre">&lt;SHA2&gt;</span></code></dt>
<dd><ul class="first simple">
<li>A SHA2 hash of a password you will use for your initial login. Set this to a SHA2 hash generated with <code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">-n</span> <span class="pre">&quot;Enter</span> <span class="pre">Password:</span> <span class="pre">&quot;</span> <span class="pre">&amp;&amp;</span> <span class="pre">head</span> <span class="pre">-1</span> <span class="pre">&lt;/dev/stdin</span> <span class="pre">|</span> <span class="pre">tr</span> <span class="pre">-d</span> <span class="pre">'\n'</span> <span class="pre">|</span> <span class="pre">sha256sum</span> <span class="pre">|</span> <span class="pre">cut</span> <span class="pre">-d&quot;</span> <span class="pre">&quot;</span> <span class="pre">-f1</span></code> and you will be able to log in to the web interface with username <strong>admin</strong> and password <strong>yourpassword</strong>.</li>
</ul>
<div class="last admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">You MUST specify a hash password for the root user (which you only need to initially set up the system and in case you lose connectivity to your authentication backend). This password cannot be changed using the API or via the web interface. If you need to change it, modify it in this file.</p>
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">root_email</span> <span class="pre">=</span> <span class="pre">&quot;&quot;</span></code></dt>
<dd><ul class="first last simple">
<li>The email address of the root user. Default is empty.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">root_timezone</span> <span class="pre">=</span> <span class="pre">UTC</span></code></dt>
<dd><ul class="first last simple">
<li>The time zone setting of the root user. See this <a class="reference external" href="http://www.joda.org/joda-time/timezones.html">list of valid time zones</a>. Default is UTC.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">bin_dir</span> <span class="pre">=</span> <span class="pre">bin</span></code></dt>
<dd><ul class="first last simple">
<li>This directory contains binaries that are used by the Graylog server. (relative or absolute)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">data_dir</span> <span class="pre">=</span> <span class="pre">data</span></code></dt>
<dd><ul class="first last simple">
<li>This directory is used to store Graylog server state. (relative or absolute)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">plugin_dir</span> <span class="pre">=</span> <span class="pre">plugin</span></code></dt>
<dd><ul class="first last simple">
<li>Set plugin directory here (relative or absolute)</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="web-rest-api">
<span id="web-rest-api-options"></span><h5>Web &amp; REST API<a class="headerlink" href="#web-rest-api" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">http_bind_address</span> <span class="pre">=</span> <span class="pre">127.0.0.1:9000</span></code></dt>
<dd><ul class="first last">
<li>The network interface used by the Graylog HTTP interface.</li>
<li>This network interface must be accessible by all Graylog nodes in the cluster and by all clients using the Graylog web interface.</li>
<li>If the port is omitted, Graylog will use port 9000 by default.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">http_publish_uri</span> <span class="pre">=</span> <span class="pre">http://$http_bind_address/</span></code></dt>
<dd><ul class="first last">
<li>The HTTP URI of this Graylog node which is used to communicate with the other Graylog nodes in the cluster and by all clients using the Graylog web interface.</li>
<li>The URI will be published in the cluster discovery APIs, so that other Graylog nodes will be able to find and connect to this Graylog node.</li>
<li>This configuration setting has to be used if this Graylog node is available on another network interface than $http_bind_address, for example if the machine has multiple network interfaces or is behind a NAT gateway.</li>
<li>This configuration setting <em>must not</em> be configured to a wildcard address!</li>
<li>If <code class="docutils literal notranslate"><span class="pre">http_bind_address</span></code> contains a wildcard IPv4 address (0.0.0.0), <code class="docutils literal notranslate"><span class="pre">http_publish_uri</span></code> will be filled with the first non-loopback IPv4 address of this machine instead.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">http_external_uri</span> <span class="pre">=</span> <span class="pre">$http_publish_uri</span></code></dt>
<dd><ul class="first last">
<li>The public URI of Graylog which will be used by the Graylog web interface to communicate with the Graylog REST API.</li>
<li>The external Graylog URI usually has to be specified, if Graylog is running behind a reverse proxy or load-balancer and it will be used to generate URLs addressing entities in the Graylog REST API (see $http_bind_address).</li>
<li>When using Graylog Collector, this URI will be used to receive heartbeat messages and must be accessible for all collectors.</li>
<li>This setting can be overriden on a per-request basis with the “X-Graylog-Server-URL” HTTP request header.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">http_enable_cors</span> <span class="pre">=</span> <span class="pre">true</span></code></dt>
<dd><ul class="first last">
<li>Enable CORS headers for HTTP interface.</li>
<li>This is necessary for JS-clients accessing the server directly.</li>
<li>If these are disabled, modern browsers will not be able to retrieve resources from the server.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">http_enable_gzip</span> <span class="pre">=</span> <span class="pre">true</span></code></dt>
<dd><ul class="first last">
<li>This compresses API responses and therefore helps to reduce overall round trip times.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">http_max_header_size</span> <span class="pre">=</span> <span class="pre">8192</span></code></dt>
<dd><ul class="first last">
<li>The maximum size of the HTTP request headers in bytes.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">http_thread_pool_size</span> <span class="pre">=</span> <span class="pre">16</span></code></dt>
<dd><ul class="first last">
<li>The size of the thread pool used exclusively for serving the HTTP interface.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">http_enable_tls</span> <span class="pre">=</span> <span class="pre">false</span></code></dt>
<dd><ul class="first last">
<li>This secures the communication with the HTTP interface with TLS to prevent request forgery and eavesdropping.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">http_tls_cert_file</span> <span class="pre">=</span> <span class="pre">/path/to/graylog.crt</span></code></dt>
<dd><ul class="first last">
<li>The X.509 certificate chain file in PEM format to use for securing the HTTP interface.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">http_tls_key_file</span> <span class="pre">=</span> <span class="pre">/path/to/graylog.key</span></code></dt>
<dd><ul class="first last">
<li>The PKCS#8 private key file in PEM format to use for securing the HTTP interface.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">http_tls_key_password</span> <span class="pre">=</span> <span class="pre">secret</span></code></dt>
<dd><ul class="first last">
<li>The password to unlock the private key used for securing the HTTP interface. (if key is encrypted)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">trusted_proxies</span> <span class="pre">=</span> <span class="pre">127.0.0.1/32,</span> <span class="pre">0:0:0:0:0:0:0:1/128</span></code></dt>
<dd><ul class="first last">
<li>Comma separated list of trusted proxies that are allowed to set the client address with X-Forwarded-For header. May be subnets, or hosts.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="elasticsearch">
<h5>Elasticsearch<a class="headerlink" href="#elasticsearch" title="Permalink to this headline">¶</a></h5>
<ul>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_hosts</span> <span class="pre">=</span> <span class="pre">http://node1:9200,http://user:password&#64;node2:19200</span></code></dt>
<dd><ul class="first last simple">
<li>List of Elasticsearch hosts Graylog should connect to.</li>
<li>Need to be specified as a comma-separated list of valid URIs for the http ports of your elasticsearch nodes.</li>
<li>If one or more of your elasticsearch hosts require authentication, include the credentials in each node URI that requires authentication.</li>
<li>Default: <code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:9200</span></code></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_connect_timeout</span> <span class="pre">=</span> <span class="pre">10s</span></code></dt>
<dd><ul class="first last simple">
<li>Maximum amount of time to wait for successfull connection to Elasticsearch HTTP port.</li>
<li>Default: 10 seconds</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_socket_timeout</span> <span class="pre">=</span> <span class="pre">60s</span></code></dt>
<dd><ul class="first last simple">
<li>Maximum amount of time to wait for reading back a response from an Elasticsearch server.</li>
<li>Default: 60 seconds</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_idle_timeout</span> <span class="pre">=</span> <span class="pre">-1s</span></code></dt>
<dd><ul class="first last simple">
<li>Maximum idle time for an Elasticsearch connection. If this is exceeded, this connection will be tore down.</li>
<li>Default: infinity</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_max_total_connections</span> <span class="pre">=</span> <span class="pre">20</span></code></dt>
<dd><ul class="first last simple">
<li>Maximum number of total connections to Elasticsearch.</li>
<li>Default: 20</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_max_total_connections_per_route</span> <span class="pre">=</span> <span class="pre">2</span></code></dt>
<dd><ul class="first last simple">
<li>Maximum number of total connections per Elasticsearch route (normally this means per elasticsearch server).</li>
<li>Default: 2</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_max_retries</span> <span class="pre">=</span> <span class="pre">2</span></code></dt>
<dd><ul class="first last simple">
<li>Maximum number of times Graylog will retry failed requests to Elasticsearch.</li>
<li>Default: 2</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_discovery_enabled</span> <span class="pre">=</span> <span class="pre">false</span></code></dt>
<dd><ul class="first simple">
<li>Enable automatic Elasticsearch node discovery through Nodes Info, see <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.4/cluster-nodes-info.html">Elasticsearch Reference » Cluster APIs » Nodes Info</a>.</li>
<li>Default: <code class="docutils literal notranslate"><span class="pre">false</span></code></li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Automatic node discovery does not work if Elasticsearch requires authentication, e. g. with Shield.</p>
</div>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This setting must be false on AWS Elasticsearch Clusters (the hosted ones) and should be used carefully. In case of trouble with connections to ES this should be the first option to be disabled. See <a class="reference internal" href="index.html#automatic-node-discovery"><span class="std std-ref">Automatic node discovery</span></a> for more details.</p>
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_discovery_filter</span> <span class="pre">=</span> <span class="pre">rack:42</span></code></dt>
<dd><ul class="first last simple">
<li>Filter for including/excluding Elasticsearch nodes in discovery according to their custom attributes, see <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.4/cluster.html#cluster-nodes">Elastic Search Reference » Cluster APIs » Node Specification</a>.</li>
<li>Default: empty</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_discovery_frequency</span> <span class="pre">=</span> <span class="pre">30s</span></code></dt>
<dd><ul class="first last simple">
<li>Frequency of the Elasticsearch node discovery.</li>
<li>Default: 30 seconds</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_compression_enabled</span> <span class="pre">=</span> <span class="pre">false</span></code></dt>
<dd><ul class="first last simple">
<li>Enable payload compression for Elasticsearch requests.</li>
<li>Default: false</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="rotation">
<h5>Rotation<a class="headerlink" href="#rotation" title="Permalink to this headline">¶</a></h5>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">The following settings identified with <em>!</em> in this section have been moved to the database in Graylog 2.0. When you upgrade, make sure to set these to your previous 1.x settings so they will be migrated to the database!</p>
</div>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">rotation_strategy</span> <span class="pre">=</span> <span class="pre">count</span></code> <em>!</em></dt>
<dd><ul class="first last">
<li>Graylog will use multiple indices to store documents in. You can configured the strategy it uses to determine when to rotate the currently active write index.</li>
<li>It supports multiple rotation strategies:
- <code class="docutils literal notranslate"><span class="pre">count</span></code> of messages per index, use <code class="docutils literal notranslate"><span class="pre">elasticsearch_max_docs_per_index</span></code>
- <code class="docutils literal notranslate"><span class="pre">size</span></code> per index, use <code class="docutils literal notranslate"><span class="pre">elasticsearch_max_size_per_index</span></code></li>
<li>valid values are <code class="docutils literal notranslate"><span class="pre">count</span></code>, <code class="docutils literal notranslate"><span class="pre">size</span></code> and <code class="docutils literal notranslate"><span class="pre">time</span></code>, default is <code class="docutils literal notranslate"><span class="pre">count</span></code>.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_max_docs_per_index</span> <span class="pre">=</span> <span class="pre">20000000</span></code> <em>!</em></dt>
<dd><ul class="first last">
<li>(Approximate) maximum number of documents in an Elasticsearch index before a new index is being created, also see no_retention and <code class="docutils literal notranslate"><span class="pre">elasticsearch_max_number_of_indices</span></code>.</li>
<li>Configure this if you used <code class="docutils literal notranslate"><span class="pre">rotation_strategy</span> <span class="pre">=</span> <span class="pre">count</span></code> above.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_max_size_per_index</span> <span class="pre">=</span> <span class="pre">1073741824</span></code> <em>!</em></dt>
<dd><ul class="first last">
<li>(Approximate) maximum size in bytes per Elasticsearch index on disk before a new index is being created, also see <code class="docutils literal notranslate"><span class="pre">no_retention</span></code> and <code class="docutils literal notranslate"><span class="pre">`elasticsearch_max_number_of_indices`</span></code>. Default is 1GB.</li>
<li>Configure this if you used <code class="docutils literal notranslate"><span class="pre">rotation_strategy</span> <span class="pre">=</span> <span class="pre">size</span></code> above.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_max_time_per_index</span> <span class="pre">=</span> <span class="pre">1d</span></code> <em>!</em></dt>
<dd><ul class="first last">
<li>(Approximate) maximum time before a new Elasticsearch index is being created, also see <code class="docutils literal notranslate"><span class="pre">no_retention</span></code> and <code class="docutils literal notranslate"><span class="pre">elasticsearch_max_number_of_indices</span></code>. Default is 1 day.</li>
<li>Configure this if you used <code class="docutils literal notranslate"><span class="pre">rotation_strategy</span> <span class="pre">=</span> <span class="pre">time</span></code> above.</li>
<li>Please note that this rotation period does not look at the time specified in the received messages, but is using the real clock value to decide when to rotate the index!</li>
<li><dl class="first docutils">
<dt>Specify the time using a duration and a suffix indicating which unit you want:</dt>
<dd><ul class="first last">
<li><code class="docutils literal notranslate"><span class="pre">1w</span></code>  = 1 week</li>
<li><code class="docutils literal notranslate"><span class="pre">1d</span></code>  = 1 day</li>
<li><code class="docutils literal notranslate"><span class="pre">12h</span></code> = 12 hours</li>
</ul>
</dd>
</dl>
</li>
<li>Permitted suffixes are: <code class="docutils literal notranslate"><span class="pre">d</span></code> for day, <code class="docutils literal notranslate"><span class="pre">h</span></code> for hour, <code class="docutils literal notranslate"><span class="pre">m</span></code> for minute, <code class="docutils literal notranslate"><span class="pre">s</span></code> for second.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_max_number_of_indices</span> <span class="pre">=</span> <span class="pre">20</span></code> <em>!</em></dt>
<dd><ul class="first last">
<li>How many indices do you want to keep?</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">retention_strategy</span> <span class="pre">=</span> <span class="pre">delete</span></code> <em>!</em></dt>
<dd><ul class="first last">
<li>Decide what happens with the oldest indices when the maximum number of indices is reached.</li>
<li><dl class="first docutils">
<dt>The following strategies are availble:</dt>
<dd><ul class="first last">
<li><code class="docutils literal notranslate"><span class="pre">delete</span></code> -  Deletes the index completely (Default)</li>
<li><code class="docutils literal notranslate"><span class="pre">close</span></code> - Closes the index and hides it from the system. Can be re-opened later.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
<hr class="docutils" />
<ul>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_disable_version_check</span> <span class="pre">=</span> <span class="pre">true</span></code></dt>
<dd><ul class="first simple">
<li>Disable checking the version of Elasticsearch for being compatible with this Graylog release.</li>
</ul>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Using Graylog with unsupported and untested versions of Elasticsearch may lead to data loss!</p>
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">no_retention</span> <span class="pre">=</span> <span class="pre">false</span></code></dt>
<dd><ul class="first last simple">
<li>Disable message retention on this node, i. e. disable Elasticsearch index rotation.</li>
</ul>
</dd>
</dl>
</li>
</ul>
<hr class="docutils" />
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">The following settings identified with <em>!!</em> have been moved to the database in Graylog 2.2.0. When you upgrade, make sure to set these to your previous settings so they will be migrated to the database. This settings are read <strong>once</strong> at the very first startup to be the initial settings in the database.</p>
</div>
<ul>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_shards</span> <span class="pre">=</span> <span class="pre">4</span></code> <em>!!</em></dt>
<dd><ul class="first last simple">
<li>The number of shards for your indices. A good setting here highly depends on the number of nodes in your Elasticsearch cluster. If you have one node, set it to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_replicas</span> <span class="pre">=</span> <span class="pre">0</span></code> <em>!!</em></dt>
<dd><ul class="first last simple">
<li>The number of replicas for your indices. A good setting here highly depends on the number of nodes in your Elasticsearch cluster. If you have one node, set it to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">elasticsearch_shards</span></code> and <code class="docutils literal notranslate"><span class="pre">elasticsearch_replicas</span></code> only applies to newly created indices.</p>
</div>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_index_prefix</span> <span class="pre">=</span> <span class="pre">graylog</span></code> <em>!!</em></dt>
<dd><ul class="first last simple">
<li>Prefix for all Elasticsearch indices and index aliases managed by Graylog.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_template_name</span> <span class="pre">=</span> <span class="pre">graylog-internal</span></code> <em>!!</em></dt>
<dd><ul class="first last simple">
<li>Name of the Elasticsearch index template used by Graylog to apply the mandatory index mapping.</li>
<li>Default: graylog-internal</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_analyzer</span> <span class="pre">=</span> <span class="pre">standard</span></code> <em>!!</em></dt>
<dd><ul class="first last simple">
<li>Analyzer (tokenizer) to use for message and full_message field. The “standard” filter usually is a good idea.</li>
<li>All supported analyzers are: standard, simple, whitespace, stop, keyword, pattern, language, snowball, custom</li>
<li>Elasticsearch documentation: <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.6/analysis.html">https://www.elastic.co/guide/en/elasticsearch/reference/5.6/analysis.html</a></li>
<li>Note that this setting only takes effect on newly created indices.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">disable_index_optimization</span> <span class="pre">=</span> <span class="pre">false</span></code> <em>!!</em></dt>
<dd><ul class="first last simple">
<li>Disable the optimization of Elasticsearch indices after index cycling. This may take some load from Elasticsearch on heavily used systems with large indices, but it will decrease search performance. The default is to optimize cycled indices.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">index_optimization_max_num_segments</span> <span class="pre">=</span> <span class="pre">1</span></code> <em>!!</em></dt>
<dd><ul class="first last simple">
<li>Optimize the index down to &lt;= index_optimization_max_num_segments. A higher number may take some load from Elasticsearch on heavily used systems with large indices, but it will decrease search performance. The default is 1.</li>
</ul>
</dd>
</dl>
</li>
</ul>
<hr class="docutils" />
<ul id="output-batch-size">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">allow_leading_wildcard_searches</span> <span class="pre">=</span> <span class="pre">false</span></code></dt>
<dd><ul class="first last simple">
<li>Do you want to allow searches with leading wildcards? This can be extremely resource hungry and should only be enabled with care.</li>
<li>See also: <a class="reference internal" href="index.html#queries"><span class="std std-ref">Searching</span></a></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">allow_highlighting</span> <span class="pre">=</span> <span class="pre">false</span></code></dt>
<dd><ul class="first last simple">
<li>Do you want to allow searches to be highlighted? Depending on the size of your messages this can be memory hungry and should only be enabled after making sure your Elasticsearch cluster has enough memory.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_request_timeout</span> <span class="pre">=</span> <span class="pre">1m</span></code></dt>
<dd><ul class="first last simple">
<li>Global request timeout for Elasticsearch requests (e. g. during search, index creation, or index time-range calculations) based on a best-effort to restrict the runtime of Elasticsearch operations.</li>
<li>Default: 1m</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_index_optimization_timeout</span> <span class="pre">=</span> <span class="pre">1h</span></code></dt>
<dd><ul class="first last simple">
<li>Global timeout for index optimization (force merge) requests.</li>
<li>Default: 1h</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch_index_optimization_jobs</span> <span class="pre">=</span> <span class="pre">20</span></code></dt>
<dd><ul class="first last simple">
<li>Maximum number of concurrently running index optimization (force merge) jobs.</li>
<li>If you are using lots of different index sets, you might want to increase that number.</li>
<li>Default: 20</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">index_ranges_cleanup_interval</span> <span class="pre">=</span> <span class="pre">1h</span></code></dt>
<dd><ul class="first last simple">
<li>Time interval for index range information cleanups. This setting defines how often stale index range information is being purged from the database.</li>
<li>Default: 1h</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">output_batch_size</span> <span class="pre">=</span> <span class="pre">500</span></code></dt>
<dd><ul class="first last simple">
<li>Batch size for the Elasticsearch output. This is the maximum (!) number of messages the Elasticsearch output module will get at once and write to Elasticsearch in a batch call. If the configured batch size has not been reached within <code class="docutils literal notranslate"><span class="pre">output_flush_interval</span></code> seconds, everything that is available will be flushed at once. Remember that every output buffer processor manages its own batch and performs its own batch write calls. (<code class="docutils literal notranslate"><span class="pre">outputbuffer_processors</span></code> variable)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">output_flush_interval</span> <span class="pre">=</span> <span class="pre">1</span></code></dt>
<dd><ul class="first last simple">
<li>Flush interval (in seconds) for the Elasticsearch output. This is the maximum amount of time between two batches of messages written to Elasticsearch. It is only effective at all if your minimum number of messages for this time period is less than <code class="docutils literal notranslate"><span class="pre">output_batch_size</span> <span class="pre">*</span> <span class="pre">outputbuffer_processors</span></code>.</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">output_fault_count_threshold</span> <span class="pre">=</span> <span class="pre">5</span></code></p>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">output_fault_penalty_seconds</span> <span class="pre">=</span> <span class="pre">30</span></code></dt>
<dd><ul class="first last simple">
<li>As stream outputs are loaded only on demand, an output which is failing to initialize will be tried over and over again. To prevent this, the following configuration options define after how many faults an output will not be tried again for an also configurable amount of seconds.</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">processbuffer_processors</span> <span class="pre">=</span> <span class="pre">5</span></code></p>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">outputbuffer_processors</span> <span class="pre">=</span> <span class="pre">3</span></code></dt>
<dd><ul class="first last simple">
<li>The number of parallel running processors.</li>
<li>Raise this number if your buffers are filling up.</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">outputbuffer_processor_keep_alive_time</span> <span class="pre">=</span> <span class="pre">5000</span></code></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">outputbuffer_processor_threads_core_pool_size</span> <span class="pre">=</span> <span class="pre">3</span></code></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">outputbuffer_processor_threads_max_pool_size</span> <span class="pre">=</span> <span class="pre">30</span></code></p>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">udp_recvbuffer_sizes</span> <span class="pre">=</span> <span class="pre">1048576</span></code></dt>
<dd><ul class="first last simple">
<li>UDP receive buffer size for all message inputs (e. g. SyslogUDPInput).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">processor_wait_strategy</span> <span class="pre">=</span> <span class="pre">blocking</span></code></dt>
<dd><ul class="first last simple">
<li>Wait strategy describing how buffer processors wait on a cursor sequence. (default: sleeping)</li>
<li><dl class="first docutils">
<dt>Possible types:</dt>
<dd><ul class="first last">
<li><code class="docutils literal notranslate"><span class="pre">yielding</span></code> - Compromise between performance and CPU usage.</li>
<li><code class="docutils literal notranslate"><span class="pre">sleeping</span></code> - Compromise between performance and CPU usage. Latency spikes can occur after quiet periods.</li>
<li><code class="docutils literal notranslate"><span class="pre">blocking</span></code> -  High throughput, low latency, higher CPU usage.</li>
<li><code class="docutils literal notranslate"><span class="pre">busy_spinning</span></code> - Avoids syscalls which could introduce latency jitter. Best when threads can be bound to specific CPU cores.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">ring_size</span> <span class="pre">=</span> <span class="pre">65536</span></code></dt>
<dd><ul class="first last simple">
<li>Size of internal ring buffers. Raise this if raising <code class="docutils literal notranslate"><span class="pre">outputbuffer_processors</span></code> does not help anymore.</li>
<li>For optimum performance your LogMessage objects in the ring buffer should fit in your CPU L3 cache.</li>
<li>Must be a power of 2. (512, 1024, 2048, …)</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">inputbuffer_ring_size</span> <span class="pre">=</span> <span class="pre">65536</span></code></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">inputbuffer_processors</span> <span class="pre">=</span> <span class="pre">2</span></code></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">inputbuffer_wait_strategy</span> <span class="pre">=</span> <span class="pre">blocking</span></code></p>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">message_journal_enabled</span> <span class="pre">=</span> <span class="pre">true</span></code></dt>
<dd><ul class="first last simple">
<li>Enable the disk based message journal.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">message_journal_dir</span> <span class="pre">=</span> <span class="pre">data/journal</span></code></dt>
<dd><ul class="first last simple">
<li>The directory which will be used to store the message journal. The directory must me exclusively used by Graylog and must not contain any other files than the ones created by Graylog itself.</li>
</ul>
</dd>
</dl>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">If you create a seperate partition for the journal files and use a file system creating directories like ‘lost+found’ in the root directory, you need to create a sub directory for your journal. Otherwise Graylog will log an error message that the journal is corrupt and Graylog will not start.</p>
</div>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">message_journal_max_age</span> <span class="pre">=</span> <span class="pre">12h</span></code></p>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">message_journal_max_size</span> <span class="pre">=</span> <span class="pre">5gb</span></code></dt>
<dd><ul class="first last simple">
<li>Journal hold messages before they could be written to Elasticsearch.</li>
<li>For a maximum of 12 hours or 5 GB whichever happens first.</li>
<li>During normal operation the journal will be smaller.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">message_journal_flush_age</span> <span class="pre">=</span> <span class="pre">1m</span></code></dt>
<dd><ul class="first last simple">
<li>This setting allows specifying a time interval at which we will force an fsync of data written to the log. For example if this was set to 1000 we would fsync after 1000 ms had passed.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">message_journal_flush_interval</span> <span class="pre">=</span> <span class="pre">1000000</span></code></dt>
<dd><ul class="first last simple">
<li>This setting allows specifying an interval at which we will force an fsync of data written to the log. For example if this was set to 1 we would fsync after every message; if it were 5 we would fsync after every five messages.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">message_journal_segment_age</span> <span class="pre">=</span> <span class="pre">1h</span></code></dt>
<dd><ul class="first last simple">
<li>This configuration controls the period of time after which Graylog will force the log to roll even if the segment file isn’t full to ensure that retention can delete or compact old data.</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">message_journal_segment_size</span> <span class="pre">=</span> <span class="pre">100mb</span></code></p>
</li>
</ul>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">When the journal is full and it keeps receiving messages, it will start dropping messages as a FIFO queue: The first dropped message will be the first inserted and so on (and not some random).</p>
</div>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">async_eventbus_processors</span> <span class="pre">=</span> <span class="pre">2</span></code></dt>
<dd><ul class="first last">
<li>Number of threads used exclusively for dispatching internal events. Default is 2.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">lb_recognition_period_seconds</span> <span class="pre">=</span> <span class="pre">3</span></code></dt>
<dd><ul class="first last">
<li>How many seconds to wait between marking node as DEAD for possible load balancers and starting the actual shutdown process. Set to 0 if you have no status checking load balancers in front.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">lb_throttle_threshold_percentage</span> <span class="pre">=</span> <span class="pre">95</span></code></dt>
<dd><ul class="first last">
<li>Journal usage percentage that triggers requesting throttling for this server node from load balancers. The feature is disabled if not set.</li>
</ul>
</dd>
</dl>
</li>
<li><code class="docutils literal notranslate"><span class="pre">stream_processing_timeout</span> <span class="pre">=</span> <span class="pre">2000</span></code></li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">stream_processing_max_faults</span> <span class="pre">=</span> <span class="pre">3</span></code></dt>
<dd><ul class="first last">
<li>Every message is matched against the configured streams and it can happen that a stream contains rules which take an unusual amount of time to run, for example if its using regular expressions that perform excessive backtracking.</li>
<li>This will impact the processing of the entire server. To keep such misbehaving stream rules from impacting other streams, Graylog limits the execution time for each stream.</li>
<li>The default values are noted below, the timeout is in milliseconds.</li>
<li>If the stream matching for one stream took longer than the timeout value, and this happened more than “max_faults” times that stream is disabled and a notification is shown in the web interface.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">alert_check_interval</span> <span class="pre">=</span> <span class="pre">60</span></code></dt>
<dd><ul class="first last">
<li>Length of the interval in seconds in which the alert conditions for all streams should be checked and alarms are being sent.</li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since 0.21 the Graylog server supports pluggable output modules. This means a single message can be written to multiple outputs. The next setting defines the timeout for a single output module, including the default output module where all messages end up.</p>
</div>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">output_module_timeout</span> <span class="pre">=</span> <span class="pre">10000</span></code></dt>
<dd><ul class="first last">
<li>Time in milliseconds to wait for all message outputs to finish writing a single message.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">stale_master_timeout</span> <span class="pre">=</span> <span class="pre">2000</span></code></dt>
<dd><ul class="first last">
<li>Time in milliseconds after which a detected stale master node is being rechecked on startup.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">shutdown_timeout</span> <span class="pre">=</span> <span class="pre">30000</span></code></dt>
<dd><ul class="first last">
<li>Time in milliseconds which Graylog is waiting for all threads to stop on shutdown.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="mongodb">
<h5>MongoDB<a class="headerlink" href="#mongodb" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">mongodb_uri</span> <span class="pre">=</span> <span class="pre">mongodb://...</span></code></dt>
<dd><ul class="first last">
<li>MongoDB connection string. Enter your MongoDB connection and authentication information here.</li>
<li>See <a class="reference external" href="https://docs.mongodb.com/manual/reference/connection-string/">https://docs.mongodb.com/manual/reference/connection-string/</a> for details.</li>
<li>Take notice that <code class="docutils literal notranslate"><span class="pre">+</span></code>-signs in the username or password need to be replaced by <code class="docutils literal notranslate"><span class="pre">%2B</span></code>.</li>
<li><dl class="first docutils">
<dt>Examples:</dt>
<dd><ul class="first last">
<li>Simple: <code class="docutils literal notranslate"><span class="pre">mongodb://localhost/graylog</span></code></li>
<li>Authenticate against the MongoDB server: <code class="docutils literal notranslate"><span class="pre">mongodb_uri</span> <span class="pre">=</span> <span class="pre">mongodb://grayloguser:secret&#64;localhost:27017/graylog</span></code></li>
<li>Use a replica set instead of a single host: <code class="docutils literal notranslate"><span class="pre">mongodb://grayloguser:secret&#64;localhost:27017,localhost:27018,localhost:27019/graylog</span></code></li>
<li><a class="reference external" href="https://docs.mongodb.com/manual/reference/connection-string/#dns-seedlist-connection-format">DNS Seedlist</a> is set as <code class="docutils literal notranslate"><span class="pre">mongodb+srv://server.example.org/graylog</span></code>.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">mongodb_max_connections</span> <span class="pre">=</span> <span class="pre">1000</span></code></dt>
<dd><ul class="first last">
<li>Increase this value according to the maximum connections your MongoDB server can handle from a single client if you encounter MongoDB connection problems.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">mongodb_threads_allowed_to_block_multiplier</span> <span class="pre">=</span> <span class="pre">5</span></code></dt>
<dd><ul class="first last">
<li>Number of threads allowed to be blocked by MongoDB connections multiplier. Default: 5</li>
<li>If <code class="docutils literal notranslate"><span class="pre">mongodb_max_connections</span></code> is 100, and <code class="docutils literal notranslate"><span class="pre">mongodb_threads_allowed_to_block_multiplier</span></code> is 5, then 500 threads can block. More than that and an exception will be thrown.</li>
<li><a class="reference external" href="http://api.mongodb.com/java/current/com/mongodb/MongoOptions.html#threadsAllowedToBlockForConnectionMultiplier">http://api.mongodb.com/java/current/com/mongodb/MongoOptions.html#threadsAllowedToBlockForConnectionMultiplier</a></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="email">
<span id="email-config"></span><h5>Email<a class="headerlink" href="#email" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">transport_email_enabled</span> <span class="pre">=</span> <span class="pre">false</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">transport_email_hostname</span> <span class="pre">=</span> <span class="pre">mail.example.com</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">transport_email_port</span> <span class="pre">=</span> <span class="pre">587</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">transport_email_use_auth</span> <span class="pre">=</span> <span class="pre">true</span></code></li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">transport_email_use_tls</span> <span class="pre">=</span> <span class="pre">true</span></code></dt>
<dd><ul class="first last">
<li>Enable SMTP with STARTTLS for encrypted connections.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">transport_email_use_ssl</span> <span class="pre">=</span> <span class="pre">false</span></code></dt>
<dd><ul class="first last">
<li>Enable SMTP over SSL (SMTPS) for encrypted connections.</li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">Make sure to enable only <em>one</em> of these two settings because most (or all) SMTP services only support one of the encryption mechanisms on the same port. Most SMTP services support SMTP with STARTTLS while SMTPS is deprecated on most SMTP services. Setting both to <code class="docutils literal notranslate"><span class="pre">false</span></code> is needed when you want to sent via unencrypted connection.</p>
</div>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">transport_email_auth_username</span> <span class="pre">=</span> <span class="pre">you&#64;example.com</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">transport_email_auth_password</span> <span class="pre">=</span> <span class="pre">secret</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">transport_email_subject_prefix</span> <span class="pre">=</span> <span class="pre">[graylog]</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">transport_email_from_email</span> <span class="pre">=</span> <span class="pre">graylog&#64;example.com</span></code></li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">transport_email_web_interface_url</span> <span class="pre">=</span> <span class="pre">https://graylog.example.com</span></code></dt>
<dd><ul class="first last">
<li>Specify this to include links to the stream in your stream alert mails.</li>
<li>This should define the fully qualified base url to your web interface exactly the same way as it is accessed by your users.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="http">
<span id="http-config"></span><h5>HTTP<a class="headerlink" href="#http" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">http_connect_timeout</span> <span class="pre">=</span> <span class="pre">5s</span></code></dt>
<dd><ul class="first last">
<li>The default connect timeout for outgoing HTTP connections.</li>
<li>Values must be a positive duration (and between 1 and 2147483647 when converted to milliseconds).</li>
<li>Default: 5s</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">http_read_timeout</span> <span class="pre">=</span> <span class="pre">10s</span></code></dt>
<dd><ul class="first last">
<li>The default read timeout for outgoing HTTP connections.</li>
<li>Values must be a positive duration (and between 1 and 2147483647 when converted to milliseconds).</li>
<li>Default: 10s</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">http_write_timeout</span> <span class="pre">=</span> <span class="pre">10s</span></code></dt>
<dd><ul class="first last">
<li>The default write timeout for outgoing HTTP connections.</li>
<li>Values must be a positive duration (and between 1 and 2147483647 when converted to milliseconds).</li>
<li>Default: 10s</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">http_proxy_uri</span> <span class="pre">=</span></code></dt>
<dd><ul class="first last">
<li>HTTP proxy for outgoing HTTP connections</li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">If you configure a proxy, make sure to also configure the “http_non_proxy_hosts” option so internal HTTP connections with other nodes does not go through the proxy.</p>
</div>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">http_non_proxy_hosts</span> <span class="pre">=</span></code></dt>
<dd><ul class="first last">
<li>A list of hosts that should be reached directly, bypassing the configured proxy server.</li>
<li>This is a list of patterns separated by “,”. The patterns may start or end with a “*” for wildcards.</li>
<li>Any host matching one of these patterns will be reached through a direct connection instead of through a proxy.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="script-alert-notification">
<span id="config-script-alert"></span><h5>Script alert notification<a class="headerlink" href="#script-alert-notification" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">integrations_web_interface_uri</span> <span class="pre">=</span> <span class="pre">https://graylog.example.com</span></code></dt>
<dd><ul class="first last">
<li>Specify this to include a search page link (that displays relevant alert messages) in the script arguments or standard in JSON.</li>
<li>This should define the fully qualified base url to your web interface exactly the same way as it is accessed by your users.</li>
<li>Default: none</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">integrations_scripts_dir</span> <span class="pre">=</span> <span class="pre">/usr/share/graylog-server/scripts</span></code></dt>
<dd><ul class="first last">
<li>An absolute or relative path where scripts are permitted to be executed from.</li>
<li>If specified, this overrides the default location (see the <a class="reference internal" href="index.html#scripts-dir"><span class="std std-ref">File Locations</span></a> document.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="others">
<h5>Others<a class="headerlink" href="#others" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">gc_warning_threshold</span> <span class="pre">=</span> <span class="pre">1s</span></code></dt>
<dd><ul class="first last">
<li>The threshold of the garbage collection runs. If GC runs take longer than this threshold, a system notification will be generated to warn the administrator about possible problems with the system. Default is 1 second.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">ldap_connection_timeout</span> <span class="pre">=</span> <span class="pre">2000</span></code></dt>
<dd><ul class="first last">
<li>Connection timeout for a configured LDAP server (e. g. ActiveDirectory) in milliseconds.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">disable_sigar</span> <span class="pre">=</span> <span class="pre">false</span></code></dt>
<dd><ul class="first last">
<li>Disable the use of SIGAR for collecting system stats.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">dashboard_widget_default_cache_time</span> <span class="pre">=</span> <span class="pre">10s</span></code></dt>
<dd><ul class="first last">
<li>The default cache time for dashboard widgets. (Default: 10 seconds, minimum: 1 second)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">proxied_requests_thread_pool_size</span> <span class="pre">=</span> <span class="pre">32</span></code></dt>
<dd><ul class="first last">
<li>For some cluster-related REST requests, the node must query all other nodes in the cluster. This is the maximum number of threads available for this. Increase it, if <code class="docutils literal notranslate"><span class="pre">/cluster/*</span></code> requests take long to complete.</li>
<li>Should be <code class="docutils literal notranslate"><span class="pre">http_thread_pool_size</span> <span class="pre">*</span> <span class="pre">average_cluster_size</span></code> if you have a high number of concurrent users.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
</div>
</div>
<span id="document-pages/configuration/web_interface"></span><div class="section" id="web-interface">
<span id="configuring-webif"></span><h3>Web interface<a class="headerlink" href="#web-interface" title="Permalink to this headline">¶</a></h3>
<p>When your Graylog instance/cluster is up and running, the next thing you usually want to do is check out our web interface, which offers you great capabilities for searching and analyzing your indexed data and configuring your Graylog environment. Per default you can access it using your browser on <code class="docutils literal notranslate"><span class="pre">http://&lt;graylog-server&gt;:9000/</span></code>.</p>
<div class="section" id="overview">
<h4>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h4>
<p>The Graylog web interface was rewritten in JavaScript for 2.0 to be a client-side single-page browser application. This means its code is running solely in your browser, fetching all data via HTTP(S) from the REST API of your Graylog server.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The HTTP address must be accessible by everyone using the web interface. This means that Graylog <em>must</em> listen on a public network interface <em>or</em> be exposed to one using a proxy, NAT or a load balancer!</p>
</div>
</div>
<div class="section" id="configuration-options">
<h4>Configuration Options<a class="headerlink" href="#configuration-options" title="Permalink to this headline">¶</a></h4>
<p>If our default settings do not work for you, there is a number of options in the Graylog server configuration file which you can change to influence its behavior:</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="25%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Setting</th>
<th class="head">Default</th>
<th class="head">Explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http_bind_address</span></code></td>
<td>127.0.0.1:9000</td>
<td>The network interface used by the Graylog HTTP interface.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">http_publish_uri</span></code></td>
<td>If not set,
<code class="docutils literal notranslate"><span class="pre">http://$http_bind_address</span></code>
will be used.</td>
<td>The HTTP URI of this Graylog node which is used to communicate with
the other Graylog nodes in the cluster and by all clients using the
Graylog web interface.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http_external_uri</span></code></td>
<td>If not set,
<code class="docutils literal notranslate"><span class="pre">$http_publish_uri</span></code>
will be used.</td>
<td>The public URI of Graylog which will be used by the Graylog web
interface to communicate with the Graylog REST API.
Graylog web interface.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">http_enable_cors</span></code></td>
<td>true</td>
<td>This is necessary for JS-clients accessing the server directly.
If disabled, modern browsers will not be able to retrieve resources
from the server.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http_enable_gzip</span></code></td>
<td>true</td>
<td>Serve web interface assets using compression to reduce overall
roundtrip times.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">http_max_header_size</span></code></td>
<td>8192</td>
<td>The maximum size of the HTTP request headers in bytes.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http_thread_pool_size</span></code></td>
<td>16</td>
<td>The size of the thread pool used exclusively for serving the HTTP
interface.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">http_enable_tls</span></code></td>
<td>false</td>
<td>This secures the communication with the HTTP interface with TLS to
prevent request forgery and eavesdropping.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http_tls_cert_file</span></code></td>
<td>(no default)</td>
<td>The X.509 certificate chain file in PEM format to use for securing
the HTTP interface.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">http_tls_key_file</span></code></td>
<td>(no default)</td>
<td>The PKCS#8 private key file in PEM format to use for securing the
HTTP interface.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http_tls_key_password</span></code></td>
<td>(no default)</td>
<td>The password to unlock the private key used for securing the HTTP
interface. (only needed if the key is encryped)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="how-does-the-web-interface-connect-to-the-graylog-server">
<span id="webif-connecting-to-server"></span><h4>How does the web interface connect to the Graylog server?<a class="headerlink" href="#how-does-the-web-interface-connect-to-the-graylog-server" title="Permalink to this headline">¶</a></h4>
<p>The web interface is fetching all information it is showing from the REST API of the Graylog server. Therefore it needs to connect to it using HTTP(S). There are several ways how you can define which way the web interface connects to the Graylog server. The URI used by the web interface is determined in this exact order:</p>
<blockquote>
<div><ul class="simple">
<li>If the HTTP(S) client going to the web interface port sends a <code class="docutils literal notranslate"><span class="pre">X-Graylog-Server-URL</span></code> header, which contains a valid URL, then this is overriding everything else.</li>
<li>If <code class="docutils literal notranslate"><span class="pre">http_external_uri</span></code> is defined in the Graylog configuration file, this is used if the aforementioned header is not set.</li>
<li>If <code class="docutils literal notranslate"><span class="pre">http_publish_uri</span></code> is defined in the Graylog configuration file, this is used if the aforementioned <code class="docutils literal notranslate"><span class="pre">http_external_uri</span></code> is not set.</li>
<li>If none of the above are defined, <code class="docutils literal notranslate"><span class="pre">http://$http_bind_address</span></code> is used.</li>
</ul>
</div></blockquote>
<p>The web interface assets (e.g. the <code class="docutils literal notranslate"><span class="pre">index.html</span></code>, CSS and JavaScript files) are accessible at the URI root (<code class="docutils literal notranslate"><span class="pre">/</span></code> by default) and the REST API endpoints are accessible at the <code class="docutils literal notranslate"><span class="pre">/api</span></code> path.</p>
<p><strong>Example:</strong></p>
<p>Setting <code class="docutils literal notranslate"><span class="pre">http_bind_address</span></code> to <code class="docutils literal notranslate"><span class="pre">10.0.0.1:9000</span></code> configures the Graylog server with the following URLs.</p>
<ul class="simple">
<li>Web interface: <code class="docutils literal notranslate"><span class="pre">http://10.0.0.1:9000/</span></code></li>
<li>REST API: <code class="docutils literal notranslate"><span class="pre">http://10.0.0.1:9000/api/</span></code></li>
</ul>
</div>
<div class="section" id="browser-compatibility">
<h4>Browser Compatibility<a class="headerlink" href="#browser-compatibility" title="Permalink to this headline">¶</a></h4>
<p>Writing the web interface as a single-page application is a challenging task. We want to provide the best possible experience to everyone, which often means using modern web technology only available in recent browsers, while keeping a reasonable compatibility with old and less-capable browsers. These browsers are officially supported in Graylog 3.0:</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="38%" />
<col width="29%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Browser</th>
<th class="head">OS</th>
<th class="head">Minimum Version</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Chrome</td>
<td>Windows, OS X, Linux</td>
<td>50</td>
</tr>
<tr class="row-odd"><td>Firefox</td>
<td>Windows, OS X, Linux</td>
<td>45 / 38 ESR</td>
</tr>
<tr class="row-even"><td>Internet Explorer</td>
<td>Windows</td>
<td>11</td>
</tr>
<tr class="row-odd"><td>Microsoft Edge</td>
<td>Windows</td>
<td>25</td>
</tr>
<tr class="row-even"><td>Safari</td>
<td>OS X</td>
<td>9</td>
</tr>
</tbody>
</table>
<p>Please take into account that you need to enable JavaScript in order to use Graylog web interface.</p>
</div>
<div class="section" id="making-the-web-interface-work-with-load-balancers-proxies">
<span id="configuring-webif-nginx"></span><h4>Making the web interface work with load balancers/proxies<a class="headerlink" href="#making-the-web-interface-work-with-load-balancers-proxies" title="Permalink to this headline">¶</a></h4>
<p>If you want to run a load balancer/reverse proxy in front of Graylog, you need to make sure that:</p>
<blockquote>
<div><ul class="simple">
<li>The HTTP port of the load balancer/reverse proxy is accessible for clients</li>
<li>The HTTP address for the Graylog server is properly set (as explained in <a class="reference internal" href="#webif-connecting-to-server"><span class="std std-ref">How does the web interface connect to the Graylog server?</span></a>), so it is resolvable and accessible for the load balancer/reverse proxy.</li>
<li>If you use SSL, your certificates must be valid and trusted by your clients.</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To help you with your specific environment, we show some example configuration use cases.</p>
</div>
<p>For the configuration use cases below we assume the following:</p>
<ul class="simple">
<li>Your Graylog server configuration contains <code class="docutils literal notranslate"><span class="pre">http_bind_address</span> <span class="pre">=</span> <span class="pre">127.0.0.1:9000</span></code></li>
<li>The hostname for the setup is <code class="docutils literal notranslate"><span class="pre">graylog.example.org</span></code></li>
<li>The IP address for that hostname is <code class="docutils literal notranslate"><span class="pre">192.168.0.10</span></code></li>
</ul>
<div class="section" id="using-a-layer-3-load-balancer-forwarding-tcp-ports">
<h5>Using a Layer 3 load balancer (forwarding TCP Ports)<a class="headerlink" href="#using-a-layer-3-load-balancer-forwarding-tcp-ports" title="Permalink to this headline">¶</a></h5>
<ol class="arabic simple">
<li>Configure your load balancer to forward connections going to <code class="docutils literal notranslate"><span class="pre">192.168.0.10:80</span></code> to <code class="docutils literal notranslate"><span class="pre">127.0.0.1:9000</span></code>.</li>
<li>Start the Graylog server as usual.</li>
<li>Access the web interface on <code class="docutils literal notranslate"><span class="pre">http://graylog.example.org</span></code>.</li>
<li>Read up on <a class="reference internal" href="index.html#ssl-setup"><span class="std std-ref">Using HTTPS</span></a>.</li>
</ol>
</div>
<div class="section" id="nginx">
<h5>NGINX<a class="headerlink" href="#nginx" title="Permalink to this headline">¶</a></h5>
<p><strong>Proxy web interface and API traffic using HTTP</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>server
{
    listen 80 default_server;
    listen [::]:80 default_server ipv6only=on;
    server_name graylog.example.org;

    location / {
      proxy_set_header Host $http_host;
      proxy_set_header X-Forwarded-Host $host;
      proxy_set_header X-Forwarded-Server $host;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header X-Graylog-Server-URL http://$server_name/;
      proxy_pass       http://127.0.0.1:9000;
    }
}
</pre></div>
</div>
<p>NGINX can be used for SSL Termination, you would only need to modify the <code class="docutils literal notranslate"><span class="pre">server</span> <span class="pre">listen</span></code> directive and add all Information about your certificate.</p>
<p>If you are running multiple Graylog Server you might want to use HTTPS/SSL to connect to the Graylog Servers (on how to Setup read <a class="reference internal" href="index.html#ssl-setup"><span class="std std-ref">Using HTTPS</span></a>) and use HTTPS/SSL on NGINX. The configuration for TLS certificates, keys and ciphers is omitted from the sample config for brevity’s sake.</p>
<p><strong>Proxy web interface and API traffic using HTTPS (TLS)</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>server
{
    listen      443 ssl spdy;
    server_name graylog.example.org;
    # &lt;- your SSL Settings here!

    location /
    {
      proxy_set_header Host $http_host;
      proxy_set_header X-Forwarded-Host $host;
      proxy_set_header X-Forwarded-Server $host;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header X-Graylog-Server-URL https://$server_name/;
      proxy_pass       http://127.0.0.1:9000;
    }
}
</pre></div>
</div>
<p>If you want to serve serveral different applications under one domain name, you can also serve the Graylog web interface using a path prefix.</p>
<p><strong>Proxy web interface and API traffic under a path prefix using HTTP</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>server
{
    listen 80 default_server;
    listen [::]:80 default_server ipv6only=on;
    server_name applications.example.org;

    location /graylog/
    {
      proxy_set_header Host $http_host;
      proxy_set_header X-Forwarded-Host $host;
      proxy_set_header X-Forwarded-Server $host;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header X-Graylog-Server-URL http://$server_name/graylog/;
      rewrite          ^/graylog/(.*)$  /$1  break;
      proxy_pass       http://127.0.0.1:9000;
    }
}
</pre></div>
</div>
<p>This makes your Graylog setup available under the following URLs:</p>
<ul class="simple">
<li>Web interface: <code class="docutils literal notranslate"><span class="pre">http://applications.example.org/graylog/</span></code></li>
<li>REST API: <code class="docutils literal notranslate"><span class="pre">http://applications.example.org/graylog/api/</span></code></li>
</ul>
</div>
<div class="section" id="apache-httpd-2-x">
<h5>Apache httpd 2.x<a class="headerlink" href="#apache-httpd-2-x" title="Permalink to this headline">¶</a></h5>
<p><strong>Proxy web interface and API traffic using HTTP</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">VirtualHost</span> <span class="o">*</span><span class="p">:</span><span class="mi">80</span><span class="o">&gt;</span>
    <span class="n">ServerName</span> <span class="n">graylog</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">org</span>
    <span class="n">ProxyRequests</span> <span class="n">Off</span>
    <span class="o">&lt;</span><span class="n">Proxy</span> <span class="o">*&gt;</span>
        <span class="n">Order</span> <span class="n">deny</span><span class="p">,</span><span class="n">allow</span>
        <span class="n">Allow</span> <span class="kn">from</span> <span class="nn">all</span>
    <span class="o">&lt;/</span><span class="n">Proxy</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">Location</span> <span class="o">/&gt;</span>
        <span class="n">RequestHeader</span> <span class="nb">set</span> <span class="n">X</span><span class="o">-</span><span class="n">Graylog</span><span class="o">-</span><span class="n">Server</span><span class="o">-</span><span class="n">URL</span> <span class="s2">&quot;http://graylog.example.org/&quot;</span>
        <span class="n">ProxyPass</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">9000</span><span class="o">/</span>
        <span class="n">ProxyPassReverse</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">9000</span><span class="o">/</span>
    <span class="o">&lt;/</span><span class="n">Location</span><span class="o">&gt;</span>

<span class="o">&lt;/</span><span class="n">VirtualHost</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Proxy web interface and API traffic using HTTPS (TLS)</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">VirtualHost</span> <span class="o">*</span><span class="p">:</span><span class="mi">443</span><span class="o">&gt;</span>
    <span class="n">ServerName</span> <span class="n">graylog</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">org</span>
    <span class="n">ProxyRequests</span> <span class="n">Off</span>
    <span class="n">SSLEngine</span> <span class="n">on</span>
    <span class="c1"># &lt;- your SSL Settings here!</span>

    <span class="o">&lt;</span><span class="n">Proxy</span> <span class="o">*&gt;</span>
        <span class="n">Order</span> <span class="n">deny</span><span class="p">,</span><span class="n">allow</span>
        <span class="n">Allow</span> <span class="kn">from</span> <span class="nn">all</span>
    <span class="o">&lt;/</span><span class="n">Proxy</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">Location</span> <span class="o">/&gt;</span>
        <span class="n">RequestHeader</span> <span class="nb">set</span> <span class="n">X</span><span class="o">-</span><span class="n">Graylog</span><span class="o">-</span><span class="n">Server</span><span class="o">-</span><span class="n">URL</span> <span class="s2">&quot;https://graylog.example.org/&quot;</span>
        <span class="n">ProxyPass</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">9000</span><span class="o">/</span>
        <span class="n">ProxyPassReverse</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">9000</span><span class="o">/</span>
    <span class="o">&lt;/</span><span class="n">Location</span><span class="o">&gt;</span>

<span class="o">&lt;/</span><span class="n">VirtualHost</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="haproxy-1-6">
<h5>HAProxy 1.6<a class="headerlink" href="#haproxy-1-6" title="Permalink to this headline">¶</a></h5>
<p><strong>Proxy web interface and API traffic using HTTP</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">frontend</span> <span class="n">http</span>
    <span class="n">bind</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">:</span><span class="mi">80</span>

    <span class="n">option</span> <span class="n">forwardfor</span>
    <span class="n">http</span><span class="o">-</span><span class="n">request</span> <span class="n">add</span><span class="o">-</span><span class="n">header</span> <span class="n">X</span><span class="o">-</span><span class="n">Forwarded</span><span class="o">-</span><span class="n">Host</span> <span class="o">%</span><span class="p">[</span><span class="n">req</span><span class="o">.</span><span class="n">hdr</span><span class="p">(</span><span class="n">host</span><span class="p">)]</span>
    <span class="n">http</span><span class="o">-</span><span class="n">request</span> <span class="n">add</span><span class="o">-</span><span class="n">header</span> <span class="n">X</span><span class="o">-</span><span class="n">Forwarded</span><span class="o">-</span><span class="n">Server</span> <span class="o">%</span><span class="p">[</span><span class="n">req</span><span class="o">.</span><span class="n">hdr</span><span class="p">(</span><span class="n">host</span><span class="p">)]</span>
    <span class="n">http</span><span class="o">-</span><span class="n">request</span> <span class="n">add</span><span class="o">-</span><span class="n">header</span> <span class="n">X</span><span class="o">-</span><span class="n">Forwarded</span><span class="o">-</span><span class="n">Port</span> <span class="o">%</span><span class="p">[</span><span class="n">dst_port</span><span class="p">]</span>
    <span class="n">acl</span> <span class="n">is_graylog</span> <span class="n">hdr_dom</span><span class="p">(</span><span class="n">host</span><span class="p">)</span> <span class="o">-</span><span class="n">i</span> <span class="o">-</span><span class="n">m</span> <span class="nb">str</span> <span class="n">graylog</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">org</span>
    <span class="n">use_backend</span>     <span class="n">graylog</span> <span class="k">if</span> <span class="n">is_graylog</span>

<span class="n">backend</span> <span class="n">graylog</span>
    <span class="n">description</span>     <span class="n">The</span> <span class="n">Graylog</span> <span class="n">Web</span> <span class="n">backend</span><span class="o">.</span>
    <span class="n">http</span><span class="o">-</span><span class="n">request</span> <span class="nb">set</span><span class="o">-</span><span class="n">header</span> <span class="n">X</span><span class="o">-</span><span class="n">Graylog</span><span class="o">-</span><span class="n">Server</span><span class="o">-</span><span class="n">URL</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">graylog</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">org</span><span class="o">/</span>
    <span class="n">use</span><span class="o">-</span><span class="n">server</span> <span class="n">graylog_1</span>
    <span class="n">server</span> <span class="n">graylog_1</span> <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">9000</span> <span class="n">maxconn</span> <span class="mi">20</span> <span class="n">check</span>
</pre></div>
</div>
<p><strong>Multiple Backends (roundrobin) with Health-Check (using HTTP)</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">frontend</span> <span class="n">graylog_http</span>
    <span class="n">bind</span> <span class="o">*</span><span class="p">:</span><span class="mi">80</span>
    <span class="n">option</span> <span class="n">forwardfor</span>
    <span class="n">http</span><span class="o">-</span><span class="n">request</span> <span class="n">add</span><span class="o">-</span><span class="n">header</span> <span class="n">X</span><span class="o">-</span><span class="n">Forwarded</span><span class="o">-</span><span class="n">Host</span> <span class="o">%</span><span class="p">[</span><span class="n">req</span><span class="o">.</span><span class="n">hdr</span><span class="p">(</span><span class="n">host</span><span class="p">)]</span>
    <span class="n">http</span><span class="o">-</span><span class="n">request</span> <span class="n">add</span><span class="o">-</span><span class="n">header</span> <span class="n">X</span><span class="o">-</span><span class="n">Forwarded</span><span class="o">-</span><span class="n">Server</span> <span class="o">%</span><span class="p">[</span><span class="n">req</span><span class="o">.</span><span class="n">hdr</span><span class="p">(</span><span class="n">host</span><span class="p">)]</span>
    <span class="n">http</span><span class="o">-</span><span class="n">request</span> <span class="n">add</span><span class="o">-</span><span class="n">header</span> <span class="n">X</span><span class="o">-</span><span class="n">Forwarded</span><span class="o">-</span><span class="n">Port</span> <span class="o">%</span><span class="p">[</span><span class="n">dst_port</span><span class="p">]</span>
    <span class="n">acl</span> <span class="n">is_graylog</span> <span class="n">hdr_dom</span><span class="p">(</span><span class="n">host</span><span class="p">)</span> <span class="o">-</span><span class="n">i</span> <span class="o">-</span><span class="n">m</span> <span class="nb">str</span> <span class="n">graylog</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">org</span>
    <span class="n">use_backend</span>     <span class="n">graylog</span>

<span class="n">backend</span> <span class="n">graylog</span>
    <span class="n">description</span>     <span class="n">The</span> <span class="n">Graylog</span> <span class="n">Web</span> <span class="n">backend</span><span class="o">.</span>
    <span class="n">balance</span> <span class="n">roundrobin</span>
    <span class="n">option</span> <span class="n">httpchk</span> <span class="n">HEAD</span> <span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">lbstatus</span>
    <span class="n">http</span><span class="o">-</span><span class="n">request</span> <span class="nb">set</span><span class="o">-</span><span class="n">header</span> <span class="n">X</span><span class="o">-</span><span class="n">Graylog</span><span class="o">-</span><span class="n">Server</span><span class="o">-</span><span class="n">URL</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">graylog</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">org</span><span class="o">/</span>
    <span class="n">server</span> <span class="n">graylog1</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">0.10</span><span class="p">:</span><span class="mi">9000</span> <span class="n">maxconn</span> <span class="mi">20</span> <span class="n">check</span>
    <span class="n">server</span> <span class="n">graylog2</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">0.11</span><span class="p">:</span><span class="mi">9000</span> <span class="n">maxconn</span> <span class="mi">20</span> <span class="n">check</span>
    <span class="n">server</span> <span class="n">graylog3</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">0.12</span><span class="p">:</span><span class="mi">9000</span> <span class="n">maxconn</span> <span class="mi">20</span> <span class="n">check</span>
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-pages/configuration/load_balancers"></span><div class="section" id="load-balancer-integration">
<span id="loadbalancer-integration"></span><h3>Load balancer integration<a class="headerlink" href="#load-balancer-integration" title="Permalink to this headline">¶</a></h3>
<p>When running multiple Graylog servers a common deployment scenario is to route the message traffic through an
IP load balancer. By doing this we can achieve both a highly available setup, as well as increasing message
processing throughput, by simply adding more servers that operate in parallel.</p>
<div class="section" id="load-balancer-state">
<h4>Load balancer state<a class="headerlink" href="#load-balancer-state" title="Permalink to this headline">¶</a></h4>
<p>However, load balancers usually need some way of determining whether a backend service is reachable and healthy
or not. For this purpose Graylog exposes a load balancer state that is reachable via its REST API.</p>
<p>There are two ways the load balancer state can change:</p>
<ul class="simple">
<li>due to a lifecycle change (e.g. the server is starting to accept messages, or shutting down)</li>
<li>due to manual intervention via the REST API</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In the following examples we assume that the Graylog REST API is available on the URI path <code class="docutils literal notranslate"><span class="pre">/api/</span></code> (e. g. <code class="docutils literal notranslate"><span class="pre">http://graylog.example.com/api/</span></code>).</p>
</div>
<p>To query the current load balancer status of a Graylog instance, all you need to do is to issue a HTTP call to its REST API:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">lbstatus</span>
</pre></div>
</div>
<p>The status knows two different states, <code class="docutils literal notranslate"><span class="pre">ALIVE</span></code> and <code class="docutils literal notranslate"><span class="pre">DEAD</span></code>, which is also the <code class="docutils literal notranslate"><span class="pre">text/plain</span></code> response of the
resource. Additionally, the same information is reflected in the HTTP status codes: If the state is <code class="docutils literal notranslate"><span class="pre">ALIVE</span></code>
the return code will be <code class="docutils literal notranslate"><span class="pre">200</span> <span class="pre">OK</span></code>, for <code class="docutils literal notranslate"><span class="pre">DEAD</span></code> it will be <code class="docutils literal notranslate"><span class="pre">503</span> <span class="pre">Service</span> <span class="pre">unavailable</span></code>. This is done to make
it easier to configure a wide range of load balancer types and vendors to be able to react to the status.</p>
<p>The resource is accessible without authentication to make it easier for load balancers to access it.</p>
<p>To programmatically change the load balancer status, an additional endpoint is exposed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PUT</span> <span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">lbstatus</span><span class="o">/</span><span class="n">override</span><span class="o">/</span><span class="n">alive</span>
<span class="n">PUT</span> <span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">lbstatus</span><span class="o">/</span><span class="n">override</span><span class="o">/</span><span class="n">dead</span>
</pre></div>
</div>
<p>Only authenticated and authorized users are able to change the status, in the currently released Graylog version
this means only admin users can change it.</p>
</div>
<div class="section" id="graceful-shutdown">
<h4>Graceful shutdown<a class="headerlink" href="#graceful-shutdown" title="Permalink to this headline">¶</a></h4>
<p>Often, when running a service behind a load balancer, the goal is to be able to perform zero-downtime upgrades, by
taking one of the servers offline, upgrading it, and then bringing it back online. During that time the remaining
servers can take the load seamlessly.</p>
<p>By using the load balancer status API described above one can already perform such a task. However, it would still be
guesswork when the Graylog server is done processing all the messages it already accepted.</p>
<p>For this purpose Graylog supports a graceful shutdown command, also accessible via the web interface and API. It will
set the load balancer status to <code class="docutils literal notranslate"><span class="pre">DEAD</span></code>, stop all inputs, turn on messages processing (should it have been disabled
manually previously), and flush all messages in memory to Elasticsearch. After all buffers and caches are processed,
it will shut itself down safely.</p>
<img alt="_images/nodes_more_action.png" src="http://res.fansdoc.com/graylog/_images/nodes_more_action.png" />
</div>
<div class="section" id="web-interface">
<h4>Web Interface<a class="headerlink" href="#web-interface" title="Permalink to this headline">¶</a></h4>
<p>It is possible to use the Graylog web interface behind a load balancer for high availability purposes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Take care of the configuration you need <a class="reference internal" href="index.html#configuring-webif-nginx"><span class="std std-ref">with a proxy setup</span></a>, as it will <em>not</em> work out of the box.</p>
</div>
</div>
</div>
<span id="document-pages/configuration/https"></span><div class="section" id="using-https">
<span id="https-setup"></span><span id="tls-setup"></span><span id="ssl-setup"></span><h3>Using HTTPS<a class="headerlink" href="#using-https" title="Permalink to this headline">¶</a></h3>
<p>We highly recommend securing your Graylog installation using SSL/TLS to make sure that no sensitive data is sent over the wire in plain text. To make this work, you need to enable the <code class="docutils literal notranslate"><span class="pre">http_enable_tls</span></code> setting in your Graylog server configuration.</p>
<p>You also need to make sure that you have proper certificates in place, which are valid and trusted by the clients.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you’re operating a single-node setup and would like to use HTTPS for the Graylog web interface and the Graylog REST API, it’s possible to use <a class="reference internal" href="index.html#configuring-webif-nginx"><span class="std std-ref">NGINX or Apache as a reverse proxy</span></a>.</p>
</div>
<div class="section" id="things-to-consider">
<h4>Things to consider<a class="headerlink" href="#things-to-consider" title="Permalink to this headline">¶</a></h4>
<p>You have multiple options to ensure that your connection is secure and safe. The first would be to create a self-signed certificate, add that to the previously  copied java keystore and use this keystore with your Graylog java options.
Since you will need to do this for every certificate and every trust store, this quickly becomes unmanageable in a clustered architecture. Each node needs to trust all certificates from all other nodes.</p>
<p>The second option would be to create your own certificate authority. You only add the certificate authority once to the key store and all certificates that are created with this authority will be trusted.</p>
<p>The same can be done if you have already your own certificate authority, you only need the certificates and keys in the format that can be used with Graylog. Add the certificate authority key to the keystore and all certificates that are signed by this certificate authority will be trusted.
Same when you pay for certificates or use a free Certificate authority like let’s encrypt to get the server certificates.</p>
<p>Just add the certificate authority to the keystore and all certificates are trusted.</p>
</div>
<div class="section" id="certificate-key-file-format">
<h4>Certificate/Key file format<a class="headerlink" href="#certificate-key-file-format" title="Permalink to this headline">¶</a></h4>
<p>When you are configuring TLS, you need to make sure that your certificate/key files are in the right format, which is X.509 for certificates and PKCS#8 for the private keys. Both must to be stored in PEM format.</p>
</div>
<div class="section" id="creating-a-self-signed-private-key-certificate">
<span id="id1"></span><h4>Creating a self-signed private key/certificate<a class="headerlink" href="#creating-a-self-signed-private-key-certificate" title="Permalink to this headline">¶</a></h4>
<p>Create a file named <code class="docutils literal notranslate"><span class="pre">openssl-graylog.cnf</span></code> with the following content (customized to your needs):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">req</span><span class="p">]</span>
<span class="n">distinguished_name</span> <span class="o">=</span> <span class="n">req_distinguished_name</span>
<span class="n">x509_extensions</span> <span class="o">=</span> <span class="n">v3_req</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="n">no</span>

<span class="c1"># Details about the issuer of the certificate</span>
<span class="p">[</span><span class="n">req_distinguished_name</span><span class="p">]</span>
<span class="n">C</span> <span class="o">=</span> <span class="n">US</span>
<span class="n">ST</span> <span class="o">=</span> <span class="n">Some</span><span class="o">-</span><span class="n">State</span>
<span class="n">L</span> <span class="o">=</span> <span class="n">Some</span><span class="o">-</span><span class="n">City</span>
<span class="n">O</span> <span class="o">=</span> <span class="n">My</span> <span class="n">Company</span>
<span class="n">OU</span> <span class="o">=</span> <span class="n">My</span> <span class="n">Division</span>
<span class="n">CN</span> <span class="o">=</span> <span class="n">graylog</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>

<span class="p">[</span><span class="n">v3_req</span><span class="p">]</span>
<span class="n">keyUsage</span> <span class="o">=</span> <span class="n">keyEncipherment</span><span class="p">,</span> <span class="n">dataEncipherment</span>
<span class="n">extendedKeyUsage</span> <span class="o">=</span> <span class="n">serverAuth</span>
<span class="n">subjectAltName</span> <span class="o">=</span> <span class="nd">@alt_names</span>

<span class="c1"># IP addresses and DNS names the certificate should include</span>
<span class="c1"># Use IP.### for IP addresses and DNS.### for DNS names,</span>
<span class="c1"># with &quot;###&quot; being a consecutive number.</span>
<span class="p">[</span><span class="n">alt_names</span><span class="p">]</span>
<span class="n">IP</span><span class="o">.</span><span class="mi">1</span> <span class="o">=</span> <span class="mf">203.0</span><span class="o">.</span><span class="mf">113.42</span>
<span class="n">DNS</span><span class="o">.</span><span class="mi">1</span> <span class="o">=</span> <span class="n">graylog</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
<p>Create PKCS#5 private key and X.509 certificate:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ openssl version
OpenSSL 0.9.8zh 14 Jan 2016
$ openssl req -x509 -days 365 -nodes -newkey rsa:2048 -config openssl-graylog.cnf -keyout pkcs5-plain.pem -out cert.pem
Generating a 2048 bit RSA private key
............................+++
.+++
writing new private key to &#39;pkcs5-plain.pem&#39;
-----
</pre></div>
</div>
<p>Convert PKCS#5 private key into a <em>unencrypted</em> PKCS#8 private key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ openssl pkcs8 -in pkcs5-plain.pem -topk8 -nocrypt -out pkcs8-plain.pem
</pre></div>
</div>
<p>Convert PKCS#5 private key into an <em>encrypted</em> PKCS#8 private key (using the passphrase <code class="docutils literal notranslate"><span class="pre">secret</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ openssl pkcs8 -in pkcs5-plain.pem -topk8 -out pkcs8-encrypted.pem -passout pass:secret
</pre></div>
</div>
</div>
<div class="section" id="converting-a-pkcs-12-pfx-file-to-private-key-and-certificate-pair">
<h4>Converting a PKCS #12 (PFX) file to private key and certificate pair<a class="headerlink" href="#converting-a-pkcs-12-pfx-file-to-private-key-and-certificate-pair" title="Permalink to this headline">¶</a></h4>
<p>PKCS #12 key stores (PFX files) are commonly used on Microsoft Windows. This needs to be done only if you have to convert PKCS #12 Keys to be used with Graylog.</p>
<p>In this example, the PKCS #12 (PFX) file is named <code class="docutils literal notranslate"><span class="pre">keystore.pfx</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ openssl pkcs12 -in keystore.pfx -nokeys -out graylog-certificate.pem
$ openssl pkcs12 -in keystore.pfx -nocerts -out graylog-pkcs5.pem
$ openssl pkcs8 -in graylog-pkcs5.pem -topk8 -out graylog-key.pem
</pre></div>
</div>
<p>The resulting <code class="docutils literal notranslate"><span class="pre">graylog-certificate.pem</span></code> and <code class="docutils literal notranslate"><span class="pre">graylog-key.pem</span></code> can be used in the Graylog configuration file.</p>
</div>
<div class="section" id="converting-an-existing-java-keystore-to-private-key-certificate-pair">
<h4>Converting an existing Java Keystore to private key/certificate pair<a class="headerlink" href="#converting-an-existing-java-keystore-to-private-key-certificate-pair" title="Permalink to this headline">¶</a></h4>
<p>This section describes how to export a private key and certificate from an existing Java KeyStore in JKS format. This is needed if you want to export the certificates from the Java KeyStore.</p>
<p>The starting point is an existing Java KeyStore in JKS format which contains a private key and certificate which should be used in Graylog:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ keytool -list -v -keystore keystore.jks -alias graylog.example.com
Enter keystore password:
Alias name: graylog.example.com
Creation date: May 10, 2016
Entry type: PrivateKeyEntry
Certificate chain length: 1
Certificate[1]:
Owner: CN=graylog.example.com, OU=Unknown, O=&quot;Graylog, Inc.&quot;, L=Hamburg, ST=Hamburg, C=DE
Issuer: CN=graylog.example.com, OU=Unknown, O=&quot;Graylog, Inc.&quot;, L=Hamburg, ST=Hamburg, C=DE
Serial number: 2b33832d
Valid from: Tue May 10 10:02:34 CEST 2016 until: Mon Aug 08 10:02:34 CEST 2016
Certificate fingerprints:
       MD5:  8A:3D:9F:ED:69:93:1B:6C:E3:29:66:EA:82:8D:42:BE
       SHA1: 5B:27:92:25:46:36:BC:F0:82:8F:9A:30:D8:50:D0:ED:32:4D:C6:A0
       SHA256: 11:11:77:F5:F6:6A:20:A8:E6:4A:5D:B5:20:21:4E:B8:FE:B6:38:1D:45:6B:ED:D0:7B:CE:B8:C8:BC:DD:B4:FB
       Signature algorithm name: SHA256withRSA
       Version: 3

Extensions:

#1: ObjectId: 2.5.29.14 Criticality=false
SubjectKeyIdentifier [
KeyIdentifier [
0000: AC 79 64 9F A1 60 14 B9   51 F4 F5 0B B3 B5 02 A5  .yd..`..Q.......
0010: B8 07 DC 7B                                        ....
]
]
</pre></div>
</div>
<p>The Java KeyStore in JKS format has to be converted to a PKCS#12 keystore, so that OpenSSL can work with it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ keytool -importkeystore -srckeystore keystore.jks -destkeystore keystore.p12 -deststoretype PKCS12
Enter destination keystore password:
Re-enter new password:
Enter source keystore password:
Entry for alias graylog.example.com successfully imported.
Import command completed:  1 entries successfully imported, 0 entries failed or cancelled
</pre></div>
</div>
<p>After the keystore has been successfully converted into PKCS#12 format, OpenSSL can export the X.509 certificate with PEM encoding:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ openssl pkcs12 -in keystore.p12 -nokeys -out graylog-certificate.pem
Enter Import Password:
MAC verified OK
</pre></div>
</div>
<p>The private key can only be exported in PKCS#5 format with PEM encoding:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ openssl pkcs12 -in keystore.p12 -nocerts -out graylog-pkcs5.pem
Enter Import Password:
MAC verified OK
Enter PEM pass phrase:
Verifying - Enter PEM pass phrase:
</pre></div>
</div>
<p>Graylog currently only supports PKCS#8 private keys with PEM encoding, so OpenSSL has to convert it into the correct format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ openssl pkcs8 -in graylog-pkcs5.pem -topk8 -out graylog-key.pem
Enter pass phrase for graylog-pkcs5.pem:
Enter Encryption Password:
Verifying - Enter Encryption Password:
</pre></div>
</div>
<p>The working directory should now contain the PKCS#8 private key (<code class="docutils literal notranslate"><span class="pre">graylog-key.pem</span></code>) and the X.509 certificate (<code class="docutils literal notranslate"><span class="pre">graylog-certificate.pem</span></code>) to be used with Graylog:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ head graylog-key.pem graylog-certificate.pem
==&gt; graylog-key.pem &lt;==
-----BEGIN ENCRYPTED PRIVATE KEY-----
MIIE6TAbBgkqhkiG9w0BBQMwDgQIwMhLa5bw9vgCAggABIIEyN42AeYJJNBEiqhI
mWqJDot4Jokw2vB4abcIJ5Do4+7tjtMrecVRCDSvBZzjkXjnbumBHEoxexe5f0/z
wgq6f/UDyTM3uKYQTG91fcqTyMDUlo3Wc8OqSqsNehOAQzA7hMCehqgNJHO0Zfny
EFvrXHurJWi4eA9vLRup86dbm4Wp3o8pmjOLduXieHfcgVtm5jfd7XfL5cRFS8kS
bSFH4v8xDxLNaJmKkKl9gPCACMRbO9nGk/Z9q9N8zkj+xG9lxlNRMX51SRzg20E0
nyyKTb39tJF35zjroB2HfiFWyrPQ1uF6yGoroGvu0L3eWosjBLjdRs0eBgjJCm5P
ic9zSVqMH6/4CPKJqvB97vP4QhpYcr9jlYJsbn6Zg4OIELpM00VLvp0yU9tqTuRR
TDPYAlNMLZ2RrV52CEsh3zO21WHM7r187x4WHgprDFnjkXf02DrFhgCsGwkEQnb3
vj86q13RHhqoXT4W0zugvcv2/NBLMv0HNQBAfEK3X1YBmtQpEJhwSxeszA1i7CpU

==&gt; graylog-certificate.pem &lt;==
Bag Attributes
    friendlyName: graylog.example.com
    localKeyID: 54 69 6D 65 20 31 34 36 32 38 36 37 38 32 33 30 39 32
subject=/C=DE/ST=Hamburg/L=Hamburg/O=Graylog, Inc./OU=Unknown/CN=graylog.example.com
issuer=/C=DE/ST=Hamburg/L=Hamburg/O=Graylog, Inc./OU=Unknown/CN=graylog.example.com
-----BEGIN CERTIFICATE-----
MIIDkTCCAnmgAwIBAgIEKzODLTANBgkqhkiG9w0BAQsFADB5MQswCQYDVQQGEwJE
RTEQMA4GA1UECBMHSGFtYnVyZzEQMA4GA1UEBxMHSGFtYnVyZzEWMBQGA1UEChMN
R3JheWxvZywgSW5jLjEQMA4GA1UECxMHVW5rbm93bjEcMBoGA1UEAxMTZ3JheWxv
Zy5leGFtcGxlLmNvbTAeFw0xNjA1MTAwODAyMzRaFw0xNjA4MDgwODAyMzRaMHkx
</pre></div>
</div>
<p>The resulting PKCS#8 private key (<code class="docutils literal notranslate"><span class="pre">graylog-key.pem</span></code>) and the X.509 certificate (<code class="docutils literal notranslate"><span class="pre">graylog-certificate.pem</span></code>) can now be used to enable encrypted connections with Graylog by enabling TLS for the Graylog REST API and the web interface in the Graylog configuration file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Enable HTTPS support for the HTTP interface.</span>
<span class="c1"># This secures the communication with the HTTP interface with TLS to prevent request forgery and eavesdropping.</span>
<span class="n">http_enable_tls</span> <span class="o">=</span> <span class="n">true</span>

<span class="c1"># The X.509 certificate chain file in PEM format to use for securing the HTTP interface.</span>
<span class="n">http_tls_cert_file</span> <span class="o">=</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">graylog</span><span class="o">-</span><span class="n">certificate</span><span class="o">.</span><span class="n">pem</span>

<span class="c1"># The PKCS#8 private key file in PEM format to use for securing the HTTP interface.</span>
<span class="n">http_tls_key_file</span> <span class="o">=</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">graylog</span><span class="o">-</span><span class="n">key</span><span class="o">.</span><span class="n">pem</span>

<span class="c1"># The password to unlock the private key used for securing the HTTP interface. (if key is encrypted)</span>
<span class="n">http_tls_key_password</span> <span class="o">=</span> <span class="n">secret</span>
</pre></div>
</div>
</div>
<div class="section" id="sample-files">
<h4>Sample files<a class="headerlink" href="#sample-files" title="Permalink to this headline">¶</a></h4>
<p>This section shows the difference between following private key formats with samples. It will help you to identify between the following private key formats and provides samples.</p>
<p>PKCS#5 plain private key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-----</span><span class="n">BEGIN</span> <span class="n">RSA</span> <span class="n">PRIVATE</span> <span class="n">KEY</span><span class="o">-----</span>
<span class="n">MIIBOwIBAAJBANxtmQ1Kccdp7HBNt8zgTai48Vv617bj4SnhkcMN99sCQ2Naj</span><span class="o">/</span><span class="n">sp</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="n">NiCYNLiCawBbpZnYw</span><span class="o">/</span><span class="n">ztPVACK4EwOpUy</span><span class="o">+</span><span class="n">u19cMB0JA</span><span class="o">==</span>
<span class="o">-----</span><span class="n">END</span> <span class="n">RSA</span> <span class="n">PRIVATE</span> <span class="n">KEY</span><span class="o">-----</span>
</pre></div>
</div>
<p>PKCS#8 plain private key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-----</span><span class="n">BEGIN</span> <span class="n">PRIVATE</span> <span class="n">KEY</span><span class="o">-----</span>
<span class="n">MIIBVAIBADANBgkqhkiG9w0BAQEFAASCAT4wggE6AgEAAkEA6GZN0rQFKRIVaPOz</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="n">LaLGdd9G63kLg85eldSy55uIAXsvqQIgfSYaliVtSbAgyx1Yfs3hJ</span><span class="o">+</span><span class="n">CTpNKzTNv</span><span class="o">/</span>
<span class="n">Fx80EltYV6k</span><span class="o">=</span>
<span class="o">-----</span><span class="n">END</span> <span class="n">PRIVATE</span> <span class="n">KEY</span><span class="o">-----</span>
</pre></div>
</div>
<p>PKCS#5 encrypted private key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-----</span><span class="n">BEGIN</span> <span class="n">RSA</span> <span class="n">PRIVATE</span> <span class="n">KEY</span><span class="o">-----</span>
<span class="n">Proc</span><span class="o">-</span><span class="n">Type</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span><span class="n">ENCRYPTED</span>
<span class="n">DEK</span><span class="o">-</span><span class="n">Info</span><span class="p">:</span> <span class="n">DES</span><span class="o">-</span><span class="n">EDE3</span><span class="o">-</span><span class="n">CBC</span><span class="p">,</span><span class="n">E83B4019057F55E9</span>

<span class="n">iIPs59nQn4RSd7ppch9</span><span class="o">/</span><span class="n">vNE7PfRSHLoQFmaAjaF0DxjV9oucznUjJq2gphAB2E2H</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="n">y5IT1MZPgN3LNkVSsLPWKo08uFZQdfu0JTKcn7NPyRc</span><span class="o">=</span>
<span class="o">-----</span><span class="n">END</span> <span class="n">RSA</span> <span class="n">PRIVATE</span> <span class="n">KEY</span><span class="o">-----</span>
</pre></div>
</div>
<p>PKCS#8 encrypted private key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-----</span><span class="n">BEGIN</span> <span class="n">ENCRYPTED</span> <span class="n">PRIVATE</span> <span class="n">KEY</span><span class="o">-----</span>
<span class="n">MIIBpjBABgkqhkiG9w0BBQ0wMzAbBgkqhkiG9w0BBQwwDgQIU9Y9p2EfWucCAggA</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="n">IjsZNp6zmlqf</span><span class="o">/</span><span class="n">RXnETsJjGd0TXRWaEdu</span><span class="o">+</span><span class="n">XOOyVyPskX2177X9DUJoD31</span>
<span class="o">-----</span><span class="n">END</span> <span class="n">ENCRYPTED</span> <span class="n">PRIVATE</span> <span class="n">KEY</span><span class="o">-----</span>
</pre></div>
</div>
</div>
<div class="section" id="adding-a-self-signed-certificate-to-the-jvm-trust-store">
<h4>Adding a self-signed certificate to the JVM trust store<a class="headerlink" href="#adding-a-self-signed-certificate-to-the-jvm-trust-store" title="Permalink to this headline">¶</a></h4>
<p>Graylog nodes inside a cluster need to communicate with each other using the Graylog REST API. When using HTTPS for the Graylog REST API, the X.509 certificate must be <em>trusted</em> by the JVM trust store (similar to the trusted CA bundle in an operating system), otherwise communication will fail.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">If you are using different X.509 certificates for each Graylog node, you have to add <em>all of them</em> into the JVM trust store of each Graylog node.</p>
</div>
<p>The default trust store of an installed Java runtime environment can be found at <code class="docutils literal notranslate"><span class="pre">$JAVA_HOME/jre/lib/security/cacerts</span></code>. In order not to “pollute” the official trust store, we make a copy of it which we will use with Graylog instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cp -a &quot;${JAVA_HOME}/jre/lib/security/cacerts&quot; /path/to/cacerts.jks
</pre></div>
</div>
<p>After the original key store file has been copied, we can add the self-signed certificate (<code class="docutils literal notranslate"><span class="pre">cert.pem</span></code>, see <a class="reference internal" href="#creating-a-self-signed-private-key-certificate"><span class="std std-ref">Creating a self-signed private key/certificate</span></a>) to the key store (the default password is <code class="docutils literal notranslate"><span class="pre">changeit</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ keytool -importcert -keystore /path/to/cacerts.jks -storepass changeit -alias graylog-self-signed -file cert.pem
Owner: CN=graylog.example.com, O=&quot;Graylog, Inc.&quot;, L=Hamburg, ST=Hamburg, C=DE
Issuer: CN=graylog.example.com, O=&quot;Graylog, Inc.&quot;, L=Hamburg, ST=Hamburg, C=DE
Serial number: 8c80134cee556734
Valid from: Tue Jun 14 16:38:17 CEST 2016 until: Wed Jun 14 16:38:17 CEST 2017
Certificate fingerprints:
       MD5:  69:D1:B3:01:46:0D:E9:45:FB:C6:6C:69:EA:38:ED:3E
       SHA1: F0:64:D0:1B:3B:6B:C8:01:D5:4D:33:36:87:F0:FB:10:E1:36:21:9E
       SHA256: F7:F2:73:3D:86:DC:10:22:1D:14:B8:5D:66:B4:EB:48:FD:3D:74:89:EC:C4:DF:D0:D2:EC:F8:5D:78:49:E7:2F
       Signature algorithm name: SHA1withRSA
       Version: 3

Extensions:

[Other details about the certificate...]

Trust this certificate? [no]:  yes
Certificate was added to keystore
</pre></div>
</div>
<p>To verify that the self-signed certificate has indeed been added, it can be listed with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ keytool -keystore /path/to/cacerts.jks -storepass changeit -list | grep graylog-self-signed -A1
graylog-self-signed, Jun 14, 2016, trustedCertEntry,
Certificate fingerprint (SHA1): F0:64:D0:1B:3B:6B:C8:01:D5:4D:33:36:87:F0:FB:10:E1:36:21:9E
</pre></div>
</div>
<p>The printed certificate fingerprint (SHA1) should match the one printed when importing the self-signed certificate.</p>
<p>In order for the JVM to pick up the new trust store, it has to be started with the JVM parameter <code class="docutils literal notranslate"><span class="pre">-Djavax.net.ssl.trustStore=/path/to/cacerts.jks</span></code>. If you’ve been using another password to encrypt the JVM trust store than the default <code class="docutils literal notranslate"><span class="pre">changeit</span></code>, you additionally have to set the JVM parameter <code class="docutils literal notranslate"><span class="pre">-Djavax.net.ssl.trustStorePassword=secret</span></code>.</p>
<p>Most start and init scripts for Graylog provide a <code class="docutils literal notranslate"><span class="pre">JAVA_OPTS</span></code> variable which can be used to pass the <code class="docutils literal notranslate"><span class="pre">javax.net.ssl.trustStore</span></code> and (optionally) <code class="docutils literal notranslate"><span class="pre">javax.net.ssl.trustStorePassword</span></code> system properties.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The default location to change the JVM parameter depends on your installation type and is documented <a class="reference internal" href="index.html#default-file-location"><span class="std std-ref">with all other default locations</span></a>.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Without adding the previously created Java keystore to the JVM parameters, Graylog won’t be able to verify any self-signed certificates or custom CA certificates.</p>
</div>
</div>
<div class="section" id="disabling-specific-tls-ciphers-and-algorithms">
<span id="disable-ciphers-java"></span><h4>Disabling specific TLS ciphers and algorithms<a class="headerlink" href="#disabling-specific-tls-ciphers-and-algorithms" title="Permalink to this headline">¶</a></h4>
<p>Since <a class="reference external" href="http://www.oracle.com/technetwork/java/javase/7u76-relnotes-2389087.html">Java 7u76</a> it is possible to disable specific TLS algorithms and ciphers for secure connections.</p>
<p>In order to disable specific TLS algorithms and ciphers, you need to provide a properties file with a list of disabled algorithms and ciphers. Take a look at the example <a class="reference external" href="https://github.com/Graylog2/graylog2-server/blob/3.0/misc/security.properties">security.properties</a> in the Graylog source repository.</p>
<p>For example, if you want to disable all algorithms except for TLS 1.2, the properties file has to contain the following line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jdk</span><span class="o">.</span><span class="n">tls</span><span class="o">.</span><span class="n">disabledAlgorithms</span><span class="o">=</span><span class="n">SSLv2Hello</span><span class="p">,</span> <span class="n">SSLv3</span><span class="p">,</span> <span class="n">TLSv1</span><span class="p">,</span> <span class="n">TLSv1</span><span class="o">.</span><span class="mi">1</span>
</pre></div>
</div>
<p>If additionally you want to disable DSA/RSA key sizes lower than 2048 bits and EC key sizes lower than 160 bits, the properties file has to contain the following line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jdk</span><span class="o">.</span><span class="n">tls</span><span class="o">.</span><span class="n">disabledAlgorithms</span><span class="o">=</span><span class="n">SSLv2Hello</span><span class="p">,</span> <span class="n">SSLv3</span><span class="p">,</span> <span class="n">TLSv1</span><span class="p">,</span> <span class="n">TLSv1</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="n">EC</span> <span class="n">keySize</span> <span class="o">&lt;</span> <span class="mi">160</span><span class="p">,</span> <span class="n">RSA</span> <span class="n">keySize</span> <span class="o">&lt;</span> <span class="mi">2048</span><span class="p">,</span> <span class="n">DSA</span> <span class="n">keySize</span> <span class="o">&lt;</span> <span class="mi">2048</span>
</pre></div>
</div>
<p>To load the properties file into a JVM, you have to pass it to Java using the <code class="docutils literal notranslate"><span class="pre">java.security.properties</span></code> system property:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">java</span> <span class="o">-</span><span class="n">Djava</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">properties</span><span class="o">=/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">security</span><span class="o">.</span><span class="n">properties</span> <span class="o">-</span><span class="n">jar</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">graylog</span><span class="o">.</span><span class="n">jar</span> <span class="n">server</span>
</pre></div>
</div>
<p>Most start and <a class="reference internal" href="index.html#default-file-location"><span class="std std-ref">init scripts for Graylog</span></a> provide a <code class="docutils literal notranslate"><span class="pre">JAVA_OPTS</span></code> variable which can be used to pass the <code class="docutils literal notranslate"><span class="pre">java.security.properties</span></code> system property.</p>
<div class="section" id="further-reading">
<h5>Further reading<a class="headerlink" href="#further-reading" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><a class="reference external" href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/JSSERefGuide.html#DisabledAlgorithms">https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/JSSERefGuide.html#DisabledAlgorithms</a></li>
<li><a class="reference external" href="http://www.oracle.com/technetwork/java/javase/7u76-relnotes-2389087.html">http://www.oracle.com/technetwork/java/javase/7u76-relnotes-2389087.html</a></li>
<li><a class="reference external" href="http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7133344">http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7133344</a></li>
<li><a class="reference external" href="https://tersesystems.com/2014/01/13/fixing-the-most-dangerous-code-in-the-world/">https://tersesystems.com/2014/01/13/fixing-the-most-dangerous-code-in-the-world/</a></li>
</ul>
</div>
</div>
</div>
<span id="document-pages/configuration/multinode_setup"></span><div class="section" id="multi-node-setup">
<span id="configure-multinode"></span><h3>Multi-node Setup<a class="headerlink" href="#multi-node-setup" title="Permalink to this headline">¶</a></h3>
<p>This guide doesn’t provide a step-by-step tutorial for building a multi-node Graylog cluster but does simply give some advice for questions that might arise during the setup.</p>
<p>It’s important for such a project that you understand each step in the setup process and do some planning upfront. Without a proper roadmap of all the things you want to achieve with a Graylog cluster, you will be lost on the way.</p>
<p>Graylog should be the last component you install in this setup. Its dependencies, namely MongoDB and Elasticsearch, have to be up and running first.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">This guide doesn’t include instructions for running a multi-node Graylog cluster in an untrusted network. We assume that the connection between the hosts is trusted and doesn’t have to be secured individually.</p>
</div>
<div class="section" id="prerequisites">
<h4>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h4>
<p>Every server which is part of this setup should have the software requirements installed to run the targeted software. All software requirements can be found in the installation manual.</p>
<p>We highly recommend that the system time on all systems is kept in sync via NTP or a similar mechanism. Needless to say that DNS resolution must be working, too. Because everything is a freaking DNS problem.</p>
<p>In order to simplify the installation process, the servers should have a working Internet connection.</p>
</div>
<div class="section" id="mongodb-replica-set">
<h4>MongoDB replica set<a class="headerlink" href="#mongodb-replica-set" title="Permalink to this headline">¶</a></h4>
<p>We recommend to <a class="reference external" href="https://docs.mongodb.com/manual/tutorial/deploy-replica-set/">deploy a MongoDB replica set</a>.</p>
<p>MongoDB doesn’t have to run on dedicated servers for the workload generated by Graylog, but you should follow the recommendations given in the MongoDB documentation about architecture. Most important is that you have an odd number of MongoDB servers in the replica set.</p>
<p>In most setups, each Graylog server will also host an instance of MongoDB which is part of the same replica set and shares the data with all other nodes in the cluster.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To avoid unauthorized access to your MongoDB database, the <a class="reference external" href="https://docs.mongodb.com/v2.6/tutorial/deploy-replica-set-with-auth/">MongoDB replica set should be setup with authentication</a>.</p>
</div>
<p>The correct order of working steps should be as follows:</p>
<ol class="arabic simple">
<li>Create the replica set (<code class="docutils literal notranslate"><span class="pre">rs01</span></code>)</li>
<li>Create the database (<code class="docutils literal notranslate"><span class="pre">graylog</span></code>)</li>
<li>Create a user account for accessing the database, which has the roles <code class="docutils literal notranslate"><span class="pre">readWrite</span></code> and <code class="docutils literal notranslate"><span class="pre">dbAdmin</span></code>.</li>
</ol>
<p>If your MongoDB needs to be reachable over network you should set the IP with <code class="docutils literal notranslate"><span class="pre">bind_ip</span></code> in the configuration.</p>
</div>
<div class="section" id="elasticsearch-cluster">
<h4>Elasticsearch cluster<a class="headerlink" href="#elasticsearch-cluster" title="Permalink to this headline">¶</a></h4>
<p>The <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.4/setup.html">Elasticsearch setup documentation</a> should help you to install Elasticsearch with a robust base configuration.</p>
<p>It is important to name the Elasticsearch cluster not simply named <cite>elasticsearch</cite> to avoid accidental conflicts with Elasticsearch nodes using the default configuration. Just choose anything else (we recommend <cite>graylog</cite>), because this is the default name and any Elasticsearch instance that is started in the same network will try to connect to this cluster.</p>
<p>The Elasticsearch servers need one IP that can be reached over network set in <code class="docutils literal notranslate"><span class="pre">network.host</span></code> and some participants of the cluster in <code class="docutils literal notranslate"><span class="pre">discovery.zen.ping.unicast.hosts</span></code>. That is enough to have a minimal cluster setup.</p>
<p>When you secure your Elasticsearch with <a class="reference external" href="https://www.elastic.co/guide/en/x-pack/5.4/xpack-security.html#preventing-unauthorized-access">User Authentification</a> you need to add credentials to the <a class="reference external" href="https://github.com/Graylog2/graylog2-server/blob/2.3.0-beta.1/misc/graylog.conf#L172-L178">Graylog configuration</a> to be able to use the secured Elasticsearch cluster with Graylog.</p>
</div>
<div class="section" id="graylog-multi-node">
<h4>Graylog Multi-node<a class="headerlink" href="#graylog-multi-node" title="Permalink to this headline">¶</a></h4>
<p>After the installation of Graylog, you should take care that only one Graylog node is configured to be master with the configuration setting <code class="docutils literal notranslate"><span class="pre">is_master</span> <span class="pre">=</span> <span class="pre">true</span></code>.</p>
<p>The HTTP settings configured in <code class="docutils literal notranslate"><span class="pre">http_bind_address</span></code> (or <code class="docutils literal notranslate"><span class="pre">http_publish_uri</span></code>) must be accessable for all Graylog nodes of the cluster.</p>
<div class="section" id="graylog-to-mongodb-connection">
<h5>Graylog to MongoDB connection<a class="headerlink" href="#graylog-to-mongodb-connection" title="Permalink to this headline">¶</a></h5>
<p>The <code class="docutils literal notranslate"><span class="pre">mongodb_uri</span></code> configuration setting must include all MongoDB nodes forming the replica set, the name of the replica set, as well as the previously configured user account with access to the replica set. The configuration setting is a normal <a class="reference external" href="https://docs.mongodb.com/manual/reference/connection-string/">MongoDB connection string</a>.</p>
<p>Finally, the MongoDB connection string in the Graylog configuration file should look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>mongodb_uri = mongodb://USERNAME:PASSWORD@mongodb-node01:27017,mongodb-node02:27017,mongodb-node03:27017/graylog?replicaSet=rs01
</pre></div>
</div>
</div>
<div class="section" id="graylog-to-elasticsearch-connection">
<h5>Graylog to Elasticsearch connection<a class="headerlink" href="#graylog-to-elasticsearch-connection" title="Permalink to this headline">¶</a></h5>
<p>Graylog will connect to the Elasticsearch <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.4/_exploring_your_cluster.html">REST API</a>.</p>
<p>To avoid issues with the connection to the Elasticsearch cluster you should add some of the network addresses of the Elasticsearch nodes to <code class="docutils literal notranslate"><span class="pre">elasticsearch_hosts</span></code>.</p>
</div>
<div class="section" id="graylog-web-interface">
<h5>Graylog web interface<a class="headerlink" href="#graylog-web-interface" title="Permalink to this headline">¶</a></h5>
<p>It’s possible to use a <a class="reference internal" href="index.html#loadbalancer-integration"><span class="std std-ref">loadbalancer</span></a> in front of all Graylog servers, please refer to <a class="reference internal" href="index.html#configuring-webif-nginx"><span class="std std-ref">Making the web interface work with load balancers/proxies</span></a> for more details.</p>
<p>Depending on your setup, it’s possible to either use a hardware loadbalancer for TLS/HTTPS termination, a <a class="reference internal" href="index.html#configuring-webif-nginx"><span class="std std-ref">reverse proxy</span></a>, or to simply enable it <a class="reference internal" href="index.html#ssl-setup"><span class="std std-ref">in the Graylog node</span></a>.</p>
</div>
</div>
<div class="section" id="scaling">
<h4>Scaling<a class="headerlink" href="#scaling" title="Permalink to this headline">¶</a></h4>
<p>Each component in this multi-node setup can be scaled on the individual needs.</p>
<p>Depending on the amount of messages ingested and how long messages should be available for direct search, the Elasticsearch cluster will need most of the resources on your setup.</p>
<p>Keep an eye on the Metrics of each part of the cluster. One option is to use <a class="reference external" href="https://github.com/influxdata/telegraf">telegraf</a> to fetch importand metrics and store them in your favorite metric system (e. g. Graphite, Prometheus or Influx).</p>
<p>Elasticseach Metrics and some administration can be done with <a class="reference external" href="http://www.elastichq.org">Elastic HQ</a> or <a class="reference external" href="http://github.com/lmenezes/cerebro">Cerebro</a>. Those will help you to understand the Elasticsearch cluster health and behavior.</p>
<p>Graylog Metrics can be monitored <a class="reference external" href="https://marketplace.graylog.org/addons/6fef88c7-94f7-488e-a6c5-bd6b71d8343e">with the Graylog Metrics Reporter plugins</a> which are able to send the internal Graylog metrics to your favorite metrics collector (e. g. Graphite or Prometheus).</p>
<p>Up until today, we have almost never faced the issue that the MongoDB replica set needed special attention. But of course you should still monitor it and store its metrics - just to be sure.</p>
</div>
<div class="section" id="troubleshooting">
<h4>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>After every configuration change or service restart, watch the logfile of the applications you have worked on. Sometimes other log files can also give you hints about what went wrong. For example if you’re configuring Graylog and try to find out why the connection to the MongoDB isn’t working, the MongoDB logs can help to identify the problem.</li>
<li>If <a class="reference internal" href="index.html#ssl-setup"><span class="std std-ref">HTTPS has been enabled for the Graylog REST API</span></a>, it need to be setup for the Graylog web interface, too.</li>
</ul>
</div>
</div>
<span id="document-pages/configuration/elasticsearch"></span><div class="section" id="elasticsearch">
<span id="configuring-es"></span><h3>Elasticsearch<a class="headerlink" href="#elasticsearch" title="Permalink to this headline">¶</a></h3>
<p>We strongly recommend to use a dedicated Elasticsearch cluster for your Graylog setup.</p>
<p>If you are using a shared Elasticsearch setup, a problem with indices unrelated to Graylog might turn the cluster status to YELLOW or RED and impact the availability and performance of your Graylog setup.</p>
<div class="section" id="elasticsearch-versions">
<h4>Elasticsearch versions<a class="headerlink" href="#elasticsearch-versions" title="Permalink to this headline">¶</a></h4>
<p>Starting with version 2.3, Graylog uses the HTTP protocol to connect to your Elasticsearch cluster, so it does not have a hard requirement for the Elasticsearch version anymore. We can safely assume that any version starting from 2.x is working.</p>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">Graylog 2.4 <strong>does not</strong> work with Elasticsearch 6.x!</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Graylog works fine with the <a class="reference external" href="https://aws.amazon.com/elasticsearch-service/">Amazon Elasticsearch Service</a> using <strong>Elasticsearch 5.3.x</strong> or later.</p>
</div>
</div>
<div class="section" id="configuration">
<h4>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h4>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">As Graylog has switched from an embedded Elasticsearch node client to a lightweight HTTP client in version 2.3, please check the <a class="reference internal" href="index.html#upgrade-from-22-to-23"><span class="std std-ref">upgrade notes</span></a> how to migrate your configuration if you are switching from an earlier version.</p>
</div>
<div class="section" id="graylog">
<h5>Graylog<a class="headerlink" href="#graylog" title="Permalink to this headline">¶</a></h5>
<p>The most important setting to make a successful connection is a list of comma-separated URIs to one or more Elasticsearch nodes. Graylog needs to know the address of at least one other Elasticsearch node given in the <code class="docutils literal notranslate"><span class="pre">elasticsearch_hosts</span></code> setting. The specified value should at least contain the scheme (<code class="docutils literal notranslate"><span class="pre">http://</span></code> for unencrypted, <code class="docutils literal notranslate"><span class="pre">https://</span></code> for encrypted connections), the hostname or IP and the port of the HTTP listener (which is <code class="docutils literal notranslate"><span class="pre">9200</span></code> unless otherwise configured) of this node. Optionally, you can also specify an authentication section containing a user name and a password, if either your Elasticsearch node uses <a class="reference external" href="https://www.elastic.co/products/x-pack/security">Shield/X-Pack</a> or <a class="reference external" href="http://floragunn.com/searchguard/">Search Guard</a>, or you have an intermediate HTTP proxy requiring authentication in between the Graylog server and the Elasticsearch node. Additionally you can specify an optional path prefix at the end of the URI.</p>
<p>A sample specification of <code class="docutils literal notranslate"><span class="pre">elasticsearch_hosts</span></code> could look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">elasticsearch_hosts</span> <span class="o">=</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">es</span><span class="o">-</span><span class="n">node</span><span class="o">-</span><span class="mf">1.</span><span class="n">example</span><span class="o">.</span><span class="n">org</span><span class="p">:</span><span class="mi">9200</span><span class="o">/</span><span class="n">foo</span><span class="p">,</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">someuser</span><span class="p">:</span><span class="n">somepassword</span><span class="nd">@es</span><span class="o">-</span><span class="n">node</span><span class="o">-</span><span class="mf">2.</span><span class="n">example</span><span class="o">.</span><span class="n">org</span><span class="p">:</span><span class="mi">19200</span>
</pre></div>
</div>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">Graylog assumes that all nodes in the cluster are running the same versions of Elasticsearch. While it might work when patch-levels differ, we highly encourage to keep versions consistent.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Graylog does not react to externally triggered index changes (creating/closing/reopening/deleting an index) anymore. All of these actions need to be performed through the Graylog REST API in order to retain index consistency.</p>
</div>
<div class="section" id="available-elasticsearch-configuration-tunables">
<h6>Available Elasticsearch configuration tunables<a class="headerlink" href="#available-elasticsearch-configuration-tunables" title="Permalink to this headline">¶</a></h6>
<p>The following configuration options are now being used to configure connectivity to Elasticsearch:</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="7%" />
<col width="40%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Config Setting</th>
<th class="head">Type</th>
<th class="head">Comments</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_connect_timeout</span></code></td>
<td>Duration</td>
<td>Timeout when connection to individual Elasticsearch hosts</td>
<td><code class="docutils literal notranslate"><span class="pre">10s</span></code> (10 Seconds)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_hosts</span></code></td>
<td>List&lt;URI&gt;</td>
<td>Comma-separated list of URIs of Elasticsearch hosts</td>
<td><code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:9200</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_idle_timeout</span></code></td>
<td>Duration</td>
<td>Timeout after which idle connections are terminated</td>
<td><code class="docutils literal notranslate"><span class="pre">-1s</span></code> (Never)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_max_total_connections</span></code></td>
<td>int</td>
<td>Maximum number of total Elasticsearch connections</td>
<td><code class="docutils literal notranslate"><span class="pre">20</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_max_total_connections_per_route</span></code></td>
<td>int</td>
<td>Maximum number of Elasticsearch connections per route/host</td>
<td><code class="docutils literal notranslate"><span class="pre">2</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_socket_timeout</span></code></td>
<td>Duration</td>
<td>Timeout when sending/receiving from Elasticsearch connection</td>
<td><code class="docutils literal notranslate"><span class="pre">60s</span></code> (60 Seconds)</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_discovery_enabled</span></code></td>
<td>boolean</td>
<td>Enable automatic Elasticsearch node discovery</td>
<td><code class="docutils literal notranslate"><span class="pre">false</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_discovery_filter</span></code></td>
<td>String</td>
<td>Filter by node attributes for the discovered nodes</td>
<td>empty (use all nodes)</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_discovery_frequency</span></code></td>
<td>Duration</td>
<td>Frequency of the Elasticsearch node discovery</td>
<td><code class="docutils literal notranslate"><span class="pre">30s</span></code> (30 Seconds)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">elasticsearch_compression_enabled</span></code></td>
<td>boolean</td>
<td>Enable GZIP compression of Elasticseach request payloads</td>
<td><code class="docutils literal notranslate"><span class="pre">false</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="automatic-node-discovery">
<span id="id1"></span><h6>Automatic node discovery<a class="headerlink" href="#automatic-node-discovery" title="Permalink to this headline">¶</a></h6>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">Authentication with the Elasticsearch cluster will not work if the automatic node discovery is being used.</p>
</div>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">Automatic node discovery does not work when using the <a class="reference external" href="https://aws.amazon.com/elasticsearch-service/">Amazon Elasticsearch Service</a> because Amazon blocks certain Elasticsearch API endpoints.</p>
</div>
<p>Graylog uses automatic node discovery to gather a list of all available Elasticsearch nodes in the cluster at runtime and distribute requests among them to potentially increase performance and availability. To enable this feature, you need to set the <code class="docutils literal notranslate"><span class="pre">elasticsearch_discovery_enabled</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code>. Optionally, you can define the a filter allowing to selectively include/exclude discovered nodes (details how to specify node filters are found in the <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.7/cluster.html#cluster-nodes">Elasticsearch cluster documentation</a>) using the <code class="docutils literal notranslate"><span class="pre">elasticsearch_discovery_filter</span></code> setting, or tuning the frequency of the node discovery using the <code class="docutils literal notranslate"><span class="pre">elasticsearch_discovery_frequency</span></code> configuration option.</p>
</div>
</div>
<div class="section" id="configuration-of-elasticsearch-nodes">
<h5>Configuration of Elasticsearch nodes<a class="headerlink" href="#configuration-of-elasticsearch-nodes" title="Permalink to this headline">¶</a></h5>
<div class="section" id="control-access-to-elasticsearch-ports">
<span id="secure-es"></span><h6>Control access to Elasticsearch ports<a class="headerlink" href="#control-access-to-elasticsearch-ports" title="Permalink to this headline">¶</a></h6>
<p>If you are not using <a class="reference external" href="https://www.elastic.co/products/x-pack/security">Shield/X-Pack</a> or <a class="reference external" href="http://floragunn.com/searchguard/">Search Guard</a> to authenticate access to your Elasticsearch nodes, make sure to restrict access to the Elasticsearch ports (default: 9200/tcp and 9300/tcp). Otherwise the data is readable by anyone who has access to the machine over network.</p>
</div>
<div class="section" id="open-file-limits">
<h6>Open file limits<a class="headerlink" href="#open-file-limits" title="Permalink to this headline">¶</a></h6>
<p>Because Elasticsearch has to keep a lot of files open simultaneously it requires a higher open file limit that the usual operating
system defaults allow. <strong>Set it to at least 64000 open file descriptors.</strong></p>
<p>Graylog will show a notification in the web interface when there is a node in the Elasticsearch cluster which has a too low open file limit.</p>
<p>Read about how to raise the open file limit in the corresponding <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.6/setup-configuration.html#file-descriptors">5.x</a> / <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.7/file-descriptors.html">6.x</a> documentation pages.</p>
</div>
<div class="section" id="heap-size">
<h6>Heap size<a class="headerlink" href="#heap-size" title="Permalink to this headline">¶</a></h6>
<p>It is strongly recommended to raise the standard size of heap memory allocated to Elasticsearch. Just set the <code class="docutils literal notranslate"><span class="pre">ES_HEAP_SIZE</span></code> environment
variable to for example <code class="docutils literal notranslate"><span class="pre">24g</span></code> to allocate 24GB. We recommend to use around 50% of the available system memory for Elasticsearch (when
running on a dedicated host) to leave enough space for the system caches that Elasticsearch uses a lot. But please take care that you <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/guide/2.x/heap-sizing.html#compressed_oops">don’t cross 32 GB!</a></p>
</div>
<div class="section" id="merge-throttling">
<h6>Merge throttling<a class="headerlink" href="#merge-throttling" title="Permalink to this headline">¶</a></h6>
<p>Elasticsearch is throttling the merging of Lucene segments to allow extremely fast searches. This throttling however has default values
that are very conservative and can lead to slow ingestion rates when used with Graylog. You would see the message journal growing without
a real indication of CPU or memory stress on the Elasticsearch nodes. It usually goes along with Elasticsearch INFO log messages like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">now</span> <span class="n">throttling</span> <span class="n">indexing</span>
</pre></div>
</div>
<p>When running on fast IO like SSDs or a SAN we recommend to increase the value of the <code class="docutils literal notranslate"><span class="pre">indices.store.throttle.max_bytes_per_sec</span></code> in your
<code class="docutils literal notranslate"><span class="pre">elasticsearch.yml</span></code> to 150MB:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">indices</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">throttle</span><span class="o">.</span><span class="n">max_bytes_per_sec</span><span class="p">:</span> <span class="mi">150</span><span class="n">mb</span>
</pre></div>
</div>
<p>Play around with this setting until you reach the best performance.</p>
</div>
<div class="section" id="tuning-elasticsearch">
<h6>Tuning Elasticsearch<a class="headerlink" href="#tuning-elasticsearch" title="Permalink to this headline">¶</a></h6>
<p>Graylog is already setting specific configuration for every index it is managing. This is enough tuning for a lot of use cases and setups.</p>
<p>More detailed information about the configuration of Elasticsearch can be found in the <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.7/system-config.html">official documentation</a>.</p>
</div>
</div>
</div>
<div class="section" id="avoiding-split-brain-and-shard-shuffling">
<h4>Avoiding split-brain and shard shuffling<a class="headerlink" href="#avoiding-split-brain-and-shard-shuffling" title="Permalink to this headline">¶</a></h4>
<div class="section" id="split-brain-events">
<h5>Split-brain events<a class="headerlink" href="#split-brain-events" title="Permalink to this headline">¶</a></h5>
<p>Elasticsearch sacrifices consistency in order to ensure availability, and partition tolerance. The reasoning behind that is that short periods of misbehaviour are less problematic than short periods of unavailability. In other words, when Elasticsearch nodes in a cluster are unable to replicate changes to data, they will keep serving applications such as Graylog. When the nodes are able to replicate their data, they will attempt to converge the replicas and to achieve <em>eventual consistency</em>.</p>
<p>Elasticsearch tackles the previous by electing master nodes, which are in charge of database operations such as creating new indices, moving shards around the cluster nodes, and so forth. Master nodes coordinate their actions actively with others, ensuring that the data can be converged by non-masters. The cluster nodes that are not master nodes are not allowed to make changes that would break the cluster.</p>
<p>The previous mechanism can in some circumstances fail, causing a <strong>split-brain event</strong>. When an Elasticsearch cluster is split into two sides, both thinking they are the master, data consistency is lost as the masters work independently on the data. As a result the nodes will respond differently to same queries. This is considered a catastrophic event, because the data from two masters can not be rejoined automatically, and it takes quite a bit of manual work to remedy the situation.</p>
<div class="section" id="avoiding-split-brain-events">
<h6>Avoiding split-brain events<a class="headerlink" href="#avoiding-split-brain-events" title="Permalink to this headline">¶</a></h6>
<p>Elasticsearch nodes take a simple majority vote over who is master. If the majority agrees that they are the master, then most likely the disconnected minority has also come to conclusion that they can not be the master, and everything is just fine. This mechanism requires at least 3 nodes to work reliably however, because one or two nodes can not form a majority.</p>
<p>The minimum amount of master nodes required to elect a master must be configured manually in <code class="docutils literal notranslate"><span class="pre">elasticsearch.yml</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># At least NODES/2+1 on clusters with NODES &gt; 2, where NODES is the number of master nodes in the cluster</span>
<span class="n">discovery</span><span class="o">.</span><span class="n">zen</span><span class="o">.</span><span class="n">minimum_master_nodes</span><span class="p">:</span> <span class="mi">2</span>
</pre></div>
</div>
<p>The configuration values should typically for example:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="22%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Master nodes</th>
<th class="head">minimum_master_nodes</th>
<th class="head">Comments</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>1</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>1</td>
<td>With 2 the other node going down would stop the cluster from working!</td>
</tr>
<tr class="row-even"><td>3</td>
<td>2</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>3</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>5</td>
<td>3</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>6</td>
<td>4</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<p>Some of the master nodes may be <em>dedicated master nodes</em>, meaning they are configured just to handle lightweight operational (cluster management) responsibilities. They will not handle or store any of the cluster’s data. The function of such nodes is similar to so called <em>witness servers</em> on other database products, and setting them up on dedicated witness sites will greatly reduce the chance of Elasticsearch cluster instability.</p>
<p>A dedicated master node has the following configuration in <code class="docutils literal notranslate"><span class="pre">elasticsearch.yml</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">data</span><span class="p">:</span> <span class="n">false</span>
<span class="n">node</span><span class="o">.</span><span class="n">master</span><span class="p">:</span> <span class="n">true</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="shard-shuffling">
<h5>Shard shuffling<a class="headerlink" href="#shard-shuffling" title="Permalink to this headline">¶</a></h5>
<p>When cluster status changes, for example because of node restarts or availability issues, Elasticsearch will start automatically rebalancing the data in the cluster. The cluster works on making sure that the amount of shards and replicas will conform to the cluster configuration. This is a problem if the status changes are just temporary. Moving shards and replicas around in the cluster takes considerable amount of resources, and should be done only when necessary.</p>
<div class="section" id="avoiding-unnecessary-shuffling">
<h6>Avoiding unnecessary shuffling<a class="headerlink" href="#avoiding-unnecessary-shuffling" title="Permalink to this headline">¶</a></h6>
<p>Elasticsearch has couple configuration options, which are designed to allow short times of unavailability before starting the recovery process with shard shuffling. There are 3 settings that may be configured in <code class="docutils literal notranslate"><span class="pre">elasticsearch.yml</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Recover only after the given number of nodes have joined the cluster. Can be seen as &quot;minimum number of nodes to attempt recovery at all&quot;.</span>
<span class="n">gateway</span><span class="o">.</span><span class="n">recover_after_nodes</span><span class="p">:</span> <span class="mi">8</span>
<span class="c1"># Time to wait for additional nodes after recover_after_nodes is met.</span>
<span class="n">gateway</span><span class="o">.</span><span class="n">recover_after_time</span><span class="p">:</span> <span class="mi">5</span><span class="n">m</span>
<span class="c1"># Inform ElasticSearch how many nodes form a full cluster. If this number is met, start up immediately.</span>
<span class="n">gateway</span><span class="o">.</span><span class="n">expected_nodes</span><span class="p">:</span> <span class="mi">10</span>
</pre></div>
</div>
<p>The configuration options should be set up so that only <em>minimal</em> node unavailability is tolerated. For example server restarts are common, and should be done in managed manner. The logic is that if you lose large part of your cluster, you probably should start re-shuffling the shards and replicas without tolerating the situation.</p>
</div>
</div>
</div>
<div class="section" id="custom-index-mappings">
<h4>Custom index mappings<a class="headerlink" href="#custom-index-mappings" title="Permalink to this headline">¶</a></h4>
<p>Sometimes it’s useful to not rely on Elasticsearch’s <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/guide/2.x/dynamic-mapping.html">dynamic mapping</a> but to define a stricter schema for messages.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the index mapping is conflicting with the actual message to be sent to Elasticsearch, indexing that message will fail.</p>
</div>
<p>Graylog itself is using a default mapping which includes settings for the <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>, <code class="docutils literal notranslate"><span class="pre">message</span></code>, <code class="docutils literal notranslate"><span class="pre">full_message</span></code>, and <code class="docutils literal notranslate"><span class="pre">source</span></code> fields of indexed messages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -X GET &#39;http://localhost:9200/_template/graylog-internal?pretty&#39;
{
  &quot;graylog-internal&quot; : {
    &quot;order&quot; : -2147483648,
    &quot;template&quot; : &quot;graylog_*&quot;,
    &quot;settings&quot; : { },
    &quot;mappings&quot; : {
      &quot;message&quot; : {
        &quot;_ttl&quot; : {
          &quot;enabled&quot; : true
        },
        &quot;_source&quot; : {
          &quot;enabled&quot; : true
        },
        &quot;dynamic_templates&quot; : [ {
          &quot;internal_fields&quot; : {
            &quot;mapping&quot; : {
              &quot;index&quot; : &quot;not_analyzed&quot;,
              &quot;type&quot; : &quot;string&quot;
            },
            &quot;match&quot; : &quot;gl2_*&quot;
          }
        }, {
          &quot;store_generic&quot; : {
            &quot;mapping&quot; : {
              &quot;index&quot; : &quot;not_analyzed&quot;
            },
            &quot;match&quot; : &quot;*&quot;
          }
        } ],
        &quot;properties&quot; : {
          &quot;full_message&quot; : {
            &quot;analyzer&quot; : &quot;standard&quot;,
            &quot;index&quot; : &quot;analyzed&quot;,
            &quot;type&quot; : &quot;string&quot;
          },
          &quot;streams&quot; : {
            &quot;index&quot; : &quot;not_analyzed&quot;,
            &quot;type&quot; : &quot;string&quot;
          },
          &quot;source&quot; : {
            &quot;analyzer&quot; : &quot;analyzer_keyword&quot;,
            &quot;index&quot; : &quot;analyzed&quot;,
            &quot;type&quot; : &quot;string&quot;
          },
          &quot;message&quot; : {
            &quot;analyzer&quot; : &quot;standard&quot;,
            &quot;index&quot; : &quot;analyzed&quot;,
            &quot;type&quot; : &quot;string&quot;
          },
          &quot;timestamp&quot; : {
            &quot;format&quot; : &quot;yyyy-MM-dd HH:mm:ss.SSS&quot;,
            &quot;type&quot; : &quot;date&quot;
          }
        }
      }
    },
    &quot;aliases&quot; : { }
  }
}
</pre></div>
</div>
<p>In order to extend the default mapping of Elasticsearch and Graylog, you can create one or more custom index mappings and add them as index templates to Elasticsearch.</p>
<p>Let’s say we have a schema for our data like the following:</p>
<table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="18%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field Name</th>
<th class="head">Field Type</th>
<th class="head">Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">http_method</span></code></td>
<td>string</td>
<td>GET</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">http_response_code</span></code></td>
<td>long</td>
<td>200</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">ingest_time</span></code></td>
<td>date</td>
<td>2016-06-13T15:00:51.927Z</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">took_ms</span></code></td>
<td>long</td>
<td>56</td>
</tr>
</tbody>
</table>
<p>This would translate to the following additional index mapping in Elasticsearch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;mappings&quot;</span> <span class="p">:</span> <span class="p">{</span>
  <span class="s2">&quot;message&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;properties&quot;</span> <span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;http_method&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
        <span class="s2">&quot;index&quot;</span> <span class="p">:</span> <span class="s2">&quot;not_analyzed&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;http_response_code&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;long&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;ingest_time&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;date&quot;</span><span class="p">,</span>
        <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;strict_date_time&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;took_ms&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;long&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The format of the <code class="docutils literal notranslate"><span class="pre">ingest_time</span></code> field is described in the Elasticsearch documentation about the <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.7/mapping-date-format.html">format mapping parameter</a>. Also make sure to check the Elasticsearch documentation about <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.7/mapping-types.html">Field datatypes</a>.</p>
<p>In order to apply the additional index mapping when Graylog creates a new index in Elasticsearch, it has to be added to an <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.7/indices-templates.html">index template</a>. The Graylog default template (<code class="docutils literal notranslate"><span class="pre">graylog-internal</span></code>) has the lowest priority and will be merged with the custom index template by Elasticsearch.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If the default index mapping and the custom index mapping cannot be merged (e. g. because of conflicting field datatypes), Elasticsearch will throw an exception and won’t create the index. So be extremely cautious and conservative about the custom index mappings!</p>
</div>
<div class="section" id="creating-a-new-index-template">
<h5>Creating a new index template<a class="headerlink" href="#creating-a-new-index-template" title="Permalink to this headline">¶</a></h5>
<p>Save the following index template for the custom index mapping into a file named <code class="docutils literal notranslate"><span class="pre">graylog-custom-mapping.json</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;template&quot;</span><span class="p">:</span> <span class="s2">&quot;graylog_*&quot;</span><span class="p">,</span>
  <span class="s2">&quot;mappings&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;message&quot;</span> <span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;properties&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;http_method&quot;</span> <span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
          <span class="s2">&quot;index&quot;</span> <span class="p">:</span> <span class="s2">&quot;not_analyzed&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;http_response_code&quot;</span> <span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;long&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;ingest_time&quot;</span> <span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;date&quot;</span><span class="p">,</span>
          <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;strict_date_time&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;took_ms&quot;</span> <span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;long&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Finally, load the index mapping into Elasticsearch with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -X PUT -d @&#39;graylog-custom-mapping.json&#39; -H &#39;Content-Type: application/json&#39; &#39;http://localhost:9200/_template/graylog-custom-mapping?pretty&#39;
{
  &quot;acknowledged&quot; : true
}
</pre></div>
</div>
<p>Every Elasticsearch index created from that time on, will have an index mapping consisting of the original <code class="docutils literal notranslate"><span class="pre">graylog-internal</span></code> index template and the new <code class="docutils literal notranslate"><span class="pre">graylog-custom-mapping</span></code> template:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -X GET &#39;http://localhost:9200/graylog_deflector/_mapping?pretty&#39;
{
  &quot;graylog_2&quot; : {
    &quot;mappings&quot; : {
      &quot;message&quot; : {
        &quot;_ttl&quot; : {
          &quot;enabled&quot; : true
        },
        &quot;dynamic_templates&quot; : [ {
          &quot;internal_fields&quot; : {
            &quot;mapping&quot; : {
              &quot;index&quot; : &quot;not_analyzed&quot;,
              &quot;type&quot; : &quot;string&quot;
            },
            &quot;match&quot; : &quot;gl2_*&quot;
          }
        }, {
          &quot;store_generic&quot; : {
            &quot;mapping&quot; : {
              &quot;index&quot; : &quot;not_analyzed&quot;
            },
            &quot;match&quot; : &quot;*&quot;
          }
        } ],
        &quot;properties&quot; : {
          &quot;full_message&quot; : {
            &quot;type&quot; : &quot;string&quot;,
            &quot;analyzer&quot; : &quot;standard&quot;
          },
          &quot;http_method&quot; : {
            &quot;type&quot; : &quot;string&quot;,
            &quot;index&quot; : &quot;not_analyzed&quot;
          },
          &quot;http_response_code&quot; : {
            &quot;type&quot; : &quot;long&quot;
          },
          &quot;ingest_time&quot; : {
            &quot;type&quot; : &quot;date&quot;,
            &quot;format&quot; : &quot;strict_date_time&quot;
          },
          &quot;message&quot; : {
            &quot;type&quot; : &quot;string&quot;,
            &quot;analyzer&quot; : &quot;standard&quot;
          },
          &quot;source&quot; : {
            &quot;type&quot; : &quot;string&quot;,
            &quot;analyzer&quot; : &quot;analyzer_keyword&quot;
          },
          &quot;streams&quot; : {
            &quot;type&quot; : &quot;string&quot;,
            &quot;index&quot; : &quot;not_analyzed&quot;
          },
          &quot;timestamp&quot; : {
            &quot;type&quot; : &quot;date&quot;,
            &quot;format&quot; : &quot;yyyy-MM-dd HH:mm:ss.SSS&quot;
          },
          &quot;took_ms&quot; : {
            &quot;type&quot; : &quot;long&quot;
          }
        }
      }
    }
  }
}
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When using different index sets every index set can have its own mapping.</p>
</div>
</div>
<div class="section" id="deleting-custom-index-templates">
<h5>Deleting custom index templates<a class="headerlink" href="#deleting-custom-index-templates" title="Permalink to this headline">¶</a></h5>
<p>If you want to remove an existing index template from Elasticsearch, simply issue a <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> request to Elasticsearch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -X DELETE &#39;http://localhost:9200/_template/graylog-custom-mapping?pretty&#39;
{
  &quot;acknowledged&quot; : true
}
</pre></div>
</div>
<p>After you’ve removed the index template, new indices will only have the original index mapping:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -X GET &#39;http://localhost:9200/graylog_deflector/_mapping?pretty&#39;
{
  &quot;graylog_3&quot; : {
    &quot;mappings&quot; : {
      &quot;message&quot; : {
        &quot;_ttl&quot; : {
          &quot;enabled&quot; : true
        },
        &quot;dynamic_templates&quot; : [ {
          &quot;internal_fields&quot; : {
            &quot;mapping&quot; : {
              &quot;index&quot; : &quot;not_analyzed&quot;,
              &quot;type&quot; : &quot;string&quot;
            },
            &quot;match&quot; : &quot;gl2_*&quot;
          }
        }, {
          &quot;store_generic&quot; : {
            &quot;mapping&quot; : {
              &quot;index&quot; : &quot;not_analyzed&quot;
            },
            &quot;match&quot; : &quot;*&quot;
          }
        } ],
        &quot;properties&quot; : {
          &quot;full_message&quot; : {
            &quot;type&quot; : &quot;string&quot;,
            &quot;analyzer&quot; : &quot;standard&quot;
          },
          &quot;message&quot; : {
            &quot;type&quot; : &quot;string&quot;,
            &quot;analyzer&quot; : &quot;standard&quot;
          },
          &quot;source&quot; : {
            &quot;type&quot; : &quot;string&quot;,
            &quot;analyzer&quot; : &quot;analyzer_keyword&quot;
          },
          &quot;streams&quot; : {
            &quot;type&quot; : &quot;string&quot;,
            &quot;index&quot; : &quot;not_analyzed&quot;
          },
          &quot;timestamp&quot; : {
            &quot;type&quot; : &quot;date&quot;,
            &quot;format&quot; : &quot;yyyy-MM-dd HH:mm:ss.SSS&quot;
          }
        }
      }
    }
  }
}
</pre></div>
</div>
<p>Additional information on Elasticsearch Index Templates can be found in the official <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.7/indices-templates.html">Elasticsearch Template Documentation</a></p>
<div class="admonition note" id="rotate-es-indices">
<p class="first admonition-title">Note</p>
<p class="last">Settings and index mappings in templates are only applied to new indices. After adding, modifying, or deleting an index template, you have to manually rotate the write-active indices of your index sets for the changes to take effect.</p>
</div>
</div>
<div class="section" id="rotate-indices-manually">
<h5>Rotate indices manually<a class="headerlink" href="#rotate-indices-manually" title="Permalink to this headline">¶</a></h5>
<p>Select the desired index set on the <code class="docutils literal notranslate"><span class="pre">System</span> <span class="pre">/</span> <span class="pre">Indices</span></code> page in the Graylog web interface by clicking on the name of the index set, then select “Rotate active write index” from the “Maintenance” dropdown menu.</p>
<img alt="_images/rotate_index_1.png" src="http://res.fansdoc.com/graylog/_images/rotate_index_1.png" />
<img alt="_images/rotate_index_2.png" src="http://res.fansdoc.com/graylog/_images/rotate_index_2.png" />
</div>
</div>
<div class="section" id="cluster-status-explained">
<span id="es-cluster-status"></span><h4>Cluster Status explained<a class="headerlink" href="#cluster-status-explained" title="Permalink to this headline">¶</a></h4>
<p>Elasticsearch provides a classification for the <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.7/cluster-health.html">cluster health</a>.</p>
<p>The cluster status applies to different levels:</p>
<ul class="simple">
<li><strong>Shard level</strong> - see status descriptions below</li>
<li><strong>Index level</strong> - inherits the status of the worst shard status</li>
<li><strong>Cluster level</strong> - inherits the status of the worst index status</li>
</ul>
<p>That means that the Elasticsearch cluster status can turn red if a single index or shard has problems even though the rest of the indices/shards are okay.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Graylog checks the status of the current write index while indexing messages. If that one is GREEN or YELLOW, Graylog will continue to write messages into Elasticsearch regardless of the overall cluster status.</p>
</div>
<p>Explanation of the different status levels:</p>
<div class="section" id="red">
<h5>RED<a class="headerlink" href="#red" title="Permalink to this headline">¶</a></h5>
<p>The RED status indicates that some or all of the primary shards are not available.</p>
<p>In this state, no searches can be performed until all primary shards have been restored.</p>
</div>
<div class="section" id="yellow">
<h5>YELLOW<a class="headerlink" href="#yellow" title="Permalink to this headline">¶</a></h5>
<p>The YELLOW status means that all of the primary shards are available but some or all shard replicas are not.</p>
<p>When the index configuration include replication with a count that is equal or higher than the number of nodes, your cluster cannot become green. In most cases, this can be solved by adding another Elasticsearch node to the cluster or by reducing the replication factor of the indices.</p>
</div>
<div class="section" id="green">
<h5>GREEN<a class="headerlink" href="#green" title="Permalink to this headline">¶</a></h5>
<p>The cluster is fully operational. All primary and replica shards are available.</p>
</div>
</div>
</div>
<span id="document-pages/configuration/index_model"></span><div class="section" id="index-model">
<span id="id1"></span><h3>Index model<a class="headerlink" href="#index-model" title="Permalink to this headline">¶</a></h3>
<div class="section" id="overview">
<h4>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h4>
<p>Graylog is transparently managing one or more sets of Elasticsearch indices to optimize search and analysis operations for speed and low resource consumption.</p>
<p>To enable managing indices with different <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/guide/2.x/mapping.html">mappings</a>, <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/guide/2.x/configuring-analyzers.html">analyzers</a>, and <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/guide/2.x/_index_settings.html">replication settings</a> Graylog is using so-called index sets which are an abstraction of all these settings.</p>
<img alt="_images/index_set_overview.png" src="http://res.fansdoc.com/graylog/_images/index_set_overview.png" />
<p>Each index set contains the necessary settings for Graylog to create, manage, and fill Elasticsearch indices and handle index rotation and data retention for specific requirements.</p>
<img alt="_images/index_set_details.png" src="http://res.fansdoc.com/graylog/_images/index_set_details.png" />
<p>Graylog is maintaining an <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/guide/2.x/index-aliases.html">index alias</a> per index set which is always pointing to the current write-active index from that index set.
There is always exactly one index to which new messages are written until the configured rotation criterion (number of documents, index size, or index age) has been met.</p>
<p>A background task continuously checks if the rotation criterion of an index set has been met and a new index is created and prepared when that happens.
Once the index is ready, the index alias is atomically switched to it.
That means that all Graylog nodes can write messages to the into alias without even knowing what the currently write-active index of the index set is.</p>
<img alt="_images/index_model_write.png" src="http://res.fansdoc.com/graylog/_images/index_model_write.png" />
<p>Almost every read operation is performed with a given time range.
Because Graylog is writing messages sequentially into Elasticsearch it can keep information about the time range each index covers.
It selects a lists of indices to query when having a time range provided. If no time range was provided, it will search in all indices it knows.</p>
<img alt="_images/index_model_read.png" src="http://res.fansdoc.com/graylog/_images/index_model_read.png" />
<div class="section" id="eviction-of-indices-and-messages">
<h5>Eviction of indices and messages<a class="headerlink" href="#eviction-of-indices-and-messages" title="Permalink to this headline">¶</a></h5>
<p>There are configuration settings for the maximum number of indices Graylog is managing in a given index set.</p>
<p>Depending on the configured retention strategy, the oldest indices of an index set will automatically be closed, deleted, or exported when the configured maximum number of indices has been reached.</p>
<p>The deletion is performed by the Graylog master node in a background thread which is continuously comparing the number of indices with the configured maximum:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>INFO : org.graylog2.indexer.rotation.strategies.AbstractRotationStrategy - Deflector index &lt;graylog_95&gt; should be rotated, Pointing deflector to new index now!
INFO : org.graylog2.indexer.MongoIndexSet - Cycling from &lt;graylog_95&gt; to &lt;graylog_96&gt;.
INFO : org.graylog2.indexer.MongoIndexSet - Creating target index &lt;graylog_96&gt;.
INFO : org.graylog2.indexer.indices.Indices - Created Graylog index template &quot;graylog-internal&quot; in Elasticsearch.
INFO : org.graylog2.indexer.MongoIndexSet - Waiting for allocation of index &lt;graylog_96&gt;.
INFO : org.graylog2.indexer.MongoIndexSet - Index &lt;graylog_96&gt; has been successfully allocated.
INFO : org.graylog2.indexer.MongoIndexSet - Pointing index alias &lt;graylog_deflector&gt; to new index &lt;graylog_96&gt;.
INFO : org.graylog2.system.jobs.SystemJobManager - Submitted SystemJob &lt;f1018ae0-dcaa-11e6-97c3-6c4008b8fc28&gt; [org.graylog2.indexer.indices.jobs.SetIndexReadOnlyAndCalculateRangeJob]
INFO : org.graylog2.indexer.MongoIndexSet - Successfully pointed index alias &lt;graylog_deflector&gt; to index &lt;graylog_96&gt;.
</pre></div>
</div>
</div>
</div>
<div class="section" id="index-set-configuration">
<h4>Index Set Configuration<a class="headerlink" href="#index-set-configuration" title="Permalink to this headline">¶</a></h4>
<p>Index sets have a variety of different settings related to how Graylog will store messages into the Elasticsearch cluster.</p>
<img alt="_images/index_set_create.png" src="http://res.fansdoc.com/graylog/_images/index_set_create.png" />
<ul class="simple">
<li><strong>Title</strong>: A descriptive name of the index set.</li>
<li><strong>Description</strong>: A description of the index set for human consumption.</li>
<li><strong>Index prefix</strong>: A unique prefix used for Elasticsearch indices managed by the index set. The prefix must start with a letter or number, and can only contain letters, numbers, <code class="docutils literal notranslate"><span class="pre">_</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code> and <code class="docutils literal notranslate"><span class="pre">+</span></code>. The index alias will be named accordingly, e. g. <code class="docutils literal notranslate"><span class="pre">graylog_deflector</span></code> if the index prefix was <code class="docutils literal notranslate"><span class="pre">graylog</span></code>.</li>
<li><strong>Analyzer</strong>: (default: <code class="docutils literal notranslate"><span class="pre">standard</span></code>) The Elasticsearch <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/guide/2.x/configuring-analyzers.html">analyzer</a> for the index set.</li>
<li><strong>Index shards</strong>: (default: 4) The number of Elasticsearch shards used per index.</li>
<li><strong>Index replicas</strong>: (default: 0) The number of Elasticsearch replicas used per index.</li>
<li><strong>Max. number of segments</strong>: (default: 1) The maximum number of segments per Elasticsearch index after <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.4/indices-forcemerge.html">index optimization (force merge)</a>, see <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/guide/2.x/merge-process.html">Segment Merging</a> for details.</li>
<li><strong>Disable index optimization after rotation</strong>: Disable Elasticsearch <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.4/indices-forcemerge.html">index optimization (force merge)</a> after index rotation. Only activate this if you have serious problems with the performance of your Elasticsearch cluster during the optimization process.</li>
</ul>
<div class="section" id="index-rotation">
<span id="id3"></span><h5>Index rotation<a class="headerlink" href="#index-rotation" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><strong>Message count</strong>: Rotates the index after a specific number of messages have been written.</li>
<li><strong>Index size</strong>: Rotates the index after an approximate size on disk (before optimization) has been reached.</li>
<li><strong>Index time</strong>: Rotates the index after a specific time (e. g. 1 hour or 1 week).</li>
</ul>
<img alt="_images/index_set_create_rotation.png" src="http://res.fansdoc.com/graylog/_images/index_set_create_rotation.png" />
</div>
<div class="section" id="index-retention">
<span id="id4"></span><h5>Index retention<a class="headerlink" href="#index-retention" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><strong>Delete</strong>: <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.4/indices-delete-index.html">Delete indices</a> in Elasticsearch to minimize resource consumption.</li>
<li><strong>Close</strong>: <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.4/indices-open-close.html">Close indices</a> in Elasticsearch to reduce resource consumption.</li>
<li><strong>Do nothing</strong></li>
<li><strong>Archive</strong>: Commercial feature, see <a class="reference internal" href="index.html#document-pages/archiving"><span class="doc">Archiving</span></a>.</li>
</ul>
<img alt="_images/index_set_create_retention.png" src="http://res.fansdoc.com/graylog/_images/index_set_create_retention.png" />
</div>
</div>
<div class="section" id="maintenance">
<h4>Maintenance<a class="headerlink" href="#maintenance" title="Permalink to this headline">¶</a></h4>
<div class="section" id="keeping-the-index-ranges-in-sync">
<h5>Keeping the index ranges in sync<a class="headerlink" href="#keeping-the-index-ranges-in-sync" title="Permalink to this headline">¶</a></h5>
<p>Graylog will take care of calculating index ranges automatically as soon as a new index has been created.</p>
<p>In case the stored metadata about index time ranges has run out of sync, Graylog will notify you in the web interface.
This can happen if an index was deleted manually or messages from already “closed” indices were removed.</p>
<p>The system will offer you to just re-generate all time range information.
This may take a few seconds but is an easy task for Graylog.</p>
<p>You can easily re-build the information yourself after manually deleting indices or doing other changes that might cause synchronization problems:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -XPOST http://127.0.0.1:9000/api/system/indices/ranges/rebuild
</pre></div>
</div>
<p>This will trigger a system job:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INFO</span> <span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">indexer</span><span class="o">.</span><span class="n">ranges</span><span class="o">.</span><span class="n">RebuildIndexRangesJob</span> <span class="o">-</span> <span class="n">Recalculating</span> <span class="n">index</span> <span class="n">ranges</span><span class="o">.</span>
<span class="n">INFO</span> <span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">jobs</span><span class="o">.</span><span class="n">SystemJobManager</span> <span class="o">-</span> <span class="n">Submitted</span> <span class="n">SystemJob</span> <span class="o">&lt;</span><span class="mi">9</span><span class="n">b64a9d0</span><span class="o">-</span><span class="n">dcac</span><span class="o">-</span><span class="mf">11e6</span><span class="o">-</span><span class="mi">97</span><span class="n">c3</span><span class="o">-</span><span class="mi">6</span><span class="n">c4008b8fc28</span><span class="o">&gt;</span> <span class="p">[</span><span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">indexer</span><span class="o">.</span><span class="n">ranges</span><span class="o">.</span><span class="n">RebuildIndexRangesJob</span><span class="p">]</span>
<span class="n">INFO</span> <span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">indexer</span><span class="o">.</span><span class="n">ranges</span><span class="o">.</span><span class="n">RebuildIndexRangesJob</span> <span class="o">-</span> <span class="n">Recalculating</span> <span class="n">index</span> <span class="n">ranges</span> <span class="k">for</span> <span class="n">index</span> <span class="nb">set</span> <span class="n">Default</span> <span class="n">index</span> <span class="nb">set</span> <span class="p">(</span><span class="n">graylog2_</span><span class="o">*</span><span class="p">):</span> <span class="mi">5</span> <span class="n">indices</span> <span class="n">affected</span><span class="o">.</span>
<span class="n">INFO</span> <span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">indexer</span><span class="o">.</span><span class="n">ranges</span><span class="o">.</span><span class="n">MongoIndexRangeService</span> <span class="o">-</span> <span class="n">Calculated</span> <span class="nb">range</span> <span class="n">of</span> <span class="p">[</span><span class="n">graylog_96</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">7</span><span class="n">ms</span><span class="p">]</span><span class="o">.</span>
<span class="n">INFO</span> <span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">indexer</span><span class="o">.</span><span class="n">ranges</span><span class="o">.</span><span class="n">RebuildIndexRangesJob</span> <span class="o">-</span> <span class="n">Created</span> <span class="n">ranges</span> <span class="k">for</span> <span class="n">index</span> <span class="n">graylog_96</span><span class="p">:</span> <span class="n">MongoIndexRange</span><span class="p">{</span><span class="nb">id</span><span class="o">=</span><span class="n">null</span><span class="p">,</span> <span class="n">indexName</span><span class="o">=</span><span class="n">graylog_96</span><span class="p">,</span> <span class="n">begin</span><span class="o">=</span><span class="mi">2017</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">17</span><span class="n">T11</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mf">02.529</span><span class="n">Z</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">2017</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">17</span><span class="n">T12</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">01.492</span><span class="n">Z</span><span class="p">,</span> <span class="n">calculatedAt</span><span class="o">=</span><span class="mi">2017</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">17</span><span class="n">T12</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">58.097</span><span class="n">Z</span><span class="p">,</span> <span class="n">calculationDuration</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">streamIds</span><span class="o">=</span><span class="p">[</span><span class="mi">000000000000000000000001</span><span class="p">]}</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="n">INFO</span> <span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">indexer</span><span class="o">.</span><span class="n">ranges</span><span class="o">.</span><span class="n">RebuildIndexRangesJob</span> <span class="o">-</span> <span class="n">Done</span> <span class="n">calculating</span> <span class="n">index</span> <span class="n">ranges</span> <span class="k">for</span> <span class="mi">5</span> <span class="n">indices</span><span class="o">.</span> <span class="n">Took</span> <span class="mi">44</span><span class="n">ms</span><span class="o">.</span>
<span class="n">INFO</span> <span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">jobs</span><span class="o">.</span><span class="n">SystemJobManager</span> <span class="o">-</span> <span class="n">SystemJob</span> <span class="o">&lt;</span><span class="mi">9</span><span class="n">b64a9d0</span><span class="o">-</span><span class="n">dcac</span><span class="o">-</span><span class="mf">11e6</span><span class="o">-</span><span class="mi">97</span><span class="n">c3</span><span class="o">-</span><span class="mi">6</span><span class="n">c4008b8fc28</span><span class="o">&gt;</span> <span class="p">[</span><span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">indexer</span><span class="o">.</span><span class="n">ranges</span><span class="o">.</span><span class="n">RebuildIndexRangesJob</span><span class="p">]</span> <span class="n">finished</span> <span class="ow">in</span> <span class="mi">46</span><span class="n">ms</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="manually-rotating-the-active-write-index">
<h5>Manually rotating the active write index<a class="headerlink" href="#manually-rotating-the-active-write-index" title="Permalink to this headline">¶</a></h5>
<p>Sometimes you might want to rotate the active write index manually and not wait until the configured rotation criterion for in the latest index has been met, for example if you’ve changed the index mapping or the number of shards per index.</p>
<p>You can do this either via an HTTP request against the REST API of the Graylog master node or via the web interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -XPOST http://127.0.0.1:9000/api/system/deflector/cycle
</pre></div>
</div>
<img alt="_images/index_set_maintenance.png" src="http://res.fansdoc.com/graylog/_images/index_set_maintenance.png" />
<p>Triggering this job produces log output similar to the following lines:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INFO</span> <span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">resources</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">DeflectorResource</span> <span class="o">-</span> <span class="n">Cycling</span> <span class="n">deflector</span> <span class="k">for</span> <span class="n">index</span> <span class="nb">set</span> <span class="o">&lt;</span><span class="mi">58501</span><span class="n">f0b4a133077ecd134d9</span><span class="o">&gt;.</span> <span class="n">Reason</span><span class="p">:</span> <span class="n">REST</span> <span class="n">request</span><span class="o">.</span>
<span class="n">INFO</span> <span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">indexer</span><span class="o">.</span><span class="n">MongoIndexSet</span> <span class="o">-</span> <span class="n">Cycling</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="n">graylog_97</span><span class="o">&gt;</span> <span class="n">to</span> <span class="o">&lt;</span><span class="n">graylog_98</span><span class="o">&gt;.</span>
<span class="n">INFO</span> <span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">indexer</span><span class="o">.</span><span class="n">MongoIndexSet</span> <span class="o">-</span> <span class="n">Creating</span> <span class="n">target</span> <span class="n">index</span> <span class="o">&lt;</span><span class="n">graylog_98</span><span class="o">&gt;.</span>
<span class="n">INFO</span> <span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">indexer</span><span class="o">.</span><span class="n">indices</span><span class="o">.</span><span class="n">Indices</span> <span class="o">-</span> <span class="n">Created</span> <span class="n">Graylog</span> <span class="n">index</span> <span class="n">template</span> <span class="s2">&quot;graylog-internal&quot;</span> <span class="ow">in</span> <span class="n">Elasticsearch</span><span class="o">.</span>
<span class="n">INFO</span> <span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">indexer</span><span class="o">.</span><span class="n">MongoIndexSet</span> <span class="o">-</span> <span class="n">Waiting</span> <span class="k">for</span> <span class="n">allocation</span> <span class="n">of</span> <span class="n">index</span> <span class="o">&lt;</span><span class="n">graylog_98</span><span class="o">&gt;.</span>
<span class="n">INFO</span> <span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">indexer</span><span class="o">.</span><span class="n">MongoIndexSet</span> <span class="o">-</span> <span class="n">Index</span> <span class="o">&lt;</span><span class="n">graylog_98</span><span class="o">&gt;</span> <span class="n">has</span> <span class="n">been</span> <span class="n">successfully</span> <span class="n">allocated</span><span class="o">.</span>
<span class="n">INFO</span> <span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">indexer</span><span class="o">.</span><span class="n">MongoIndexSet</span> <span class="o">-</span> <span class="n">Pointing</span> <span class="n">index</span> <span class="n">alias</span> <span class="o">&lt;</span><span class="n">graylog_deflector</span><span class="o">&gt;</span> <span class="n">to</span> <span class="n">new</span> <span class="n">index</span> <span class="o">&lt;</span><span class="n">graylog_98</span><span class="o">&gt;.</span>
<span class="n">INFO</span> <span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">jobs</span><span class="o">.</span><span class="n">SystemJobManager</span> <span class="o">-</span> <span class="n">Submitted</span> <span class="n">SystemJob</span> <span class="o">&lt;</span><span class="mi">024</span><span class="n">aac80</span><span class="o">-</span><span class="n">dcad</span><span class="o">-</span><span class="mf">11e6</span><span class="o">-</span><span class="mi">97</span><span class="n">c3</span><span class="o">-</span><span class="mi">6</span><span class="n">c4008b8fc28</span><span class="o">&gt;</span> <span class="p">[</span><span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">indexer</span><span class="o">.</span><span class="n">indices</span><span class="o">.</span><span class="n">jobs</span><span class="o">.</span><span class="n">SetIndexReadOnlyAndCalculateRangeJob</span><span class="p">]</span>
<span class="n">INFO</span> <span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">indexer</span><span class="o">.</span><span class="n">MongoIndexSet</span> <span class="o">-</span> <span class="n">Successfully</span> <span class="n">pointed</span> <span class="n">index</span> <span class="n">alias</span> <span class="o">&lt;</span><span class="n">graylog_deflector</span><span class="o">&gt;</span> <span class="n">to</span> <span class="n">index</span> <span class="o">&lt;</span><span class="n">graylog_98</span><span class="o">&gt;.</span>
<span class="n">INFO</span> <span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">indexer</span><span class="o">.</span><span class="n">retention</span><span class="o">.</span><span class="n">strategies</span><span class="o">.</span><span class="n">AbstractIndexCountBasedRetentionStrategy</span> <span class="o">-</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">indices</span> <span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="n">higher</span> <span class="n">than</span> <span class="n">limit</span> <span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span> <span class="n">Running</span> <span class="n">retention</span> <span class="k">for</span> <span class="mi">1</span> <span class="n">index</span><span class="o">.</span>
<span class="n">INFO</span> <span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">indexer</span><span class="o">.</span><span class="n">retention</span><span class="o">.</span><span class="n">strategies</span><span class="o">.</span><span class="n">AbstractIndexCountBasedRetentionStrategy</span> <span class="o">-</span> <span class="n">Running</span> <span class="n">retention</span> <span class="n">strategy</span> <span class="p">[</span><span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">indexer</span><span class="o">.</span><span class="n">retention</span><span class="o">.</span><span class="n">strategies</span><span class="o">.</span><span class="n">DeletionRetentionStrategy</span><span class="p">]</span> <span class="k">for</span> <span class="n">index</span> <span class="o">&lt;</span><span class="n">graylog_94</span><span class="o">&gt;</span>
<span class="n">INFO</span> <span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">indexer</span><span class="o">.</span><span class="n">retention</span><span class="o">.</span><span class="n">strategies</span><span class="o">.</span><span class="n">DeletionRetentionStrategy</span> <span class="o">-</span> <span class="n">Finished</span> <span class="n">index</span> <span class="n">retention</span> <span class="n">strategy</span> <span class="p">[</span><span class="n">delete</span><span class="p">]</span> <span class="k">for</span> <span class="n">index</span> <span class="o">&lt;</span><span class="n">graylog_94</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="mi">23</span><span class="n">ms</span><span class="o">.</span>
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-pages/configuration/backup"></span><div class="section" id="backup">
<span id="configuring-backup"></span><h3>Backup<a class="headerlink" href="#backup" title="Permalink to this headline">¶</a></h3>
<p>When it comes to backup in a Graylog setup it is not easy to answer. You need to consider what type of backup will suit your needs.</p>
<p>Your Graylog Server setup and settings are easy to backup with a <a class="reference external" href="https://docs.mongodb.com/manual/reference/program/mongodump/#bin.mongodump">MongoDB dump</a> and a filesystem backup of all configuration files.</p>
<p>The data within your Elasticsearch Cluster can take the advantage of the <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-snapshots.html">Snapshot and Restore</a> function that are offered by Elasticsearch.</p>
<div class="section" id="disaster-recovery">
<h4>Disaster recovery<a class="headerlink" href="#disaster-recovery" title="Permalink to this headline">¶</a></h4>
<p>To be able to restore Graylog after a total System crash you need the Graylog <code class="docutils literal notranslate"><span class="pre">server.conf``file</span> <span class="pre">-</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">exact</span> <span class="pre">you</span> <span class="pre">need</span> <span class="pre">the</span> <span class="pre">key</span> <span class="pre">you</span> <span class="pre">used</span> <span class="pre">for</span> <span class="pre">``password_secret</span></code> in the configuration. The second important part is the MongoDB. This database contains all configuration. Possible options how-to <a class="reference external" href="https://docs.mongodb.com/manual/core/backups/#back-up-by-copying-underlying-data-files">backup MongoDB can be found at the MongoDB documentation</a>.</p>
<p>If you need to restore log data, you can do this using the archiving feature of Graylog enterprise or any other elasticsearch backup and restore option. It is not enough to copy the data directories of your Elasticsearch nodes, you might not be able to restore from that.</p>
<p>Elasticsearch and MongoDB are databases, for both you should implement the ability to make a data dump and restore that - if you need want to be able to restore the current state.</p>
</div>
</div>
<span id="document-pages/configuration/file_location"></span><div class="section" id="default-file-locations">
<span id="default-file-location"></span><h3>Default file locations<a class="headerlink" href="#default-file-locations" title="Permalink to this headline">¶</a></h3>
<p>Each installation flavor of Graylog will place the configuration files into a specific location on the local files system. The goal of this section is to provide a short overview about the most common and most important default file locations.</p>
<div class="section" id="deb-package">
<h4>DEB package<a class="headerlink" href="#deb-package" title="Permalink to this headline">¶</a></h4>
<p>This paragraph covers Graylog installations on Ubuntu Linux, Debian Linux, and Debian derivates installed with the <a class="reference internal" href="index.html#operating-package-deb-apt"><span class="std std-ref">DEB package</span></a>.</p>
<div class="section" id="graylog">
<span id="scripts-dir"></span><span id="deb-graylog"></span><h5>Graylog<a class="headerlink" href="#graylog" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">File system path</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Configuration</td>
<td><code class="docutils literal notranslate"><span class="pre">/etc/graylog/server/server.conf</span></code></td>
</tr>
<tr class="row-odd"><td>Logging configuration</td>
<td><code class="docutils literal notranslate"><span class="pre">/etc/graylog/server/log4j2.xml</span></code></td>
</tr>
<tr class="row-even"><td>Plugins</td>
<td><code class="docutils literal notranslate"><span class="pre">/usr/share/graylog-server/plugin</span></code></td>
</tr>
<tr class="row-odd"><td>Binaries</td>
<td><code class="docutils literal notranslate"><span class="pre">/usr/share/graylog-server/bin</span></code></td>
</tr>
<tr class="row-even"><td>Scripts</td>
<td><code class="docutils literal notranslate"><span class="pre">/usr/share/graylog-server/scripts</span></code></td>
</tr>
<tr class="row-odd"><td>JVM settings</td>
<td><code class="docutils literal notranslate"><span class="pre">/etc/default/graylog-server</span></code></td>
</tr>
<tr class="row-even"><td>Message journal files</td>
<td><code class="docutils literal notranslate"><span class="pre">/var/lib/graylog-server/journal</span></code></td>
</tr>
<tr class="row-odd"><td>Log Files</td>
<td><code class="docutils literal notranslate"><span class="pre">/var/log/graylog-server/</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="elasticsearch">
<span id="deb-elasticsearch"></span><h5>Elasticsearch<a class="headerlink" href="#elasticsearch" title="Permalink to this headline">¶</a></h5>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These are only the most common file locations. Please refer to the <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.3/setup-dir-layout.html#default-paths">Elasticsearch documentation</a> for a comprehensive list of default file locations.</p>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">File system path</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Configuration</td>
<td><code class="docutils literal notranslate"><span class="pre">/etc/elasticsearch</span></code></td>
</tr>
<tr class="row-odd"><td>JVM settings</td>
<td><code class="docutils literal notranslate"><span class="pre">/etc/default/elasticsearch</span></code></td>
</tr>
<tr class="row-even"><td>Data files</td>
<td><code class="docutils literal notranslate"><span class="pre">/var/lib/elasticsearch/data</span></code></td>
</tr>
<tr class="row-odd"><td>Log files</td>
<td><code class="docutils literal notranslate"><span class="pre">/var/log/elasticsearch/</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="mongodb">
<span id="deb-mongodb"></span><h5>MongoDB<a class="headerlink" href="#mongodb" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">File system path</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Configuration</td>
<td><code class="docutils literal notranslate"><span class="pre">/etc/mongod.conf</span></code></td>
</tr>
<tr class="row-odd"><td>Data files</td>
<td><code class="docutils literal notranslate"><span class="pre">/var/lib/mongodb/</span></code></td>
</tr>
<tr class="row-even"><td>Log files</td>
<td><code class="docutils literal notranslate"><span class="pre">/var/log/mongodb/</span></code></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="rpm-package">
<h4>RPM package<a class="headerlink" href="#rpm-package" title="Permalink to this headline">¶</a></h4>
<p>This paragraph covers Graylog installations on Fedora Linux, Red Hat Enterprise Linux, CentOS Linux, and other Red Hat Linux derivates installed with the <a class="reference internal" href="index.html#operating-package-rpm-yum-dnf"><span class="std std-ref">RPM package</span></a>.</p>
<div class="section" id="rpm-graylog">
<span id="id1"></span><h5>Graylog<a class="headerlink" href="#rpm-graylog" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">File system path</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Configuration</td>
<td><code class="docutils literal notranslate"><span class="pre">/etc/graylog/server/server.conf</span></code></td>
</tr>
<tr class="row-odd"><td>Logging configuration</td>
<td><code class="docutils literal notranslate"><span class="pre">/etc/graylog/server/log4j2.xml</span></code></td>
</tr>
<tr class="row-even"><td>Plugins</td>
<td><code class="docutils literal notranslate"><span class="pre">/usr/share/graylog-server/plugin</span></code></td>
</tr>
<tr class="row-odd"><td>Binaries</td>
<td><code class="docutils literal notranslate"><span class="pre">/usr/share/graylog-server/bin</span></code></td>
</tr>
<tr class="row-even"><td>Scripts</td>
<td><code class="docutils literal notranslate"><span class="pre">/usr/share/graylog-server/scripts</span></code></td>
</tr>
<tr class="row-odd"><td>JVM settings</td>
<td><code class="docutils literal notranslate"><span class="pre">/etc/sysconfig/graylog-server</span></code></td>
</tr>
<tr class="row-even"><td>Message journal files</td>
<td><code class="docutils literal notranslate"><span class="pre">/var/lib/graylog-server/journal</span></code></td>
</tr>
<tr class="row-odd"><td>Log Files</td>
<td><code class="docutils literal notranslate"><span class="pre">/var/log/graylog-server/</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="rpm-elasticsearch">
<span id="id2"></span><h5>Elasticsearch<a class="headerlink" href="#rpm-elasticsearch" title="Permalink to this headline">¶</a></h5>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These are only the most common file locations. Please refer to the <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.3/setup-dir-layout.html#default-paths">Elasticsearch documentation</a> for a comprehensive list of default file locations.</p>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">File system path</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Configuration</td>
<td><code class="docutils literal notranslate"><span class="pre">/etc/elasticsearch</span></code></td>
</tr>
<tr class="row-odd"><td>JVM settings</td>
<td><code class="docutils literal notranslate"><span class="pre">/etc/sysconfig/elasticsearch</span></code></td>
</tr>
<tr class="row-even"><td>Data files</td>
<td><code class="docutils literal notranslate"><span class="pre">/var/lib/elasticsearch/</span></code></td>
</tr>
<tr class="row-odd"><td>Log files</td>
<td><code class="docutils literal notranslate"><span class="pre">/var/log/elasticsearch/</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="rpm-mongodb">
<span id="id3"></span><h5>MongoDB<a class="headerlink" href="#rpm-mongodb" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">File system path</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Configuration</td>
<td><code class="docutils literal notranslate"><span class="pre">/etc/mongod.conf</span></code></td>
</tr>
<tr class="row-odd"><td>Data files</td>
<td><code class="docutils literal notranslate"><span class="pre">/var/lib/mongodb/</span></code></td>
</tr>
<tr class="row-even"><td>Log files</td>
<td><code class="docutils literal notranslate"><span class="pre">/var/log/mongodb/</span></code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<span id="document-pages/configuration/rest_api"></span><div class="section" id="graylog-rest-api">
<span id="configuring-api"></span><h3>Graylog REST API<a class="headerlink" href="#graylog-rest-api" title="Permalink to this headline">¶</a></h3>
<p>The functionality Graylog REST API is very comprehensive; even the Graylog web interface is exclusively using Graylog REST API to interact with the Graylog cluster.</p>
<p>To connect to the Graylog REST API with a web browser, just add <code class="docutils literal notranslate"><span class="pre">api/api-browser</span></code> to your current <code class="docutils literal notranslate"><span class="pre">http_publish_uri</span></code> setting or use the <strong>API browser</strong> button on the nodes overview page (<em>System / Nodes</em> in the web interface).</p>
<p>For example if your Graylog REST API is listening on <code class="docutils literal notranslate"><span class="pre">http://192.168.178.26:9000/api/</span></code>, the API browser will be available at <code class="docutils literal notranslate"><span class="pre">http://192.168.178.26:9000/api/api-browser/</span></code>.</p>
<img alt="_images/system_nodes_overview.png" src="http://res.fansdoc.com/graylog/_images/system_nodes_overview.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The customized version of Swagger UI used by Graylog does currently only work in Google Chrome and Firefox.</p>
</div>
<div class="section" id="using-the-api-browser">
<h4>Using the API browser<a class="headerlink" href="#using-the-api-browser" title="Permalink to this headline">¶</a></h4>
<p>After providing the credentials (username and password), you can browse all available HTTP resources of the Graylog REST API.</p>
<img alt="_images/use_api_browser.png" src="http://res.fansdoc.com/graylog/_images/use_api_browser.png" />
</div>
<div class="section" id="interacting-with-the-graylog-rest-api">
<h4>Interacting with the Graylog REST API<a class="headerlink" href="#interacting-with-the-graylog-rest-api" title="Permalink to this headline">¶</a></h4>
<p>While having a graphical UI for the Graylog REST API is perfect for interactive usage and exploratory learning, the real power unfolds when using the Graylog REST API for automation or integrating Graylog into another system, such as monitoring or ticket systems.</p>
<p>Naturally, the same operations the API browser offers can be used on the command line or in scripts. A very common HTTP client being used for this kind of interaction is <a class="reference external" href="https://curl.haxx.se/">curl</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In the following examples, the username <code class="docutils literal notranslate"><span class="pre">GM</span></code> and password <code class="docutils literal notranslate"><span class="pre">superpower</span></code> will be used to demonstrate how to work with the Graylog REST API running at <code class="docutils literal notranslate"><span class="pre">http://192.168.178.26:9000/api</span></code>.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Since Graylog 2.5.0, all non-GET API requests <strong>must include and set a value</strong> for the <code class="docutils literal notranslate"><span class="pre">X-Requested-By</span></code> HTTP header. This is needed to prevent CSRF attacks.</p>
</div>
<p>The following command displays Graylog cluster information as JSON, exactly the same information the web interface is displaying on the <em>System / Nodes</em> page:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">u</span> <span class="n">GM</span><span class="p">:</span><span class="n">superpower</span> <span class="o">-</span><span class="n">H</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="s1">&#39;http://192.168.178.26:9000/api/cluster?pretty=true&#39;</span>
</pre></div>
</div>
<p>The Graylog REST API will respond with the following information:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;71ab6aaa-cb39-46be-9dac-4ba99fed3d66&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;facility&quot;</span> <span class="p">:</span> <span class="s2">&quot;graylog-server&quot;</span><span class="p">,</span>
    <span class="s2">&quot;codename&quot;</span> <span class="p">:</span> <span class="s2">&quot;Smuttynose&quot;</span><span class="p">,</span>
    <span class="s2">&quot;node_id&quot;</span> <span class="p">:</span> <span class="s2">&quot;71ab6aaa-cb39-46be-9dac-4ba99fed3d66&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cluster_id&quot;</span> <span class="p">:</span> <span class="s2">&quot;3adaf799-1551-4239-84e5-6ed939b56f62&quot;</span><span class="p">,</span>
    <span class="s2">&quot;version&quot;</span> <span class="p">:</span> <span class="s2">&quot;2.1.1+01d50e5&quot;</span><span class="p">,</span>
    <span class="s2">&quot;started_at&quot;</span> <span class="p">:</span> <span class="s2">&quot;2016-09-23T10:39:00.179Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hostname&quot;</span> <span class="p">:</span> <span class="s2">&quot;gm-01-c.fritz.box&quot;</span><span class="p">,</span>
    <span class="s2">&quot;lifecycle&quot;</span> <span class="p">:</span> <span class="s2">&quot;running&quot;</span><span class="p">,</span>
    <span class="s2">&quot;lb_status&quot;</span> <span class="p">:</span> <span class="s2">&quot;alive&quot;</span><span class="p">,</span>
    <span class="s2">&quot;timezone&quot;</span> <span class="p">:</span> <span class="s2">&quot;Europe/Berlin&quot;</span><span class="p">,</span>
    <span class="s2">&quot;operating_system&quot;</span> <span class="p">:</span> <span class="s2">&quot;Linux 3.10.0-327.28.3.el7.x86_64&quot;</span><span class="p">,</span>
    <span class="s2">&quot;is_processing&quot;</span> <span class="p">:</span> <span class="n">true</span>
  <span class="p">},</span>
  <span class="s2">&quot;ed0ad32d-8776-4d25-be2f-a8956ecebdcf&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;facility&quot;</span> <span class="p">:</span> <span class="s2">&quot;graylog-server&quot;</span><span class="p">,</span>
    <span class="s2">&quot;codename&quot;</span> <span class="p">:</span> <span class="s2">&quot;Smuttynose&quot;</span><span class="p">,</span>
    <span class="s2">&quot;node_id&quot;</span> <span class="p">:</span> <span class="s2">&quot;ed0ad32d-8776-4d25-be2f-a8956ecebdcf&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cluster_id&quot;</span> <span class="p">:</span> <span class="s2">&quot;3adaf799-1551-4239-84e5-6ed939b56f62&quot;</span><span class="p">,</span>
    <span class="s2">&quot;version&quot;</span> <span class="p">:</span> <span class="s2">&quot;2.1.1+01d50e5&quot;</span><span class="p">,</span>
    <span class="s2">&quot;started_at&quot;</span> <span class="p">:</span> <span class="s2">&quot;2016-09-23T10:40:07.325Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hostname&quot;</span> <span class="p">:</span> <span class="s2">&quot;gm-01-d.fritz.box&quot;</span><span class="p">,</span>
    <span class="s2">&quot;lifecycle&quot;</span> <span class="p">:</span> <span class="s2">&quot;running&quot;</span><span class="p">,</span>
    <span class="s2">&quot;lb_status&quot;</span> <span class="p">:</span> <span class="s2">&quot;alive&quot;</span><span class="p">,</span>
    <span class="s2">&quot;timezone&quot;</span> <span class="p">:</span> <span class="s2">&quot;Europe/Berlin&quot;</span><span class="p">,</span>
    <span class="s2">&quot;operating_system&quot;</span> <span class="p">:</span> <span class="s2">&quot;Linux 3.16.0-4-amd64&quot;</span><span class="p">,</span>
    <span class="s2">&quot;is_processing&quot;</span> <span class="p">:</span> <span class="n">true</span>
  <span class="p">},</span>
  <span class="s2">&quot;58c57924-808a-4fa7-be09-63ca551628cd&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;facility&quot;</span> <span class="p">:</span> <span class="s2">&quot;graylog-server&quot;</span><span class="p">,</span>
    <span class="s2">&quot;codename&quot;</span> <span class="p">:</span> <span class="s2">&quot;Smuttynose&quot;</span><span class="p">,</span>
    <span class="s2">&quot;node_id&quot;</span> <span class="p">:</span> <span class="s2">&quot;58c57924-808a-4fa7-be09-63ca551628cd&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cluster_id&quot;</span> <span class="p">:</span> <span class="s2">&quot;3adaf799-1551-4239-84e5-6ed939b56f62&quot;</span><span class="p">,</span>
    <span class="s2">&quot;version&quot;</span> <span class="p">:</span> <span class="s2">&quot;2.1.1+01d50e5&quot;</span><span class="p">,</span>
    <span class="s2">&quot;started_at&quot;</span> <span class="p">:</span> <span class="s2">&quot;2016-09-30T13:31:39.051Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hostname&quot;</span> <span class="p">:</span> <span class="s2">&quot;gm-01-u.fritz.box&quot;</span><span class="p">,</span>
    <span class="s2">&quot;lifecycle&quot;</span> <span class="p">:</span> <span class="s2">&quot;running&quot;</span><span class="p">,</span>
    <span class="s2">&quot;lb_status&quot;</span> <span class="p">:</span> <span class="s2">&quot;alive&quot;</span><span class="p">,</span>
    <span class="s2">&quot;timezone&quot;</span> <span class="p">:</span> <span class="s2">&quot;Europe/Berlin&quot;</span><span class="p">,</span>
    <span class="s2">&quot;operating_system&quot;</span> <span class="p">:</span> <span class="s2">&quot;Linux 4.4.0-36-generic&quot;</span><span class="p">,</span>
    <span class="s2">&quot;is_processing&quot;</span> <span class="p">:</span> <span class="n">true</span>
  <span class="p">}</span>
</pre></div>
</div>
<div class="section" id="creating-and-using-access-token">
<h5>Creating and using Access Token<a class="headerlink" href="#creating-and-using-access-token" title="Permalink to this headline">¶</a></h5>
<p>For security reasons, using the username and password directly on the command line or in some third party application is undesirable.</p>
<p>To prevent having to use the clear text credentials, Graylog allows to create access tokens which can be used for authentication instead.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Users require the permissions <code class="docutils literal notranslate"><span class="pre">users:tokenlist</span></code>, <code class="docutils literal notranslate"><span class="pre">users:tokencreate</span></code>, and <code class="docutils literal notranslate"><span class="pre">users:tokenremove</span></code> to manage their access tokens. Please check the documentation on <a class="reference internal" href="index.html#permissions"><span class="std std-ref">Permission system</span></a> for more information. Also note that users, even administrators, may only manage their <em>own</em> tokens.</p>
</div>
<p>The following example will create an access token named <code class="docutils literal notranslate"><span class="pre">agents</span></code> for the user <code class="docutils literal notranslate"><span class="pre">graylog-sidecar</span></code>:</p>
<ul class="simple">
<li>Navigate to the users configuration menu <code class="docutils literal notranslate"><span class="pre">System</span> <span class="pre">/</span>&#160; <span class="pre">Authentication</span></code>.</li>
</ul>
<a class="reference internal image-reference" href="_images/api_tokens_1-fs8.png"><img alt="_images/api_tokens_1-fs8.png" src="http://res.fansdoc.com/graylog/_images/api_tokens_1-fs8.png" style="width: 1673.0px; height: 929.0px;" /></a>
<ul class="simple">
<li>Select the user you want to create a token for and click on <code class="docutils literal notranslate"><span class="pre">Edit</span> <span class="pre">tokens</span></code>.</li>
</ul>
<a class="reference internal image-reference" href="_images/api_tokens_2-fs8.png"><img alt="_images/api_tokens_2-fs8.png" src="http://res.fansdoc.com/graylog/_images/api_tokens_2-fs8.png" style="width: 1688.0px; height: 929.0px;" /></a>
<ul class="simple">
<li>Give the token a name and create it.</li>
</ul>
<a class="reference internal image-reference" href="_images/api_tokens_3-fs8.png"><img alt="_images/api_tokens_3-fs8.png" src="http://res.fansdoc.com/graylog/_images/api_tokens_3-fs8.png" style="width: 1688.0px; height: 929.0px;" /></a>
<ul class="simple">
<li>You should see now the token in the list.</li>
</ul>
<a class="reference internal image-reference" href="_images/api_tokens_4-fs8.png"><img alt="_images/api_tokens_4-fs8.png" src="http://res.fansdoc.com/graylog/_images/api_tokens_4-fs8.png" style="width: 1688.0px; height: 929.0px;" /></a>
<p>Either by unchecking the hide option or by copying the token to the clipboard you can access the token. The received access token can now be used as username in a request to the Graylog REST API using Basic Auth together with the literal password <code class="docutils literal notranslate"><span class="pre">token</span></code>.</p>
<p>When an access token is no longer needed, it can be delete on the Graylog UI via the <code class="docutils literal notranslate"><span class="pre">Delete</span></code> button.</p>
</div>
<div class="section" id="creating-and-using-session-token">
<h5>Creating and using Session Token<a class="headerlink" href="#creating-and-using-session-token" title="Permalink to this headline">¶</a></h5>
<p>While access tokens can be used for permanent access, session tokens will expire after a certain time. The expiration time can be adjusted in the user’s profile.</p>
<p>Getting a new session token can be obtained  via <code class="docutils literal notranslate"><span class="pre">POST</span></code> request to the Graylog REST API. Username and password are required to get a valid session ID. The following example will create an session token for the user <code class="docutils literal notranslate"><span class="pre">GM</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">i</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">-</span><span class="n">H</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">-</span><span class="n">H</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">H</span> <span class="s1">&#39;X-Requested-By: cli&#39;</span> <span class="s1">&#39;http://192.168.178.26:9000/api/system/sessions&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;username&quot;:&quot;GM&quot;, &quot;password&quot;:&quot;superpower&quot;, &quot;host&quot;:&quot;&quot;}&#39;</span>
</pre></div>
</div>
<p>The response will include the session token in the field <code class="docutils literal notranslate"><span class="pre">session_id</span></code> and the time of expiration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;valid_until&quot;</span> <span class="p">:</span> <span class="s2">&quot;2016-10-24T16:08:57.854+0000&quot;</span><span class="p">,</span>
    <span class="s2">&quot;session_id&quot;</span> <span class="p">:</span> <span class="s2">&quot;cf1df45c-53ea-446c-8ed7-e1df64861de7&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The received token can now be used as username in a request to the Graylog REST API using Basic Auth together with the literal password <code class="docutils literal notranslate"><span class="pre">session</span></code>.</p>
<p>Now a <code class="docutils literal notranslate"><span class="pre">curl</span></code> command to get a list of access tokens would look as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">u</span> <span class="n">cf1df45c</span><span class="o">-</span><span class="mi">53</span><span class="n">ea</span><span class="o">-</span><span class="mi">446</span><span class="n">c</span><span class="o">-</span><span class="mi">8</span><span class="n">ed7</span><span class="o">-</span><span class="n">e1df64861de7</span><span class="p">:</span><span class="n">session</span> <span class="o">-</span><span class="n">H</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="s1">&#39;http://192.168.178.26:9000/api/cluster?pretty=true&#39;</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<span id="document-pages/secure/securing"></span><div class="section" id="securing-graylog">
<span id="securing"></span><h2>Securing Graylog<a class="headerlink" href="#securing-graylog" title="Permalink to this headline">¶</a></h2>
<p>To secure your Graylog setup, you should not use one of our pre-configured images, create your own unique installation where you understand each component and secure the environment by design. Expose only the services that are needed and secure them whenever possible with TLS/SSL and some kind of authentication. Do not use the pre-created appliances for critical production environments.</p>
<p>On the Graylog appliances MongoDB and Elasticsearch is listening on the external interface. This makes the creation of a cluster easier and demonstrates the way Graylog works.
Never run this in an insecure network.</p>
<p>When using Amazon Web Services and our pre-configured AMI, never open all ports in the security group. Do not expose the server to the internet. Access Graylog only from within your VPC. Enable encryption for the communication.</p>
<div class="section" id="default-ports">
<h3>Default ports<a class="headerlink" href="#default-ports" title="Permalink to this headline">¶</a></h3>
<p>All parts of one Graylog installation will communicate over network sockets. Depending on your setup and number of nodes this might be exposed or can be bound to localhost. The <a class="reference internal" href="index.html#selinux"><span class="std std-ref">SELinux</span></a> configuration is already covered in our step-by-step guide for CentOS Linux.</p>
<table border="1" class="docutils" id="id1">
<caption><span class="caption-text">Default network communication ports</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Component</th>
<th class="head">Port</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Graylog (web interface / API)</td>
<td>9000 (tcp)</td>
</tr>
<tr class="row-odd"><td>Graylog to Elasticsearch</td>
<td>9200 (tcp)</td>
</tr>
<tr class="row-even"><td>Elasticsearch node communication</td>
<td>9300 (tcp)</td>
</tr>
<tr class="row-odd"><td>MongoDB</td>
<td>27017 (tcp)</td>
</tr>
</tbody>
</table>
<p>Each setup is unique in the requirements and ports might be changed by configuration, but you should limit who is able to connect to which service. In the <a class="reference internal" href="index.html#big-production-setup"><span class="std std-ref">architecture description</span></a> you can see what components need to be exposed and communicate with each other.</p>
</div>
<div class="section" id="configuring-tls-ciphers">
<h3>Configuring TLS ciphers<a class="headerlink" href="#configuring-tls-ciphers" title="Permalink to this headline">¶</a></h3>
<p>When running Graylog in untrusted environments such as the Internet, we strongly recommend to use SSL/TLS for all connections.</p>
<p>It’s possible to <a class="reference internal" href="index.html#disable-ciphers-java"><span class="std std-ref">disable unsafe or deprecated TLS ciphers</span></a> in Graylog. When using <a class="reference internal" href="index.html#configuring-webif-nginx"><span class="std std-ref">nginx or Apache httpd</span></a> for SSL termination the <a class="reference external" href="https://mozilla.github.io/server-side-tls/ssl-config-generator/">Mozilla SSL Configuration Generator</a> will help to create a reasonably secure configuration for them.</p>
</div>
<div class="section" id="security-related-topics">
<h3>Security related topics<a class="headerlink" href="#security-related-topics" title="Permalink to this headline">¶</a></h3>
<div class="toctree-wrapper compound">
<span id="document-pages/secure/sec_adcs_certificates"></span><div class="section" id="generating-graylog-certificates-and-keys-with-microsoft-ad-cs">
<span id="sec-adcs-certificates-rst"></span><h4>Generating Graylog certificates and keys with Microsoft AD CS<a class="headerlink" href="#generating-graylog-certificates-and-keys-with-microsoft-ad-cs" title="Permalink to this headline">¶</a></h4>
<p>In order to really make your Graylog installation “your own” Graylog, you will need to add TLS certificates issued and trusted by your own organization. Many organizations rely upon Microsoft’s ADCS (Active Directory Certificate Services) for the issuance of their internal certificates. Here, we will explain the basic requirements and workflow of setting up all keys and certificates for a Graylog stack.</p>
<p>In these examples we will assume a Graylog cluster, consisting of:</p>
<ul class="simple">
<li>One Graylog front-end server.</li>
<li>Three Graylog data receiver hosts (clustered).</li>
<li>Three ElasticSearch instances (clustered).</li>
<li>SearchGuard, used to apply TLS/SSL for free on ElasticSearch.</li>
<li>Three MongoDB instances (clustered as <em>replica set</em>)</li>
</ul>
<div class="section" id="required-certificates">
<h5>Required certificates<a class="headerlink" href="#required-certificates" title="Permalink to this headline">¶</a></h5>
<p>In order to provide your full cluster with all required certificates, we’ll need to make all of the following keypairs and certificates. For each certificate you’ll need to gather the relevant hostnames, DNS aliases and IP addresses, because we want the certificates to work for all of these.</p>
<table border="1" class="docutils" id="id1">
<caption><span class="caption-text">Required certificates and key files</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Goal</th>
<th class="head">Subject</th>
<th class="head">Subject alt. names</th>
<th class="head">Filetype</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>MongoDB 1</td>
<td>CN=hostname1.mydomain.local</td>
<td><a class="reference external" href="dns:hostname1">dns:hostname1</a>
<a class="reference external" href="dns:hostname1.mydomain.local">dns:hostname1.mydomain.local</a>
<a class="reference external" href="dns:graylogmongoalias.mydomain.local">dns:graylogmongoalias.mydomain.local</a>
<a class="reference external" href="dns:graylogmongoalias">dns:graylogmongoalias</a>
ip:192.168.100.101</td>
<td>PEM PKCS#12 (cert+key in one)</td>
</tr>
<tr class="row-odd"><td>MongoDB 2</td>
<td>CN=hostname2.mydomain.local</td>
<td><a class="reference external" href="dns:hostname2">dns:hostname2</a>
<a class="reference external" href="dns:hostname12mydomain.local">dns:hostname12mydomain.local</a>
<a class="reference external" href="dns:graylogmongoalias.mydomain.local">dns:graylogmongoalias.mydomain.local</a>
<a class="reference external" href="dns:graylogmongoalias">dns:graylogmongoalias</a>
ip:192.168.100.102</td>
<td>PEM PKCS#12 (cert+key in one)</td>
</tr>
<tr class="row-even"><td>MongoDB 3</td>
<td>CN=hostname3.mydomain.local</td>
<td><a class="reference external" href="dns:hostname3">dns:hostname3</a>
<a class="reference external" href="dns:hostname3.mydomain.local">dns:hostname3.mydomain.local</a>
<a class="reference external" href="dns:graylogmongoalias.mydomain.local">dns:graylogmongoalias.mydomain.local</a>
<a class="reference external" href="dns:graylogmongoalias">dns:graylogmongoalias</a>
ip:192.168.100.103</td>
<td>PEM PKCS#12 (cert+key in one)</td>
</tr>
<tr class="row-odd"><td>Graylog frontend</td>
<td>CN=hostname4.mydomain.local</td>
<td><a class="reference external" href="dns:hostname4">dns:hostname4</a>
<a class="reference external" href="dns:hostname4.mydomain.local">dns:hostname4.mydomain.local</a>
<a class="reference external" href="dns:graylogguialias.mydomain.local">dns:graylogguialias.mydomain.local</a>
<a class="reference external" href="dns:graylogguialias">dns:graylogguialias</a>
ip:192.168.100.104</td>
<td>PEM (certificate)
PKCS#8 (key file)</td>
</tr>
<tr class="row-even"><td>Graylog receiver 1</td>
<td>CN=hostname5.mydomain.local</td>
<td><a class="reference external" href="dns:hostname5">dns:hostname5</a>
<a class="reference external" href="dns:hostname5.mydomain.local">dns:hostname5.mydomain.local</a>
<a class="reference external" href="dns:graylogreceiveralias.mydomain.local">dns:graylogreceiveralias.mydomain.local</a>
<a class="reference external" href="dns:graylogreceiveralias">dns:graylogreceiveralias</a>
ip:192.168.100.105</td>
<td>PEM (certificate)
PKCS#8 (key file)</td>
</tr>
<tr class="row-odd"><td>Graylog receiver 2</td>
<td>CN=hostname6.mydomain.local</td>
<td><a class="reference external" href="dns:hostname6">dns:hostname6</a>
<a class="reference external" href="dns:hostname6.mydomain.local">dns:hostname6.mydomain.local</a>
<a class="reference external" href="dns:graylogreceiveralias.mydomain.local">dns:graylogreceiveralias.mydomain.local</a>
<a class="reference external" href="dns:graylogreceiveralias">dns:graylogreceiveralias</a>
ip:192.168.100.106</td>
<td>PEM (certificate)
PKCS#8 (key file)</td>
</tr>
<tr class="row-even"><td>Graylog receiver 3</td>
<td>CN=hostname7.mydomain.local</td>
<td><a class="reference external" href="dns:hostname7">dns:hostname7</a>
<a class="reference external" href="dns:hostname7.mydomain.local">dns:hostname7.mydomain.local</a>
<a class="reference external" href="dns:graylogreceiveralias.mydomain.local">dns:graylogreceiveralias.mydomain.local</a>
<a class="reference external" href="dns:graylogreceiveralias">dns:graylogreceiveralias</a>
ip:192.168.100.107</td>
<td>PEM (certificate)
PKCS#8 (key file)</td>
</tr>
<tr class="row-odd"><td>SearchGuard Admin</td>
<td>CN=searchguardadmin,O=yourorganization</td>
<td>&#160;</td>
<td>PEM (certificate)
PKCS#8 (key file)</td>
</tr>
<tr class="row-even"><td>ElasticSearch 1</td>
<td>CN=hostname8.mydomain.local</td>
<td><a class="reference external" href="dns:hostname8">dns:hostname8</a>
<a class="reference external" href="dns:hostname8.mydomain.local">dns:hostname8.mydomain.local</a>
<a class="reference external" href="dns:graylogelasticalias.mydomain.local">dns:graylogelasticalias.mydomain.local</a>
<a class="reference external" href="dns:graylogelasticalias">dns:graylogelasticalias</a>
ip:192.168.100.108</td>
<td>PEM (certificate)
PKCS#8 (key file)</td>
</tr>
<tr class="row-odd"><td>ElasticSearch 2</td>
<td>CN=hostname9.mydomain.local</td>
<td><a class="reference external" href="dns:hostname9">dns:hostname9</a>
<a class="reference external" href="dns:hostname9.mydomain.local">dns:hostname9.mydomain.local</a>
<a class="reference external" href="dns:graylogelasticalias.mydomain.local">dns:graylogelasticalias.mydomain.local</a>
<a class="reference external" href="dns:graylogelasticalias">dns:graylogelasticalias</a>
ip:192.168.100.109</td>
<td>PEM (certificate)
PKCS#8 (key file)</td>
</tr>
<tr class="row-even"><td>ElasticSearch 3</td>
<td>CN=hostname9.mydomain.local</td>
<td><a class="reference external" href="dns:hostname9">dns:hostname9</a>
<a class="reference external" href="dns:hostname9.mydomain.local">dns:hostname9.mydomain.local</a>
<a class="reference external" href="dns:graylogelasticalias.mydomain.local">dns:graylogelasticalias.mydomain.local</a>
<a class="reference external" href="dns:graylogelasticalias">dns:graylogelasticalias</a>
ip:192.168.100.109</td>
<td>PEM (certificate)
PKCS#8 (key file)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="graylog-stack-certificate-template">
<h5>Graylog stack certificate template<a class="headerlink" href="#graylog-stack-certificate-template" title="Permalink to this headline">¶</a></h5>
<p>The certificates for the Graylog stack and all of its components need some pretty specific settings. In order to achieve these, you will need to define a new certificate template in ADCS.</p>
<p>Be careful:</p>
<ul class="simple">
<li>Defining a new certicate template will require elevated privileges in your Active Directory domain.</li>
<li>PKI and certificates are a matter of trust! Do not break your organization’s <em>Certificate Policy</em> or its <em>Certificate practice Statement</em>. Stick to your standard procedures and do not simply start messing with the PKI!</li>
</ul>
<p>Defining the new template is done through the ADCS management tool “<em>Certification Authority</em>”.</p>
<ol class="arabic">
<li><p class="first">Duplicate the default ADCS WebServer template, rename it to your liking.</p>
</li>
<li><p class="first">General tab:</p>
<ol class="arabic simple">
<li>Set the name to something recognizable, for example “Graylog Stack Template”.</li>
<li>The software will automatically generate the internal name, which removes all spaces: “GraylogStackTemplate”.</li>
</ol>
</li>
<li><p class="first">Cryptography tab:</p>
<ol class="arabic simple">
<li><strong>Provider</strong> is the <em>Key Storage Provider</em></li>
<li><strong>Requests can use any provider available on the subject’s computer</strong> is true</li>
<li><strong>Algorithm</strong> is <em>RSA 2048</em></li>
<li><strong>Request hash</strong> is <em>SHA256</em></li>
<li><strong>Use alternate signature hash</strong> must be set to false.</li>
</ol>
</li>
<li><p class="first">Extensions tab:</p>
<ol class="arabic simple">
<li><strong>Application policies</strong> is set to both <em>server auth</em> as well as <em>client auth</em>.</li>
</ol>
</li>
<li><p class="first">Request handling tab:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are going to be generating all the keypairs on your issuing CA or on another management station, then you will need to add the following as well, which will allow you to export the keypair for migration to the Graylog stack servers.</p>
</div>
<ol class="arabic simple">
<li><strong>Allow the private key to be exported</strong> is set to <em>Yes</em>.</li>
</ol>
</li>
</ol>
</div>
<div class="section" id="generating-the-keypair-and-certificates-preparation">
<h5>Generating the keypair and certificates - preparation<a class="headerlink" href="#generating-the-keypair-and-certificates-preparation" title="Permalink to this headline">¶</a></h5>
<p>The following instructions assume that you generate all the keypairs on a Windows administrative workstation, or on the issuing CA itself (meaning, you’ll need that extra “<em>Allow the private key to be exported</em>” flag). You can of course generate all keys on the Graylog stack servers and then simply submit the CSR (certificate signing request) to the CA.</p>
<p>The .INF input file for the <em>certreq</em> command would look similar to the following. Note that we are referring to the template by the internal name, which does not have whitespace!:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Version</span><span class="p">]</span>
<span class="n">signature</span><span class="o">=</span><span class="s2">&quot;$Windows NT$&quot;</span>
<span class="p">[</span><span class="n">NewRequest</span><span class="p">]</span>
<span class="n">Subject</span><span class="o">=</span><span class="s2">&quot;CN=hostname5.mydomain.local&quot;</span>
<span class="n">HashAlgorithms</span><span class="o">=</span><span class="n">SHA256</span>
<span class="n">Keyalgorithm</span><span class="o">=</span><span class="n">RSA</span>
<span class="n">KeyLength</span><span class="o">=</span><span class="mi">2048</span>
<span class="n">Exportable</span><span class="o">=</span><span class="kc">True</span>
<span class="n">MachineKeySet</span><span class="o">=</span><span class="kc">True</span>
<span class="p">[</span><span class="n">RequestAttributes</span><span class="p">]</span>
<span class="n">CertificateTemplate</span><span class="o">=</span><span class="s2">&quot;GraylogStackTemplate&quot;</span>
<span class="p">[</span><span class="n">Extensions</span><span class="p">]</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mf">29.17</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{text}</span><span class="s2">&quot;</span>
<span class="n">_continue</span><span class="o">=</span><span class="n">_</span><span class="s2">&quot;dns=hostname5&amp;&quot;</span>
<span class="n">_continue</span><span class="o">=</span><span class="n">_</span><span class="s2">&quot;dns=hostname5.mydomain.local&amp;&quot;</span>
<span class="n">_continue</span><span class="o">=</span><span class="n">_</span><span class="s2">&quot;dns=graylogreceiveralias.mydomain.local&amp;&quot;</span>
<span class="n">_continue</span><span class="o">=</span><span class="n">_</span><span class="s2">&quot;dns=graylogreceiveralias&amp;&quot;</span>
<span class="n">_continue</span><span class="o">=</span><span class="n">_</span><span class="s2">&quot;ipaddress=192.168.100.105&amp;&quot;</span>
</pre></div>
</div>
<p>If you’re one of the edge-cases where you will be using an older <em>Internet Explorer</em> to talk to the IP address of the host, as opposed to the hostname or its alias, you will need to add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_continue</span><span class="o">=</span><span class="n">_</span><span class="s2">&quot;dns=192.168.100.105&amp;&quot;</span>
</pre></div>
</div>
<p>For some reason IExplore ignores the <em>ipaddress</em> field of the SAN (subject alternative name).</p>
<p>The above is only one of the needed .INF files; you will need one for each keypair being generated! So adjust all relevant fields and save each .INF file separately.</p>
</div>
<div class="section" id="generating-the-keypair-and-certificates-execution">
<h5>Generating the keypair and certificates - execution<a class="headerlink" href="#generating-the-keypair-and-certificates-execution" title="Permalink to this headline">¶</a></h5>
<p>As said, we’re assuming that you’re generating the keypairs on your Windows administration station. If you’re generating the keypairs on the Graylog Linux hosts, then you will need to use different instructions.</p>
<p>For each of the .INF files that we built, we will run commands like the following (assuming that the files are all in D:secretsgraylog):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">certreq</span> <span class="o">-</span><span class="n">new</span> <span class="n">D</span><span class="p">:</span>\<span class="n">secrets</span>\<span class="n">graylog</span>\<span class="n">hostname5</span><span class="o">-</span><span class="n">graylogreceiver</span><span class="o">.</span><span class="n">inf</span> <span class="n">D</span><span class="p">:</span>\<span class="n">secrets</span>\<span class="n">graylog</span>\<span class="n">hostname5</span><span class="o">-</span><span class="n">graylogreceiver</span><span class="o">.</span><span class="n">req</span>
<span class="n">certreq</span> <span class="o">-</span><span class="n">submit</span> <span class="n">D</span><span class="p">:</span>\<span class="n">secrets</span>\<span class="n">graylog</span>\<span class="n">hostname5</span><span class="o">-</span><span class="n">graylogreceiver</span><span class="o">.</span><span class="n">req</span>
</pre></div>
</div>
<p>This gives you a request ID, for example “531”. Ask one of your PKI administrators to approve the request, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">certutil</span> <span class="o">-</span><span class="n">resubmit</span> <span class="mi">531</span>
</pre></div>
</div>
<p>Afterwards you can continue:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">certreq</span> <span class="o">-</span><span class="n">retrieve</span> <span class="mi">531</span> <span class="n">D</span><span class="p">:</span>\<span class="n">secrets</span>\<span class="n">graylog</span>\<span class="n">hostname5</span><span class="o">-</span><span class="n">graylogreceiver</span><span class="o">.</span><span class="n">cer</span>
<span class="n">certreq</span> <span class="o">-</span><span class="n">accept</span> <span class="n">D</span><span class="p">:</span>\<span class="n">secrets</span>\<span class="n">graylog</span>\<span class="n">hostname5</span><span class="o">-</span><span class="n">graylogreceiver</span><span class="o">.</span><span class="n">cer</span>
</pre></div>
</div>
<p>What all of this does is:</p>
<ol class="arabic simple">
<li>Generate a keypair by your specifications.</li>
<li>Generate a CSR for the keypair.</li>
<li>Submit the CSR to the issuing CA.</li>
<li>Approve the CSR on the issuing CA.</li>
<li>Export the signed certificate from the issuing CA.</li>
<li>Import the signed certificate into your current server’s certificate store.</li>
</ol>
<p><strong>SearchGuard admin</strong></p>
<p>SearchGuard is used to add TLS/SSL encryption onto ElasticSearch for free. The product requires that the admin-user authenticates using a keypair and certificate. The generation process is similar to the one above, except that you won’t be adding SANs, because the user does not have DNS names or IP addresses. The subject name will understandably also be different (e.g. <em>CN=searchguardadmin,OU=yourteam,O=yourorganization</em>), but be warned that it must match exactly with the account name in the SearchGuard configuration.</p>
</div>
<div class="section" id="generating-the-keypair-and-certificates-conversion">
<h5>Generating the keypair and certificates - conversion<a class="headerlink" href="#generating-the-keypair-and-certificates-conversion" title="Permalink to this headline">¶</a></h5>
<p>We showed earlier (in the table above) that each part of the Graylog stack has specific requirements for the format and files that are used to submit the keypair and the certificate. We will need to convert everything we have right now, in order to make them usable.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Key materials are very sensitive information! You should not leave them lying around! Once you have finished the setup of all keys and certificates on the Graylog stack, you must delete all the files we’ve put into D:secretsgraylog. Never leave key materials lying around!</p>
</div>
<p>Also, please use strong passwords on all PFX and PKCS files! Store these passwords safely, in a password vaulting application.</p>
<p><strong>CA Chain</strong></p>
<p>Each application requires that you provide the CA chain of your PKI, for inclusion in its trust store. The following assumes that you have one root CA and one issuing CA and that you’ve put their respective certificates in D:secretsgraylog:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">openssl</span> <span class="n">x509</span> <span class="o">-</span><span class="ow">in</span> <span class="n">rootca</span><span class="o">.</span><span class="n">crt</span> <span class="o">-</span><span class="n">outform</span> <span class="n">pem</span> <span class="o">-</span><span class="n">out</span> <span class="n">D</span><span class="p">:</span>\<span class="n">secrets</span>\<span class="n">graylog</span>\<span class="n">rootca</span><span class="o">.</span><span class="n">pem</span>
<span class="n">openssl</span> <span class="n">x509</span> <span class="o">-</span><span class="ow">in</span> <span class="n">ca</span><span class="o">.</span><span class="n">crt</span> <span class="o">-</span><span class="n">outform</span> <span class="n">pem</span> <span class="o">-</span><span class="n">out</span> <span class="n">D</span><span class="p">:</span>\<span class="n">secrets</span>\<span class="n">graylog</span>\<span class="n">ca</span><span class="o">.</span><span class="n">pem</span>
<span class="nb">type</span> <span class="n">D</span><span class="p">:</span>\<span class="n">secrets</span>\<span class="n">graylog</span>\<span class="n">rootca</span><span class="o">.</span><span class="n">pem</span> <span class="o">&gt;</span> <span class="n">D</span><span class="p">:</span>\<span class="n">secrets</span>\<span class="n">graylog</span>\<span class="n">cachain</span><span class="o">.</span><span class="n">pem</span>
<span class="nb">type</span> <span class="n">D</span><span class="p">:</span>\<span class="n">secrets</span>\<span class="n">graylog</span>\<span class="n">rootca</span><span class="o">.</span><span class="n">pem</span> <span class="o">&gt;&gt;</span> <span class="n">D</span><span class="p">:</span>\<span class="n">secrets</span>\<span class="n">graylog</span>\<span class="n">cachain</span><span class="o">.</span><span class="n">pem</span>
</pre></div>
</div>
<p>The resulting cachain.pem file can be used in all Graylog stack applications for inclusion in the trust store. You will probably need to run the file through <strong>dos2unix</strong> first though, to fix line endings.</p>
<p><strong>MongoDB</strong></p>
<p>For each of the keypairs we made we will need to repeat the following in Powershell (adjust all names accordingly):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Get</span><span class="o">-</span><span class="n">ChildItem</span> <span class="o">-</span><span class="n">Path</span> <span class="n">cert</span><span class="p">:</span>\\<span class="n">LocalMachine</span>\<span class="n">My</span> <span class="o">|</span> <span class="n">Select</span><span class="o">-</span><span class="n">String</span> <span class="n">hostname3</span>
</pre></div>
</div>
<p>This will return metadata of the certificate for MongoDB on hostname3. You will need the thumbprint string, which will look similar to “<em>5F98EBBFE735CDDAE00E33E0FD69050EF9220254</em>”. Moving on:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$mypass = ConvertTo-SecureString -String &quot;yoursafepassword&quot; -Force -AsPlainText
Get-ChildItem -Path cert:\\LocalMachine\My\5F98EBBFE735CDDAE00E33E0FD69050EF9220254 | Export-PfxCertificate -FilePath D:\secrets\graylog\hostname3-mongodb.pfx -Password $mypass
openssl x509 -in D:\secrets\graylog\hostname3-mongodb.cer -outform pem -out D:\secrets\graylog\hostname3-mongodb.crt
openssl pkcs12 -in D:\secrets\graylog\hostname3-mongodb.pfx -nocerts -out D:\secrets\graylog\hostname3-mongodb.key
type D:\secrets\graylog\hostname3-mongodb.crt &gt; D:\secrets\graylog\hostname3-mongodb.pem
D:\secrets\graylog\hostname3-mongodb.key &gt;&gt; D:\secrets\graylog\hostname3-mongodb.pem
</pre></div>
</div>
<p>Finally, edit the PEM file D:secretsgrayloghostname3-mongodb.pem to remove all extraneous metadata and whitespaces. There should be nothing separating the <em>=== END CERTIFICATE ===</em> and the <em>=== BEGIN PRIVATE KEY ===</em> headers.</p>
<p>You may upload the PEM file to the relevant MongoDB server, where you will need to do one final conversion: use <strong>dos2unix</strong> to convert the line endings from Windows-type to Linux-type.</p>
<p><strong>Graylog and ElasticSearch</strong></p>
<p>For each of the keypairs we made we will need to repeat the following in Powershell (adjust all names accordingly):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Get</span><span class="o">-</span><span class="n">ChildItem</span> <span class="o">-</span><span class="n">Path</span> <span class="n">cert</span><span class="p">:</span>\\<span class="n">LocalMachine</span>\<span class="n">My</span> <span class="o">|</span> <span class="n">Select</span><span class="o">-</span><span class="n">String</span> <span class="n">hostname5</span>
</pre></div>
</div>
<p>This will return metadata of the certificate for MongoDB on hostname5. You will need the thumbprint string, which will look similar to “<em>5F98EBBFE735CDDAE00E33E0FD69050EF9220254</em>”. Moving on:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$mypass = ConvertTo-SecureString -String &quot;yoursafepassword&quot; -Force -AsPlainText
Get-ChildItem -Path cert:\\LocalMachine\My\5F98EBBFE735CDDAE00E33E0FD69050EF9220254 | Export-PfxCertificate -FilePath D:\secrets\graylog\hostname5-receiver.pfx -Password $mypass
openssl x509 -in D:\secrets\graylog\hostname5-receiver.cer -outform pem -out D:\secrets\graylog\hostname5-receiver.crt
openssl pkcs12 -in D:\secrets\graylog\hostname5-receiver.pfx -nocerts -out D:\secrets\graylog\hostname5-receiver.key
openssl pkcs8 -in D:\secrets\graylog\hostname5-receiver.key -topk8 -out D:\secrets\graylog\hostname5-receiver.pem
</pre></div>
</div>
<p>Finally, edit the CRT and PEM files to remove all extraneous metadata and whitespaces. There should be nothing before or after the <strong>=== BEGIN</strong> and <strong>END ===</strong> tags.</p>
<p>You may upload the PEM and CRT files to the relevant ElasticSearch or Graylog server, where you will need to do one final conversion: use <strong>dos2unix</strong> to convert the line endings from Windows-type to Linux-type.</p>
</div>
</div>
<span id="document-pages/secure/sec_graylog_beats"></span><div class="section" id="secured-graylog-and-beats-input">
<span id="sec-graylog-beats"></span><h4>Secured Graylog and Beats input<a class="headerlink" href="#secured-graylog-and-beats-input" title="Permalink to this headline">¶</a></h4>
<p>The goal of this guide is to have a secured Graylog interface, API and secure communication for Beats that are authenticated by certificate. This way only trusted sources are able to deliver messages into Graylog.</p>
<p>This is a structured document that contains only information already given at various location in this documentation. It should give the missing connection between the different parts of the documentation.</p>
<div class="section" id="ssl-tls-prework">
<h5>SSL/TLS prework<a class="headerlink" href="#ssl-tls-prework" title="Permalink to this headline">¶</a></h5>
<p>Create a CA with our <a class="reference external" href="https://github.com/graylog-labs/shadowCA">shadowCA</a> or use your already given CA. That is needed to create all certificates. The examples will take the given names from our shadowCA and reference to that only, please adjust this to your local needs. If in doubt check the shadowCA scripts what kind of certificate is created and used.</p>
<p>The CA certificate needs to be imported on all machines that are part of the setup using the <a class="reference external" href="https://github.com/graylog-labs/shadowCA/blob/master/docs/add_ca_to_truststore.md">documented steps</a>. Depending on your Browser you might need to import the <code class="docutils literal notranslate"><span class="pre">.der</span></code> to your Browser to trust the CA. In addition the CA <code class="docutils literal notranslate"><span class="pre">.der</span></code> file is imported to a JVM Keystore that is used by Graylog.</p>
<div class="section" id="adding-of-der-to-jvm-keystore">
<h6>Adding of .der to JVM Keystore<a class="headerlink" href="#adding-of-der-to-jvm-keystore" title="Permalink to this headline">¶</a></h6>
<p>Graylog needs to know the CA that is used to verify the certificates. The prime advantage is that it only needs the CA certificate and not all known self-signed certificates in the setup.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># test the .der file</span>
<span class="n">keytool</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">printcert</span> <span class="o">-</span><span class="n">file</span> <span class="n">shadowCA</span><span class="o">.</span><span class="n">der</span>

<span class="c1"># copy cacert into Graylog Folder (ubuntu / debian and CENTOS openJDK )</span>
<span class="p">[</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">jvm</span><span class="o">/</span><span class="n">jre</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">cacerts</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">cp</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">jvm</span><span class="o">/</span><span class="n">jre</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">cacerts</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">graylog</span><span class="o">/</span><span class="n">server</span><span class="o">/</span><span class="n">cacerts</span><span class="o">.</span><span class="n">jks</span>
<span class="p">[</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">jvm</span><span class="o">/</span><span class="n">java</span><span class="o">-</span><span class="mi">8</span><span class="o">-</span><span class="n">openjdk</span><span class="o">-</span><span class="n">amd64</span><span class="o">/</span><span class="n">jre</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">cacerts</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">cp</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">jvm</span><span class="o">/</span><span class="n">java</span><span class="o">-</span><span class="mi">8</span><span class="o">-</span><span class="n">openjdk</span><span class="o">-</span><span class="n">amd64</span><span class="o">/</span><span class="n">jre</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">security</span><span class="o">/</span><span class="n">cacerts</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">graylog</span><span class="o">/</span><span class="n">server</span><span class="o">/</span><span class="n">cacerts</span><span class="o">.</span><span class="n">jks</span>


<span class="c1"># import CA .der into keystore</span>
<span class="c1"># will only work if the default password &amp; user is not changed.</span>
<span class="n">keytool</span> <span class="o">-</span><span class="n">importcert</span> <span class="o">-</span><span class="n">alias</span> <span class="n">shadowCA</span> <span class="o">-</span><span class="n">keystore</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">graylog</span><span class="o">/</span><span class="n">server</span><span class="o">/</span><span class="n">cacerts</span><span class="o">.</span><span class="n">jks</span> <span class="o">-</span><span class="n">storepass</span> <span class="n">changeit</span> <span class="o">-</span><span class="n">file</span> <span class="n">shadowCA</span><span class="o">.</span><span class="n">der</span>
</pre></div>
</div>
</div>
<div class="section" id="custom-jvm-keystore-for-graylog">
<h6>Custom JVM Keystore for Graylog<a class="headerlink" href="#custom-jvm-keystore-for-graylog" title="Permalink to this headline">¶</a></h6>
<p>Modify the <a class="reference internal" href="index.html#default-file-location"><span class="std std-ref">JVM Setting</span></a> to include <code class="docutils literal notranslate"><span class="pre">-Djavax.net.ssl.trustStore=/etc/graylog/server/cacerts.jks</span></code> in the <code class="docutils literal notranslate"><span class="pre">GRAYLOG_JAVA_OPTS</span></code>.</p>
</div>
</div>
<div class="section" id="create-certificates">
<h5>Create certificates<a class="headerlink" href="#create-certificates" title="Permalink to this headline">¶</a></h5>
<p>Create certificates for each server, all hostnames and IPs that might be used later to connect from and to this server should be included in the certificates. See <a class="reference external" href="https://github.com/graylog-labs/shadowCA#create-certificates">README of shadowCA</a> for the possible options. The most common error is that the certificate name does not match the hostname that is used for the connection.</p>
<p>The shadowCA uses the same settings that can be found <a class="reference internal" href="index.html#ssl-setup"><span class="std std-ref">in the SSL</span></a> documentation, but easy up the process.</p>
</div>
<div class="section" id="deploy-and-configure">
<h5>Deploy and configure<a class="headerlink" href="#deploy-and-configure" title="Permalink to this headline">¶</a></h5>
<div class="section" id="graylog">
<h6>Graylog<a class="headerlink" href="#graylog" title="Permalink to this headline">¶</a></h6>
<div class="section" id="https">
<h7>HTTPS<a class="headerlink" href="#https" title="Permalink to this headline">¶</a></h7>
<p>Place the <code class="docutils literal notranslate"><span class="pre">.key</span></code> and <code class="docutils literal notranslate"><span class="pre">.crt</span></code> file on your Graylog server in the configuration dir (/etc/graylog/server/) and add them to the Graylog server.conf. In addition change <code class="docutils literal notranslate"><span class="pre">http_enable_tls</span></code> to <strong>true</strong>. You might need to cover other settings in a multinode cluster or special setups - just read the comments of the settings inside of the server.conf.</p>
<p>When using the Sidecar, use the <strong>https</strong> URI in the <a class="reference internal" href="index.html#sidecar-configuration"><span class="std std-ref">sidecar.yml</span></a></p>
<p>After restart of Graylog the web interface and the API is served via https only. No automatic redirect from http to https is made.</p>
</div>
<div class="section" id="tls-beats-input">
<h7>TLS Beats Input<a class="headerlink" href="#tls-beats-input" title="Permalink to this headline">¶</a></h7>
<p>To enable TLS on the input, a certificate (and private key file) is needed. It can be the same or a different certificate as the one of your REST/web interface, as long as it matches all hostnames of your input. Just reference the files <cite>TLS cert file</cite> and <cite>TLS private key file</cite> in the Beats Input configuration and restart the input.</p>
<p>The ingesting client will verify the presented certificate against his know CA certificates, if that is successful communication will be establised using TLS.</p>
</div>
<div class="section" id="add-client-authentication-to-beats-input">
<h7>Add client authentication to Beats input<a class="headerlink" href="#add-client-authentication-to-beats-input" title="Permalink to this headline">¶</a></h7>
<p>Create one directory (<code class="docutils literal notranslate"><span class="pre">/etc/graylog/server/trusted_clients</span></code>) that will hold all client certificates you allow to connect to the beats input. This directory must be available on all Graylog server that have the input enabled. Write that path in the beats input configuration <cite>TLS Client Auth Trusted Certs</cite> and select <strong>required</strong> for the option <cite>TLS client authentication</cite>.</p>
<p>After this setting is saved only clients that provide a certificate that is trusted by the CA and is placed inside the configured directory (<code class="docutils literal notranslate"><span class="pre">/etc/graylog/server/trusted_clients</span></code>) can deliver messages to Graylog.</p>
</div>
</div>
<div class="section" id="beats-shipper">
<h6>Beats Shipper<a class="headerlink" href="#beats-shipper" title="Permalink to this headline">¶</a></h6>
<p>When using Beats configure a <a class="reference external" href="https://www.elastic.co/guide/en/beats/filebeat/6.x/logstash-output.html#logstash-output">logstash output</a>. The SSL configuration can be found as the second point in the <a class="reference external" href="https://www.elastic.co/guide/en/beats/filebeat/6.x/configuring-ssl-logstash.html">description by elastic</a> . This is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">output</span><span class="o">.</span><span class="n">logstash</span><span class="p">:</span>
        <span class="n">hosts</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;graylog.example.org:5044&quot;</span><span class="p">]</span>
        <span class="n">ssl</span><span class="o">.</span><span class="n">certificate_authorities</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;/etc/ca.pem&quot;</span><span class="p">]</span>
        <span class="n">ssl</span><span class="o">.</span><span class="n">certificate</span><span class="p">:</span> <span class="s2">&quot;/etc/client.crt&quot;</span>
        <span class="n">ssl</span><span class="o">.</span><span class="n">key</span><span class="p">:</span> <span class="s2">&quot;/etc/client.key&quot;</span>
</pre></div>
</div>
<p>Place your previously created certificates on the server where you installed beats and adjust the configuration to your needs.</p>
<p>The certificate (<code class="docutils literal notranslate"><span class="pre">.crt</span></code>) file of the beats needs to be placed at the Graylog server in the configured directory for trusted clients only if you have enabled that feature at the beats input in Graylog and want client authentication.</p>
</div>
</div>
</div>
<span id="document-pages/secure/sec_log_user_activity"></span><div class="section" id="logging-user-activity">
<h4>Logging user activity<a class="headerlink" href="#logging-user-activity" title="Permalink to this headline">¶</a></h4>
<p>Graylog has been built using a client-server architecture model in which the user interface retrieves all data via a collection of REST APIs. Thus logging relevant user activity, in other words an access log, is simply a matter of enabling a built-in feature. It logs all requests to the Graylog REST API and produces an access log augmented by additional information, like the user name, the remote address, and the user agent.</p>
<div class="section" id="configuring-the-access-log">
<h5>Configuring the Access Log<a class="headerlink" href="#configuring-the-access-log" title="Permalink to this headline">¶</a></h5>
<p>The Access Log is configured by adding an appender and logger to the <a class="reference external" href="https://logging.apache.org/log4j/2.x/manual/configuration.html">Log4j2 configuration</a> file (<code class="docutils literal notranslate"><span class="pre">log4j2.xml</span></code>). The following example demonstrates required additions on top of the normal logging configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration packages=&quot;org.graylog2.log4j&quot; shutdownHook=&quot;disable&quot;&gt;
    &lt;Appenders&gt;
        &lt;!-- Simple appender that writes access log to specified file --&gt;
        &lt;File name=&quot;RestAccessLog&quot; fileName=&quot;/var/log/graylog/server/restaccess.log&quot; append=&quot;true&quot;&gt;
            &lt;PatternLayout pattern=&quot;%d %-5p: %c - %m%n&quot;/&gt;
        &lt;/File&gt;
    &lt;/Appenders&gt;
    &lt;Loggers&gt;
        &lt;!-- RestAccessLogFilter --&gt;
        &lt;Logger name=&quot;org.graylog2.rest.accesslog&quot; level=&quot;debug&quot; additivity=&quot;false&quot;&gt;
                &lt;AppenderRef ref=&quot;RestAccessLog&quot; level=&quot;debug&quot;/&gt;
                &lt;AppenderRef ref=&quot;STDOUT&quot; level=&quot;info&quot;/&gt;
        &lt;/Logger&gt;
    &lt;/Loggers&gt;
&lt;/Configuration&gt;
</pre></div>
</div>
<p>The resulting log entries will look similar to the following messages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2016</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">08</span> <span class="mi">18</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">55</span><span class="p">,</span><span class="mi">651</span> <span class="n">DEBUG</span><span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">accesslog</span> <span class="o">-</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">122.1</span> <span class="n">admin</span> <span class="p">[</span><span class="o">-</span><span class="p">]</span> <span class="s2">&quot;GET streams&quot;</span> <span class="n">Mozilla</span><span class="o">/</span><span class="mf">5.0</span> <span class="p">(</span><span class="n">X11</span><span class="p">;</span> <span class="n">Fedora</span><span class="p">;</span> <span class="n">Linux</span> <span class="n">x86_64</span><span class="p">;</span> <span class="n">rv</span><span class="p">:</span><span class="mf">46.0</span><span class="p">)</span> <span class="n">Gecko</span><span class="o">/</span><span class="mi">20100101</span> <span class="n">Firefox</span><span class="o">/</span><span class="mf">46.0</span> <span class="mi">200</span> <span class="o">-</span><span class="mi">1</span>
<span class="mi">2016</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">08</span> <span class="mi">18</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">55</span><span class="p">,</span><span class="mi">694</span> <span class="n">DEBUG</span><span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">accesslog</span> <span class="o">-</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">122.1</span> <span class="n">admin</span> <span class="p">[</span><span class="o">-</span><span class="p">]</span> <span class="s2">&quot;GET system/fields&quot;</span> <span class="n">Mozilla</span><span class="o">/</span><span class="mf">5.0</span> <span class="p">(</span><span class="n">X11</span><span class="p">;</span> <span class="n">Fedora</span><span class="p">;</span> <span class="n">Linux</span> <span class="n">x86_64</span><span class="p">;</span> <span class="n">rv</span><span class="p">:</span><span class="mf">46.0</span><span class="p">)</span> <span class="n">Gecko</span><span class="o">/</span><span class="mi">20100101</span> <span class="n">Firefox</span><span class="o">/</span><span class="mf">46.0</span> <span class="mi">200</span> <span class="o">-</span><span class="mi">1</span>
<span class="mi">2016</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">08</span> <span class="mi">18</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">55</span><span class="p">,</span><span class="mi">698</span> <span class="n">DEBUG</span><span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">accesslog</span> <span class="o">-</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">122.1</span> <span class="n">admin</span> <span class="p">[</span><span class="o">-</span><span class="p">]</span> <span class="s2">&quot;GET system/fields&quot;</span> <span class="n">Mozilla</span><span class="o">/</span><span class="mf">5.0</span> <span class="p">(</span><span class="n">X11</span><span class="p">;</span> <span class="n">Fedora</span><span class="p">;</span> <span class="n">Linux</span> <span class="n">x86_64</span><span class="p">;</span> <span class="n">rv</span><span class="p">:</span><span class="mf">46.0</span><span class="p">)</span> <span class="n">Gecko</span><span class="o">/</span><span class="mi">20100101</span> <span class="n">Firefox</span><span class="o">/</span><span class="mf">46.0</span> <span class="mi">200</span> <span class="o">-</span><span class="mi">1</span>
<span class="mi">2016</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">08</span> <span class="mi">18</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">55</span><span class="p">,</span><span class="mi">780</span> <span class="n">DEBUG</span><span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">accesslog</span> <span class="o">-</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">122.1</span> <span class="n">admin</span> <span class="p">[</span><span class="o">-</span><span class="p">]</span> <span class="s2">&quot;GET system/inputs&quot;</span> <span class="n">Mozilla</span><span class="o">/</span><span class="mf">5.0</span> <span class="p">(</span><span class="n">X11</span><span class="p">;</span> <span class="n">Fedora</span><span class="p">;</span> <span class="n">Linux</span> <span class="n">x86_64</span><span class="p">;</span> <span class="n">rv</span><span class="p">:</span><span class="mf">46.0</span><span class="p">)</span> <span class="n">Gecko</span><span class="o">/</span><span class="mi">20100101</span> <span class="n">Firefox</span><span class="o">/</span><span class="mf">46.0</span> <span class="mi">200</span> <span class="o">-</span><span class="mi">1</span>
<span class="mi">2016</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">08</span> <span class="mi">18</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">56</span><span class="p">,</span><span class="mi">021</span> <span class="n">DEBUG</span><span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">graylog2</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">accesslog</span> <span class="o">-</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">122.1</span> <span class="n">admin</span> <span class="p">[</span><span class="o">-</span><span class="p">]</span> <span class="s2">&quot;GET search/universal/relative?query=%2A&amp;range=300&amp;limit=150&amp;sort=timestamp%3Adesc&quot;</span> <span class="n">Mozilla</span><span class="o">/</span><span class="mf">5.0</span> <span class="p">(</span><span class="n">X11</span><span class="p">;</span> <span class="n">Fedora</span><span class="p">;</span> <span class="n">Linux</span> <span class="n">x86_64</span><span class="p">;</span> <span class="n">rv</span><span class="p">:</span><span class="mf">46.0</span><span class="p">)</span> <span class="n">Gecko</span><span class="o">/</span><span class="mi">20100101</span> <span class="n">Firefox</span><span class="o">/</span><span class="mf">46.0</span> <span class="mi">200</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="section" id="x-forwarded-for-http-header-support">
<h5>X-Forwarded-For HTTP header support<a class="headerlink" href="#x-forwarded-for-http-header-support" title="Permalink to this headline">¶</a></h5>
<p>If there is a proxy server, load balancer, or a network device which hides the client’s IP address from Graylog, it can read the information from a supplied <code class="docutils literal notranslate"><span class="pre">X-Forwarded-For</span></code> HTTP request header. Most HTTP-capable devices support setting such a (semi-) standard HTTP request header.</p>
<p>Since overriding the client address from a externally supplied HTTP request header opens the door for spoofing, the list of trusted proxy servers which are allowed to provide the <code class="docutils literal notranslate"><span class="pre">X-Forwarded-For</span></code> HTTP request header, can be configured using the <code class="docutils literal notranslate"><span class="pre">trusted_proxies</span></code> setting in the Graylog configuration file (<code class="docutils literal notranslate"><span class="pre">graylog.conf</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Comma separated list of trusted proxies that are allowed to set the client address with X-Forwarded-For</span>
<span class="c1"># header. May be subnets, or hosts.</span>
<span class="n">trusted_proxies</span> <span class="o">=</span> <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="o">/</span><span class="mi">32</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="o">/</span><span class="mi">128</span>
</pre></div>
</div>
</div>
</div>
<span id="document-pages/secure/sec_mod_security"></span><div class="section" id="using-modsecurity">
<h4>Using ModSecurity<a class="headerlink" href="#using-modsecurity" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="https://modsecurity.org/">ModSecurity</a> is a popular open source web application firewall that can be used in conjuction with the Apache and Nginx web servers. When Graylog is configured behind a web server that uses ModSecurity, certain configuration changes must be made. The following examples are for version 2.x rules.</p>
<p>Some distributions (for example RHEL 7.x) ship with older rule sets that do not allow the MIME type <code class="docutils literal notranslate"><span class="pre">application/json</span></code> to be used in requests. This can be fixed by modifying the variable <code class="docutils literal notranslate"><span class="pre">tx.allowed_request_content_type</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Allow application/json</span>
<span class="n">SecRule</span> <span class="n">REQUEST_URI</span> <span class="s2">&quot;@beginsWith /&quot;</span> \
  <span class="s2">&quot;id:&#39;000001&#39;, </span><span class="se">\</span>
<span class="s2">  phase:1, </span><span class="se">\</span>
<span class="s2">  t:none, </span><span class="se">\</span>
<span class="s2">setvar:&#39;tx.allowed_request_content_type=application/x-www-form-urlencoded|multipart/form-data|text/xml|application/xml|application/x-amf|application/json|application/octet-stream&#39;, </span><span class="se">\</span>
<span class="s2">  nolog, </span><span class="se">\</span>
<span class="s2">  pass&quot;</span>
</pre></div>
</div>
<p>Load balancers accessing <code class="docutils literal notranslate"><span class="pre">/system/lbstatus</span></code> rarely provide the ordinary HTTP headers <code class="docutils literal notranslate"><span class="pre">Host</span></code>, <code class="docutils literal notranslate"><span class="pre">Accept</span></code>, or <code class="docutils literal notranslate"><span class="pre">User-Agent</span></code>. The default rules disallow requests that are missing the mentioned headers. They should be explicitly allowed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Host header</span>
<span class="n">SecRule</span> <span class="n">REQUEST_URI</span> <span class="s2">&quot;@beginsWith /system/lbstatus&quot;</span> \
  <span class="s2">&quot;id:&#39;000002&#39;, </span><span class="se">\</span>
<span class="s2">  phase:2, </span><span class="se">\</span>
<span class="s2">  t:none, </span><span class="se">\</span>
<span class="s2">  ctl:ruleRemoveById=960008, </span><span class="se">\</span>
<span class="s2">  nolog, </span><span class="se">\</span>
<span class="s2">  pass&quot;</span>
<span class="c1"># Accept header</span>
<span class="n">SecRule</span> <span class="n">REQUEST_URI</span> <span class="s2">&quot;@beginsWith /system/lbstatus&quot;</span> \
  <span class="s2">&quot;id:&#39;000003&#39;, </span><span class="se">\</span>
<span class="s2">  phase:2, </span><span class="se">\</span>
<span class="s2">  t:none, </span><span class="se">\</span>
<span class="s2">  ctl:ruleRemoveById=960015, </span><span class="se">\</span>
<span class="s2">  nolog, </span><span class="se">\</span>
<span class="s2">  pass&quot;</span>
<span class="c1"># User agent header</span>
<span class="n">SecRule</span> <span class="n">REQUEST_URI</span> <span class="s2">&quot;@beginsWith /system/lbstatus&quot;</span> \
  <span class="s2">&quot;id:&#39;000004&#39;, </span><span class="se">\</span>
<span class="s2">  phase:2, </span><span class="se">\</span>
<span class="s2">  t:none, </span><span class="se">\</span>
<span class="s2">  ctl:ruleRemoveById=960009, </span><span class="se">\</span>
<span class="s2">  nolog, </span><span class="se">\</span>
<span class="s2">  Pass&quot;</span>
</pre></div>
</div>
<p>The HTTP verb DELETE is usually forbidden by default. It should be explicitly allowed for requests to <code class="docutils literal notranslate"><span class="pre">/api/</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Enable DELETE for /api/</span>
<span class="n">SecRule</span> <span class="n">REQUEST_URI</span> <span class="s2">&quot;@beginsWith /api/&quot;</span> \
  <span class="s2">&quot;id:&#39;000005&#39;, </span><span class="se">\</span>
<span class="s2">  phase:1, </span><span class="se">\</span>
<span class="s2">  t:none, </span><span class="se">\</span>
<span class="s2">  setvar:&#39;tx.allowed_methods=GET HEAD POST OPTIONS DELETE&#39;, </span><span class="se">\</span>
<span class="s2">  nolog, </span><span class="se">\</span>
<span class="s2">  pass&quot;</span>
</pre></div>
</div>
<p>ModSecurity ships by default with strict rules against SQL injection. The query strings used in Graylog searches trigger those rules, breaking all search functionality. It should be noted that Graylog ships with no SQL based products.  The offending rules can usually be safely removed, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Disable SQL injection rules</span>
<span class="n">SecRuleRemoveById</span> <span class="mi">981173</span>
<span class="n">SecRuleRemoveById</span> <span class="mi">960024</span>
<span class="n">SecRuleRemoveById</span> <span class="mi">981318</span>
<span class="n">SecRuleRemoveById</span> <span class="mi">981257</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<span id="document-pages/sending_data"></span><div class="section" id="sending-in-log-data">
<span id="ingest-data"></span><h2>Sending in log data<a class="headerlink" href="#sending-in-log-data" title="Permalink to this headline">¶</a></h2>
<p>A Graylog setup is pretty worthless without any data in it. This page explains the basic principles of getting your data
into the system and also explains common fallacies.</p>
<div class="section" id="what-are-graylog-message-inputs">
<h3>What are Graylog message inputs?<a class="headerlink" href="#what-are-graylog-message-inputs" title="Permalink to this headline">¶</a></h3>
<p>Message inputs are the Graylog parts responsible for accepting log messages. They are launched from the web interface
(or the REST API) in the <em>System -&gt; Inputs</em> section and are launched and configured without the need to restart any
part of the system.</p>
</div>
<div class="section" id="content-packs">
<span id="id1"></span><h3>Content packs<a class="headerlink" href="#content-packs" title="Permalink to this headline">¶</a></h3>
<p>Content packs are bundles of Graylog input, extractor, stream, dashboard, and output configurations that can provide full support
for a data source. Some content packs are shipped with Graylog by default and some are available from the website. Content packs that
were downloaded from <a class="reference external" href="http://marketplace.graylog.org">the Graylog Marketplace</a> can be imported using the Graylog web interface.</p>
<p>You can load and even create own content packs from the <em>System -&gt; Content Packs</em> section of your Graylog web interface.</p>
</div>
<div class="section" id="syslog">
<h3>Syslog<a class="headerlink" href="#syslog" title="Permalink to this headline">¶</a></h3>
<p>Graylog is able to accept and parse <a class="reference external" href="http://www.ietf.org/rfc/rfc5424.txt">RFC 5424</a> and
<a class="reference external" href="http://www.ietf.org/rfc/rfc3164.txt">RFC 3164</a>  compliant syslog messages and supports TCP transport with both
the octet counting or termination character methods. UDP is also supported and the recommended way to send log messages
in most architectures.</p>
<p><strong>Many devices, especially routers and firewalls, do not send RFC compliant syslog messages.</strong> This might result
in wrong or completely failing parsing. In that case you might have to go with a combination of <em>raw/plaintext</em> message inputs that
do not attempt to do any parsing and <a class="reference internal" href="index.html#document-pages/extractors"><span class="doc">Extractors</span></a>.</p>
<p>Rule of thumb is that messages forwarded by <code class="docutils literal notranslate"><span class="pre">rsyslog</span></code> or <code class="docutils literal notranslate"><span class="pre">syslog-ng</span></code> are usually parsed flawlessly.</p>
<div class="section" id="sending-syslog-from-linux-hosts">
<h4>Sending syslog from Linux hosts<a class="headerlink" href="#sending-syslog-from-linux-hosts" title="Permalink to this headline">¶</a></h4>
<p>Sending syslog data from Linux hosts is <a class="reference external" href="https://marketplace.graylog.org/addons/a47beb3b-0bd9-4792-a56a-33b27b567856">described on the Graylog Marketplace</a>.</p>
</div>
<div class="section" id="sending-syslog-from-macos-x-hosts">
<h4>Sending syslog from MacOS X hosts<a class="headerlink" href="#sending-syslog-from-macos-x-hosts" title="Permalink to this headline">¶</a></h4>
<p>Sending log messages from MacOS X syslog daemons is easy. Just define a <code class="docutils literal notranslate"><span class="pre">graylog-server</span></code> instance as UDP log target by
adding this line in your <code class="docutils literal notranslate"><span class="pre">/etc/syslog.conf</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">*.*</span> <span class="nd">@graylog</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">org</span><span class="p">:</span><span class="mi">514</span>
</pre></div>
</div>
<p>Now restart <code class="docutils literal notranslate"><span class="pre">syslogd</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo launchctl unload /System/Library/LaunchDaemons/com.apple.syslogd.plist
$ sudo launchctl load /System/Library/LaunchDaemons/com.apple.syslogd.plist
</pre></div>
</div>
<p><strong>Important:</strong> If <code class="docutils literal notranslate"><span class="pre">syslogd</span></code> was running as another user you might end up with multiple <code class="docutils literal notranslate"><span class="pre">syslogd</span></code> instances and strange
behavior of the whole system. Please check that only one <code class="docutils literal notranslate"><span class="pre">syslogd</span></code> process is running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ps aux | grep syslog
lennart         58775   0.0  0.0  2432768    592 s004  S+    6:10PM   0:00.00 grep syslog
root            58759   0.0  0.0  2478772   1020   ??  Ss    6:09PM   0:00.01 /usr/sbin/syslogd
</pre></div>
</div>
<p>That’s it! Your MacOS X syslog messages should now appear in your Graylog system.</p>
</div>
</div>
<div class="section" id="gelf-sending-from-applications">
<h3>GELF / Sending from applications<a class="headerlink" href="#gelf-sending-from-applications" title="Permalink to this headline">¶</a></h3>
<p>The Graylog Extended Log Format (GELF) is a log format that avoids the shortcomings of classic plain syslog and is perfect
to logging from your application layer. It comes with optional compression, chunking and most importantly a clearly defined
structure. There are <a class="reference external" href="http://marketplace.graylog.org">dozens of GELF libraries</a> for many frameworks and
programming languages to get you started.</p>
<p>Read more about <a class="reference internal" href="index.html#document-pages/gelf"><span class="doc">GELF in the specification</span></a>.</p>
<div class="section" id="gelf-via-http">
<h4>GELF via HTTP<a class="headerlink" href="#gelf-via-http" title="Permalink to this headline">¶</a></h4>
<p>You can send in all GELF types via HTTP, including uncompressed GELF that is just a plain JSON string.</p>
<p>After launching a GELF HTTP input you can use the following endpoints to send messages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">graylog</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">org</span><span class="p">:[</span><span class="n">port</span><span class="p">]</span><span class="o">/</span><span class="n">gelf</span> <span class="p">(</span><span class="n">POST</span><span class="p">)</span>
</pre></div>
</div>
<p>Try sending an example message using curl:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">XPOST</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">graylog</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">org</span><span class="p">:</span><span class="mi">12202</span><span class="o">/</span><span class="n">gelf</span> <span class="o">-</span><span class="n">p0</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;short_message&quot;:&quot;Hello there&quot;, &quot;host&quot;:&quot;example.org&quot;, &quot;facility&quot;:&quot;test&quot;, &quot;_foo&quot;:&quot;bar&quot;}&#39;</span>
</pre></div>
</div>
<p>Both keep-alive and compression are supported via the common HTTP headers. The server will return a <code class="docutils literal notranslate"><span class="pre">202</span> <span class="pre">Accepted</span></code> when the message
was accepted for processing.</p>
</div>
</div>
<div class="section" id="using-apache-kafka-as-transport-queue">
<h3>Using Apache Kafka as transport queue<a class="headerlink" href="#using-apache-kafka-as-transport-queue" title="Permalink to this headline">¶</a></h3>
<p>Graylog supports <a class="reference external" href="http://kafka.apache.org">Apache Kafka</a> as a transport for various inputs such as GELF, syslog, and Raw/Plaintext inputs. The Kafka topic can be filtered by a regular expression and depending on the input, various additional settings can be configured.</p>
<p>Learn how to use rsyslog and Apache Kafka in the <a class="reference external" href="https://marketplace.graylog.org/addons/113fd1cb-f7d2-4176-b427-32831bd554ee">Sending syslog via Kafka into Graylog guide</a>.</p>
</div>
<div class="section" id="using-rabbitmq-amqp-as-transport-queue">
<h3>Using RabbitMQ (AMQP) as transport queue<a class="headerlink" href="#using-rabbitmq-amqp-as-transport-queue" title="Permalink to this headline">¶</a></h3>
<p>Graylog supports <a class="reference external" href="https://www.amqp.org">AMQP</a> as a transport for various inputs such as GELF, syslog, and Raw/Plaintext inputs. It can connect to any AMQP broker supporting <a class="reference external" href="https://www.rabbitmq.com/amqp-0-9-1-reference.html">AMQP 0-9-1</a> such as <a class="reference external" href="https://www.rabbitmq.com/">RabbitMQ</a>.</p>
<p>Learn how to use rsyslog and RabbitMQ in the <a class="reference external" href="https://marketplace.graylog.org/addons/246dc332-7da7-4016-b2f9-b00f722a8e79">Sending syslog via AMQP into Graylog guide</a>.</p>
</div>
<div class="section" id="microsoft-windows">
<h3>Microsoft Windows<a class="headerlink" href="#microsoft-windows" title="Permalink to this headline">¶</a></h3>
<p>Sending syslog data from Windows is
<a class="reference external" href="https://marketplace.graylog.org/addons/0bf65c6f-6fe8-4420-9c30-249706c9e55c">described on the Graylog Marketplace</a>.</p>
</div>
<div class="section" id="ruby-on-rails">
<h3>Ruby on Rails<a class="headerlink" href="#ruby-on-rails" title="Permalink to this headline">¶</a></h3>
<p>This is easy: You just need to combine a few components.</p>
<div class="section" id="log-all-requests-and-logger-calls-into-graylog">
<h4>Log all requests and logger calls into Graylog<a class="headerlink" href="#log-all-requests-and-logger-calls-into-graylog" title="Permalink to this headline">¶</a></h4>
<p>The recommended way to send structured information (i.e. HTTP return code, action, controller, … in additional fields) about every request and
explicit <code class="docutils literal notranslate"><span class="pre">Rails.logger</span></code> calls is easily accomplished using the <a class="reference external" href="https://rubygems.org/gems/gelf">GELF gem</a> and
<a class="reference external" href="https://github.com/roidrage/lograge">lograge</a>. Lograge builds one combined log entry for every request (instead of several lines like the
standard Rails logger) and has a Graylog output since version 0.2.0.</p>
<p>Start by adding Lograge and the GELF gem to your Gemfile:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gem</span> <span class="s2">&quot;gelf&quot;</span>
<span class="n">gem</span> <span class="s2">&quot;lograge&quot;</span>
</pre></div>
</div>
<p>Now configure both in your Rails application. Usually <code class="docutils literal notranslate"><span class="pre">config/environments/production.rb</span></code> is a good place for that:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">lograge</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="n">true</span>
<span class="n">config</span><span class="o">.</span><span class="n">lograge</span><span class="o">.</span><span class="n">formatter</span> <span class="o">=</span> <span class="n">Lograge</span><span class="p">::</span><span class="n">Formatters</span><span class="p">::</span><span class="n">Graylog2</span><span class="o">.</span><span class="n">new</span>
<span class="n">config</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">GELF</span><span class="p">::</span><span class="n">Logger</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;graylog.example.org&quot;</span><span class="p">,</span> <span class="mi">12201</span><span class="p">,</span> <span class="s2">&quot;WAN&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="p">:</span><span class="n">host</span> <span class="o">=&gt;</span> <span class="s2">&quot;hostname-of-this-app&quot;</span><span class="p">,</span> <span class="p">:</span><span class="n">facility</span> <span class="o">=&gt;</span> <span class="s2">&quot;heroku&quot;</span> <span class="p">})</span>
</pre></div>
</div>
<p>This configuration will also send all explicit <code class="docutils literal notranslate"><span class="pre">Rails.logger</span></code> calls (e.g. <code class="docutils literal notranslate"><span class="pre">Rails.logger.error</span> <span class="pre">&quot;Something</span> <span class="pre">went</span> <span class="pre">wrong&quot;</span></code>) to Graylog.</p>
</div>
<div class="section" id="log-only-explicit-logger-calls-into-graylog">
<h4>Log only explicit logger calls into Graylog<a class="headerlink" href="#log-only-explicit-logger-calls-into-graylog" title="Permalink to this headline">¶</a></h4>
<p>If you don’t want to log information about every request, but only explicit <code class="docutils literal notranslate"><span class="pre">Rails.logger</span></code> calls, it is enough to only configure the Rails logger.</p>
<p>Add the GELF gem to your Gemfile:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gem</span> <span class="s2">&quot;gelf&quot;</span>
</pre></div>
</div>
<p>…and configure it in your Rails application. Usually <code class="docutils literal notranslate"><span class="pre">config/environments/production.rb</span></code> is a good place for that:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">GELF</span><span class="p">::</span><span class="n">Logger</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;graylog.example.org&quot;</span><span class="p">,</span> <span class="mi">12201</span><span class="p">,</span> <span class="s2">&quot;WAN&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="p">:</span><span class="n">host</span> <span class="o">=&gt;</span> <span class="s2">&quot;hostname-of-this-app&quot;</span><span class="p">,</span> <span class="p">:</span><span class="n">facility</span> <span class="o">=&gt;</span> <span class="s2">&quot;heroku&quot;</span> <span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="heroku">
<h4>Heroku<a class="headerlink" href="#heroku" title="Permalink to this headline">¶</a></h4>
<p>You need to apply a workaround if you want custom logging on Heroku. The reason for this is that Heroku injects an own logger (<code class="docutils literal notranslate"><span class="pre">rails_log_stdout</span></code>),
that overwrites your custom one. The workaround is to add a file that makes Heroku think that the logger is already in your application:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ touch vendor/plugins/rails_log_stdout/heroku_fix
</pre></div>
</div>
</div>
</div>
<div class="section" id="raw-plaintext-inputs">
<h3>Raw/Plaintext inputs<a class="headerlink" href="#raw-plaintext-inputs" title="Permalink to this headline">¶</a></h3>
<p>The built-in <em>raw/plaintext</em> inputs allow you to parse any text that you can send via TCP or UDP. No parsing is applied at
all by default until you build your own parser using custom <a class="reference internal" href="index.html#document-pages/extractors"><span class="doc">Extractors</span></a>. This is a good way to support any text-based
logging format.</p>
<p>You can also write <a class="reference internal" href="index.html#document-pages/plugins"><span class="doc">Plugins</span></a> if you need extreme flexibility.</p>
</div>
<div class="section" id="json-path-from-http-api-input">
<h3>JSON path from HTTP API input<a class="headerlink" href="#json-path-from-http-api-input" title="Permalink to this headline">¶</a></h3>
<p>The JSON path from HTTP API input is reading any JSON response of a REST resource and stores a field value of it as a Graylog message.</p>
<div class="section" id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<p>Let’s try to read the download count of a release package stored on GitHub for analysis in Graylog. The call looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -XGET https://api.github.com/repos/YourAccount/YourRepo/releases/assets/12345
{
  &quot;url&quot;: &quot;https://api.github.com/repos/YourAccount/YourRepo/releases/assets/12345&quot;,
  &quot;id&quot;: 12345,
  &quot;name&quot;: &quot;somerelease.tgz&quot;,
  &quot;label&quot;: &quot;somerelease.tgz&quot;,
  &quot;content_type&quot;: &quot;application/octet-stream&quot;,
  &quot;state&quot;: &quot;uploaded&quot;,
  &quot;size&quot;: 38179285,
  &quot;download_count&quot;: 9937,
  &quot;created_at&quot;: &quot;2013-09-30T20:05:01Z&quot;,
  &quot;updated_at&quot;: &quot;2013-09-30T20:05:46Z&quot;
}
</pre></div>
</div>
<p>The attribute we want to extract is <code class="docutils literal notranslate"><span class="pre">download_count</span></code> so we set the JSON path to <code class="docutils literal notranslate"><span class="pre">$.download_count</span></code>.</p>
<p>This will result in a message in Graylog looking like this:</p>
<img alt="_images/jsonpath_1.png" src="http://res.fansdoc.com/graylog/_images/jsonpath_1.png" />
<p>You can use Graylog to analyze your download counts now.</p>
</div>
<div class="section" id="jsonpath">
<h4>JSONPath<a class="headerlink" href="#jsonpath" title="Permalink to this headline">¶</a></h4>
<p>JSONPath can do much more than just selecting a simple known field value. You can for example do this to select the first <code class="docutils literal notranslate"><span class="pre">download_count</span></code>
from a list of releases where the field <code class="docutils literal notranslate"><span class="pre">state</span></code> has the value <code class="docutils literal notranslate"><span class="pre">uploaded</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$.releases[?(@.state == &#39;uploaded&#39;)][0].download_count
</pre></div>
</div>
<p>…or only the first download count at all:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$.releases[0].download_count
</pre></div>
</div>
<p>You can <a class="reference external" href="http://goessner.net/articles/JsonPath/">learn more about JSONPath here</a>.</p>
</div>
</div>
<div class="section" id="reading-from-files">
<h3>Reading from files<a class="headerlink" href="#reading-from-files" title="Permalink to this headline">¶</a></h3>
<p>Log files come in a lot of different flavors and formats, much more than any single program could handle.</p>
<p>To support this use case, we provide the <a class="reference internal" href="index.html#graylog-sidecar"><span class="std std-ref">Sidecar</span></a> which acts as a supervisor process for other programs, such as nxlog and Filebeats, which have specifically been built to collect log messages from local files and ship them to remote systems like Graylog.</p>
<p>Of course you can still use any program supporting the GELF or syslog protocol (among others) to send your logs to Graylog.</p>
</div>
<div class="section" id="input-throttling">
<h3>Input Throttling<a class="headerlink" href="#input-throttling" title="Permalink to this headline">¶</a></h3>
<p>Throttling allows certain Graylog Inputs to slow their message intake rates (by temporarily pausing intake processing) if
contention occurs in the Graylog Journal.</p>
<div class="section" id="graylog-inputs-that-support-throttling">
<h4>Graylog Inputs that support throttling<a class="headerlink" href="#graylog-inputs-that-support-throttling" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>AWS Flow Logs</li>
<li>AWS Logs</li>
<li>CEF AMQP Input</li>
<li>CEF Kafka Input</li>
<li>GELF AMQP</li>
<li>GELF Kafka</li>
<li>JSON path from HTTP API</li>
<li>Raw/Plaintext AMQP</li>
<li>Raw/Plaintext Kafka</li>
<li>Syslog AMQP</li>
<li>Syslog Kafka</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="enabling-throttling">
<h4>Enabling throttling<a class="headerlink" href="#enabling-throttling" title="Permalink to this headline">¶</a></h4>
<p>To enable throttling for one of these inputs, edit it in <em>System &gt; Inputs</em> and check the <em>Allow throttling this input</em>
checkbox.</p>
</div>
<div class="section" id="throttling-criteria">
<h4>Throttling criteria<a class="headerlink" href="#throttling-criteria" title="Permalink to this headline">¶</a></h4>
<p>When enabled, the following criteria will be used to determine if throttling will occur:</p>
<blockquote>
<div><ol class="arabic simple">
<li>If there are zero uncommitted entries in the Graylog Journal, throttling will not occur. No further checks will be performed.</li>
<li>Throttling will occur if the Journal has more than 100k uncommitted entries.</li>
<li>Throttling will occur if the Journal is growing in size rapidly (approximately 20k entries per second or greater).</li>
<li>Throttling will occur if the process ring buffer is full.</li>
<li>Nothing is currently being written to the Journal, throttling will not occur. No further checks will be performed.</li>
<li>Throttling will occur if the Journal is more than 90% full.</li>
<li>Throttling will occur if the Journal write rate is more than twice as high as the read rate.</li>
</ol>
</div></blockquote>
</div>
</div>
</div>
<span id="document-pages/sidecar"></span><div class="section" id="graylog-sidecar">
<span id="id1"></span><h2>Graylog Sidecar<a class="headerlink" href="#graylog-sidecar" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Graylog 3.0 comes with a new Sidecar implementation.
We still support the old <strong>Collector Sidecars</strong>, which can be found in the <code class="docutils literal notranslate"><span class="pre">System</span> <span class="pre">/</span> <span class="pre">Collectors</span> <span class="pre">(legacy)</span></code> menu entry.
In case you need to configure legacy <strong>Collector Sidecar</strong> please refer to the <a class="reference external" href="/en/2.5/pages/collector_sidecar.html">Graylog Collector Sidecar documentation</a>.
We encourage users to migrate to the new <strong>Sidecar</strong>, which is covered by this document.</p>
</div>
<p><strong>Graylog Sidecar</strong> is a lightweight configuration management system for different log collectors, also called <cite>Backends</cite>.
The Graylog node(s) act as a centralized hub containing the configurations of log collectors.
On supported message-producing devices/hosts, Sidecar can run as a service (Windows host) or daemon (Linux host).</p>
<img alt="_images/sidecar_overview.png" src="http://res.fansdoc.com/graylog/_images/sidecar_overview.png" />
<p>The log collector configurations are centrally managed through the Graylog web interface.
Periodically, the Sidecar daemon will fetch all relevant configurations for the target, using the <a class="reference internal" href="index.html#document-pages/configuration/rest_api"><span class="doc">REST API</span></a>.
On its first run, or when a configuration change has been detected, Sidecar will <em>generate</em> (render) relevant backend configuration files. Then it will start, or restart, those reconfigured log collectors.</p>
<div class="section" id="installation">
<span id="sidecar-installation"></span><h3>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h3>
<p>Currently we provide pre-compiled packages on the Github releases page of the project. Once the Sidecar project is settled and matured
we will add the packages to the DEB and YUM online repositories.
To get the Sidecar working <a class="reference external" href="https://github.com/Graylog2/collector-sidecar/releases">Download a package</a> and install it on the target system.</p>
<p>Please follow the version matrix to pick the right package:</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sidecar version</th>
<th class="head">Graylog server version</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1.0.x</td>
<td>3.0.x</td>
</tr>
<tr class="row-odd"><td>0.1.x</td>
<td>2.2.x,2.3.x,2.4.x,2.5.x,3.0.x</td>
</tr>
<tr class="row-even"><td>0.0.9</td>
<td>2.1.x</td>
</tr>
</tbody>
</table>
<p>All following commands should be executed on the <strong>remote machine</strong> where you want to collect log data from.</p>
<div class="section" id="install-the-sidecar">
<h4>Install the Sidecar<a class="headerlink" href="#install-the-sidecar" title="Permalink to this headline">¶</a></h4>
<div class="section" id="ubuntu">
<h5>Ubuntu<a class="headerlink" href="#ubuntu" title="Permalink to this headline">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo dpkg -i graylog-sidecar_1.0.0-1_amd64.deb
</pre></div>
</div>
<p>Edit the configuration (see <a class="reference internal" href="#sidecar-configuration"><span class="std std-ref">Configuration</span></a>) and
activate the Sidecar as a system service:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ vi /etc/graylog/sidecar/sidecar.yml

$ sudo graylog-sidecar -service install

[Ubuntu 14.04 with Upstart]
$ sudo start graylog-sidecar

[Ubuntu 16.04 and later with Systemd]
$ sudo systemctl start graylog-sidecar
</pre></div>
</div>
</div>
<div class="section" id="centos">
<h5>CentOS<a class="headerlink" href="#centos" title="Permalink to this headline">¶</a></h5>
<p>Install the RPM package on RedHat based systems</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo rpm -i graylog-sidecar-1.0.0-1.x86_64.rpm
</pre></div>
</div>
<p>Edit the configuration (see <a class="reference internal" href="#sidecar-configuration"><span class="std std-ref">Configuration</span></a>) and
activate the Sidecar as a system service:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ vi /etc/graylog/sidecar/sidecar.yml

$ sudo graylog-sidecar -service install
$ sudo systemctl start graylog-sidecar
</pre></div>
</div>
</div>
<div class="section" id="windows">
<h5>Windows<a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h5>
<p>Use the Windows installer, it can be run interactively:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ graylog_sidecar_installer_1.0.0-1.exe
</pre></div>
</div>
<p>Or in silent mode with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ graylog_sidecar_installer_1.0.0-1.exe /S -SERVERURL=http://10.0.2.2:9000/api -APITOKEN=yourapitoken
</pre></div>
</div>
<p>Optionally edit the configuration (see <a class="reference internal" href="#sidecar-configuration"><span class="std std-ref">Configuration</span></a>) and register the system service:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">notepad</span><span class="o">.</span><span class="n">exe</span> <span class="n">C</span><span class="p">:</span>\<span class="n">Program</span> <span class="n">Files</span>\<span class="n">Graylog</span>\<span class="n">sidecar</span>\<span class="n">sidecar</span><span class="o">.</span><span class="n">yml</span>

<span class="o">&amp;</span> <span class="s2">&quot;C:\Program Files\graylog\sidecar\graylog-sidecar.exe&quot;</span> <span class="o">-</span><span class="n">service</span> <span class="n">install</span>
<span class="o">&amp;</span> <span class="s2">&quot;C:\Program Files\graylog\sidecar\graylog-sidecar.exe&quot;</span> <span class="o">-</span><span class="n">service</span> <span class="n">start</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="install-collectors">
<h4>Install collectors<a class="headerlink" href="#install-collectors" title="Permalink to this headline">¶</a></h4>
<p>Next up, you can decide which collectors you want to use with your Sidecar and install
them as well. We only cover the installation of the most common ones here, but you are free to use
other collectors as well.
Graylog contains default collector configurations for Filebeat, Winlogbeat and NXLog.
But since you’re able to define your own collector backends, there is nothing stopping you from
running e.g. sysmon, auditd or packetbeat.</p>
<div class="section" id="beats-on-linux">
<h5>Beats on Linux<a class="headerlink" href="#beats-on-linux" title="Permalink to this headline">¶</a></h5>
<p>Install Filebeat or another Beats package by following the instructions on the official <a class="reference external" href="https://www.elastic.co/downloads/beats/filebeat">Filebeat</a> download page.</p>
</div>
<div class="section" id="beats-on-windows">
<h5>Beats on Windows<a class="headerlink" href="#beats-on-windows" title="Permalink to this headline">¶</a></h5>
<p>The Windows Sidecar package already includes Filebeat and Winlogbeat.
For other Beats packages follow the instructions on the official <a class="reference external" href="https://www.elastic.co/downloads/beats">Beats</a> download page.</p>
</div>
<div class="section" id="nxlog-on-ubuntu">
<h5>NXLog on Ubuntu<a class="headerlink" href="#nxlog-on-ubuntu" title="Permalink to this headline">¶</a></h5>
<p>Install the NXLog package from the official <a class="reference external" href="https://nxlog.org/products/nxlog-community-edition/download">NXLog</a> download page.
Because the Sidecar takes control of stopping and starting NXlog it is
necessary to stop all running instances of NXlog and unconfigure the default system service:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo /etc/init.d/nxlog stop
$ sudo update-rc.d -f nxlog remove
$ sudo gpasswd -a nxlog adm
$ sudo chown -R nxlog.nxlog /var/spool/collector-sidecar/nxlog
</pre></div>
</div>
</div>
<div class="section" id="nxlog-on-centos">
<h5>NXLog on CentOS<a class="headerlink" href="#nxlog-on-centos" title="Permalink to this headline">¶</a></h5>
<p>The same on a RedHat based system:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo service nxlog stop
$ sudo chkconfig --del nxlog
$ sudo gpasswd -a nxlog root
$ sudo chown -R nxlog.nxlog /var/spool/collector-sidecar/nxlog
</pre></div>
</div>
</div>
<div class="section" id="nxlog-on-windows">
<h5>NXlog on Windows<a class="headerlink" href="#nxlog-on-windows" title="Permalink to this headline">¶</a></h5>
<p>Install the NXLog package from the official download <a class="reference external" href="https://nxlog.org/products/nxlog-community-edition/download">page</a> and deactivate the
system service. We just need the binaries installed on the system:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ C:\Program Files (x86)\nxlog\nxlog -u
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="sidecar-configuration">
<span id="id2"></span><h3>Sidecar Configuration<a class="headerlink" href="#sidecar-configuration" title="Permalink to this headline">¶</a></h3>
<p>On the command line you can provide a path to the configuration file with the <code class="docutils literal notranslate"><span class="pre">-c</span></code> switch.
The default configuration path on Linux systems is <code class="docutils literal notranslate"><span class="pre">/etc/graylog/sidecar/sidecar.yml</span></code> on Linux
and <code class="docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files\Graylog\sidecar\sidecar.yml</span></code> on Windows.</p>
<p>Most configuration parameters come with built-in defaults.
The only parameters that need adjustment are <code class="docutils literal notranslate"><span class="pre">server_url</span></code> and <code class="docutils literal notranslate"><span class="pre">server_api_token</span></code>.
You can get your API token by following the link on the <a class="reference internal" href="#sidecar-overview"><span class="std std-ref">Sidecars Overview</span></a> page.</p>
<div class="section" id="sidecar-yml-reference">
<h4>sidecar.yml Reference<a class="headerlink" href="#sidecar-yml-reference" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>server_url</td>
<td>URL to the Graylog API, e.g. <code class="docutils literal notranslate"><span class="pre">http://192.168.1.1:9000/api/</span></code></td>
</tr>
<tr class="row-odd"><td>server_api_token</td>
<td>The API token to use to authenticate against the Graylog server API. <br>
e.g <code class="docutils literal notranslate"><span class="pre">1jq26cssvc6rj4qac4bt9oeeh0p4vt5u5kal9jocl1g9mdi4og3n</span></code>  <br>
The token is mandatory and needs to be configured.</td>
</tr>
<tr class="row-even"><td>node_id</td>
<td>The node ID of the sidecar. This can be a path to a file or an ID string. <br>
Example file path: <code class="docutils literal notranslate"><span class="pre">file:/etc/graylog/sidecar/node-id</span></code> <br>
Example ID string: <code class="docutils literal notranslate"><span class="pre">6033137e-d56b-47fc-9762-cd699c11a5a9</span></code> <br>
ATTENTION: Every sidecar instance needs a unique ID! <br>
Default: <code class="docutils literal notranslate"><span class="pre">file:/etc/graylog/sidecar/node-id</span></code></td>
</tr>
<tr class="row-odd"><td>node_name</td>
<td>Name of the Sidecar instance, will also show up in the web interface. <br> The hostname will be used if not set.</td>
</tr>
<tr class="row-even"><td>update_interval</td>
<td>The interval in seconds the sidecar will fetch new configurations from the Graylog server <br> Default: <code class="docutils literal notranslate"><span class="pre">10</span></code></td>
</tr>
<tr class="row-odd"><td>tls_skip_verify</td>
<td>This configures if the sidecar should skip the verification of TLS connections. Default: <code class="docutils literal notranslate"><span class="pre">false</span></code></td>
</tr>
<tr class="row-even"><td>send_status</td>
<td>This controls the transmission of detailed sidecar information like collector status, <br>
metrics and log file lists. It can be disabled to reduce load on the Graylog server if needed. <br>
Default: <code class="docutils literal notranslate"><span class="pre">true</span></code></td>
</tr>
<tr class="row-odd"><td>list_log_files</td>
<td>Send a directory listing to Graylog and display it on the host status page, <br>
e.g. <code class="docutils literal notranslate"><span class="pre">/var/log</span></code>. This can also be a list of directories. Default: <code class="docutils literal notranslate"><span class="pre">[]</span></code></td>
</tr>
<tr class="row-even"><td>cache_path</td>
<td>The directory where the sidecar stores internal data. Default: <code class="docutils literal notranslate"><span class="pre">/var/cache/graylog-sidecar</span></code></td>
</tr>
<tr class="row-odd"><td>collector_configuration_directory</td>
<td>The directory where the sidecar generates configurations for collectors. <br>
Default: <code class="docutils literal notranslate"><span class="pre">/var/lib/graylog-sidecar/generated</span></code></td>
</tr>
<tr class="row-even"><td>log_path</td>
<td>The directory where the sidecar stores its logs. Default: <code class="docutils literal notranslate"><span class="pre">/var/log/graylog-sidecar</span></code></td>
</tr>
<tr class="row-odd"><td>log_rotate_max_file_size</td>
<td>The maximum size of the log file before it gets rotated. Default: <code class="docutils literal notranslate"><span class="pre">10MiB</span></code></td>
</tr>
<tr class="row-even"><td>log_rotate_keep_files</td>
<td>The maximum number of old log files to retain.</td>
</tr>
<tr class="row-odd"><td>collector_binaries_whitelist</td>
<td>A list of binaries which are allowed to be executed by the Sidecar. <br>
An empty list disables the white list feature. <br> Default:
<code class="docutils literal notranslate"><span class="pre">/usr/bin/filebeat,</span> <span class="pre">/usr/bin/packetbeat,</span> <span class="pre">/usr/bin/metricbeat,</span> <span class="pre">/usr/bin/heartbeat,</span></code> <br>
<code class="docutils literal notranslate"><span class="pre">/usr/bin/auditbeat,</span> <span class="pre">/usr/bin/journalbeat,</span> <span class="pre">/usr/share/filebeat/bin/filebeat,</span></code> <br>
<code class="docutils literal notranslate"><span class="pre">/usr/share/packetbeat/bin/packetbeat,</span> <span class="pre">/usr/share/metricbeat/bin/metricbeat,</span></code> <br>
<code class="docutils literal notranslate"><span class="pre">/usr/share/heartbeat/bin/heartbeat,</span> <span class="pre">/usr/share/auditbeat/bin/auditbeat,</span></code> <br>
<code class="docutils literal notranslate"><span class="pre">/usr/share/journalbeat/bin/journalbeat,</span> <span class="pre">/usr/bin/nxlog,</span> <span class="pre">/opt/nxlog/bin/nxlog</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="first-start">
<span id="sidecar-first-start"></span><h4>First start<a class="headerlink" href="#first-start" title="Permalink to this headline">¶</a></h4>
<p>Once you installed the Sidecar package and started the service for the first time,
you can verify that it shows up in the <a class="reference internal" href="#sidecar-overview"><span class="std std-ref">Sidecars Overview</span></a> page.
A new sidecar instance will not have any configurations assigned yet.
Take the <a class="reference internal" href="#sidecar-step-by-step"><span class="std std-ref">Step-by-step guide</span></a> to create your first configuration.</p>
</div>
<div class="section" id="mode-of-operation">
<h4>Mode of Operation<a class="headerlink" href="#mode-of-operation" title="Permalink to this headline">¶</a></h4>
<p>When the Sidecar is assigned a configuration via the Graylog web interface, it will write a configuration file into the
<code class="docutils literal notranslate"><span class="pre">collector_configuration_directory</span></code> directory for each collector backend.  E.g. if you assigned a Filebeat collector you will find a
<code class="docutils literal notranslate"><span class="pre">filebeat.yml</span></code> file in that directory. All changes have to be made in the Graylog web interface.
Every time the Sidecar detects an update to its configuration it will
rewrite the corresponding collector configuration file. Manually editing these files is not recommended.</p>
<p>Every time a collector configuration file is changed the collector process is restarted. The Sidecar takes care of the collector processes and reports the status back to the web interface</p>
</div>
<div class="section" id="sidecar-status">
<h4>Sidecar Status<a class="headerlink" href="#sidecar-status" title="Permalink to this headline">¶</a></h4>
<p>Each Sidecar instance is able to send status information back to Graylog. By enabling the option <code class="docutils literal notranslate"><span class="pre">send_status</span></code> metrics like load or the IP address of the host Sidecar is running on
are sent. Also metrics that are relevant for a stable operation e.g. disk volumes over 75% utilization are included. Additionally with the <code class="docutils literal notranslate"><span class="pre">list_log_files</span></code> option a directory listing is displayed in
the Graylog web interface. In that way an administrator can see which files are available for collecting. The list is periodically updated and files with write access are highlighted for easy identification.
After enabling <code class="docutils literal notranslate"><span class="pre">send_status</span></code> or <code class="docutils literal notranslate"><span class="pre">send_status</span></code> + <code class="docutils literal notranslate"><span class="pre">list_log_files</span></code> go to the collector overview and click on one of them, a status page with the configured information will be displayed.</p>
</div>
</div>
<div class="section" id="step-by-step-guide">
<span id="sidecar-step-by-step"></span><h3>Step-by-step guide<a class="headerlink" href="#step-by-step-guide" title="Permalink to this headline">¶</a></h3>
<p>We have prepared an example on how to configure the Sidecar using the Graylog web interface. The assumption is that we want to collect Apache
logfiles and ship them with a Filebeat collector to a Beats input that is listening on Port 5044 on your Graylog Server.</p>
<ul class="simple">
<li>The first step is to create a Beats input where collectors can send data to. Click on <code class="docutils literal notranslate"><span class="pre">System</span> <span class="pre">/</span> <span class="pre">Inputs</span></code> and start a global Beats input on the listening address 0.0.0.0 and port 5044.</li>
</ul>
<a class="reference internal image-reference" href="_images/sidecar_sbs0.png"><img alt="_images/sidecar_sbs0.png" src="http://res.fansdoc.com/graylog/_images/sidecar_sbs0.png" style="width: 100%;" /></a>
<ul class="simple" id="sidecar-overview">
<li>Navigate to the Sidecars overview. In your Graylog web interface click on <code class="docutils literal notranslate"><span class="pre">System</span> <span class="pre">/</span> <span class="pre">Sidecars</span></code>.</li>
</ul>
<a class="reference internal image-reference" href="_images/sidecars_overview.png"><img alt="_images/sidecars_overview.png" src="http://res.fansdoc.com/graylog/_images/sidecars_overview.png" style="width: 100%;" /></a>
<ul class="simple">
<li>Navigate to the Sidecar <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> page.</li>
</ul>
<a class="reference internal image-reference" href="_images/sidecar_sbs1.png"><img alt="_images/sidecar_sbs1.png" src="http://res.fansdoc.com/graylog/_images/sidecar_sbs1.png" style="width: 100%;" /></a>
<ul class="simple">
<li>Next we create a new configuration: We give the configuration a name and select <code class="docutils literal notranslate"><span class="pre">filebeat</span> <span class="pre">on</span> <span class="pre">Linux</span></code> as collector.
(This collector definition is shipped with Graylog, and comes with a default configuration template).
Most of the configuration defaults should work for you. However you need to change the <code class="docutils literal notranslate"><span class="pre">hosts:</span></code> setting and point it
to your Beats input. You also might want to change the <code class="docutils literal notranslate"><span class="pre">paths:</span></code> to the location of your Apache logs.
When done click <code class="docutils literal notranslate"><span class="pre">Create</span></code> to save your configuration.</li>
</ul>
<a class="reference internal image-reference" href="_images/sidecar_sbs2.png"><img alt="_images/sidecar_sbs2.png" src="http://res.fansdoc.com/graylog/_images/sidecar_sbs2.png" style="width: 100%;" /></a>
<ul class="simple" id="sidecar-assign-config-sbs">
<li>Next we need to assign our newly created configuration (and therefore the Filebeat collector) to our sidecar.
Go to the <code class="docutils literal notranslate"><span class="pre">Collector</span> <span class="pre">Administration</span></code> page.</li>
</ul>
<a class="reference internal image-reference" href="_images/sidecar_sbs3.png"><img alt="_images/sidecar_sbs3.png" src="http://res.fansdoc.com/graylog/_images/sidecar_sbs3.png" style="width: 100%;" /></a>
<ul class="simple">
<li>You will see a list of sidecars and underneath them a list of collectors that could be assigned to them.
Please note that collectors are assigned to sidecars by means of applying a collector configuration to the sidecar.
Therefore, we first select the <code class="docutils literal notranslate"><span class="pre">filebeat</span></code> collector and then click on the <code class="docutils literal notranslate"><span class="pre">Configure</span></code> menu, where we
can select the <code class="docutils literal notranslate"><span class="pre">filebeat-conf</span></code> configuration we created earlier.</li>
</ul>
<a class="reference internal image-reference" href="_images/sidecar_sbs4.png"><img alt="_images/sidecar_sbs4.png" src="http://res.fansdoc.com/graylog/_images/sidecar_sbs4.png" style="width: 100%;" /></a>
<ul class="simple">
<li>Confirming the assignment, will directly push this configuration to your sidecar which will go and start
the Filebeat collector with this configuration.</li>
</ul>
<a class="reference internal image-reference" href="_images/sidecar_sbs5.png"><img alt="_images/sidecar_sbs5.png" src="http://res.fansdoc.com/graylog/_images/sidecar_sbs5.png" style="width: 100%;" /></a>
<ul class="simple">
<li>If everything went fine, you should see the status <code class="docutils literal notranslate"><span class="pre">running</span></code> on the administration page.</li>
</ul>
<a class="reference internal image-reference" href="_images/sidecar_sbs6.png"><img alt="_images/sidecar_sbs6.png" src="http://res.fansdoc.com/graylog/_images/sidecar_sbs6.png" style="width: 100%;" /></a>
<ul class="simple">
<li>Congratulations your collector setup is working now!
You can go back to the Sidecars overview and click on the <code class="docutils literal notranslate"><span class="pre">Show</span> <span class="pre">messages</span></code> button to
search for logs that have been collected via your sidecar.</li>
</ul>
<a class="reference internal image-reference" href="_images/sidecar_sbs7.png"><img alt="_images/sidecar_sbs7.png" src="http://res.fansdoc.com/graylog/_images/sidecar_sbs7.png" style="width: 100%;" /></a>
</div>
<div class="section" id="creating-a-new-log-collector">
<h3>Creating a new Log Collector<a class="headerlink" href="#creating-a-new-log-collector" title="Permalink to this headline">¶</a></h3>
<p>Graylog comes with a few predefined log collectors which can be easily extended
and changed to your needs.
Let’s assume you want your sidecar to run <cite>rsyslogd(8)</cite> for you.</p>
<ul class="simple">
<li>Navigate to the Sidecars overview. In your Graylog web interface click on <code class="docutils literal notranslate"><span class="pre">System</span> <span class="pre">/</span> <span class="pre">Sidecars</span></code>.</li>
</ul>
<a class="reference internal image-reference" href="_images/sidecars_overview.png"><img alt="_images/sidecars_overview.png" src="http://res.fansdoc.com/graylog/_images/sidecars_overview.png" style="width: 100%;" /></a>
<ul class="simple">
<li>Navigate to the Sidecar <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> page.</li>
</ul>
<a class="reference internal image-reference" href="_images/sidecar_sbs1.png"><img alt="_images/sidecar_sbs1.png" src="http://res.fansdoc.com/graylog/_images/sidecar_sbs1.png" style="width: 100%;" /></a>
<ul class="simple">
<li>After we click on <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">Log</span> <span class="pre">Collector</span></code>, we are presented with the following page,
where we have to fill out some fields for our new collector.
We give the collector a unique name and select <code class="docutils literal notranslate"><span class="pre">Linux</span></code> and <code class="docutils literal notranslate"><span class="pre">Foreground</span> <span class="pre">Execution</span></code>.
Given that you installed rsyslogd(8) under <code class="docutils literal notranslate"><span class="pre">/usr/sbin/rsyslogd</span></code> we configure the
executable path accordingly.
If you are using <code class="docutils literal notranslate"><span class="pre">Foreground</span> <span class="pre">Execution</span></code> make sure that the collector you are running
does not daemonize itself. Otherwise the sidecar has no way of controlling the collector
once it has forked off into the background.
For rsyslogd we therefore provide <code class="docutils literal notranslate"><span class="pre">-n</span></code> as <cite>Execute Parameter</cite>.
If your collector supports configuration validation, it is advised to use it.
This acts as a pre-check, so that sidecar won’t restart a collector with
a broken configuration. For rsyslogd the option to do a configuration check is <code class="docutils literal notranslate"><span class="pre">-N</span> <span class="pre">1</span></code>.
Optionally you can provide a <cite>Default Template</cite> which will be proposed
once you create a configuration for this collector.</li>
</ul>
<a class="reference internal image-reference" href="_images/sidecar_new_collector.png"><img alt="_images/sidecar_new_collector.png" src="http://res.fansdoc.com/graylog/_images/sidecar_new_collector.png" style="width: 100%;" /></a>
<ul class="simple">
<li>Next up you can use your newly created collector by creating a configuration
for it and assign it to a Sidecar. Please follow the <a class="reference internal" href="#sidecar-step-by-step"><span class="std std-ref">Step-by-step guide</span></a> accordingly.</li>
<li><strong>Note</strong>: Your Sidecar might refuse to start your collector, because it needs
to be added to the <code class="docutils literal notranslate"><span class="pre">collector_binaries_whitelist</span></code> first. Please edit your
<a class="reference internal" href="#sidecar-configuration"><span class="std std-ref">Configuration</span></a> and restart your Sidecar.</li>
</ul>
</div>
<div class="section" id="using-configuration-variables">
<h3>Using Configuration Variables<a class="headerlink" href="#using-configuration-variables" title="Permalink to this headline">¶</a></h3>
<p>Configuration variables can contain arbitrary strings like
the IP address of your Graylog server or the port of an input.
The variables can then be used in multiple collector configurations,
which avoids duplication and simplifies management.</p>
<p>To create a configuration variable go any <code class="docutils literal notranslate"><span class="pre">Collector</span> <span class="pre">Configuration</span></code> page:</p>
<a class="reference internal image-reference" href="_images/sidecar_sbs2.png"><img alt="_images/sidecar_sbs2.png" src="http://res.fansdoc.com/graylog/_images/sidecar_sbs2.png" style="width: 100%;" /></a>
<p>On the right you’ll find a box <code class="docutils literal notranslate"><span class="pre">Collector</span> <span class="pre">Configuration</span> <span class="pre">Reference</span></code> which
contains <cite>Runtime Variables</cite> and <cite>Variables</cite>.
Click on <code class="docutils literal notranslate"><span class="pre">Variables</span></code> and then <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">Variable</span></code> to receive the following
modal:</p>
<a class="reference internal image-reference" href="_images/sidecar_conf_variable.png"><img alt="_images/sidecar_conf_variable.png" src="http://res.fansdoc.com/graylog/_images/sidecar_conf_variable.png" style="width: 100%;" /></a>
<p>In this example we replace the hard coded IP and Port from our
Beats input with a new variable named <code class="docutils literal notranslate"><span class="pre">${user.BeatsInput}</span></code>:</p>
<a class="reference internal image-reference" href="_images/sidecar_conf_variable2.png"><img alt="_images/sidecar_conf_variable2.png" src="http://res.fansdoc.com/graylog/_images/sidecar_conf_variable2.png" style="width: 100%;" /></a>
<p>We can now use this variable in all our configurations.
If we ever need to change the IP/port of our input,
we just change the variable.</p>
<div class="section" id="runtime-variables">
<span id="sidecar-runtime-variables"></span><h4>Runtime Variables<a class="headerlink" href="#runtime-variables" title="Permalink to this headline">¶</a></h4>
<p>Runtime variables contain runtime informations from each Sidecar that
is requesting this configuration.
An important example is the <code class="docutils literal notranslate"><span class="pre">${sidecar.nodeId}</span></code> variable.
The collector configuration should contain an instruction to fill
that variable in an extra field <cite>gl2_source_collector</cite>.
This allows Graylog to relate messages to the Sidecar that produced
them. (This is what makes the <code class="docutils literal notranslate"><span class="pre">Show</span> <span class="pre">messages</span></code> button on the Sidecars overview page work)</p>
</div>
</div>
<div class="section" id="secure-sidecar-communication">
<span id="sidecar-secure"></span><h3>Secure Sidecar Communication<a class="headerlink" href="#secure-sidecar-communication" title="Permalink to this headline">¶</a></h3>
<p>The Communication between Sidecar and Graylog will be secured if your API <a class="reference internal" href="index.html#https-setup"><span class="std std-ref">uses SSL</span></a>.</p>
<p>To secure the communication between the Collector and Graylog you just need to mark <code class="docutils literal notranslate"><span class="pre">Enable</span> <span class="pre">TLS</span></code> in your Beats Input. Without giving additional Information, Graylog will now create a self-signed certificate for this Input.
Now in the Sidecar Beats Output Configuration you just mark <code class="docutils literal notranslate"><span class="pre">Enable</span> <span class="pre">TLS</span> <span class="pre">Support</span></code> and <code class="docutils literal notranslate"><span class="pre">Insecure</span> <span class="pre">TLS</span> <span class="pre">connection</span></code>. After this is saved, the communication between Beats and Graylog will use TLS.</p>
<div class="section" id="certificate-based-client-authentication">
<h4>Certificate based client authentication<a class="headerlink" href="#certificate-based-client-authentication" title="Permalink to this headline">¶</a></h4>
<p>If you want Graylog to only accept data from authenticated Collectors please follow the steps at <a class="reference internal" href="index.html#sec-graylog-beats"><span class="std std-ref">Secured Graylog and Beats input</span></a></p>
</div>
</div>
<div class="section" id="run-sidecar-as-non-root-user">
<h3>Run Sidecar as non-root user<a class="headerlink" href="#run-sidecar-as-non-root-user" title="Permalink to this headline">¶</a></h3>
<p>The default is that the Sidecar is started with the root user to allow access to all log files. But this is not mandatory. If you like to start it with a daemon user, proceed like the following:</p>
<blockquote>
<div><ul class="simple">
<li>Create a daemon user e.g. <code class="docutils literal notranslate"><span class="pre">sidecar</span></code></li>
</ul>
</div></blockquote>
<p>The Sidecar itself is accessing the following files and directories:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">sidecar.yml</span></code> - /etc/graylog/sidecar/sidecar.yml</li>
<li><code class="docutils literal notranslate"><span class="pre">collector_configuration_directory</span></code> - /var/lib/graylog-sidecar/generated/</li>
<li><code class="docutils literal notranslate"><span class="pre">node_id</span></code> - /etc/graylog/sidecar/node-id</li>
<li><code class="docutils literal notranslate"><span class="pre">cache_path</span></code> - /var/cache/graylog-sidecar/</li>
<li><code class="docutils literal notranslate"><span class="pre">log_path</span></code> - /var/log/graylog-sidecar/</li>
</ul>
</div></blockquote>
<p>So to make these directories readable for the <code class="docutils literal notranslate"><span class="pre">sidecar</span></code> user, use:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">chown</span> <span class="pre">-R</span> <span class="pre">sidecar</span> <span class="pre">/etc/graylog/sidecar</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">chown</span> <span class="pre">-R</span> <span class="pre">sidecar</span> <span class="pre">/var/cache/graylog-sidecar</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">chown</span> <span class="pre">-R</span> <span class="pre">sidecar</span> <span class="pre">/var/lib/graylog-sidecar</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">chown</span> <span class="pre">-R</span> <span class="pre">sidecar</span> <span class="pre">/var/log/graylog-sidecar</span></code></li>
</ul>
</div></blockquote>
<p>You can change all paths to different places in the file system. If you prefer to store all Sidecar data in the home directory of the <code class="docutils literal notranslate"><span class="pre">sidecar</span></code> user, just change the paths accordingly.</p>
<p>Now <code class="docutils literal notranslate"><span class="pre">systemd</span></code> needs to know that the Sidecar should be started with a non-root user. Open <code class="docutils literal notranslate"><span class="pre">/etc/systemd/system/collector-sidecar.service</span></code> with an editor and navigate to the <code class="docutils literal notranslate"><span class="pre">[Service]</span></code> section, add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">User</span><span class="o">=</span><span class="n">sidecar</span>
<span class="n">Group</span><span class="o">=</span><span class="n">sidecar</span>
</pre></div>
</div>
<p>To make use of these settings reload systemd:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo systemctl daemon-reload
$ sudo systemctl restart graylog-sidecar
</pre></div>
</div>
<p>Check the log files in <code class="docutils literal notranslate"><span class="pre">/var/log/graylog-sidecar</span></code> for any errors. Understand that not only the Sidecar but also all backends, like <code class="docutils literal notranslate"><span class="pre">filebeat</span></code>, will be started as <code class="docutils literal notranslate"><span class="pre">sidecar</span></code> user after these changes.
So all log files that the backend should observe also need to be readable by the <code class="docutils literal notranslate"><span class="pre">sidecar</span></code> user. Depending on the Linux distribution there is usually an administrator group which has access to most log files.
By adding the <code class="docutils literal notranslate"><span class="pre">sidecar</span></code> user to that group you can grant access fairly easy. For example on Debian/Ubuntu systems this group is called <code class="docutils literal notranslate"><span class="pre">adm</span></code> (see <a class="reference external" href="https://wiki.debian.org/SystemGroups">System Groups in Debian Wiki</a> or <a class="reference external" href="https://wiki.ubuntu.com/Security/Privileges#Monitor_system_logs">Security/Privileges - Monitor system logs in Ubuntu wiki</a>).</p>
</div>
<div class="section" id="upgrading-from-the-collector-sidecar">
<span id="graylog-upgrade-sidecar"></span><h3>Upgrading from the Collector Sidecar<a class="headerlink" href="#upgrading-from-the-collector-sidecar" title="Permalink to this headline">¶</a></h3>
<p>This guide describes how you can perform an upgrade from the deprecated
<strong>Collector Sidecars</strong> (0.1.x) to the new <strong>Sidecars</strong> (1.x).</p>
<p>One major difference between the old and the new Sidecars, is that
we replaced the UI based collector configuration approach with
one where you can manage the plain text configuration of the collectors directly.
This might seem like an inconvenience at first, but
gives you the flexibility to configure any collector backend you want.</p>
<p>Additionally, the new Sidecars don’t assign configurations based on tags anymore.
Instead you have to assign configurations explicitly (see <a class="reference internal" href="#sidecar-assign-config-sbs"><span class="std std-ref">Step-by-Step guide</span></a>).</p>
<div class="section" id="install-new-sidecar">
<h4>1. Install New Sidecar<a class="headerlink" href="#install-new-sidecar" title="Permalink to this headline">¶</a></h4>
<p>The new Sidecar has different paths and executable names, so it can coexist with the old one.
Install the new Sidecar by following the <a class="reference internal" href="#sidecar-installation"><span class="std std-ref">Installation instructions</span></a>
and have your Sidecar running as described in <a class="reference internal" href="#sidecar-first-start"><span class="std std-ref">First Start</span></a>.</p>
<p><strong>Note</strong>: In case you were using filebeat on Linux, please make sure to also install
the official collector package, since the filebeat binary is not part of the Sidecar package anymore.</p>
</div>
<div class="section" id="migrate-configuration">
<h4>2. Migrate configuration<a class="headerlink" href="#migrate-configuration" title="Permalink to this headline">¶</a></h4>
<p>Next, we need to migrate the configuration that was previously rendered
on each host by the <strong>Collector Sidecar</strong>, to a new <strong>Collector Configuration</strong>.</p>
<p>We recommend to use the <a class="reference internal" href="#config-migrator"><span class="std std-ref">Sidecar Configuration Migrator</span></a>.
However, retrieving the old configuration can also be done manually by fetching it from
your host at the <code class="docutils literal notranslate"><span class="pre">/etc/graylog/collector-sidecar/generated/</span></code> directory.</p>
</div>
<div class="section" id="adopt-configuration-to-graylog-3-0">
<h4>3. Adopt configuration to Graylog 3.0<a class="headerlink" href="#adopt-configuration-to-graylog-3-0" title="Permalink to this headline">¶</a></h4>
<p>There are a few things that might need attention after an upgrade:</p>
<ul>
<li><p class="first">Use <a class="reference internal" href="#sidecar-runtime-variables"><span class="std std-ref">Runtime variables</span></a> for static fields</p>
<p>The imported configuration contains instructions that add static fields
which allows Graylog to relate messages to a Sidecar.
You should replace the hardcoded values of <code class="docutils literal notranslate"><span class="pre">gl2_source_collector</span></code> and
<code class="docutils literal notranslate"><span class="pre">collector_node_id</span></code> with runtime variables.</p>
<p>In case of a Beats collector this would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>fields.gl2_source_collector: ${sidecar.nodeId}
fields.collector_node_id: ${sidecar.nodeName}
</pre></div>
</div>
</li>
<li><p class="first">Migrate to the new Beats input</p>
<p>Graylog 3.0 comes with a new Beats input. The former one was renamed
to <code class="docutils literal notranslate"><span class="pre">Beats</span> <span class="pre">(deprecated)</span></code>.
The new input handles fields a little different. Therefore you
should define <code class="docutils literal notranslate"><span class="pre">fields_under_root:</span> <span class="pre">true</span></code> for the new input
to get the Graylog fields work.</p>
</li>
</ul>
</div>
<div class="section" id="switch-over-to-the-new-sidecar">
<h4>4. Switch over to the new Sidecar<a class="headerlink" href="#switch-over-to-the-new-sidecar" title="Permalink to this headline">¶</a></h4>
<p>Once you’re done creating a new configuration, you can assign
it to your Sidecar (see <a class="reference internal" href="#sidecar-assign-config-sbs"><span class="std std-ref">Step-by-Step guide</span></a>).
If everything works as expected, make sure to uninstall the old
<strong>Collector Sidecar</strong> to avoid collecting your logs twice.</p>
</div>
<div class="section" id="sidecar-configuration-migrator">
<span id="config-migrator"></span><h4>Sidecar Configuration Migrator<a class="headerlink" href="#sidecar-configuration-migrator" title="Permalink to this headline">¶</a></h4>
<p>The task of the Sidecar configuration migrator is to extract the configuration
from existing <strong>Collector Sidecars</strong> and convert it into new <strong>Sidecar</strong> configurations.</p>
<p>This feature needs a <strong>Collector Sidecar</strong> with version 0.1.8 or greater.
Please upgrade the instance you want to import configurations from, if necessary.</p>
<ul class="simple">
<li>Navigate to the Collectors (legacy) overview. In your Graylog web interface click on <code class="docutils literal notranslate"><span class="pre">System</span> <span class="pre">/</span> <span class="pre">Collectors</span> <span class="pre">(legacy)</span></code>.</li>
</ul>
<a class="reference internal image-reference" href="_images/sidecar_mig_1.png"><img alt="_images/sidecar_mig_1.png" src="http://res.fansdoc.com/graylog/_images/sidecar_mig_1.png" style="width: 100%;" /></a>
<ul class="simple">
<li>Click on the name of the Collector you want to import configurations from</li>
</ul>
<a class="reference internal image-reference" href="_images/sidecar_mig_2.png"><img alt="_images/sidecar_mig_2.png" src="http://res.fansdoc.com/graylog/_images/sidecar_mig_2.png" style="width: 100%;" /></a>
<ul class="simple">
<li>Click the <code class="docutils literal notranslate"><span class="pre">Import</span> <span class="pre">Configuration</span></code> button on a backend to import a configuration.
If the import was successful, follow the link to create a new Sidecar configuration:</li>
</ul>
<a class="reference internal image-reference" href="_images/sidecar_mig_3.png"><img alt="_images/sidecar_mig_3.png" src="http://res.fansdoc.com/graylog/_images/sidecar_mig_3.png" style="width: 100%;" /></a>
<ul class="simple">
<li>After clicking on <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">Configuration</span></code> use the <code class="docutils literal notranslate"><span class="pre">Migrate</span></code> button
underneath the configuration editor:</li>
</ul>
<a class="reference internal image-reference" href="_images/sidecar_mig_4.png"><img alt="_images/sidecar_mig_4.png" src="http://res.fansdoc.com/graylog/_images/sidecar_mig_4.png" style="width: 100%;" /></a>
<ul class="simple">
<li>A window opens up and lets you pick already imported configurations.
Clicking <code class="docutils literal notranslate"><span class="pre">Apply</span></code> will paste the configuration into the editor.
Afterwards you can edit and save the configuration as usual.</li>
</ul>
<a class="reference internal image-reference" href="_images/sidecar_mig_5.png"><img alt="_images/sidecar_mig_5.png" src="http://res.fansdoc.com/graylog/_images/sidecar_mig_5.png" style="width: 100%;" /></a>
</div>
</div>
<div class="section" id="sidecar-glossary">
<h3>Sidecar Glossary<a class="headerlink" href="#sidecar-glossary" title="Permalink to this headline">¶</a></h3>
<p>To understand the different parts of the Graylog Sidecar they are explained in the following section.</p>
<div class="section" id="configuration">
<h4>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h4>
<p>A configuration is the representation of a log collector configuration file in the Graylog web interface.
A configuration can be assigned to Sidecars, which also assigns the corresponding collector.
You can have multiple configurations for a single log collector. However, you can not
assign the same collector twice to a Sidecar.</p>
</div>
<div class="section" id="inputs">
<h4>Inputs<a class="headerlink" href="#inputs" title="Permalink to this headline">¶</a></h4>
<p>Inputs are the way how collectors ingest data. An input can be a log file that the collector should continuously read or a connection to the Windows event system that emits log events.
An input is connected to an output, otherwise there would be no way of sending the data to the next hop. So first create an output and then associate one or many inputs with it.</p>
</div>
</div>
<div class="section" id="debug">
<h3>Debug<a class="headerlink" href="#debug" title="Permalink to this headline">¶</a></h3>
<p>The Sidecar is writing log files to the directory configured in <code class="docutils literal notranslate"><span class="pre">log_path</span></code>. One file for each backend, there you can check for general issues like
file permissions or log transmission problems. The Sidecar itself is writing to <code class="docutils literal notranslate"><span class="pre">sidecar.log</span></code>. Problems like failed connection to the Graylog API can
be found there.</p>
<p>You can also start the Sidecar in foreground and monitor the output of the process:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ graylog-sidecar -debug
</pre></div>
</div>
</div>
<div class="section" id="uninstall">
<h3>Uninstall<a class="headerlink" href="#uninstall" title="Permalink to this headline">¶</a></h3>
<p>On Linux just uninstall the package, to perform an uninstall on Windows run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&amp;</span> <span class="s2">&quot;C:\Program Files\Graylog\graylog-sidecar.exe&quot;</span> <span class="o">-</span><span class="n">service</span> <span class="n">stop</span>
<span class="o">&amp;</span> <span class="s2">&quot;C:\Program Files\Graylog\graylog-sidecar.exe&quot;</span> <span class="o">-</span><span class="n">service</span> <span class="n">uninstall</span>
</pre></div>
</div>
</div>
<div class="section" id="known-problems">
<h3>Known Problems<a class="headerlink" href="#known-problems" title="Permalink to this headline">¶</a></h3>
<p>Currently we know of two problems with NXLog:</p>
<blockquote>
<div><ul class="simple">
<li>Since version 2.9.17 timestamps are transmitted <a class="reference external" href="https://nxlog.co/question/1855/gelf-timestamp-field-missing-millisecond-precision">without millisecond precision</a></li>
<li>On Windows machines NXlog is not able to store its collector state so features like file tailing don’t work correctly in combination with Sidecar. Use Sidecar version 0.1.0-alpha.1 or newer.</li>
</ul>
</div></blockquote>
<p>Known issue if you use a loadbalancer or firewall in front of Graylog’s API:</p>
<blockquote>
<div><ul class="simple">
<li>The Sidecar is using a persistent connection for API requests. Therefore it logs <code class="docutils literal notranslate"><span class="pre">408</span> <span class="pre">Request</span> <span class="pre">Time-out</span></code> if the loadbalancer session or http timeout is lower than the configured <code class="docutils literal notranslate"><span class="pre">update_interval</span></code>.</li>
</ul>
</div></blockquote>
</div>
</div>
<span id="document-pages/queries"></span><div class="section" id="searching">
<span id="queries"></span><h2>Searching<a class="headerlink" href="#searching" title="Permalink to this headline">¶</a></h2>
<div class="section" id="search-query-language">
<h3>Search query language<a class="headerlink" href="#search-query-language" title="Permalink to this headline">¶</a></h3>
<div class="section" id="syntax">
<h4>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h4>
<p>The search syntax is very close to the Lucene syntax. By default all message fields are included in the search if you don’t specify a message
field to search in.</p>
<p>Messages that include the term <em>ssh</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ssh</span>
</pre></div>
</div>
<p>Messages that include the term <em>ssh</em> or <em>login</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ssh</span> <span class="n">login</span>
</pre></div>
</div>
<p>Messages that include the exact phrase <em>ssh login</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;ssh login&quot;</span>
</pre></div>
</div>
<p>Messages where the field <em>type</em> includes <em>ssh</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">:</span><span class="n">ssh</span>
</pre></div>
</div>
<p>Messages where the field <em>type</em> includes <em>ssh</em> or <em>login</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">:(</span><span class="n">ssh</span> <span class="n">OR</span> <span class="n">login</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Elasticsearch 2.x and 5.x split queries on whitespace, so the query <code class="docutils literal notranslate"><span class="pre">type:(ssh</span> <span class="pre">login)</span></code> was equivalent to <code class="docutils literal notranslate"><span class="pre">type:(ssh</span> <span class="pre">OR</span> <span class="pre">login)</span></code>.
This is no longer the case in <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.6/breaking-changes-6.0.html#_changes_to_queries">Elasticsearch 6.0</a>
and you must now include an <code class="docutils literal notranslate"><span class="pre">OR</span></code> operator between each term.</p>
</div>
<p>Messages where the field <em>type</em> includes the exact phrase <em>ssh login</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">:</span><span class="s2">&quot;ssh login&quot;</span>
</pre></div>
</div>
<p>Messages that have the field <em>type</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_exists_</span><span class="p">:</span><span class="nb">type</span>
</pre></div>
</div>
<p>Messages that do not have the field <em>type</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">NOT</span> <span class="n">_exists_</span><span class="p">:</span><span class="nb">type</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Elasticsearch 2.x allows to use <code class="docutils literal notranslate"><span class="pre">_missing_:type</span></code> instead of <code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">_exists_:type</span></code>. This query syntax has been removed in <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.0/breaking_50_search_changes.html#_deprecated_queries_removed">Elasticsearch 5.0</a>.</p>
</div>
<p>Messages that match regular expression <code class="docutils literal notranslate"><span class="pre">ethernet[0-9]+</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">ethernet</span><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">+/</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please refer to the Elasticsearch documentation about the <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.6/query-dsl-regexp-query.html#regexp-syntax">Regular expression syntax</a> for details about the supported regular expression dialect.</p>
</div>
<p>By default all terms or phrases are OR connected so all messages that have at least one hit are returned. You can use
<strong>Boolean operators and groups</strong> for control over this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;ssh login&quot;</span> <span class="n">AND</span> <span class="n">source</span><span class="p">:</span><span class="n">example</span><span class="o">.</span><span class="n">org</span>
<span class="p">(</span><span class="s2">&quot;ssh login&quot;</span> <span class="n">AND</span> <span class="p">(</span><span class="n">source</span><span class="p">:</span><span class="n">example</span><span class="o">.</span><span class="n">org</span> <span class="n">OR</span> <span class="n">source</span><span class="p">:</span><span class="n">another</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">org</span><span class="p">))</span> <span class="n">OR</span> <span class="n">_exists_</span><span class="p">:</span><span class="n">always_find_me</span>
</pre></div>
</div>
<p>You can also use the NOT operator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;ssh login&quot;</span> <span class="n">AND</span> <span class="n">NOT</span> <span class="n">source</span><span class="p">:</span><span class="n">example</span><span class="o">.</span><span class="n">org</span>
<span class="n">NOT</span> <span class="n">example</span><span class="o">.</span><span class="n">org</span>
</pre></div>
</div>
<p><strong>Note that AND, OR, and NOT are case sensitive and must be typed in all upper-case.</strong></p>
<p><strong>Wildcards:</strong> Use <cite>?</cite> to replace a single character or <cite>*</cite> to replace zero or more characters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>source:*.org
source:exam?le.org
source:exam?le.*
</pre></div>
</div>
<p><strong>Note that leading wildcards are disabled to avoid excessive memory consumption!</strong> You can enable them in
your Graylog configuration file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">allow_leading_wildcard_searches</span> <span class="o">=</span> <span class="n">true</span>
</pre></div>
</div>
<p>Also note that <code class="docutils literal notranslate"><span class="pre">message</span></code>, <code class="docutils literal notranslate"><span class="pre">full_message</span></code>, and <code class="docutils literal notranslate"><span class="pre">source</span></code> are the only fields that are being analyzed by default.
While wildcard searches (using <code class="docutils literal notranslate"><span class="pre">*</span></code> and <code class="docutils literal notranslate"><span class="pre">?</span></code>) work on all indexed fields, analyzed fields will behave a little bit different.
See <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/guide/2.x/_wildcard_and_regexp_queries.html">wildcard and regexp queries</a> for details.</p>
<p><strong>Fuzziness:</strong> You can search for similar terms:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ssh</span> <span class="n">logni</span><span class="o">~</span>
<span class="n">source</span><span class="p">:</span><span class="n">exmaple</span><span class="o">.</span><span class="n">org</span><span class="o">~</span>
</pre></div>
</div>
<p>This example is using the <a class="reference external" href="http://en.wikipedia.org/wiki/Damerau-Levenshtein_distance">Damerau–Levenshtein distance</a> with a default
distance of <em>2</em> and will match “ssh login” and “example.org” (intentionally misspelled in the query).</p>
<p>You can change the distance like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span><span class="p">:</span><span class="n">exmaple</span><span class="o">.</span><span class="n">org</span><span class="o">~</span><span class="mi">1</span>
</pre></div>
</div>
<p>You can also use the fuzzyness operator to do a <strong>proximity</strong> search where the terms in a phrase can have different/fuzzy
distances from each other and don’t have to be in the defined order:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;foo bar&quot;</span><span class="o">~</span><span class="mi">5</span>
</pre></div>
</div>
<p>Numeric fields support <strong>range queries</strong>. Ranges in square brackets are inclusive, curly brackets are exclusive and can
even be combined:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http_response_code</span><span class="p">:[</span><span class="mi">500</span> <span class="n">TO</span> <span class="mi">504</span><span class="p">]</span>
<span class="n">http_response_code</span><span class="p">:{</span><span class="mi">400</span> <span class="n">TO</span> <span class="mi">404</span><span class="p">}</span>
<span class="nb">bytes</span><span class="p">:{</span><span class="mi">0</span> <span class="n">TO</span> <span class="mi">64</span><span class="p">]</span>
<span class="n">http_response_code</span><span class="p">:[</span><span class="mi">0</span> <span class="n">TO</span> <span class="mi">64</span><span class="p">}</span>
</pre></div>
</div>
<p>You can also do searches with one side unbounded:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http_response_code</span><span class="p">:</span><span class="o">&gt;</span><span class="mi">400</span>
<span class="n">http_response_code</span><span class="p">:</span><span class="o">&lt;</span><span class="mi">400</span>
<span class="n">http_response_code</span><span class="p">:</span><span class="o">&gt;=</span><span class="mi">400</span>
<span class="n">http_response_code</span><span class="p">:</span><span class="o">&lt;=</span><span class="mi">400</span>
</pre></div>
</div>
<p>It is also possible to combine unbounded range operators:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http_response_code</span><span class="p">:(</span><span class="o">&gt;=</span><span class="mi">400</span> <span class="n">AND</span> <span class="o">&lt;</span><span class="mi">500</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="escaping">
<h4>Escaping<a class="headerlink" href="#escaping" title="Permalink to this headline">¶</a></h4>
<p>The following characters must be escaped with a backslash:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&amp;&amp; || : \ / + - ! ( ) { } [ ] ^ &quot; ~ * ?
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">resource</span><span class="p">:</span>\<span class="o">/</span><span class="n">posts</span>\<span class="o">/</span><span class="mi">45326</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="time-frame-selector">
<h3>Time frame selector<a class="headerlink" href="#time-frame-selector" title="Permalink to this headline">¶</a></h3>
<p>The time frame selector defines in what time range to search in. It offers three different ways of selecting a time range and
is vital for search speed: If you know you are only interested in messages of the last hour, only search in that time frame.
This will make Graylog search in <a class="reference internal" href="index.html#document-pages/configuration/index_model"><span class="doc">relevant indices</span></a> only and greatly reduce system load and required resources.</p>
<img alt="_images/queries_time_range_selector.png" src="http://res.fansdoc.com/graylog/_images/queries_time_range_selector.png" />
<div class="section" id="relative-time-frame-selector">
<span id="id1"></span><h4>Relative time frame selector<a class="headerlink" href="#relative-time-frame-selector" title="Permalink to this headline">¶</a></h4>
<p>The relative time frame selector lets you look for messages from the selected option to the time you hit the search button. The selector
offers a wide set of relative time frames that fit most of your search needs.</p>
</div>
<div class="section" id="absolute-time-frame-selector">
<h4>Absolute time frame selector<a class="headerlink" href="#absolute-time-frame-selector" title="Permalink to this headline">¶</a></h4>
<p>When you know exactly the boundaries of your search, you want to use the absolute time frame selector. Simply introduce the dates and
times for the search manually or click in the input field to open up a calendar where you can choose the day with your mouse.</p>
</div>
<div class="section" id="keyword-time-frame-selector">
<h4>Keyword time frame selector<a class="headerlink" href="#keyword-time-frame-selector" title="Permalink to this headline">¶</a></h4>
<p>Graylog offers a keyword time frame selector that allows you to specify the time frame for the search in natural language like <em>last hour</em> or <em>last 90 days</em>. The web interface shows a preview of the two actual timestamps that will be used for the search.</p>
<img alt="_images/queries_keyword_time_selector.png" src="http://res.fansdoc.com/graylog/_images/queries_keyword_time_selector.png" />
<p>Here are a few examples for possible values.</p>
<ul class="simple">
<li>“last month” searches between one month ago and now</li>
<li>“4 hours ago” searches between four hours ago and now</li>
<li>“1st of april to 2 days ago” searches between 1st of April and 2 days ago</li>
<li>“yesterday midnight +0200 to today midnight +0200” searches between yesterday midnight and today midnight in timezone +0200 - will be 22:00 in UTC</li>
</ul>
<p>The time frame is parsed using the <a class="reference external" href="http://natty.joestelmach.com/">natty natural language parser</a>. Please consult its documentation for details.</p>
</div>
</div>
<div class="section" id="saved-searches">
<h3>Saved searches<a class="headerlink" href="#saved-searches" title="Permalink to this headline">¶</a></h3>
<p>Sometimes you may want to search a specific search configuration to be used later. Graylog provides a saved search functionality
to accomplish exactly that.</p>
<p>Once you submitted your search, selected the fields you want to show from the search sidebar, and chosen a resolution for the histogram, click on
the <em>Save search criteria</em> button on the sidebar.</p>
<img alt="_images/saved_search_create.png" src="http://res.fansdoc.com/graylog/_images/saved_search_create.png" />
<p>Give a name to the current search and click on save. When you want to use the saved search later on, you only need to select it from the saved search
selector.</p>
<img alt="_images/saved_search_selector.png" src="http://res.fansdoc.com/graylog/_images/saved_search_selector.png" />
<p>Of course, you can always update the selected fields or name of your saved search. To do so, select the saved search from the saved search selector,
update the field selection or histogram resolution, and click on <em>Saved search</em> -&gt; <em>Update search criteria</em>. It is also possible to delete the saved
search by selecting <em>Saved search</em> -&gt; <em>Delete saved search</em>.</p>
<img alt="_images/saved_search_update.png" src="http://res.fansdoc.com/graylog/_images/saved_search_update.png" />
</div>
<div class="section" id="histogram">
<h3>Histogram<a class="headerlink" href="#histogram" title="Permalink to this headline">¶</a></h3>
<p>The search page includes a search result histogram, where you can view in a concise way the number of messages received grouped by a certain time period that Graylog will adjust for you.</p>
<p>The histogram also allows you to further narrow down the cause for an issue:</p>
<ul class="simple">
<li>Delimit the search time range by brushing over the histogram. Just click and drag with your mouse over the chart to select the time range you want to use, and click on the search button to perform that search</li>
<li>See the time where alerts are triggered in the graph annotations. If you are searching in a stream, you will only see alerts related to that stream</li>
</ul>
<img alt="_images/search_histogram.png" src="http://res.fansdoc.com/graylog/_images/search_histogram.png" />
</div>
<div class="section" id="analysis">
<h3>Analysis<a class="headerlink" href="#analysis" title="Permalink to this headline">¶</a></h3>
<p>Graylog provides several tools to analyze your search results. It is possible to save these analysis into dashboards, so you can check them over
time in a more convenient way. To analyze a field from your search results, expand the field in the search sidebar and click on the button of the
analysis you want to perform.</p>
<img alt="_images/search_analysis.png" src="http://res.fansdoc.com/graylog/_images/search_analysis.png" />
<div class="section" id="field-statistics">
<span id="id2"></span><h4>Field statistics<a class="headerlink" href="#field-statistics" title="Permalink to this headline">¶</a></h4>
<p>Compute different statistics on your fields, to help you better summarize and understand the data in them.</p>
<p>The statistical information consist of: total, mean, minimum, maximum, standard deviation, variance, sum, and cardinality. On non-numeric fields,
you can only see the total amount of messages containing that field, and the cardinality of the field, i.e. the number of unique values it has.</p>
<img alt="_images/field_statistics.png" src="http://res.fansdoc.com/graylog/_images/field_statistics.png" />
</div>
<div class="section" id="quick-values">
<span id="id3"></span><h4>Quick values<a class="headerlink" href="#quick-values" title="Permalink to this headline">¶</a></h4>
<p>Quick values helps you to find out the distribution of values for a field. Alongside a graphic representation of the common values contained
in a field, Graylog will display a table with all different values, allowing you to see the number of times they appear. You can include any value
in your search query by clicking on the magnifying glass icon located in the value row.</p>
<img alt="_images/quick_values.png" src="http://res.fansdoc.com/graylog/_images/quick_values.png" />
</div>
<div class="section" id="field-graphs">
<span id="id4"></span><h4>Field graphs<a class="headerlink" href="#field-graphs" title="Permalink to this headline">¶</a></h4>
<p>You can create field graphs for any numeric field, by clicking on the <em>Generate chart</em> button in the search sidebar. Using the options in the
<em>Customize</em> menu on top of the field graph, you can change the statistical function used in the graph, the kind of graph to use to represent
the values, the graph interpolation, as well as the time resolution.</p>
<img alt="_images/field_graph.png" src="http://res.fansdoc.com/graylog/_images/field_graph.png" />
<p>Once you have customized some field graphs, you can also combine them by dragging them from the hamburger icon on the top corner of the graph,
and dropping them into another field graph. You can see the location of the hamburger icon and the end result in the following screenshots:</p>
<img alt="_images/stacked_graph_1.png" src="http://res.fansdoc.com/graylog/_images/stacked_graph_1.png" />
<img alt="_images/stacked_graph_2.png" src="http://res.fansdoc.com/graylog/_images/stacked_graph_2.png" />
<p>Field graphs appear every time you perform a search, allowing you to compare data, or combine graphs coming from different streams.</p>
</div>
</div>
<div class="section" id="decorators">
<span id="id5"></span><h3>Decorators<a class="headerlink" href="#decorators" title="Permalink to this headline">¶</a></h3>
<p>Decorators allow you to alter message fields during search time automatically, while <em>preserving the unmodified message on disk</em>. Decorators
are specially useful to make some data in your fields more readable, combine data in some field, or add new fields with more information about
the message. As decorators are configured per stream (including the <a class="reference internal" href="index.html#default-stream"><span class="std std-ref">default stream</span></a>), you are also able to present a
single message in different streams differently.</p>
<p>As changes made by decorators are not persisted, you cannot search for decorated values or use field analyzers on them. You can
still use those features in the original non-decorated fields.</p>
<p>Decorators are applied on a stream-level, and are shared among all users capable of accessing a stream, so all users can share the same results
and benefit from the advantages decorators add.</p>
<p>Graylog includes some message decorators out of the box, but you can add new ones from pipelines or by writing your own as plugins.</p>
<p>In order to apply decorators to your search results, click on the <em>Decorators</em> tab in your search sidebar, select the decorator you want
to apply from the dropdown, and click on <em>Apply</em>. Once you save your changes, the search results will already contain the decorated values.</p>
<img alt="_images/create_decorator.png" src="http://res.fansdoc.com/graylog/_images/create_decorator.png" />
<p>When you apply multiple decorators to the same search results, you can change the order in which they are applied at any time by using
drag and drop in the decorator list.</p>
<div class="section" id="syslog-severity-mapper">
<span id="id6"></span><h4>Syslog severity mapper<a class="headerlink" href="#syslog-severity-mapper" title="Permalink to this headline">¶</a></h4>
<p>The syslog severity mapper decorator lets you convert the numeric syslog level of syslog messages, to a human readable string. For example,
applying the decorator to the <code class="docutils literal notranslate"><span class="pre">level</span></code> field in your logs would convert the syslog level <code class="docutils literal notranslate"><span class="pre">4</span></code> to <code class="docutils literal notranslate"><span class="pre">Warning</span> <span class="pre">(4)</span></code>.</p>
<p>To apply a syslog severity mapper decorator, you need to provide the following data:</p>
<ul class="simple">
<li><strong>Source field</strong>: Field containing the numeric syslog level</li>
<li><strong>Target field</strong>: Field to store the human readable string. It can be the same one as the source field, if you wish to replace the numeric
value on your search results</li>
</ul>
</div>
<div class="section" id="format-string">
<h4>Format string<a class="headerlink" href="#format-string" title="Permalink to this headline">¶</a></h4>
<p>The format string decorator provides a simple way of combining several fields into one. It can also be used to modify the content of a field
in, without altering the stored result in Elasticsearch.</p>
<p>To apply a format string decorator you need to provide the following data:</p>
<ul class="simple">
<li><strong>Format string</strong>: Pattern used to format the resulting string. You can provide fields in the message by enclosing them in <code class="docutils literal notranslate"><span class="pre">${}</span></code>.
E.g. <code class="docutils literal notranslate"><span class="pre">${source}</span></code> will add the contents of the <code class="docutils literal notranslate"><span class="pre">source</span></code> message field into the resulting string</li>
<li><strong>Target field</strong>: Field to store the resulting value</li>
<li><strong>Require all fields</strong> (optional): Check this box to only format the string when all other fields are present</li>
</ul>
<p>For example, using the format string <code class="docutils literal notranslate"><span class="pre">Request</span> <span class="pre">to</span> <span class="pre">${controller}#${action}</span> <span class="pre">finished</span> <span class="pre">in</span> <span class="pre">${took_ms}ms</span> <span class="pre">with</span> <span class="pre">code</span> <span class="pre">${http_response_code}</span></code>, could
produce the text <code class="docutils literal notranslate"><span class="pre">Request</span> <span class="pre">to</span> <span class="pre">PostsController#show</span> <span class="pre">finished</span> <span class="pre">in</span> <span class="pre">57ms</span> <span class="pre">with</span> <span class="pre">code</span> <span class="pre">200</span></code>, and make it visible in one of the message fields in
your search results.</p>
</div>
<div class="section" id="pipeline-decorator">
<h4>Pipeline Decorator<a class="headerlink" href="#pipeline-decorator" title="Permalink to this headline">¶</a></h4>
<p>The pipeline decorator provides a way to decorate messages by processing them with an existing <a class="reference internal" href="index.html#document-pages/pipelines"><span class="doc">processing pipeline</span></a>.
In contrast to using a processing pipeline, changes done to the message by the pipeline are not persisted. Instead, the pipeline is used at search time
to modify the <em>presentation</em> of the message.</p>
<p>The prerequisite of using the pipeline decorator is that an existing pipeline is required.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please take note, that the pipeline you use for decoration should not be connected to a stream. This would mean that it is run twice (during indexing <em>and</em> search time) for each message, effectively rendering the second run useless.</p>
</div>
<p>When you are done creating a pipeline, you can now add a decorator using it on any number of streams. In order to create one, you proceed just like for
any other decorator type, by clicking on the <em>Decorator</em> sidebar, selecting the type (“Pipeline Processor Decorator” in this case) and clicking the <em>Apply</em> button next to one.</p>
<img alt="_images/pipeline_decorator_select_type.png" src="http://res.fansdoc.com/graylog/_images/pipeline_decorator_select_type.png" />
<p>Upon clicking <em>Apply</em>, the pipeline to be used for decorating can be selected.</p>
<img alt="_images/pipeline_decorator_select_pipeline.png" src="http://res.fansdoc.com/graylog/_images/pipeline_decorator_select_pipeline.png" />
<p>After selecting a pipeline and clicking <em>Save</em>, you are already set creating a new pipeline decorator.</p>
</div>
<div class="section" id="debugging-decorators">
<h4>Debugging decorators<a class="headerlink" href="#debugging-decorators" title="Permalink to this headline">¶</a></h4>
<p>When a message is not decorated as expected, or you need to know how it looked like originally, you can see all changes that were done during decoration by clicking “Show changes” in the message details.</p>
<img alt="_images/pipeline_decorator_show_changes.png" src="http://res.fansdoc.com/graylog/_images/pipeline_decorator_show_changes.png" />
<p>In this view, deleted content is shown in red, while added content is shown in green. This means that added fields will have a single green entry, removed fields a single red entry and modified fields will have two entries, a red and a green one.</p>
</div>
<div class="section" id="further-functionality">
<h4>Further functionality<a class="headerlink" href="#further-functionality" title="Permalink to this headline">¶</a></h4>
<p>If the existing decorators are not sufficient for your needs, you can either search the <a class="reference external" href="http://marketplace.graylog.org">Graylog marketplace</a>, or <a class="reference internal" href="index.html#writing-decorators"><span class="std std-ref">write your own decorator</span></a>.</p>
</div>
</div>
<div class="section" id="export-results-as-csv">
<h3>Export results as CSV<a class="headerlink" href="#export-results-as-csv" title="Permalink to this headline">¶</a></h3>
<p>It is also possible to export the results of your search as a CSV document. To do so, select all fields you want to export in the search
sidebar, click on the <em>More actions</em> button, and select <em>Export as CSV</em>.</p>
<img alt="_images/export_as_csv.png" src="http://res.fansdoc.com/graylog/_images/export_as_csv.png" />
<p><strong>Hint</strong>: Some Graylog inputs keep the original message in the <code class="docutils literal notranslate"><span class="pre">full_message</span></code> field. If you need to export the original message, you
can do so by clicking on the <em>List all fields</em> link at the bottom of the sidebar, and then selecting the <code class="docutils literal notranslate"><span class="pre">full_message</span></code> field.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Exporting results to a CSV will <strong>not</strong> preserve sorting because Graylog is using the virtual <code class="docutils literal notranslate"><span class="pre">_doc</span></code> field to “sort” documents for performance reasons. If you need to have the exported data ordered you will need to either make a <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.4/search-request-scroll.html">scroll query to ElasticSearch</a> and process it after, or to download the file and post process it via other means.</p>
</div>
</div>
<div class="section" id="search-result-highlighting">
<h3>Search result highlighting<a class="headerlink" href="#search-result-highlighting" title="Permalink to this headline">¶</a></h3>
<p>Graylog supports search result highlighting since v0.20.2:</p>
<img alt="_images/search_result_highlighting.png" src="http://res.fansdoc.com/graylog/_images/search_result_highlighting.png" />
<div class="section" id="enabling-disabling-search-result-highlighting">
<h4>Enabling/Disabling search result highlighting<a class="headerlink" href="#enabling-disabling-search-result-highlighting" title="Permalink to this headline">¶</a></h4>
<p>Using search result highlighting will result in slightly higher resource consumption of searches. You can enable and disable
it using a configuration parameter in the <code class="docutils literal notranslate"><span class="pre">graylog.conf</span></code> of your Graylog nodes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">allow_highlighting</span> <span class="o">=</span> <span class="n">true</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="search-configuration">
<h3>Search configuration<a class="headerlink" href="#search-configuration" title="Permalink to this headline">¶</a></h3>
<p>Graylog allows customizing the options allowed to search queries, like limiting the time range users can select or configuring the list of displayed relative time ranges.</p>
<img alt="_images/queries_search_configuration.png" src="http://res.fansdoc.com/graylog/_images/queries_search_configuration.png" />
<p>All search configuration settings can be customized using the web interface on the <em>System</em> -&gt; <em>Configurations</em> page in the <em>Search configuration</em> section.</p>
<div class="section" id="query-time-range-limit">
<h4>Query time range limit<a class="headerlink" href="#query-time-range-limit" title="Permalink to this headline">¶</a></h4>
<p>Sometimes the amount of data stored in Graylog is quite big and spans a wide time range (e. g. multiple years). In order to prevent normal users from accidentally running search queries which could use up lots of resources, it is possible to limit the time range that users are allowed to search in.</p>
<p>Using this feature, the time range of a search query exceeding the configured query time range limit will automatically be adapted to the given limit.</p>
<img alt="_images/queries_query_time_range_limit.png" src="http://res.fansdoc.com/graylog/_images/queries_query_time_range_limit.png" />
<p id="iso-8601-duration">The query time range limit is a <em>duration</em> formatted according to ISO 8601 following the basic format <code class="docutils literal notranslate"><span class="pre">P&lt;date&gt;T&lt;time&gt;</span></code> with the following rules:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Designator</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">P</span></code></td>
<td>Duration designator (for period) placed at the start of the duration representation</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">Y</span></code></td>
<td>Year designator that follows the value for the number of years</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">M</span></code></td>
<td>Month designator that follows the value for the number of months</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">W</span></code></td>
<td>Week designator that follows the value for the number of weeks</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">D</span></code></td>
<td>Day designator that follows the value for the number of days</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">T</span></code></td>
<td>Time designator that precedes the time components of the representation</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">H</span></code></td>
<td>Hour designator that follows the value for the number of hours</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">M</span></code></td>
<td>Minute designator that follows the value for the number of minutes</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">S</span></code></td>
<td>Second designator that follows the value for the number of seconds</td>
</tr>
</tbody>
</table>
<p>Examples:</p>
<table border="1" class="docutils">
<colgroup>
<col width="49%" />
<col width="51%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ISO 8601 duration</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">P30D</span></code></td>
<td>30 days</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PT1H</span></code></td>
<td>1 hour</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">P1DT12H</span></code></td>
<td>1 day and 12 hours</td>
</tr>
</tbody>
</table>
<p>More details about the format of ISO 8601 durations can be found <a class="reference external" href="https://en.wikipedia.org/wiki/ISO_8601#Durations">on Wikipedia</a>.</p>
</div>
<div class="section" id="relative-time-ranges">
<h4>Relative time ranges<a class="headerlink" href="#relative-time-ranges" title="Permalink to this headline">¶</a></h4>
<p>The list of time ranges displayed in the <a class="reference internal" href="#relative-time-frame-selector"><span class="std std-ref">Relative time frame selector</span></a> can be configured, too. It consists of a list of <a class="reference internal" href="#iso-8601-duration"><span class="std std-ref">ISO 8601</span></a> durations which the users can select on the search page.</p>
<img alt="_images/queries_relative_timerange_options.png" src="http://res.fansdoc.com/graylog/_images/queries_relative_timerange_options.png" />
</div>
</div>
</div>
<span id="document-pages/streams"></span><div class="section" id="streams">
<span id="id1"></span><h2>Streams<a class="headerlink" href="#streams" title="Permalink to this headline">¶</a></h2>
<div class="section" id="what-are-streams">
<h3>What are streams?<a class="headerlink" href="#what-are-streams" title="Permalink to this headline">¶</a></h3>
<p>The Graylog streams are a mechanism to route messages into categories in realtime while they are processed. You define rules that
instruct Graylog which message to route into which streams. Imagine sending these three messages to Graylog:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">message</span><span class="p">:</span> <span class="n">INSERT</span> <span class="n">failed</span> <span class="p">(</span><span class="n">out</span> <span class="n">of</span> <span class="n">disk</span> <span class="n">space</span><span class="p">)</span>
<span class="n">level</span><span class="p">:</span> <span class="mi">3</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="n">source</span><span class="p">:</span> <span class="n">database</span><span class="o">-</span><span class="n">host</span><span class="o">-</span><span class="mi">1</span>

<span class="n">message</span><span class="p">:</span> <span class="n">Added</span> <span class="n">user</span> <span class="s1">&#39;foo&#39;</span><span class="o">.</span>
<span class="n">level</span><span class="p">:</span> <span class="mi">6</span> <span class="p">(</span><span class="n">informational</span><span class="p">)</span>
<span class="n">source</span><span class="p">:</span> <span class="n">database</span><span class="o">-</span><span class="n">host</span><span class="o">-</span><span class="mi">2</span>

<span class="n">message</span><span class="p">:</span> <span class="n">smtp</span> <span class="n">ERR</span><span class="p">:</span> <span class="n">remote</span> <span class="n">closed</span> <span class="n">the</span> <span class="n">connection</span>
<span class="n">level</span><span class="p">:</span> <span class="mi">3</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="n">source</span><span class="p">:</span> <span class="n">application</span><span class="o">-</span><span class="n">x</span>
</pre></div>
</div>
<p>One of the many things that you could do with streams is creating a stream called <em>Database errors</em> that is catching every error
message from one of your database hosts.</p>
<p>Create a new stream with these rules, selecting the option to match all rules:</p>
<ul class="simple">
<li>Field <code class="docutils literal notranslate"><span class="pre">level</span></code> must be greater than <code class="docutils literal notranslate"><span class="pre">4</span></code></li>
<li>Field <code class="docutils literal notranslate"><span class="pre">source</span></code> must match regular expression <code class="docutils literal notranslate"><span class="pre">^database-host-\d+</span></code></li>
</ul>
<p>This will route every new message with a <code class="docutils literal notranslate"><span class="pre">level</span></code> higher than <em>WARN</em> and a <code class="docutils literal notranslate"><span class="pre">source</span></code> that matches the database host regular
expression into the stream.</p>
<p>A message will be routed into every stream that has all (or any) of its rules matching. This means that a message can be part of many streams
and not just one.</p>
<p>The stream is now appearing in the streams list and a click on its title will show you all database errors.</p>
<p>Streams can be used to be alerted in case certain condition happens. We cover more topics related to alerts in <a class="reference internal" href="index.html#alerts"><span class="std std-ref">Alerts</span></a>.</p>
<div class="section" id="what-s-the-difference-to-saved-searches">
<h4>What’s the difference to saved searches?<a class="headerlink" href="#what-s-the-difference-to-saved-searches" title="Permalink to this headline">¶</a></h4>
<p>The biggest difference is that streams are processed in realtime. This allows realtime alerting and forwarding to other systems.
Imagine forwarding your database errors to another system or writing them to a file by regularly reading them from the message
storage. Realtime streams do this much better.</p>
<p>Another difference is that searches for complex stream rule sets are always comparably cheap to perform because a message is
<em>tagged</em> with stream IDs when processed. A search for Graylog internally always looks like this, no matter how many stream
rules you have configured:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">streams</span><span class="p">:[</span><span class="n">STREAM_ID</span><span class="p">]</span>
</pre></div>
</div>
<p>Building a query with all rules would cause significantly higher load on the message storage.</p>
</div>
</div>
<div class="section" id="how-do-i-create-a-stream">
<h3>How do I create a stream?<a class="headerlink" href="#how-do-i-create-a-stream" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Navigate to the streams section from the top navigation bar.</li>
<li>Click “Create stream”.</li>
<li>Save the stream after entering a name and a description. For example <em>All error messages</em> and
<em>Catching all error messages from all sources</em>. The stream is now saved but <strong>not yet activated</strong>.</li>
<li>Click on “Edit rules” for the stream you just created. That will open a page where you can manage and test stream rules.</li>
<li>Choose how you want to evaluate the stream rules to decide which messages go into the stream:<ul>
<li><em>A message must match all of the following rules</em> (logical AND): Messages will only be routed into the stream if all rules in the
stream are fulfilled. This is the default behavior</li>
<li><em>A message must match at least one of the following rules</em> (logical OR): Messages will be routed into the stream if one or more
rules in the stream are fulfilled</li>
</ul>
</li>
<li>Add stream rules, by indicating the field that you want to check, and the condition that should satisfy. Try the rules against
some messages by loading them from an input or manually giving a message ID. Once you are satisfied with the results, click on “I’m done”.</li>
<li>The stream is still paused, click on the “Start stream” button to activate the stream.</li>
</ol>
</div>
<div class="section" id="index-sets">
<h3>Index Sets<a class="headerlink" href="#index-sets" title="Permalink to this headline">¶</a></h3>
<p>For starters, you should read <a class="reference internal" href="index.html#document-pages/configuration/index_model"><span class="doc">Index model</span></a> for a comprehensive description of the index set functionality in Graylog.</p>
<p>Every stream is assigned to an index set which controls how messages routed into that stream are being stored into Elasticsearch.
The stream overview in the web interface shows the assigned index set for each stream.</p>
<img alt="_images/stream_overview.png" src="http://res.fansdoc.com/graylog/_images/stream_overview.png" />
<p>Index sets can be assigned to a stream when creating the stream and changed later when editing the stream settings.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Graylog will not automatically copy messages into new Elasticsearch indices if another index set is being assigned to a stream.</p>
</div>
<img alt="_images/stream_create.png" src="http://res.fansdoc.com/graylog/_images/stream_create.png" />
<p>Graylog routes every message into the <strong>All messages</strong> stream by default, unless the message is removed from this stream with a pipeline rule (see <a class="reference internal" href="index.html#document-pages/pipelines"><span class="doc">Processing Pipelines</span></a>) or it’s routed into a stream marked with <strong>Remove matches from ‘All messages’ stream</strong>.</p>
<p>The latter is useful if messages should be stored with different settings than the ones in the <strong>Default index set</strong>, for example web server access logs should only be stored for 4 weeks while all other messages should be stored for 1 year.</p>
<div class="section" id="storage-requirements">
<h4>Storage requirements<a class="headerlink" href="#storage-requirements" title="Permalink to this headline">¶</a></h4>
<p>Graylog writes messages once for each index set into Elasticsearch. This means that if all streams are using the <strong>Default index set</strong>, each message will be written exactly once into Elasticsearch, no matter into how many streams the message has been sent.
This can be thought of a kind of de-duplication.</p>
<p>If some streams use other index sets and the <strong>Remove matches from ‘All messages’ stream</strong> setting is not enabled, messages will be written into Elasticsearch at least twice, once for the <strong>Default index set</strong> and once for the assigned index set.
This means that the same message will be stored in two or more indices in Elasticsearch with different index settings.</p>
<p>Unless you explicitly want to store messages multiple times in different Elasticsearch indices, either assign the <strong>Default index set</strong> to the respective streams or enable the <strong>Remove matches from ‘All messages’ stream</strong> setting for the respective streams.</p>
</div>
</div>
<div class="section" id="outputs">
<h3>Outputs<a class="headerlink" href="#outputs" title="Permalink to this headline">¶</a></h3>
<p>The stream output system allows you to forward every message that is routed into a stream to other destinations.</p>
<p>Outputs are managed globally (like message inputs) and not for single streams. You can create new outputs and activate them
for as many streams as you like. This way you can configure a forwarding destination once and select multiple streams to use it.</p>
<p>Graylog ships with default outputs and can be extended with <a class="reference internal" href="index.html#document-pages/plugins"><span class="doc">Plugins</span></a>.</p>
</div>
<div class="section" id="use-cases">
<h3>Use cases<a class="headerlink" href="#use-cases" title="Permalink to this headline">¶</a></h3>
<p>These are a few example use cases for streams:</p>
<ul class="simple">
<li>Forward a subset of messages to other data analysis or BI systems to reduce their license costs.</li>
<li>Monitor exception or error rates in your whole environment and broken down per subsystem.</li>
<li>Get a list of all failed SSH logins and use <em>quick values</em> to analyze which user names where affected.</li>
<li>Catch all HTTP POST requests to <code class="docutils literal notranslate"><span class="pre">/login</span></code> that were answered with a HTTP 302 and route them into a stream called
<em>Successful user logins</em>. Now get a chart of when users logged in and use <em>quick values</em> to get a list of users that performed
the most logins in the search time frame.</li>
</ul>
</div>
<div class="section" id="how-are-streams-processed-internally">
<h3>How are streams processed internally?<a class="headerlink" href="#how-are-streams-processed-internally" title="Permalink to this headline">¶</a></h3>
<p>Every message that comes in is matched against the rules of a stream. For messages satisfying <em>all</em> or
<em>at least one</em> of the stream rules (as configured in the stream), the internal ID of that stream is stored
in the <code class="docutils literal notranslate"><span class="pre">streams</span></code> array of the processed message.</p>
<p>All analysis methods and searches that are bound to streams can now easily narrow their operation by searching with a
<code class="docutils literal notranslate"><span class="pre">streams:[STREAM_ID]</span></code> limit. This is done automatically by Graylog and does not have to be provided by the user.</p>
<img alt="_images/internal_stream_processing.png" src="http://res.fansdoc.com/graylog/_images/internal_stream_processing.png" />
</div>
<div class="section" id="stream-processing-runtime-limits">
<h3>Stream Processing Runtime Limits<a class="headerlink" href="#stream-processing-runtime-limits" title="Permalink to this headline">¶</a></h3>
<p>An important step during the processing of a message is the stream classification. Every message is matched against the user-configured
stream rules. The message is added to the stream if all or any rules of a stream matches, depending on what the user chose. Applying
stream rules is done during the indexing of a message only, so the amount of time spent for the classification of a message is crucial
for the overall performance and message throughput the system can handle.</p>
<p>There are certain scenarios when a stream rule takes very long to match. When this happens for a number of messages, message processing
can stall, messages waiting for processing accumulate in memory and the whole system could become non-responsive. Messages are lost and
manual intervention would be necessary. This is the worst case scenario.</p>
<p>To prevent this, the runtime of stream rule matching is limited. When it is taking longer than the configured runtime limit, the process
of matching this exact message against the rules of this specific stream is aborted. Message processing in general and for this specific
message continues though. As the runtime limit needs to be configured pretty high (usually a magnitude higher as a regular stream rule
match takes), any excess of it is considered a fault and is recorded for this stream. If the number of recorded faults for a single stream
is higher than a configured threshold, the stream rule set of this stream is considered faulty and the stream is disabled. This is done
to protect the overall stability and performance of message processing. Obviously, this is a tradeoff and based on the assumption, that
the total loss of one or more messages is worse than a loss of stream classification for these.</p>
<p>There are scenarios where this might not be applicable or even detrimental. If there is a high fluctuation of the message load including
situations where the message load is much higher than the system can handle, overall stream matching can take longer than the configured
timeout. If this happens repeatedly, all streams get disabled. This is a clear indicator that your system is overutilized and not able
to handle the peak message load.</p>
<div class="section" id="how-to-configure-the-timeout-values-if-the-defaults-do-not-match">
<h4>How to configure the timeout values if the defaults do not match<a class="headerlink" href="#how-to-configure-the-timeout-values-if-the-defaults-do-not-match" title="Permalink to this headline">¶</a></h4>
<p>There are two configuration variables in the configuration file of the server, which influence the behavior of this functionality.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">stream_processing_timeout</span></code> defines the maximum amount of time the rules of a stream are able to spend. When this is exceeded, stream
rule matching for this stream is aborted and a fault is recorded. This setting is defined in milliseconds, the default is <code class="docutils literal notranslate"><span class="pre">2000</span></code> (2 seconds).</li>
<li><code class="docutils literal notranslate"><span class="pre">stream_processing_max_faults</span></code> is the maximum number of times a single stream can exceed this runtime limit. When it happens more often,
the stream is disabled until it is manually reenabled. The default for this setting is <code class="docutils literal notranslate"><span class="pre">3</span></code>.</li>
</ul>
</div>
<div class="section" id="what-could-cause-it">
<h4>What could cause it?<a class="headerlink" href="#what-could-cause-it" title="Permalink to this headline">¶</a></h4>
<p>If a single stream has been disabled and all others are doing well, the chances are high that one or more stream rules are performing bad under
certain circumstances. In most cases, this is related to stream rules which are utilizing regular expressions. For most other stream rules types
the general runtime is constant, while it varies very much for regular expressions, influenced by the regular expression itself and the input
matched against it. In some special cases, the difference between a match and a non-match of a regular expression can be in the order of 100
or even 1000. This is caused by a phenomenon called <em>catastrophic backtracking</em>. There are good write-ups about it on the web which will help
you understanding it.</p>
</div>
<div class="section" id="summary-how-do-i-solve-it">
<h4>Summary: How do I solve it?<a class="headerlink" href="#summary-how-do-i-solve-it" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li>Check the rules of the stream that is disabled for rules that could take very long (especially regular expressions).</li>
<li>Modify or delete those stream rules.</li>
<li>Re-enable the stream.</li>
</ol>
</div>
</div>
<div class="section" id="programmatic-access-via-the-rest-api">
<h3>Programmatic access via the REST API<a class="headerlink" href="#programmatic-access-via-the-rest-api" title="Permalink to this headline">¶</a></h3>
<p>Many organisations already run monitoring infrastructure that are able to alert operations staff when incidents are detected.
These systems are often capable of either polling for information on a regular schedule or being pushed new alerts - this article describes how to
use the Graylog Stream Alert API to poll for currently active alerts in order to further process them in third party products.</p>
<div class="section" id="checking-for-currently-active-alert-triggered-conditions">
<h4>Checking for currently active alert/triggered conditions<a class="headerlink" href="#checking-for-currently-active-alert-triggered-conditions" title="Permalink to this headline">¶</a></h4>
<p>Graylog stream alerts can currently be configured to send emails when one or more of the associated alert conditions evaluate to true. While
sending email solves many immediate problems when it comes to alerting, it can be helpful to gain programmatic access to the currently active alerts.</p>
<p>Each stream which has alerts configured also has a list of active alerts, which can potentially be empty if there were no alerts so far.
Using the stream’s ID, one can check the current state of the alert conditions associated with the stream using the authenticated API call:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">streams</span><span class="o">/&lt;</span><span class="n">streamid</span><span class="o">&gt;/</span><span class="n">alerts</span><span class="o">/</span><span class="n">check</span>
</pre></div>
</div>
<p>It returns a description of the configured conditions as well as a count of how many triggered the alert. This data can be used to for example
send SNMP traps in other parts of the monitoring system.</p>
<p>Sample JSON return value:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;total_triggered&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s2">&quot;results&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;condition&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;984d04d5-1791-4500-a17e-cd9621cc2ea7&quot;</span><span class="p">,</span>
        <span class="s2">&quot;in_grace&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-06-11T12:42:50.312Z&quot;</span><span class="p">,</span>
        <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;one_minute_rate&quot;</span><span class="p">,</span>
          <span class="s2">&quot;grace&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">&quot;backlog&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="s2">&quot;threshold_type&quot;</span><span class="p">:</span> <span class="s2">&quot;lower&quot;</span><span class="p">,</span>
          <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
          <span class="s2">&quot;threshold&quot;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">},</span>
        <span class="s2">&quot;creator_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;field_value&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;triggered&quot;</span><span class="p">:</span> <span class="n">false</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&quot;calculated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-06-12T13:44:20.704Z&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that the result is cached for 30 seconds.</p>
</div>
<div class="section" id="list-of-already-triggered-stream-alerts">
<h4>List of already triggered stream alerts<a class="headerlink" href="#list-of-already-triggered-stream-alerts" title="Permalink to this headline">¶</a></h4>
<p>Checking the current state of a stream’s alerts can be useful to trigger alarms in other monitoring systems, but if one wants to send more detailed
messages to operations, it can be very helpful to get more information about the current state of the stream, for example the list of all triggered
alerts since a certain timestamp.</p>
<p>This information is available per stream using the call:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>GET /streams/&lt;streamid&gt;/alerts?since=1402460923
</pre></div>
</div>
<p>The since parameter is a unix timestamp value. Its return value could be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;total&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s2">&quot;alerts&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;539878473004e72240a5c829&quot;</span><span class="p">,</span>
      <span class="s2">&quot;condition_id&quot;</span><span class="p">:</span> <span class="s2">&quot;984d04d5-1791-4500-a17e-cd9621cc2ea7&quot;</span><span class="p">,</span>
      <span class="s2">&quot;condition_parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;one_minute_rate&quot;</span><span class="p">,</span>
        <span class="s2">&quot;grace&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;backlog&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;threshold_type&quot;</span><span class="p">:</span> <span class="s2">&quot;lower&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
        <span class="s2">&quot;threshold&quot;</span><span class="p">:</span> <span class="mi">1</span>
      <span class="p">},</span>
      <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Field one_minute_rate had a mean of 0.0 in the last 1 minutes with trigger condition lower than 1.0. (Current grace time: 1 minutes)&quot;</span><span class="p">,</span>
      <span class="s2">&quot;triggered_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-06-11T15:39:51.780Z&quot;</span><span class="p">,</span>
      <span class="s2">&quot;stream_id&quot;</span><span class="p">:</span> <span class="s2">&quot;53984d8630042acb39c79f84&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Using this information more detailed messages can be produced, since the response contains more detailed information about the nature of the
alert, as well as the number of alerts triggered since the timestamp provided.</p>
<p>Note that currently a maximum of 300 alerts will be returned.</p>
</div>
</div>
<div class="section" id="faqs">
<h3>FAQs<a class="headerlink" href="#faqs" title="Permalink to this headline">¶</a></h3>
<div class="section" id="using-regular-expressions-for-stream-matching">
<h4>Using regular expressions for stream matching<a class="headerlink" href="#using-regular-expressions-for-stream-matching" title="Permalink to this headline">¶</a></h4>
<p>Stream rules support matching field values using regular expressions.
Graylog uses the <a class="reference external" href="http://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html">Java Pattern class</a> to execute regular expressions.</p>
<p>For the individual elements of regular expression syntax, please refer to Oracle’s documentation, however the syntax largely follows the familiar
regular expression languages in widespread use today and will be familiar to most.</p>
<p>However, one key question that is often raised is matching a string in case insensitive manner. Java regular expressions are case sensitive by
default. Certain flags, such as the one to ignore case sensitivity can either be set in the code, or as an inline flag in the regular expression.</p>
<p>To for example route every message that matches the browser name in the following user agent string:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Mozilla</span><span class="o">/</span><span class="mf">5.0</span> <span class="p">(</span><span class="n">Macintosh</span><span class="p">;</span> <span class="n">Intel</span> <span class="n">Mac</span> <span class="n">OS</span> <span class="n">X</span> <span class="mi">10_9_1</span><span class="p">)</span> <span class="n">AppleWebKit</span><span class="o">/</span><span class="mf">537.36</span> <span class="p">(</span><span class="n">KHTML</span><span class="p">,</span> <span class="n">like</span> <span class="n">Gecko</span><span class="p">)</span> <span class="n">Chrome</span><span class="o">/</span><span class="mf">32.0</span><span class="o">.</span><span class="mf">1700.107</span> <span class="n">Safari</span><span class="o">/</span><span class="mf">537.36</span>
</pre></div>
</div>
<p>the regular expression <code class="docutils literal notranslate"><span class="pre">.*applewebkit.*</span></code> will not match because it is case sensitive.
In order to match the expression using any combination of upper- and lowercase characters use the <code class="docutils literal notranslate"><span class="pre">(?i)</span></code> flag as such:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(?i).*applewebkit.*
</pre></div>
</div>
<p>Most of the other flags supported by Java are rarely used in the context of matching stream rules or extractors, but if you need them their use
is documented on the same Javadoc page by Oracle.</p>
</div>
<div class="section" id="can-i-add-messages-to-a-stream-after-they-were-processed-and-stored">
<h4>Can I add messages to a stream after they were processed and stored?<a class="headerlink" href="#can-i-add-messages-to-a-stream-after-they-were-processed-and-stored" title="Permalink to this headline">¶</a></h4>
<p>No. Currently there is no way to re-process or re-match messages into streams.</p>
<p>Only new messages are routed into the current set of streams.</p>
</div>
<div class="section" id="can-i-write-own-outputs-alert-conditions-or-notifications">
<h4>Can I write own outputs, alert conditions or notifications?<a class="headerlink" href="#can-i-write-own-outputs-alert-conditions-or-notifications" title="Permalink to this headline">¶</a></h4>
<p>Yes. Please refer to the <a class="reference internal" href="index.html#document-pages/plugins"><span class="doc">Plugins</span></a> documentation page.</p>
</div>
</div>
</div>
<span id="document-pages/streams/alerts"></span><div class="section" id="alerts">
<span id="id1"></span><h2>Alerts<a class="headerlink" href="#alerts" title="Permalink to this headline">¶</a></h2>
<p>Alerts are always based on streams. You can define conditions that trigger alerts. For example whenever the stream <em>All production exceptions</em> has more than 50 messages per minute or when the field <em>milliseconds</em> had a too high standard deviation in the last five minutes.</p>
<p>Navigate to the <em>alerts</em> section from the top navigation bar to see already configured alerts, alerts that were fired in the past or to configure new alert conditions and notifications.</p>
<p>Graylog ships with default <em>alert conditions</em> and <em>alert notifications</em>, and both can be extended with <a class="reference internal" href="index.html#plugins"><span class="std std-ref">Plugins</span></a>.</p>
<div class="section" id="alert-states">
<h3>Alert states<a class="headerlink" href="#alert-states" title="Permalink to this headline">¶</a></h3>
<p>Graylog alerts are periodical searches that can trigger some notifications when a defined condition is satisfied. Since Graylog 2.2.0, alerts can have two states:</p>
<dl class="docutils">
<dt>Unresolved</dt>
<dd>Alerts have an unresolved state while the defined condition is satisfied. New alerts are triggered in this state, and they also execute the notifications attached to the stream. These alerts usually require an action on your side.</dd>
<dt>Resolved</dt>
<dd>Graylog automatically resolves alerts once their alert condition is no longer satisfied. This is the final state of an alert, as Graylog will create a new alert if the alert condition is satisfied again in the future. After an alert is resolved, Graylog will apply the <em>grace period</em> you defined in the alert condition, waiting a certain time before creating a new alert for this alert condition.</dd>
</dl>
</div>
<div class="section" id="alerts-overview">
<h3>Alerts overview<a class="headerlink" href="#alerts-overview" title="Permalink to this headline">¶</a></h3>
<p>The alerts overview page lets you find out which alerts currently require your attention in an easy way, while also allowing you to check alerts that were triggered in the past and are now resolved.</p>
<img alt="_images/alerts_alerts_overview.png" src="http://res.fansdoc.com/graylog/_images/alerts_alerts_overview.png" />
<p>You can click on an alert name at any time to see more details about it.</p>
<div class="section" id="alert-details">
<h4>Alert details<a class="headerlink" href="#alert-details" title="Permalink to this headline">¶</a></h4>
<p>From the alert details page you can quickly check the reason why an alert was triggered, the status and configuration of notifications sent by Graylog, and the search results in the time frame when the alert was unresolved.</p>
<img alt="_images/alerts_alert_details.png" src="http://res.fansdoc.com/graylog/_images/alerts_alert_details.png" />
<div class="section" id="alert-timeline">
<h5>Alert timeline<a class="headerlink" href="#alert-timeline" title="Permalink to this headline">¶</a></h5>
<p>From within the alert details page, you can see a timeline of what occurred since Graylog detected an alert condition was satisfied. This includes the time when Graylog evaluated the condition that triggered the alert, the time when notifications were executed and the results of executing them, and the time when the alert was resolved (if that is the case).</p>
</div>
<div class="section" id="triggered-notifications">
<h5>Triggered notifications<a class="headerlink" href="#triggered-notifications" title="Permalink to this headline">¶</a></h5>
<p>Sometimes sending alert notifications may fail for some reason. Graylog includes details of the configured notifications at the time an alert was triggered and the result of executing those notifications, helping you to debug and fix any problems that may arise.</p>
</div>
<div class="section" id="search-results">
<h5>Search results<a class="headerlink" href="#search-results" title="Permalink to this headline">¶</a></h5>
<p>You can quickly look at messages received while the alert was unresolved from within the alert details page. It is also possible to open that search in the search page, allowing you to further analyse the problem at hand.</p>
</div>
</div>
</div>
<div class="section" id="conditions">
<h3>Conditions<a class="headerlink" href="#conditions" title="Permalink to this headline">¶</a></h3>
<p>The first step of managing alerts with Graylog is defining alert conditions.</p>
<p>Alert conditions specify searches that Graylog will execute periodically, and also indicate under which circumstances Graylog should consider those search results as exceptional, triggering an alert in that case.</p>
<p>Click on <em>Manage conditions</em> in the <em>Alerts</em> section to see your current conditions details, modify them, or add new ones. Clicking on an alert condition’s title will open a detail page where you can also see the notifications that will be executed when the condition is satisfied.</p>
<img alt="_images/alerts_alert_condition.png" src="http://res.fansdoc.com/graylog/_images/alerts_alert_condition.png" />
<div class="section" id="alert-condition-types-explained">
<h4>Alert condition types explained<a class="headerlink" href="#alert-condition-types-explained" title="Permalink to this headline">¶</a></h4>
<p>In this section we explain what the default alert conditions included in Graylog do, and how to configure them. Since Graylog 2.2.0, alert conditions can be extended via <a class="reference internal" href="index.html#plugins"><span class="std std-ref">Plugins</span></a>, you can find more types in the <a class="reference external" href="http://marketplace.graylog.org">Graylog Marketplace</a> or even create your own.</p>
<div class="section" id="message-count-condition">
<h5>Message count condition<a class="headerlink" href="#message-count-condition" title="Permalink to this headline">¶</a></h5>
<p>This condition triggers whenever the stream received more than X messages in the last Y minutes. Perfect for example to be alerted when there are many exceptions on your platform. Create a stream that catches every error message and be alerted when that stream exceeds normal throughput levels.</p>
</div>
<div class="section" id="field-aggregation-condition">
<h5>Field aggregation condition<a class="headerlink" href="#field-aggregation-condition" title="Permalink to this headline">¶</a></h5>
<p>This condition triggers whenever the result of a statistical computation of a numerical message field in the stream is higher or lower than a given threshold. Perfect to monitor performance problems: <em>Be alerted whenever the standard deviation of the response time of your application was higher than X in the last Y minutes.</em></p>
</div>
<div class="section" id="field-content-condition">
<h5>Field content condition<a class="headerlink" href="#field-content-condition" title="Permalink to this headline">¶</a></h5>
<p>This condition triggers whenever the stream received at least one message since the last alert run that has a field set to a given value. <em>Get an alert when a message with the field `type` set to `security` arrives in the stream.</em></p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">We do not recommend to run this on analyzed fields like <code class="docutils literal notranslate"><span class="pre">message</span></code> or <code class="docutils literal notranslate"><span class="pre">full_message</span></code> because it is broken down to terms and you might get unexpected alerts. For example a check for <cite>security</cite> would also alert if a message with the field set to <cite>no security</cite> is received because it was broken down to <cite>no</cite> and <cite>security</cite>. This only happens on the analyzed <code class="docutils literal notranslate"><span class="pre">message</span></code> and <code class="docutils literal notranslate"><span class="pre">full_message</span></code> in Graylog.</p>
</div>
<p>Please also take note that only a single alert is raised for this condition during the alerting interval, although multiple messages containing the given value may have been received since the last alert. The alerting interval is the time that is configured as <code class="docutils literal notranslate"><span class="pre">alert_check_interval</span></code> in the Graylog <code class="docutils literal notranslate"><span class="pre">server.conf</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="notifications">
<h3>Notifications<a class="headerlink" href="#notifications" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Starting in Graylog 2.2.0, alert notifications are only triggered <strong>once</strong>, just when a new alert is created. As long as the alert is unresolved or in grace period, <strong>Graylog will not send further notifications</strong>. This will help you reducing the noise and annoyance of getting notified way too often when a problem persists for a while. Should your setup require repeated notifications you can enable this during the creation of the alert condition since Graylog 2.2.2.</p>
</div>
<p>Notifications (previously known as Alarm Callbacks) enable you to take actions on external systems when an alert is triggered. In this way, you can rely on Graylog to know when something is not right in your logs.</p>
<p>Click on <em>Manage notifications</em> in the <em>Alerts</em> section to see your current notification details, modify them, test them, or add new ones. Remember that notifications are associated to streams, so <strong>all conditions evaluated in a stream will share the same notifications</strong>.</p>
<img alt="_images/alerts_alert_notification.png" src="http://res.fansdoc.com/graylog/_images/alerts_alert_notification.png" />
<div class="section" id="alert-notifications-types-explained">
<h4>Alert notifications types explained<a class="headerlink" href="#alert-notifications-types-explained" title="Permalink to this headline">¶</a></h4>
<p>In this section we explain what the default alert notifications included in Graylog do, and how to configure them. Alert notifications are meant to be extensible through <a class="reference internal" href="index.html#plugins"><span class="std std-ref">Plugins</span></a>, you can find more types in the <a class="reference external" href="http://marketplace.graylog.org">Graylog Marketplace</a> or even create your own.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">In previous versions of Graylog (before 2.2.0), the email alarm notification was used, when alert conditions existed for a stream, but no alarm notification had been created before. This has been changed, so that if there is no alarm notification existing for a stream, alerts will be shown in the interface but no other action is performed. To help users coming from earlier version, there is a migration job which is being run once, creating the email alarm notification explicitly for qualifying streams, so the old behavior is preserved.</p>
</div>
<div class="section" id="email-alert-notification">
<h5>Email alert notification<a class="headerlink" href="#email-alert-notification" title="Permalink to this headline">¶</a></h5>
<p>The email alert notification can be used to send an email to the configured alert receivers when the conditions are triggered.</p>
<p>Make sure to check the <a class="reference internal" href="index.html#email-config"><span class="std std-ref">email-related configuration settings</span></a> in the Graylog configuration file.</p>
<p>Three configuration options are available for the alert notification to customize the email that will be sent.
The <em>email body</em> and <em>email subject</em> are <a class="reference external" href="https://github.com/DJCordhose/jmte">JMTE</a> templates. JMTE is a minimal template engine that supports variables, loops and conditions. See the <a class="reference external" href="https://cdn.rawgit.com/DJCordhose/jmte/master/doc/index.html">JMTE documentation</a> for a language reference.</p>
<p>We expose the following objects to the templates.</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">stream</span></code></dt>
<dd><p class="first">The stream this alert belongs to.</p>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">stream.id</span></code> ID of the stream</li>
<li><code class="docutils literal notranslate"><span class="pre">stream.title</span></code> title of the stream</li>
<li><code class="docutils literal notranslate"><span class="pre">stream.description</span></code> stream description</li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stream_url</span></code></dt>
<dd>A string that contains the HTTP URL to the stream.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">check_result</span></code></dt>
<dd><p class="first">The check result object for this stream.</p>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">check_result.triggeredCondition</span></code> string representation of the triggered alert condition</li>
<li><code class="docutils literal notranslate"><span class="pre">check_result.triggeredAt</span></code> date when this condition was triggered</li>
<li><code class="docutils literal notranslate"><span class="pre">check_result.resultDescription</span></code> text that describes the check result</li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backlog</span></code></dt>
<dd>A list of <code class="docutils literal notranslate"><span class="pre">message</span></code> objects. Can be used to iterate over the messages via <code class="docutils literal notranslate"><span class="pre">foreach</span></code>.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">message</span></code> (only available via iteration over the <code class="docutils literal notranslate"><span class="pre">backlog</span></code> object)</dt>
<dd><p class="first">The message object has several fields with details about the message. When using the <code class="docutils literal notranslate"><span class="pre">message</span></code> object without accessing any fields, the <code class="docutils literal notranslate"><span class="pre">toString()</span></code> method of the underlying Java object is used to display it.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">message.id</span></code> autogenerated message id</li>
<li><code class="docutils literal notranslate"><span class="pre">message.message</span></code> the actual message text</li>
<li><code class="docutils literal notranslate"><span class="pre">message.source</span></code> the source of the message</li>
<li><code class="docutils literal notranslate"><span class="pre">message.timestamp</span></code> the message timestamp</li>
<li><code class="docutils literal notranslate"><span class="pre">message.fields</span></code> map of key value pairs for all the fields defined in the message</li>
</ul>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">message.fields</span></code> fields can be useful to get access to arbitrary fields that are defined in the message. For example <code class="docutils literal notranslate"><span class="pre">message.fields.full_message</span></code> would return the <code class="docutils literal notranslate"><span class="pre">full_message</span></code> of a GELF message.</p>
</dd>
</dl>
<img alt="_images/alerts_email_notification.png" src="http://res.fansdoc.com/graylog/_images/alerts_email_notification.png" />
</div>
<div class="section" id="http-alert-notification">
<h5>HTTP alert notification<a class="headerlink" href="#http-alert-notification" title="Permalink to this headline">¶</a></h5>
<p>The HTTP alert notification lets you configure an endpoint that will be called when the alert is triggered.</p>
<p>Graylog will send a POST request to the notification URL including information about the alert. Here is an example of the payload included in a notification:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;check_result&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;result_description&quot;</span><span class="p">:</span> <span class="s2">&quot;Stream had 2 messages in the last 1 minutes with trigger condition more than 1 messages. (Current grace time: 1 minutes)&quot;</span><span class="p">,</span>
        <span class="s2">&quot;triggered_condition&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;5e7a9c8d-9bb1-47b6-b8db-4a3a83a25e0c&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;MESSAGE_COUNT&quot;</span><span class="p">,</span>
            <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-09-10T09:44:10.552Z&quot;</span><span class="p">,</span>
            <span class="s2">&quot;creator_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
            <span class="s2">&quot;grace&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;grace&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;threshold&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;threshold_type&quot;</span><span class="p">:</span> <span class="s2">&quot;more&quot;</span><span class="p">,</span>
                <span class="s2">&quot;backlog&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="mi">1</span>
            <span class="p">},</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;time: 1, threshold_type: more, threshold: 1, grace: 1&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type_string&quot;</span><span class="p">:</span> <span class="s2">&quot;MESSAGE_COUNT&quot;</span><span class="p">,</span>
            <span class="s2">&quot;backlog&quot;</span><span class="p">:</span> <span class="mi">5</span>
        <span class="p">},</span>
        <span class="s2">&quot;triggered_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-09-10T09:45:54.749Z&quot;</span><span class="p">,</span>
        <span class="s2">&quot;triggered&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
        <span class="s2">&quot;matching_messages&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="s2">&quot;graylog2_7&quot;</span><span class="p">,</span>
                <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;WARN: System is failing&quot;</span><span class="p">,</span>
                <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;gl2_remote_ip&quot;</span><span class="p">:</span> <span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;gl2_remote_port&quot;</span><span class="p">:</span> <span class="mi">56498</span><span class="p">,</span>
                    <span class="s2">&quot;gl2_source_node&quot;</span><span class="p">:</span> <span class="s2">&quot;41283fec-36b4-4352-a859-7b3d79846b3c&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;gl2_source_input&quot;</span><span class="p">:</span> <span class="s2">&quot;55f15092bee8e2841898eb53&quot;</span>
                <span class="p">},</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;b7b08150-57a0-11e5-b2a2-d6b4cd83d1d5&quot;</span><span class="p">,</span>
                <span class="s2">&quot;stream_ids&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;55f1509dbee8e2841898eb64&quot;</span>
                <span class="p">],</span>
                <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span>
                <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-09-10T09:45:49.284Z&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="s2">&quot;graylog2_7&quot;</span><span class="p">,</span>
                <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;ERROR: This is an example error message&quot;</span><span class="p">,</span>
                <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;gl2_remote_ip&quot;</span><span class="p">:</span> <span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;gl2_remote_port&quot;</span><span class="p">:</span> <span class="mi">56481</span><span class="p">,</span>
                    <span class="s2">&quot;gl2_source_node&quot;</span><span class="p">:</span> <span class="s2">&quot;41283fec-36b4-4352-a859-7b3d79846b3c&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;gl2_source_input&quot;</span><span class="p">:</span> <span class="s2">&quot;55f15092bee8e2841898eb53&quot;</span>
                <span class="p">},</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;afd71342-57a0-11e5-b2a2-d6b4cd83d1d5&quot;</span><span class="p">,</span>
                <span class="s2">&quot;stream_ids&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;55f1509dbee8e2841898eb64&quot;</span>
                <span class="p">],</span>
                <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span>
                <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-09-10T09:45:36.116Z&quot;</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="s2">&quot;stream&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;creator_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
        <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">&quot;matching_type&quot;</span><span class="p">:</span> <span class="s2">&quot;AND&quot;</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;test stream&quot;</span><span class="p">,</span>
        <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-09-10T09:42:53.833Z&quot;</span><span class="p">,</span>
        <span class="s2">&quot;disabled&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;rules&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;gl2_source_input&quot;</span><span class="p">,</span>
                <span class="s2">&quot;stream_id&quot;</span><span class="p">:</span> <span class="s2">&quot;55f1509dbee8e2841898eb64&quot;</span><span class="p">,</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;55f150b5bee8e2841898eb7f&quot;</span><span class="p">,</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;inverted&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;55f15092bee8e2841898eb53&quot;</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="s2">&quot;alert_conditions&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;creator_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
                <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-09-10T09:44:10.552Z&quot;</span><span class="p">,</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;5e7a9c8d-9bb1-47b6-b8db-4a3a83a25e0c&quot;</span><span class="p">,</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;message_count&quot;</span><span class="p">,</span>
                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;grace&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s2">&quot;threshold&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s2">&quot;threshold_type&quot;</span><span class="p">:</span> <span class="s2">&quot;more&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;backlog&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                    <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="mi">1</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;55f1509dbee8e2841898eb64&quot;</span><span class="p">,</span>
        <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content_pack&quot;</span><span class="p">:</span> <span class="n">null</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="script-alert-notification">
<span id="alerts-script-alert"></span><h5>Script alert notification<a class="headerlink" href="#script-alert-notification" title="Permalink to this headline">¶</a></h5>
<p>The Script Alert Notification lets you configure a script that will be executed when the alert is triggered.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Script Alert Notification is an Enterprise Integrations plugin feature and thus requires an <a class="reference internal" href="index.html#enterprise-features"><span class="std std-ref">Enterprise license</span></a>.</p>
</div>
<img alt="_images/alerts_script_notification.png" src="http://res.fansdoc.com/graylog/_images/alerts_script_notification.png" />
<p>These are the supported configuration options.</p>
<dl class="docutils">
<dt>Script Path</dt>
<dd>The path to where the script is located. Must me within the <a class="reference internal" href="index.html#config-script-alert"><span class="std std-ref">permitted script path</span></a> (which is customizable).</dd>
<dt>Script Timeout</dt>
<dd>The maximum time (in milliseconds) the script will be allowed to execute before being forcefully terminated.</dd>
<dt>Script Arguments</dt>
<dd><p class="first">String of parameters in which the delimiters are either a space-delimited or a new-line. The following argument variables may be used:</p>
<dl class="last docutils">
<dt>Stream</dt>
<dd><p class="first">The stream this alert belongs to.</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">stream_id</span></code> ID of the stream</li>
<li><code class="docutils literal notranslate"><span class="pre">stream_name</span></code> title of the stream</li>
<li><code class="docutils literal notranslate"><span class="pre">stream_description</span></code> stream description</li>
<li><code class="docutils literal notranslate"><span class="pre">stream_url</span></code> a string that contains the URL to the view the relevant messages for the alert. Make sure to set the <a class="reference internal" href="index.html#config-script-alert"><span class="std std-ref">HTTP URL</span></a> configuration parameter, as there is no default.</li>
</ul>
</div></blockquote>
</dd>
<dt>Alert</dt>
<dd><p class="first">The check result object for this stream.</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">alert_description</span></code> text that describes the check result</li>
<li><code class="docutils literal notranslate"><span class="pre">alert_triggered_at</span></code> date when this condition was triggered</li>
</ul>
</div></blockquote>
</dd>
<dt>Condition</dt>
<dd><p class="first">The available conditions to request are</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">condition_id</span></code> ID of the condition</li>
<li><code class="docutils literal notranslate"><span class="pre">condition_description</span></code> description of the condition</li>
<li><code class="docutils literal notranslate"><span class="pre">condition_title</span></code> title of the condition</li>
<li><code class="docutils literal notranslate"><span class="pre">condition_type</span></code> type of condition</li>
<li><code class="docutils literal notranslate"><span class="pre">condition_grace</span></code> grace period for the condition</li>
<li><code class="docutils literal notranslate"><span class="pre">condition_repeat_notification</span></code> repeat notification of the script</li>
</ul>
</div></blockquote>
</dd>
</dl>
</dd>
<dt>Send Alert Data Through STDIN</dt>
<dd><p class="first">Sends JSON alert data through standard in. You can use a JSON parser in your script.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;stream_id&quot;</span><span class="p">:</span> <span class="s2">&quot;000000000000000000000001&quot;</span><span class="p">,</span>
  <span class="s2">&quot;stream_name&quot;</span><span class="p">:</span> <span class="s2">&quot;All messages&quot;</span><span class="p">,</span>
  <span class="s2">&quot;stream_description&quot;</span><span class="p">:</span> <span class="s2">&quot;Stream containing all messages&quot;</span><span class="p">,</span>
  <span class="s2">&quot;stream_url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:8080///streams/000000000000000000000001/messages?rangetype=absolute&amp;from=2019-01-25T20:57:50.793Z&amp;to=2019-01-25T21:02:50.793Z&amp;q=*&quot;</span><span class="p">,</span>
  <span class="s2">&quot;alert_description&quot;</span><span class="p">:</span> <span class="s2">&quot;Stream received messages matching &lt;has_field:</span><span class="se">\&quot;</span><span class="s2">true</span><span class="se">\&quot;</span><span class="s2">&gt; (Current grace time: 0 minutes)&quot;</span><span class="p">,</span>
  <span class="s2">&quot;alert_triggered_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2019-01-25T21:02:50.793Z&quot;</span><span class="p">,</span>
  <span class="s2">&quot;condition_id&quot;</span><span class="p">:</span> <span class="s2">&quot;ea9fcdff-2037-44f9-801e-099bf4bb3dbd&quot;</span><span class="p">,</span>
  <span class="s2">&quot;condition_description&quot;</span><span class="p">:</span> <span class="s2">&quot;field: has_field, value: true, grace: 0, repeat notifications: false&quot;</span><span class="p">,</span>
  <span class="s2">&quot;condition_title&quot;</span><span class="p">:</span> <span class="s2">&quot;has_field&quot;</span><span class="p">,</span>
  <span class="s2">&quot;condition_type&quot;</span><span class="p">:</span> <span class="s2">&quot;field_content_value&quot;</span><span class="p">,</span>
  <span class="s2">&quot;condition_grace&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s2">&quot;condition_parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;backlog&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;repeat_notifications&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;has_field&quot;</span><span class="p">,</span>
    <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
    <span class="s2">&quot;grace&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;condition_repeat_notifications&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
  <span class="s2">&quot;message_backlog&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;has_field&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
      <span class="s2">&quot;gl2_remote_ip&quot;</span><span class="p">:</span> <span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span>
      <span class="s2">&quot;gl2_remote_port&quot;</span><span class="p">:</span> <span class="mi">56246</span><span class="p">,</span>
      <span class="s2">&quot;streams&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;000000000000000000000001&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;gl2_source_node&quot;</span><span class="p">:</span> <span class="s2">&quot;e065896b-8a9a-4f45-83f2-e740525ed035&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;92839500-20e4-11e9-8175-0637e3f7ecfc&quot;</span><span class="p">,</span>
      <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;example.org&quot;</span><span class="p">,</span>
      <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello there&quot;</span><span class="p">,</span>
      <span class="s2">&quot;gl2_source_input&quot;</span><span class="p">:</span> <span class="s2">&quot;5c2e99687a90e30a3512f766&quot;</span><span class="p">,</span>
      <span class="s2">&quot;facility&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
      <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2019-01-25T21:02:49.423Z&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;has_field&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
      <span class="s2">&quot;gl2_remote_ip&quot;</span><span class="p">:</span> <span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span>
      <span class="s2">&quot;gl2_remote_port&quot;</span><span class="p">:</span> <span class="mi">56245</span><span class="p">,</span>
      <span class="s2">&quot;streams&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;000000000000000000000001&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;gl2_source_node&quot;</span><span class="p">:</span> <span class="s2">&quot;e065896b-8a9a-4f45-83f2-e740525ed035&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;928087c0-20e4-11e9-8175-0637e3f7ecfc&quot;</span><span class="p">,</span>
      <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;example.org&quot;</span><span class="p">,</span>
      <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello there&quot;</span><span class="p">,</span>
      <span class="s2">&quot;gl2_source_input&quot;</span><span class="p">:</span> <span class="s2">&quot;5c2e99687a90e30a3512f766&quot;</span><span class="p">,</span>
      <span class="s2">&quot;facility&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
      <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2019-01-25T21:02:49.403Z&quot;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&quot;message_backlog_size&quot;</span><span class="p">:</span> <span class="mi">5</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Script Alert Notification success is determined by its exit value; success equals zero.
Any non-zero exit value will cause it to fail.
Returning any error text through STDERR will also cause the alarm callback to fail.</p>
<p>Here is a sample Python script that shows all of the supported Script Alert Notification
functionality (argument parsing, STDIN JSON parsing, STDOUT, exit values, and returning an exit value).:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>


<span class="c1"># Function that prints text to standard error</span>
<span class="k">def</span> <span class="nf">print_stderr</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="c1"># Main function</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>

    <span class="c1"># Print out all input arguments.</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;All Arguments Passed In: &quot;</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Stream Name: &quot;</span> <span class="o">+</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Stream Description: &quot;</span> <span class="o">+</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Alert Triggered At: &quot;</span> <span class="o">+</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Turn stdin.readlines() array into a string</span>
    <span class="n">std_in_string</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">readlines</span><span class="p">())</span>

    <span class="c1"># Load JSON</span>
    <span class="n">alert_object</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">std_in_string</span><span class="p">)</span>

    <span class="c1"># Extract some values from the JSON.</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Values from JSON: </span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Stream ID: &quot;</span> <span class="o">+</span> <span class="n">alert_object</span><span class="p">[</span><span class="s2">&quot;stream_id&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Stream Name: &quot;</span> <span class="o">+</span> <span class="n">alert_object</span><span class="p">[</span><span class="s2">&quot;stream_name&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Alert Triggered At: &quot;</span> <span class="o">+</span> <span class="n">alert_object</span><span class="p">[</span><span class="s2">&quot;alert_triggered_at&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Extract Message Backlog field from JSON.</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Fields:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">alert_object</span><span class="p">[</span><span class="s2">&quot;message_backlog&quot;</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">message</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Field: &quot;</span> <span class="o">+</span> <span class="n">field</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Value: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="n">field</span><span class="p">]))</span>

    <span class="c1"># Write to stderr if desired</span>
    <span class="c1"># print_stderr(&quot;Test return through standard error&quot;)</span>

    <span class="c1"># Return an exit value. Zero is success, non-zero indicates failure.</span>
    <span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<span id="document-pages/dashboards"></span><div class="section" id="dashboards">
<span id="id1"></span><h2>Dashboards<a class="headerlink" href="#dashboards" title="Permalink to this headline">¶</a></h2>
<div class="section" id="why-dashboards-matter">
<h3>Why dashboards matter<a class="headerlink" href="#why-dashboards-matter" title="Permalink to this headline">¶</a></h3>
<p>Using dashboards allows you to build pre-defined views on your data to always have everything important
just one click away.</p>
<p>Sometimes it takes domain knowledge to be able to figure out the search queries
to get the correct results for your specific applications. People with the required domain knowledge
can define the search query once and then display the results on a dashboard to share them with co-workers,
managers, or even sales and marketing departments.</p>
<p>This guide will take you through the process of creating dashboards and storing information on them.
At the end you will have a dashboard with automatically updating information that you can share with
anybody or just a subset of people based on permissions.</p>
<img alt="_images/dashboards_1.png" src="http://res.fansdoc.com/graylog/_images/dashboards_1.png" />
</div>
<div class="section" id="how-to-use-dashboards">
<h3>How to use dashboards<a class="headerlink" href="#how-to-use-dashboards" title="Permalink to this headline">¶</a></h3>
<div class="section" id="creating-an-empty-dashboard">
<h4>Creating an empty dashboard<a class="headerlink" href="#creating-an-empty-dashboard" title="Permalink to this headline">¶</a></h4>
<p>Navigate to the <em>Dashboards</em> section using the link in the top menu bar of your Graylog web interface.
The page is listing all dashboards that you are allowed to view. (More on permissions later.) Hit the
<em>Create dashboard</em> button to create a new empty dashboard.</p>
<p>The only required information is a <em>title</em> and a <em>description</em> of the new dashboard. Use a specific
but not too long title so people can easily see what to expect on the dashboard. The description can be
a bit longer and could contain more detailed information about the displayed data or how it is collected.</p>
<p>Hit the <em>Create</em> button to create the dashboard. You should now see your new dashboard on the dashboards
overview page. Click on the title of your new dashboard to see it. Next, we will be adding widgets to the
dashboard we have just created.</p>
<img alt="_images/dashboards_2.png" src="http://res.fansdoc.com/graylog/_images/dashboards_2.png" />
</div>
<div class="section" id="adding-widgets">
<h4>Adding widgets<a class="headerlink" href="#adding-widgets" title="Permalink to this headline">¶</a></h4>
<p>You should have your empty dashboard in front of you. Let’s add some widgets! You can add search result
information to dashboards with a couple of clicks. The following search result types can be added to
dashboards:</p>
<blockquote>
<div><ul class="simple">
<li>Search result counts</li>
<li>Search result histogram charts</li>
<li>Statistical values</li>
<li>Field value charts</li>
<li>Stacked charts</li>
<li>Quick values results</li>
</ul>
</div></blockquote>
<p>You can learn more about the different widget types in <a class="reference internal" href="#widget-types"><span class="std std-ref">Widget types explained</span></a>.</p>
<p>Once you can see the results of your search, you will see buttons with the “Add to dashboard” text, that
will allow you to select the dashboard where the widget will be displayed, and configure the widget.</p>
<img alt="_images/dashboards_3.png" src="http://res.fansdoc.com/graylog/_images/dashboards_3.png" />
<img alt="_images/dashboards_4.png" src="http://res.fansdoc.com/graylog/_images/dashboards_4.png" />
</div>
</div>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<p>It is strongly recommended to read the getting started guide on basic searches and analysis first. This
will make the following examples more obvious for you.</p>
<blockquote>
<div><ul class="simple">
<li><strong>Top log sources today</strong><ul>
<li>Example search: <code class="docutils literal notranslate"><span class="pre">*</span></code>, timeframe: Last 24 hours</li>
<li>Expand the <code class="docutils literal notranslate"><span class="pre">source</span></code> field in the sidebar and hit <em>Quick values</em></li>
<li>Add quick values to dashboard</li>
</ul>
</li>
<li><strong>Number of exceptions in a given app today</strong><ul>
<li>Example search: <code class="docutils literal notranslate"><span class="pre">source:myapp</span> <span class="pre">AND</span> <span class="pre">Exception</span></code>, timeframe: Last 24 hours</li>
<li>Add search result count to dashboard</li>
</ul>
</li>
<li><strong>Response time chart of a given app</strong><ul>
<li>Example search: <code class="docutils literal notranslate"><span class="pre">source:myapp2</span></code>, any timeframe you want</li>
<li>Expand a field representing the response time of requests in the sidebar and hit <em>Generate chart</em></li>
<li>Add chart to dashboard</li>
</ul>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="widgets-from-streams">
<h3>Widgets from streams<a class="headerlink" href="#widgets-from-streams" title="Permalink to this headline">¶</a></h3>
<p>You can of course also add widgets from stream search results. Every widget added this way will always
be bound to streams. If you have a stream that contains every SSH login you can just search for everything
(<code class="docutils literal notranslate"><span class="pre">*</span></code>) in that stream and store the result count as <em>SSH logins</em> on a dashboard.</p>
</div>
<div class="section" id="result">
<h3>Result<a class="headerlink" href="#result" title="Permalink to this headline">¶</a></h3>
<p>You should now see widgets on your dashboard. You will learn how to modify the dashboard, and edit widgets
in the next chapter.</p>
<img alt="_images/dashboards_1.png" src="http://res.fansdoc.com/graylog/_images/dashboards_1.png" />
</div>
<div class="section" id="widget-types-explained">
<span id="widget-types"></span><h3>Widget types explained<a class="headerlink" href="#widget-types-explained" title="Permalink to this headline">¶</a></h3>
<p>Graylog supports a wide variety of widgets that allow you to quickly visualize data from your logs.
This section intends to give you some information to better understand each widget type, and how they can
help you to see relevant details from the many logs you receive.</p>
<div class="section" id="search-result-counts">
<h4>Search result counts<a class="headerlink" href="#search-result-counts" title="Permalink to this headline">¶</a></h4>
<p>This kind of widget includes a count of the number of search results for a given search. It can help you to
quickly visualize things like the number of exceptions an application logs, or the number of requests
your site receives.</p>
<p>All search result counts created with a relative time frame can additionally display trend information. The
trend is calculated by comparing the count for the given time frame, with the one resulting from going further
back the same amount of time. For example, to calculate the trend in a search result count with a relative
search of <em>5 minutes ago</em>, Graylog will count the messages in the last 5 minutes, and compare that with the
count of the previous 5 minutes.</p>
</div>
<div class="section" id="search-result-histogram-charts">
<h4>Search result histogram charts<a class="headerlink" href="#search-result-histogram-charts" title="Permalink to this headline">¶</a></h4>
<p>The search result histogram displays a chart using the time frame of your search, graphing the number of search
result counts over time. It may help you to visualize how the number of request to your site change over time,
or to see how many downloads a file has over time.</p>
<p>Changing the graph resolution, you can decide how much time each bar of the graph represents.</p>
</div>
<div class="section" id="statistical-values">
<h4>Statistical values<a class="headerlink" href="#statistical-values" title="Permalink to this headline">¶</a></h4>
<p>You can add to your dashboard any statistical value calculated for a field. This may help you to see the mean
time response for your application, or how many unique servers are handling requests to your application, by
using the cardinality value of that field. Please refer to <a class="reference internal" href="index.html#field-statistics"><span class="std std-ref">Field statistics</span></a> for more information on
the available statistical functions and how to display them in your searches.</p>
<p>As with search result counts, you can also add trend information to statistical value widgets created with
a relative time frame.</p>
</div>
<div class="section" id="field-value-charts">
<h4>Field value charts<a class="headerlink" href="#field-value-charts" title="Permalink to this headline">¶</a></h4>
<p>To draw an statistical value over time, you can use a field value chart. They could help you to see the evolution
of the number of unique users visiting your site in the last week. In the <a class="reference internal" href="index.html#field-graphs"><span class="std std-ref">Field graphs</span></a> section we
explain how to create these charts and ways you can customize them.</p>
</div>
<div class="section" id="stacked-charts">
<h4>Stacked charts<a class="headerlink" href="#stacked-charts" title="Permalink to this headline">¶</a></h4>
<p>Stacked charts group several field value charts under the same axes. They let you compare different values in
a compact way, like the number of visits to two different websites. As explained in <a class="reference internal" href="index.html#field-graphs"><span class="std std-ref">Field graphs</span></a>, stacked
charts are basically field value charts represented in the same axes.</p>
</div>
<div class="section" id="quick-values-results">
<h4>Quick values results<a class="headerlink" href="#quick-values-results" title="Permalink to this headline">¶</a></h4>
<p>In order to show a list of values a certain field contains and their distribution, you can use a quick value
widget. This may help you to see the percentage of failed requests in your application, or which parts of your
application experience more problems. Please refer to <a class="reference internal" href="index.html#quick-values"><span class="std std-ref">Quick values</span></a> to see how to request this information
in your search result page.</p>
<p>The quick values information can be represented as a pie chart and/or as a table, so you can choose what is the
best fit for your needs.</p>
</div>
</div>
<div class="section" id="modifying-dashboards">
<h3>Modifying dashboards<a class="headerlink" href="#modifying-dashboards" title="Permalink to this headline">¶</a></h3>
<p>You need to <em>unlock</em> dashboards to make any changes to them. Hit the “Unlock/Edit” button in the top right
corner of a dashboard to unlock it. You should now see different icons at the bottom of each widget, that
allow you to perform more actions.</p>
<div class="section" id="unlocked-dashboard-widgets-explained">
<h4>Unlocked dashboard widgets explained<a class="headerlink" href="#unlocked-dashboard-widgets-explained" title="Permalink to this headline">¶</a></h4>
<p>Unlocked dashboard widgets have two buttons that should be pretty self-explanatory.</p>
<blockquote>
<div><ul class="simple">
<li>Delete widget</li>
<li>Edit widget configuration</li>
<li>Change widget size (when you hover over the widget)</li>
</ul>
</div></blockquote>
<img alt="_images/dashboards_5.png" src="http://res.fansdoc.com/graylog/_images/dashboards_5.png" />
</div>
<div class="section" id="widget-cache-times">
<h4>Widget cache times<a class="headerlink" href="#widget-cache-times" title="Permalink to this headline">¶</a></h4>
<p>Widget values are cached in <code class="docutils literal notranslate"><span class="pre">graylog-server</span></code> by default. <strong>This means that the cost of value computation
does not grow with every new device or even browser tab displaying a dashboard.</strong> Some widgets might need
to show real-time information (set cache time to 1 second) and some widgets might be updated way less often
(like <em>Top SSH users this month</em>, cache time 10 minutes) to save expensive computation resources.</p>
</div>
<div class="section" id="repositioning-widgets">
<h4>Repositioning widgets<a class="headerlink" href="#repositioning-widgets" title="Permalink to this headline">¶</a></h4>
<p>Just grab a widget with your mouse in unlocked dashboard mode and move it around. Other widgets should
adopt and re-position intelligently to make place for the widget you are moving. The positions are
automatically saved when dropping a widget.</p>
</div>
<div class="section" id="resizing-widgets">
<h4>Resizing widgets<a class="headerlink" href="#resizing-widgets" title="Permalink to this headline">¶</a></h4>
<p>When hovering over a widget, you will see that a gray arrow appears in its bottom-right corner. You can use that
icon to resize widgets. Their contents will adapt to the new size automatically!</p>
<img alt="_images/dashboards_7.png" src="http://res.fansdoc.com/graylog/_images/dashboards_7.png" />
</div>
</div>
<div class="section" id="dashboard-permissions">
<h3>Dashboard permissions<a class="headerlink" href="#dashboard-permissions" title="Permalink to this headline">¶</a></h3>
<p>Graylog users in the <em>Admin</em> role are always allowed to view and edit all dashboards. Users in the <em>Reader</em> role
are by default not allowed to view or edit <strong>any</strong> dashboard.</p>
<img alt="_images/dashboards_6.png" src="http://res.fansdoc.com/graylog/_images/dashboards_6.png" />
<p>Navigate to <em>System</em> -&gt; <em>Roles</em> and create a new role that grant the permissions you wish. You can then assign
that new role to any users you wish to give dashboard permissions in the <em>System</em> -&gt; <em>Users</em> page.</p>
<p>You can read more about <a class="reference internal" href="index.html#document-pages/users_and_roles"><span class="doc">user permissions and roles</span></a>.</p>
<div class="section" id="that-s-it">
<h4>That’s it!<a class="headerlink" href="#that-s-it" title="Permalink to this headline">¶</a></h4>
<p>Congratulations, you have just gone through the basic principles of Graylog dashboards. Now think about which dashboards
to create. We suggest:</p>
<blockquote>
<div><ul class="simple">
<li>Create dashboards for yourself and your team members</li>
<li>Create dashboards to share with your manager</li>
<li>Create dashboards to share with the CIO of your company</li>
</ul>
</div></blockquote>
<p>Think about which information you need access to frequently. What information could your manager or CIO be interested in?
Maybe they want to see how the number of exceptions went down or how your team utilized existing hardware better. The
sales team could be interested to see signup rates in realtime and the marketing team will love you for providing
insights into low level KPIs that is just a click away.</p>
</div>
</div>
</div>
<span id="document-pages/extractors"></span><div class="section" id="extractors">
<span id="id1"></span><h2>Extractors<a class="headerlink" href="#extractors" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-problem-explained">
<h3>The problem explained<a class="headerlink" href="#the-problem-explained" title="Permalink to this headline">¶</a></h3>
<p>Syslog (<a class="reference external" href="http://tools.ietf.org/html/rfc3164">RFC3164</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc5424">RFC5424</a>) is the de facto
standard logging protocol since the 1980s and was originally developed as part of the sendmail project. It comes with some
annoying shortcomings that we tried to improve in <a class="reference internal" href="index.html#document-pages/gelf"><span class="doc">GELF</span></a> for application logging.</p>
<p>Because syslog has a clear specification in its RFCs it should be possible to parse it relatively easy. Unfortunately
there are a lot of devices (especially routers and firewalls) out there that send logs looking like syslog but actually
breaking several rules stated in the RFCs. We tried to write a parser that reads all of them as good as possible and
failed. Such a loosely defined text message usually breaks the compatibility in the first date field already. Some
devices leave out hostnames completely, some use localized time zone names (e. g. “MESZ” instead of “CEST”),
and some just omit the current year in the timestamp field.</p>
<p>Then there are devices out there that at least do not claim to send syslog when they don’t but have another completely
separate log format that needs to be parsed specifically.</p>
<p>We decided not to write custom message inputs and parsers for all those thousands of devices, formats, firmwares and
configuration parameters out there but came up with the concept of <em>Extractors</em> introduced the <em>v0.20.0</em> series of Graylog.</p>
</div>
<div class="section" id="graylog-extractors-explained">
<h3>Graylog extractors explained<a class="headerlink" href="#graylog-extractors-explained" title="Permalink to this headline">¶</a></h3>
<p>The extractors allow you to instruct Graylog nodes about how to extract data from any text in the received
message (no matter from which format or if an already extracted field) to message fields. You may already know why
structuring data into fields is important if you are using Graylog: There are a lot of analysis possibilities with
full text searches but the real power of log analytics unveils when you can run queries like
<code class="docutils literal notranslate"><span class="pre">http_response_code:&gt;=500</span> <span class="pre">AND</span> <span class="pre">user_id:9001</span></code> to get all internal server errors that were triggered by a specific user.</p>
<p>Wouldn’t it be nice to be able to search for all blocked packages of a given source IP or to get a quickterms analysis
of recently failed SSH login usernames? Hard to do when all you have is just a single long text message.</p>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">Graylog extractors only work on text fields but won’t be executed for numeric fields or anything other than a string.</p>
</div>
<p>Creating extractors is possible via either Graylog REST API calls or from the web interface using a wizard. Select
a message input on the <em>System</em> -&gt; <em>Inputs</em> page and hit <em>Manage extractors</em> in the actions menu. The wizard allows
you to load a message to test your extractor configuration against. You can extract data using for example regular
expressions, Grok patterns, substrings, or even by splitting the message into tokens by separator characters.
The wizard looks like this and should be pretty intuitive:</p>
<img alt="_images/extractors_1.png" src="http://res.fansdoc.com/graylog/_images/extractors_1.png" />
<p>You can also choose to apply so called <em>converters</em> on the extracted value to for example convert a string consisting
of numbers to an integer or double value (important for range searches later), anonymize IP addresses, lower-/uppercase a
string, build a hash value, and much more.</p>
</div>
<div class="section" id="import-extractors">
<h3>Import extractors<a class="headerlink" href="#import-extractors" title="Permalink to this headline">¶</a></h3>
<p>The recommended way of importing extractors in Graylog is using <a class="reference internal" href="index.html#content-packs"><span class="std std-ref">Content packs</span></a>. The
<a class="reference external" href="http://marketplace.graylog.org">Graylog Marketplace</a> provides access to many content packs that you can easily
download and import into your Graylog setup.</p>
<p>You can still import extractors from JSON if you want to. Just copy the JSON extractor export into the import dialog
of a message input of the fitting type (every extractor set entry in the directory tells you what type of input to
spawn, e. g. syslog, GELF, or Raw/plaintext) and you are good to go. The next messages coming in should already
include the extracted fields with possibly converted values.</p>
<p>A message sent by Heroku and received by Graylog with the imported <em>Heroku</em> extractor set on a plaintext TCP input
looks like this: (look at the extracted fields in the message detail view)</p>
<img alt="_images/extractors_2.png" src="http://res.fansdoc.com/graylog/_images/extractors_2.png" />
</div>
<div class="section" id="using-regular-expressions-to-extract-data">
<h3>Using regular expressions to extract data<a class="headerlink" href="#using-regular-expressions-to-extract-data" title="Permalink to this headline">¶</a></h3>
<p>Extractors support matching field values using regular expressions.
Graylog uses the <a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html">Java Pattern class</a> to
evaluate regular expressions.</p>
<p>For the individual elements of regular expression syntax, please refer to Oracle’s documentation, however the syntax
largely follows the familiar regular expression languages in widespread use today and will be familiar to most.</p>
<p>However, one key question that is often raised is matching a string in case insensitive manner. Java regular expressions
are case sensitive by default. Certain flags, such as the one to ignore case sensitivity can either be set in the code,
or as an inline flag in the regular expression.</p>
<p>For example, to create an extractor that matches the browser name in the following user agent string:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Mozilla</span><span class="o">/</span><span class="mf">5.0</span> <span class="p">(</span><span class="n">Macintosh</span><span class="p">;</span> <span class="n">Intel</span> <span class="n">Mac</span> <span class="n">OS</span> <span class="n">X</span> <span class="mi">10_9_1</span><span class="p">)</span> <span class="n">AppleWebKit</span><span class="o">/</span><span class="mf">537.36</span> <span class="p">(</span><span class="n">KHTML</span><span class="p">,</span> <span class="n">like</span> <span class="n">Gecko</span><span class="p">)</span> <span class="n">Chrome</span><span class="o">/</span><span class="mf">32.0</span><span class="o">.</span><span class="mf">1700.107</span> <span class="n">Safari</span><span class="o">/</span><span class="mf">537.36</span>
</pre></div>
</div>
<p>the regular expression <code class="docutils literal notranslate"><span class="pre">(applewebkit)</span></code> will not match because it is case sensitive.
In order to match the expression using any combination of upper- and lowercase characters use the <code class="docutils literal notranslate"><span class="pre">(?i)</span></code> flag as such:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(?i)(applewebkit)
</pre></div>
</div>
<p>Most of the other flags supported by Java are rarely used in the context of matching stream rules or extractors, but if
you need them their use is documented on the same Javadoc page by Oracle. One common reason to use regular expression flags
in your regular expression is to make use of what is called non-capturing groups. Those are parentheses which only group
alternatives, but do not make Graylog extract the data they match and are indicated by <code class="docutils literal notranslate"><span class="pre">(?:)</span></code>.</p>
</div>
<div class="section" id="using-grok-patterns-to-extract-data">
<h3>Using Grok patterns to extract data<a class="headerlink" href="#using-grok-patterns-to-extract-data" title="Permalink to this headline">¶</a></h3>
<p>Graylog also supports the extracting data using the popular Grok language to allow you to make use of your existing patterns.</p>
<p>Grok is a set of regular expressions that can be combined to more complex patterns, allowing to name different parts of the
matched groups.</p>
<p>By using Grok patterns, you can extract multiple fields from a message field in a single extractor, which often simplifies
specifying extractors.</p>
<p>Simple regular expressions are often sufficient to extract a single word or number from a log line, but if you know the entire
structure of a line beforehand, for example for an access log, or the format of a firewall log, using Grok is advantageous.</p>
<p>For example a firewall log line could contain:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="o">=</span><span class="mi">50824</span> <span class="n">src</span><span class="o">=</span><span class="mf">172.17</span><span class="o">.</span><span class="mf">22.108</span> <span class="n">sport</span><span class="o">=</span><span class="mi">829</span> <span class="n">dst</span><span class="o">=</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">70.66</span> <span class="n">dport</span><span class="o">=</span><span class="mi">513</span>
</pre></div>
</div>
<p>We can now create the following patterns on the <code class="docutils literal notranslate"><span class="pre">System/Grok</span> <span class="pre">Patterns</span></code> page in the web interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>BASE10NUM (?&lt;![0-9.+-])(?&gt;[+-]?(?:(?:[0-9]+(?:\.[0-9]+)?)|(?:\.[0-9]+)))
NUMBER (?:%{BASE10NUM})
IPV6 ((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?
IPV4 (?&lt;![0-9])(?:(?:25[0-5]|2[0-4][0-9]|[0-1]?[0-9]{1,2})[.](?:25[0-5]|2[0-4][0-9]|[0-1]?[0-9]{1,2})[.](?:25[0-5]|2[0-4][0-9]|[0-1]?[0-9]{1,2})[.](?:25[0-5]|2[0-4][0-9]|[0-1]?[0-9]{1,2}))(?![0-9])
IP (?:%{IPV6}|%{IPV4})
DATA .*?
</pre></div>
</div>
<p>Then, in the extractor configuration, we can use these patterns to extract the relevant fields from the line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="o">=%</span><span class="p">{</span><span class="n">NUMBER</span><span class="p">:</span><span class="n">length</span><span class="p">}</span> <span class="n">src</span><span class="o">=%</span><span class="p">{</span><span class="n">IP</span><span class="p">:</span><span class="n">srcip</span><span class="p">}</span> <span class="n">sport</span><span class="o">=%</span><span class="p">{</span><span class="n">NUMBER</span><span class="p">:</span><span class="n">srcport</span><span class="p">}</span> <span class="n">dst</span><span class="o">=%</span><span class="p">{</span><span class="n">IP</span><span class="p">:</span><span class="n">dstip</span><span class="p">}</span> <span class="n">dport</span><span class="o">=%</span><span class="p">{</span><span class="n">NUMBER</span><span class="p">:</span><span class="n">dstport</span><span class="p">}</span>
</pre></div>
</div>
<p>This will add the relevant extracted fields to our log message, allowing Graylog to search on those individual fields, which
can lead to more effective search queries by allowing to specifically look for packets that came from a specific source IP
instead of also matching destination IPs if one would only search for the IP across all fields.</p>
<p>If the Grok pattern creates many fields, which can happen if you make use of heavily nested patterns, you can tell Graylog to skip
certain fields (and the output of their subpatterns) by naming a field with the special keyword <code class="docutils literal notranslate"><span class="pre">UNWANTED</span></code>.</p>
<p>Let’s say you want to parse a line like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">:</span><span class="mi">44</span> <span class="nb">bytes</span><span class="p">:</span><span class="mi">34</span> <span class="n">errors</span><span class="p">:</span><span class="mi">122</span>
</pre></div>
</div>
<p>but you are only interested in the second number <code class="docutils literal notranslate"><span class="pre">bytes</span></code>. You could use a pattern like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">:</span><span class="o">%</span><span class="p">{</span><span class="n">BASE10NUM</span><span class="p">:</span><span class="nb">type</span><span class="p">}</span> <span class="nb">bytes</span><span class="p">:</span><span class="o">%</span><span class="p">{</span><span class="n">BASE10NUM</span><span class="p">:</span><span class="nb">bytes</span><span class="p">}</span> <span class="n">errors</span><span class="p">:</span><span class="o">%</span><span class="p">{</span><span class="n">BASE10NUM</span><span class="p">:</span><span class="n">errors</span><span class="p">}</span>
</pre></div>
</div>
<p>However, this would create three fields named <code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">bytes</span></code>, and <code class="docutils literal notranslate"><span class="pre">errors</span></code>. Even not naming the first and last patterns would
still create a field names <code class="docutils literal notranslate"><span class="pre">BASE10NUM</span></code>. In order to ignore fields, but still require matching them use <code class="docutils literal notranslate"><span class="pre">UNWANTED</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">:</span><span class="o">%</span><span class="p">{</span><span class="n">BASE10NUM</span><span class="p">:</span><span class="n">UNWANTED</span><span class="p">}</span> <span class="nb">bytes</span><span class="p">:</span><span class="o">%</span><span class="p">{</span><span class="n">BASE10NUM</span><span class="p">:</span><span class="nb">bytes</span><span class="p">}</span> <span class="n">errors</span><span class="p">:</span><span class="o">%</span><span class="p">{</span><span class="n">BASE10NUM</span><span class="p">:</span><span class="n">UNWANTED</span><span class="p">}</span>
</pre></div>
</div>
<p>This now creates only a single field called <code class="docutils literal notranslate"><span class="pre">bytes</span></code> while making sure the entire pattern must match.</p>
<p>If you already know the data type of the extracted fields, you can make use of the type conversion feature built into the Graylog
Grok library. Going back to the earlier example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="o">=</span><span class="mi">50824</span> <span class="n">src</span><span class="o">=</span><span class="mf">172.17</span><span class="o">.</span><span class="mf">22.108</span> <span class="n">sport</span><span class="o">=</span><span class="mi">829</span> <span class="n">dst</span><span class="o">=</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">70.66</span> <span class="n">dport</span><span class="o">=</span><span class="mi">513</span>
</pre></div>
</div>
<p>We know that the content of the field <code class="docutils literal notranslate"><span class="pre">len</span></code> is an integer and would like to make sure it is stored with that data type, so we can
later create field graphs with it or access the field’s statistical values, like average etc.</p>
<p>Grok directly supports converting field values by adding <code class="docutils literal notranslate"><span class="pre">;datatype</span></code> at the end of the pattern, like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="o">=%</span><span class="p">{</span><span class="n">NUMBER</span><span class="p">:</span><span class="n">length</span><span class="p">;</span><span class="nb">int</span><span class="p">}</span> <span class="n">src</span><span class="o">=%</span><span class="p">{</span><span class="n">IP</span><span class="p">:</span><span class="n">srcip</span><span class="p">}</span> <span class="n">sport</span><span class="o">=%</span><span class="p">{</span><span class="n">NUMBER</span><span class="p">:</span><span class="n">srcport</span><span class="p">}</span> <span class="n">dst</span><span class="o">=%</span><span class="p">{</span><span class="n">IP</span><span class="p">:</span><span class="n">dstip</span><span class="p">}</span> <span class="n">dport</span><span class="o">=%</span><span class="p">{</span><span class="n">NUMBER</span><span class="p">:</span><span class="n">dstport</span><span class="p">}</span>
</pre></div>
</div>
<p>The currently supported data types, and their corresponding ranges and values, are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="62%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Range</th>
<th class="head">Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>byte</td>
<td>-128 … 127</td>
<td><code class="docutils literal notranslate"><span class="pre">%{NUMBER:fieldname;byte}</span></code></td>
</tr>
<tr class="row-odd"><td>short</td>
<td>-32768 … 32767</td>
<td><code class="docutils literal notranslate"><span class="pre">%{NUMBER:fieldname;short}</span></code></td>
</tr>
<tr class="row-even"><td>int</td>
<td>-2^31 … 2^31 -1</td>
<td><code class="docutils literal notranslate"><span class="pre">%{NUMBER:fieldname;int}</span></code></td>
</tr>
<tr class="row-odd"><td>long</td>
<td>-2^63 … 2^63 -1</td>
<td><code class="docutils literal notranslate"><span class="pre">%{NUMBER:fieldname;long}</span></code></td>
</tr>
<tr class="row-even"><td>float</td>
<td>32-bit IEEE 754</td>
<td><code class="docutils literal notranslate"><span class="pre">%{NUMBER:fieldname;float}</span></code></td>
</tr>
<tr class="row-odd"><td>double</td>
<td>64-bit IEEE 754</td>
<td><code class="docutils literal notranslate"><span class="pre">%{NUMBER:fieldname;double}</span></code></td>
</tr>
<tr class="row-even"><td>boolean</td>
<td><cite>true</cite>, <cite>false</cite></td>
<td><code class="docutils literal notranslate"><span class="pre">%{DATA:fieldname;boolean}</span></code></td>
</tr>
<tr class="row-odd"><td>string</td>
<td>Any UTF-8 string</td>
<td><code class="docutils literal notranslate"><span class="pre">%{DATA:fieldname;string}</span></code></td>
</tr>
<tr class="row-even"><td>date</td>
<td>See <a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html">SimpleDateFormat</a></td>
<td><code class="docutils literal notranslate"><span class="pre">%{DATA:timestamp;date;dd/MMM/yyyy:HH:mm:ss</span> <span class="pre">Z}</span></code></td>
</tr>
<tr class="row-odd"><td>datetime</td>
<td>Alias for <cite>date</cite></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<p>There are many resources are the web with useful patterns, and one very helpful tool is the <a class="reference external" href="http://grokdebug.herokuapp.com/">Grok Debugger</a>,
which allows you to test your patterns while you develop them.</p>
<p>Graylog uses <a class="reference external" href="http://grok.nflabs.com/">Java Grok</a> to parse and run Grok patterns.</p>
</div>
<div class="section" id="using-the-json-extractor">
<h3>Using the JSON extractor<a class="headerlink" href="#using-the-json-extractor" title="Permalink to this headline">¶</a></h3>
<p>Since version 1.2, Graylog also supports extracting data from messages sent in JSON format.</p>
<p>Using the JSON extractor is easy: once a Graylog input receives messages in JSON format, you can create an extractor
by going to <em>System</em> -&gt; <em>Inputs</em> and clicking on the <em>Manage extractors</em> button for that input. Next, you need to load a
message to extract data from, and select the field containing the JSON document. The following page let you add some extra
information to tell Graylog how it should extract the information. Let’s illustrate how a message would be extracted
with an example message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;level&quot;</span><span class="p">:</span> <span class="s2">&quot;ERROR&quot;</span><span class="p">,</span> <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;This is an example error message&quot;</span><span class="p">,</span> <span class="s2">&quot;controller&quot;</span><span class="p">:</span> <span class="s2">&quot;IndexController&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;three&quot;</span><span class="p">]}}</span>
</pre></div>
</div>
<p>Using the default settings, that message would be extracted into these fields:</p>
<dl class="docutils">
<dt>details_tags</dt>
<dd>one, two, three</dd>
<dt>level</dt>
<dd>ERROR</dd>
<dt>details_controller</dt>
<dd>IndexController</dd>
<dt>details_message</dt>
<dd>This is an example error message</dd>
</dl>
<p>In the create extractor page, you can also customize how to separate list of elements, keys, and key/values. It is also possible
to flatten JSON structures or expand them into multiple fields, as shown in the example above.</p>
</div>
<div class="section" id="automatically-extract-all-key-value-pairs">
<h3>Automatically extract all key=value pairs<a class="headerlink" href="#automatically-extract-all-key-value-pairs" title="Permalink to this headline">¶</a></h3>
<p>Sometimes you will receive messages like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">This</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">test</span> <span class="n">message</span> <span class="k">with</span> <span class="n">some</span> <span class="n">key</span><span class="o">/</span><span class="n">value</span> <span class="n">pairs</span><span class="o">.</span> <span class="n">key1</span><span class="o">=</span><span class="n">value1</span> <span class="n">some_other_key</span><span class="o">=</span><span class="n">foo</span>
</pre></div>
</div>
<p>You might want to extract all <code class="docutils literal notranslate"><span class="pre">key=value</span></code> pairs into Graylog message fields without having to specify all possible key names or
even their order. This is how you can easily do this:</p>
<p>Create a new extractor of type “Copy Input” and select to read from the field <code class="docutils literal notranslate"><span class="pre">message</span></code>. (Or any other string field that contains
<code class="docutils literal notranslate"><span class="pre">key=value</span></code> pairs.) Configure the extractor to store the (copied) field value to the same field. In this case <code class="docutils literal notranslate"><span class="pre">message</span></code>. The
trick is to add the “Key=Value pairs to fields” converter as last step. Because we use the “Copy Input” extractor, the converter
will run over the complete field you selected and convert all <code class="docutils literal notranslate"><span class="pre">key=value</span></code> pairs it can find.</p>
<p>This is a screenshot of the complete extractor configuration:</p>
<img alt="_images/keyvalue_converter_1.png" src="http://res.fansdoc.com/graylog/_images/keyvalue_converter_1.png" />
<p>… and this is the resulting message:</p>
<img alt="_images/keyvalue_converter_2.png" src="http://res.fansdoc.com/graylog/_images/keyvalue_converter_2.png" />
</div>
<div class="section" id="normalization">
<h3>Normalization<a class="headerlink" href="#normalization" title="Permalink to this headline">¶</a></h3>
<p>Many log formats are similar to each other, but not quite the same. In particular they often only differ in the names attached
to pieces of information.</p>
<p>For example, consider different hardware firewall vendors, whose models log the destination IP in different fields of the message,
some use <code class="docutils literal notranslate"><span class="pre">dstip</span></code>, some <code class="docutils literal notranslate"><span class="pre">dst</span></code> and yet others use <code class="docutils literal notranslate"><span class="pre">destination-address</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2004</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">13</span> <span class="mi">10</span><span class="p">:</span><span class="mi">37</span><span class="p">:</span><span class="mi">17</span> <span class="n">PDT</span> <span class="n">Packet</span> <span class="n">Length</span><span class="o">=</span><span class="mi">50824</span><span class="p">,</span> <span class="n">Source</span> <span class="n">address</span><span class="o">=</span><span class="mf">172.17</span><span class="o">.</span><span class="mf">22.108</span><span class="p">,</span> <span class="n">Source</span> <span class="n">port</span><span class="o">=</span><span class="mi">829</span><span class="p">,</span> <span class="n">Destination</span> <span class="n">address</span><span class="o">=</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">70.66</span><span class="p">,</span> <span class="n">Destination</span> <span class="n">port</span><span class="o">=</span><span class="mi">513</span>
<span class="mi">2004</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">13</span> <span class="mi">10</span><span class="p">:</span><span class="mi">37</span><span class="p">:</span><span class="mi">17</span> <span class="n">PDT</span> <span class="nb">len</span><span class="o">=</span><span class="mi">50824</span> <span class="n">src</span><span class="o">=</span><span class="mf">172.17</span><span class="o">.</span><span class="mf">22.108</span> <span class="n">sport</span><span class="o">=</span><span class="mi">829</span> <span class="n">dst</span><span class="o">=</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">70.66</span> <span class="n">dport</span><span class="o">=</span><span class="mi">513</span>
<span class="mi">2004</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">13</span> <span class="mi">10</span><span class="p">:</span><span class="mi">37</span><span class="p">:</span><span class="mi">17</span> <span class="n">PDT</span> <span class="n">length</span><span class="o">=</span><span class="s2">&quot;50824&quot;</span> <span class="n">srcip</span><span class="o">=</span><span class="s2">&quot;172.17.22.108&quot;</span> <span class="n">srcport</span><span class="o">=</span><span class="s2">&quot;829&quot;</span> <span class="n">dstip</span><span class="o">=</span><span class="s2">&quot;192.168.70.66&quot;</span> <span class="n">dstport</span><span class="o">=</span><span class="s2">&quot;513&quot;</span>
</pre></div>
</div>
<p>You can use one or more non-capturing groups to specify the alternatives of the field names, but still be able to extract the a
parentheses group in the regular expression. Remember that Graylog will extract data from the first matched group of the regular
expression. An example of a regular expression matching the destination IP field of all those log messages from above is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(?:dst|dstip|[dD]estination\saddress)=&quot;?(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})&quot;?
</pre></div>
</div>
<p>This will only extract the IP address without caring about which of the three naming schemes was used in the original log message.
This way you don’t have to set up three different extractors.</p>
<div class="section" id="the-standard-date-converter">
<h4>The standard date converter<a class="headerlink" href="#the-standard-date-converter" title="Permalink to this headline">¶</a></h4>
<p>Date parser converters for extractors allow you to convert extracted data into timestamps - Usually used to set the timestamp of
a message based on some date it contains. Let’s assume we have this message from a network device:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="mi">131</span><span class="o">&gt;</span><span class="p">:</span> <span class="n">foo</span><span class="o">-</span><span class="n">bar</span><span class="o">-</span><span class="n">dc3</span><span class="o">-</span><span class="n">org</span><span class="o">-</span><span class="n">de01</span><span class="p">:</span> <span class="n">Mar</span> <span class="mi">12</span> <span class="mi">00</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">38</span><span class="p">:</span> <span class="o">%</span><span class="n">LINK</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="n">UPDOWN</span><span class="p">:</span> <span class="n">Interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">31</span><span class="p">,</span> <span class="n">changed</span> <span class="n">state</span> <span class="n">to</span> <span class="n">down</span>
</pre></div>
</div>
<p>Extracting most of the data is not a problem and can be done easily. Using the date in the message (<cite>Mar 12 00:45:38</cite>) as Graylog
message timestamp however needs to be done with a date parser converter.</p>
<p>Use a copy input extractor rule to select the timestamp and apply the <em>Date</em> converter with a format string:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MMM</span> <span class="n">dd</span> <span class="n">HH</span><span class="p">:</span><span class="n">mm</span><span class="p">:</span><span class="n">ss</span>
</pre></div>
</div>
<p>(format string table at the end of this page)</p>
<img alt="_images/dateparser_1.png" src="http://res.fansdoc.com/graylog/_images/dateparser_1.png" />
<img alt="_images/dateparser_2.png" src="http://res.fansdoc.com/graylog/_images/dateparser_2.png" />
<div class="section" id="standard-date-converter-format-string-table">
<h5>Standard date converter format string table<a class="headerlink" href="#standard-date-converter-format-string-table" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="35%" />
<col width="15%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Symbol</th>
<th class="head">Meaning</th>
<th class="head">Presentation</th>
<th class="head">Examples</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>G</td>
<td>era</td>
<td>text</td>
<td>AD</td>
</tr>
<tr class="row-odd"><td>C</td>
<td>century of era (&gt;=0)</td>
<td>number</td>
<td>20</td>
</tr>
<tr class="row-even"><td>Y</td>
<td>year of era (&gt;=0)</td>
<td>year</td>
<td>1996</td>
</tr>
<tr class="row-odd"><td>x</td>
<td>weekyear</td>
<td>year</td>
<td>1996</td>
</tr>
<tr class="row-even"><td>w</td>
<td>week of weekyear</td>
<td>number</td>
<td>27</td>
</tr>
<tr class="row-odd"><td>e</td>
<td>day of week</td>
<td>number</td>
<td>2</td>
</tr>
<tr class="row-even"><td>E</td>
<td>day of week</td>
<td>text</td>
<td>Tuesday; Tue</td>
</tr>
<tr class="row-odd"><td>y</td>
<td>year</td>
<td>year</td>
<td>1996</td>
</tr>
<tr class="row-even"><td>D</td>
<td>day of year</td>
<td>number</td>
<td>189</td>
</tr>
<tr class="row-odd"><td>M</td>
<td>month of year</td>
<td>month</td>
<td>July; Jul; 07</td>
</tr>
<tr class="row-even"><td>d</td>
<td>day of month</td>
<td>number</td>
<td>10</td>
</tr>
<tr class="row-odd"><td>a</td>
<td>halfday of day</td>
<td>text</td>
<td>PM</td>
</tr>
<tr class="row-even"><td>K</td>
<td>hour of halfday (0~11)</td>
<td>number</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>h</td>
<td>clockhour of halfday (1~12)</td>
<td>number</td>
<td>12</td>
</tr>
<tr class="row-even"><td>H</td>
<td>hour of day (0~23)</td>
<td>number</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>k</td>
<td>clockhour of day (1~24)</td>
<td>number</td>
<td>24</td>
</tr>
<tr class="row-even"><td>m</td>
<td>minute of hour</td>
<td>number</td>
<td>30</td>
</tr>
<tr class="row-odd"><td>s</td>
<td>second of minute</td>
<td>number</td>
<td>55</td>
</tr>
<tr class="row-even"><td>S</td>
<td>fraction of second</td>
<td>millis</td>
<td>978</td>
</tr>
<tr class="row-odd"><td>z</td>
<td>time zone</td>
<td>text</td>
<td>Pacific Standard Time; PST</td>
</tr>
<tr class="row-even"><td>Z</td>
<td>time zone offset/id</td>
<td>zone</td>
<td>-0800; -08:00; America/Los_Angeles</td>
</tr>
<tr class="row-odd"><td>‘</td>
<td>escape for text</td>
<td>delimiter</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>‘’</td>
<td>single quote</td>
<td>literal</td>
<td>‘</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="the-flexible-date-converter">
<h4>The flexible date converter<a class="headerlink" href="#the-flexible-date-converter" title="Permalink to this headline">¶</a></h4>
<p>Now imagine you had one of those devices that send messages that are not so easy to parse because they do not follow a strict
timestamp format. Some network devices for example like to send days of the month without adding a padding 0 for the first 9 days.
You’ll have dates like <code class="docutils literal notranslate"><span class="pre">Mar</span> <span class="pre">9</span></code> and <code class="docutils literal notranslate"><span class="pre">Mar</span> <span class="pre">10</span></code> and end up having problems defining a parser string for that. Or maybe you have
something else that is really exotic like just <em>last wednesday</em> as timestamp. The flexible date converter is accepting any
text data and tries to build a date from that as good as it can.</p>
<p>Examples:</p>
<ul class="simple">
<li><strong>Mar 12</strong>, converted at 12:27:00 UTC in the year 2014: 2014-03-12T12:27:00.000</li>
<li><strong>2014-3-12 12:27</strong>: 2014-03-12T12:27:00.000</li>
<li><strong>Mar 12 2pm</strong>: 2014-03-12T14:00:00.000</li>
</ul>
<p>Note that the flexible date converter is using UTC as time zone by default unless you have time zone information in the parsed text
or have configured another time zone when adding the flexible date converter to an extractor (see this <a class="reference external" href="http://joda-time.sourceforge.net/timezones.html">comprehensive list of time zones</a>
available for the flexible date converter).</p>
</div>
</div>
</div>
<span id="document-pages/pipelines"></span><div class="section" id="processing-pipelines">
<span id="pipelinestoc"></span><h2>Processing Pipelines<a class="headerlink" href="#processing-pipelines" title="Permalink to this headline">¶</a></h2>
<p>Graylog’s new processing pipelines plugin allows greater flexibility in routing, blacklisting, modifying, and
enriching messages as they flow through Graylog.</p>
<p>Pipelines and rules are not configuration for pre-built code, as extractors and stream rules are, but are instead represented as code,
much like Drools rules. This gives them great flexibility and extensibility, and enables live changes to Graylog’s message processing behavior.</p>
<p>The language used for pipeline rules is very simple and can be extended by functions, which are fully pluggable.</p>
<p>The following pages introduce the concepts of pipelines, rules, stream connections, and the built-in functions.</p>
<div class="toctree-wrapper compound">
<span id="document-pages/pipelines/pipelines"></span><div class="section" id="pipelines">
<h3>Pipelines<a class="headerlink" href="#pipelines" title="Permalink to this headline">¶</a></h3>
<div class="section" id="overview">
<h4>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h4>
<p>Pipelines are the central concept tying together the processing steps applied to your messages.</p>
<p>Pipelines contain rules and can be connected to one or more streams, enabling fine-grained control of the processing applied to messages.</p>
<p>Processing rules are simply conditions followed by a list of actions, and do not have control flow by themselves.  Therefore, pipelines have one additional concept: stages.</p>
<p>Think of stages as groups of conditions and actions which need to run in order. All stages with the same priority run
at the same time across all connected pipelines. Stages provide the necessary control flow to decide whether or not to run the
remaining stages in a pipeline.</p>
</div>
<div class="section" id="pipeline-structure">
<h4>Pipeline structure<a class="headerlink" href="#pipeline-structure" title="Permalink to this headline">¶</a></h4>
<p>Internally pipelines are represented as code. Let’s have a look at a simple example and understand what each part does:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pipeline</span> <span class="s2">&quot;My new pipeline&quot;</span>
<span class="n">stage</span> <span class="mi">1</span> <span class="n">match</span> <span class="nb">all</span>
  <span class="n">rule</span> <span class="s2">&quot;has firewall fields&quot;</span><span class="p">;</span>
  <span class="n">rule</span> <span class="s2">&quot;from firewall subnet&quot;</span><span class="p">;</span>
<span class="n">stage</span> <span class="mi">2</span> <span class="n">match</span> <span class="n">either</span>
  <span class="n">rule</span> <span class="s2">&quot;geocode IPs&quot;</span><span class="p">;</span>
  <span class="n">rule</span> <span class="s2">&quot;anonymize source IPs&quot;</span><span class="p">;</span>
<span class="n">end</span>
</pre></div>
</div>
<p>This code snippet declares a new pipeline named <code class="docutils literal notranslate"><span class="pre">My</span> <span class="pre">new</span> <span class="pre">pipeline</span></code>, which has two stages.</p>
<p>Stages are run in the order of their given <em>priority</em>, and aren’t otherwise named. Stage priorities can be any integer, positive or negative, you prefer.
In our example the first stage has a priority of 1 and the second stage a priority of 2, however -99 and 42 could be used instead.
Ordering based upon stage priority gives you the ability to run certain rules before or after others, which might exist in other connected pipelines, without modifying those other connected pipelines.
This is particularly handy when dealing with changing data formats.</p>
<p>For example, if there was a second pipeline declared with a stage assigned priority 0, that stage’s rules would run before either
of the ones from the example (priorities 1 and 2, respectively). Note that the order in which stages are declared is irrelevant, since they are sorted according to their priority.</p>
<p>Stages then list the <em>rule references</em> they want to be executed, as well as whether <em>any</em> or <em>all</em> of the rules’ conditions need to be satisfied to
continue running the pipeline.</p>
<p>In our example, imagine rule <em>“has firewall fields”</em> checks for the presence of message fields <code class="docutils literal notranslate"><span class="pre">src_ip</span></code> and <code class="docutils literal notranslate"><span class="pre">dst_ip</span></code>, but does not have
any actions to run. For a message without both fields the rule’s condition would evaluate to <code class="docutils literal notranslate"><span class="pre">false</span></code> and the pipeline would abort after stage 1,
as the stage requires <em>all</em> rules be satisfied (<code class="docutils literal notranslate"><span class="pre">match</span> <span class="pre">all</span></code>). With the pipeline aborted, stage 2 would not run.</p>
<p><code class="docutils literal notranslate"><span class="pre">match</span> <span class="pre">either</span></code> acts as an <code class="docutils literal notranslate"><span class="pre">OR</span></code> operator, only requiring a single rule’s condition evaluate to <code class="docutils literal notranslate"><span class="pre">true</span></code> in order to continue pipeline processing.
Note that actions are still ran for all matching rules in the stage, even if it is the final stage in the pipeline.</p>
<p>Rules are referenced by their names, and can therefore be shared among many different pipelines. The intention is to enable creation of reusable building blocks,
making it easier to process the data specific to your organization or use case.</p>
<p>Read more about <a class="reference internal" href="index.html#document-pages/pipelines/rules"><span class="doc">Rules</span></a> in the next section.</p>
</div>
</div>
<span id="document-pages/pipelines/rules"></span><div class="section" id="rules">
<h3>Rules<a class="headerlink" href="#rules" title="Permalink to this headline">¶</a></h3>
<div class="section" id="overview">
<h4>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h4>
<p>Rules are the cornerstone of processing pipelines. They contain the logic about how to change, enrich, route, and drop messages.</p>
<p>To avoid the complexities of a complete programming language, Graylog supports a small rule language to express processing logic.
The rule language is intentionally limited to allow for easier understanding, faster learning, and better runtime optimization.</p>
<p>The real work of rules is done in <em>functions</em>, which are completely pluggable. Graylog already ships with a great number of built-in functions,
providing data conversion, string manipulation, data retrieval using <a class="reference internal" href="index.html#lookuptables"><span class="std std-ref">lookup tables</span></a>, JSON parsing, and much more.</p>
<p>We expect that special purpose functions will be written and shared by the community, enabling faster innovation and problem solving than previously possible.</p>
</div>
<div class="section" id="rule-structure">
<h4>Rule Structure<a class="headerlink" href="#rule-structure" title="Permalink to this headline">¶</a></h4>
<p>Building upon the previous example in the <a class="reference internal" href="index.html#document-pages/pipelines/pipelines"><span class="doc">Pipelines</span></a> section, let’s look at examples of some of the rules we’ve referenced:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rule</span> <span class="s2">&quot;has firewall fields&quot;</span>
<span class="n">when</span>
    <span class="n">has_field</span><span class="p">(</span><span class="s2">&quot;src_ip&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">has_field</span><span class="p">(</span><span class="s2">&quot;dst_ip&quot;</span><span class="p">)</span>
<span class="n">then</span>
<span class="n">end</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>rule &quot;from firewall subnet&quot;
when
    cidr_match(&quot;10.10.10.0/24&quot;, to_ip($message.gl2_remote_ip))
then
end
</pre></div>
</div>
<p>Firstly, apart from naming the rule structure follows a simple <em>when, then</em> pattern. In the <em>when</em> clause we specify
a boolean expression which is evaluated in the context of the current message in the pipeline. These are the conditions
used by the pipeline processor to determine whether to run a rule, and collectively (when evaluating the containing stage’s
<code class="docutils literal notranslate"><span class="pre">match</span> <span class="pre">all</span></code> or <code class="docutils literal notranslate"><span class="pre">match</span> <span class="pre">any</span></code> requirement) whether to continue in a pipeline.</p>
<p>Note that the <em>has firewall fields</em> rule uses the built-in function <code class="docutils literal notranslate"><span class="pre">has_field</span></code> to check whether the message has
the <code class="docutils literal notranslate"><span class="pre">src_ip</span></code> and <code class="docutils literal notranslate"><span class="pre">dst_ip</span></code> fields, as we want to use them in a later stage of the pipeline.  This rule has
no actions to run in its <em>then</em> clause, since we only want to use it to determine whether subsequent stages should run.</p>
<p>The second rule, <em>from firewall subnet</em>, uses the built-in function <cite>cidr_match</cite>, which takes a <a class="reference external" href="https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing#CIDR_notation">CIDR pattern</a>
and an IP address. In this case we reference a field from the currently-processed message using the message reference syntax <code class="docutils literal notranslate"><span class="pre">$message</span></code>.</p>
<p>Graylog always sets the <code class="docutils literal notranslate"><span class="pre">gl2_remote_ip</span></code> field on messages, so we don’t need to check whether that field exists.  If we wanted to use a
field that might not exist on all messages we’d first use the <code class="docutils literal notranslate"><span class="pre">has_field</span></code> function to ensure its presence.</p>
<p>Note the call to <code class="docutils literal notranslate"><span class="pre">to_ip</span></code> around the <code class="docutils literal notranslate"><span class="pre">gl2_remote_ip</span></code> field reference. This is necessary since the field is stored as a <em>string</em> internally, and <code class="docutils literal notranslate"><span class="pre">cidr_match</span></code>
requires an IP address object for its <code class="docutils literal notranslate"><span class="pre">ip</span></code> parameter.</p>
<p>Requiring an explicit conversion to an IP address object demonstrates an important feature of Graylog’s rule language: enforcement of type safety to
ensure that you end up with the data in the correct format. All too often everything is treated as a string, which wastes enormous amounts of cycles
on data conversion and prevents proper analysis of the data.</p>
<p>We again have no actions to run, since we’re just using the rule to manage the pipeline’s flow, so the <em>then</em> block is empty.</p>
<p>You might be wondering why we didn’t just combine the <em>has firewall fields</em> and <em>from firewall subnet</em> rules, since they seem to be serving the same purpose.
While we could absolutely do so, recall that rules are intended to be reusable building blocks.  Imagine you have a another pipeline for a different
firewall subnet.  Rather than duplicating the logic to check for <code class="docutils literal notranslate"><span class="pre">src_ip</span></code> and <code class="docutils literal notranslate"><span class="pre">dst_ip</span></code>, and updating each rule if anything ever changes (e.g. additional fields),
you can simply add the <em>has firewall fields</em> rule to your new stage. With this approach you only need to update a single rule, with the change immediatedly
taking effect for all pipelines referencing it. Nice!</p>
</div>
<div class="section" id="data-types">
<h4>Data Types<a class="headerlink" href="#data-types" title="Permalink to this headline">¶</a></h4>
<p>As we have seen in the previous section, we need to make sure to use the proper data types when calling functions.</p>
<p>Graylog’s rule language parser rejects invalid use of types, making it safe to write rules.</p>
<p>The six built-in types in Graylog are <code class="docutils literal notranslate"><span class="pre">string</span></code> (a UTF-8 string), <code class="docutils literal notranslate"><span class="pre">double</span></code> (corresponds to Java’s <code class="docutils literal notranslate"><span class="pre">Double</span></code>),
<code class="docutils literal notranslate"><span class="pre">long</span></code> (Java’s <code class="docutils literal notranslate"><span class="pre">Long</span></code>), <code class="docutils literal notranslate"><span class="pre">boolean</span></code> (<code class="docutils literal notranslate"><span class="pre">Boolean</span></code>), <code class="docutils literal notranslate"><span class="pre">void</span></code> (indicating a function has no return value to prevent it
being used in a condition), and <code class="docutils literal notranslate"><span class="pre">ip</span></code> (a subset of <code class="docutils literal notranslate"><span class="pre">InetAddress</span></code>), but plugins are free
to add additional types as they see fit. The rule processor takes care of ensuring that values and functions agree on the types
being used.</p>
<p>By convention, functions that convert types start with the prefix <code class="docutils literal notranslate"><span class="pre">to_</span></code>.  Please refer to the <a class="reference internal" href="index.html#document-pages/pipelines/functions"><span class="doc">Functions</span></a> index for a list.</p>
</div>
<div class="section" id="conditions">
<h4>Conditions<a class="headerlink" href="#conditions" title="Permalink to this headline">¶</a></h4>
<p>In Graylog’s rules the <strong>when</strong> clause is a boolean expression, which is evaluated against the processed message.</p>
<p>Expressions support the common boolean operators <code class="docutils literal notranslate"><span class="pre">AND</span></code> (or <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>), <code class="docutils literal notranslate"><span class="pre">OR</span></code> (<code class="docutils literal notranslate"><span class="pre">||</span></code>), <code class="docutils literal notranslate"><span class="pre">NOT</span></code> (<code class="docutils literal notranslate"><span class="pre">!</span></code>), and comparison operators
(<code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>).</p>
<p>Any function that returns a value can be called in the <strong>when</strong> clause, but it must eventually evaluate to a boolean.  For example: we were
able to use <code class="docutils literal notranslate"><span class="pre">to_ip</span></code> in the <em>from firewall subnet</em> since it was being passed to <code class="docutils literal notranslate"><span class="pre">cidr_match</span></code>, which returns a boolean, but could not
use <code class="docutils literal notranslate"><span class="pre">route_to_stream</span></code> since it doesn’t return a value.</p>
<p>The condition must not be empty, but can simply consist of the boolean literal <code class="docutils literal notranslate"><span class="pre">true</span></code>.  This is useful when you always want to execute a rule’s actions.</p>
<p>If a condition calls a function which is not present (perhaps due to a typo or missing plugin) the call evaluates to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Comparing two fields can be done when you use the same data type, e.g.  <code class="docutils literal notranslate"><span class="pre">to_string($message.src_ip)</span> <span class="pre">==</span> <span class="pre">to_string($message.dst_ip)</span></code> will compare the two strings and will become <code class="docutils literal notranslate"><span class="pre">true</span></code> on match. Comparing different data types evaluates to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
</div>
</div>
<div class="section" id="actions">
<h4>Actions<a class="headerlink" href="#actions" title="Permalink to this headline">¶</a></h4>
<p>A rule’s <strong>then</strong> clause contains a list of actions which are evaluated in the order they appear.</p>
<p>There are two different types of actions:</p>
<ul class="simple">
<li>Function calls</li>
<li>Variable assignments</li>
</ul>
<p>Function calls look exactly like they do in conditions.  All functions, including those which do not return a value, may be used in the <strong>then</strong> clause.</p>
<p>Variable assignments have the following form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">let</span> <span class="n">name</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
</pre></div>
</div>
<p>Variables are useful to avoid recomputing expensive parsing of data, holding on to temporary values, or making rules more readable.</p>
<p>Variables need to be defined before they can be used.  Their fields (if any) can be accessed using the <code class="docutils literal notranslate"><span class="pre">name.field</span></code> notation in any place
where a value of the field’s type is required.</p>
<p>The list of actions can be empty, in which case the rule is essentially a pluggable condition to help manage a pipeline’s processing flow.</p>
</div>
</div>
<span id="document-pages/pipelines/stream_connections"></span><div class="section" id="stream-connections">
<h3>Stream connections<a class="headerlink" href="#stream-connections" title="Permalink to this headline">¶</a></h3>
<div class="section" id="overview">
<h4>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h4>
<p>Pipelines by themselves do not process any messages. For a pipeline to actually do any work it must first be connected to one or more streams,
which enables fine-grained control of the messages processed by that pipeline.</p>
<p>Note that the built-in function <code class="docutils literal notranslate"><span class="pre">route_to_stream</span></code> causes a message to be routed to a particular stream. After the routing occurs, the pipeline
engine will look up and start evaluating any pipelines connected to that stream.</p>
<p>Although pipelines can trigger other pipelines via message routing, incoming messages must be processed by an initial set of pipelines
connected to one or more streams.</p>
</div>
<div class="section" id="the-all-messages-stream">
<h4>The All messages stream<a class="headerlink" href="#the-all-messages-stream" title="Permalink to this headline">¶</a></h4>
<p id="default-stream">All messages received by Graylog are initially routed into the <strong>All messages</strong> stream. You can use this stream as the entry point to
pipeline processing, allowing incoming messages to be routed to more streams and being processed subsequently.</p>
<p>However, if you prefer to use the original stream matching functionality (i.e. stream rules), you can configure the <em>Pipeline Processor</em> to run after the
<em>Message Filter Chain</em> (in the <em>Message Processors Configuration</em> section of the <em>System -&gt; Configurations</em> page) and connect pipelines to existing streams.
This gives you fine-grained control over the extraction, conversion, and enrichment process.</p>
</div>
<div class="section" id="the-importance-of-message-processor-ordering">
<span id="message-processor-ordering"></span><h4>The importance of message processor ordering<a class="headerlink" href="#the-importance-of-message-processor-ordering" title="Permalink to this headline">¶</a></h4>
<p>It’s important to note that the order of message processors may have a significant impact on how your messages get processed.</p>
<p>For example: <em>Message Filter Chain</em> is responsible for setting static fields and running extractors defined on inputs, as well as evaluation of stream rules.
If you create a pipeline that expects the presence of a static field, but the <em>Pipeline Processor</em> runs before <em>Message Filter Chain</em>,
that field will not be available for use in your pipeline.</p>
<p>When designing your streams and pipelines be aware of the message processor order, especially if you have dependencies on earlier message processing.</p>
</div>
</div>
<span id="document-pages/pipelines/functions"></span><div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="overview">
<h4>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h4>
<p>Functions are the means of interacting with the messages Graylog processes.</p>
<p>Functions are written in Java and are pluggable, allowing Graylog’s pipeline processing capabilities to be easily extended.</p>
<p>Conceptually a function receives parameters, the current message context, and (potentially) returns a value. The data types of its
return value and parameters determine where it can be used in a rule. Graylog ensures the rules are sound
from a data type perspective.</p>
<p>A function’s parameters can either be passed as named pairs or position, as long as optional parameters are declared as coming
last. The functions’ documentation below indicates which parameters are optional by wrapping them in square brackets.</p>
<p>Let’s look at a small example to illustrate these properties:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>rule &quot;function howto&quot;
when
    has_field(&quot;transaction_date&quot;)
then
    // the following date format assumes there&#39;s no time zone in the string
    let new_date = parse_date(to_string($message.transaction_date), &quot;yyyy-MM-dd HH:mm:ss&quot;);
    set_field(&quot;transaction_year&quot;, new_date.year);
end
</pre></div>
</div>
<p>In this example, we check if the current message contains the field <code class="docutils literal notranslate"><span class="pre">transaction_date</span></code> and then, after converting it to a string,
try to parse it according to the format string <code class="docutils literal notranslate"><span class="pre">yyyy-MM-dd</span> <span class="pre">HH:mm:ss</span></code>, so for example the string <code class="docutils literal notranslate"><span class="pre">2016-03-05</span> <span class="pre">14:45:02</span></code>
would match. The <code class="docutils literal notranslate"><span class="pre">parse_date</span></code> function returns a <code class="docutils literal notranslate"><span class="pre">DateTime</span></code> object from the Java Joda-Time library, allowing easier access to the date’s
components.</p>
<p>We then add the transaction’s year as a new field, <code class="docutils literal notranslate"><span class="pre">transaction_year</span></code> to the message.</p>
<p>You’ll note that we didn’t specify a time zone for our date, but Graylog still had to pick one. Graylog never
relies on the local time of your server, as that makes it nearly impossible to figure out why date handling came up with its result.</p>
<p>The reason Graylog knows which timezone to use is because <code class="docutils literal notranslate"><span class="pre">parse_date</span></code> actually takes four parameters, rather than
the two we’ve given it in this example. The other two parameters are a <code class="docutils literal notranslate"><span class="pre">String</span></code> called <code class="docutils literal notranslate"><span class="pre">timezone</span></code> (default value: <code class="docutils literal notranslate"><span class="pre">&quot;UTC&quot;</span></code>)
and a <code class="docutils literal notranslate"><span class="pre">String</span></code> called <code class="docutils literal notranslate"><span class="pre">locale</span></code> (default value: the default locale of the system running Graylog) which both are optional.</p>
<p>Let’s assume we have another message field called <code class="docutils literal notranslate"><span class="pre">transaction_timezone</span></code>, which is sent by the application and
contains the time zone ID the transaction was done in (hopefully no application in the world sends its data like this, though):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>rule &quot;function howto&quot;
when
    has_field(&quot;transaction_date&quot;) &amp;&amp; has_field(&quot;transaction_timezone&quot;)
then
    // the following date format assumes there&#39;s no time zone in the string
    let new_date = parse_date(
                        to_string($message.transaction_date),
                        &quot;yyyy-MM-dd HH:mm:ss&quot;,
                        to_string($message.transaction_timezone)
                );
    set_field(&quot;transaction_year&quot;, new_date.year);
end
</pre></div>
</div>
<p>Now we’re passing the <code class="docutils literal notranslate"><span class="pre">parse_date</span></code> function its <code class="docutils literal notranslate"><span class="pre">timezone</span></code> parameter the string value of the message’s <code class="docutils literal notranslate"><span class="pre">transaction_timezone</span></code> field.</p>
<p>In this case we only have a single optional parameter, which makes it easy to simply omit it from the end of the function
call. However, if there are multiple optional parameters, or if there are so many parameters that it gets difficult to keep track of which
positions correspond to which parameters, you can also use the named parameter variant of function calls. In this mode
the order of the parameters does not matter, but all required ones still need to be there.</p>
<p>In our case the alternative version of calling <code class="docutils literal notranslate"><span class="pre">parse_date</span></code> would look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>rule &quot;function howto&quot;
when
    has_field(&quot;transaction_date&quot;) &amp;&amp; has_field(&quot;transaction_timezone&quot;)
then
    // the following date format assumes there&#39;s no time zone in the string
    let new_date = parse_date(
                        value: to_string($message.transaction_date),
                        pattern: &quot;yyyy-MM-dd HH:mm:ss&quot;,
                        timezone: to_string($message.transaction_timezone)
                );
    set_field(&quot;transaction_year&quot;, new_date.year);
end
</pre></div>
</div>
<p>All parameters in Graylog’s processing functions, listed below, are named.</p>
</div>
<div class="section" id="function-index">
<h4>Function Index<a class="headerlink" href="#function-index" title="Permalink to this headline">¶</a></h4>
<p>The following list describes the built-in functions that ship with Graylog. Additional third party functions are available via
plugins in the marketplace.</p>
<table border="1" class="colwidths-given docutils" id="id5">
<caption><span class="caption-text">Built-in Functions</span><a class="headerlink" href="#id5" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#debug">debug</a></td>
<td>Print the passed value as string in the Graylog log.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#to-bool">to_bool</a></td>
<td>Converts the single parameter to a boolean value using its string value.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#to-double">to_double</a></td>
<td>Converts the first parameter to a double floating point value.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#to-long">to_long</a></td>
<td>Converts the first parameter to a long integer value.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#to-string">to_string</a></td>
<td>Converts the first parameter to its string representation.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#to-url">to_url</a></td>
<td>Converts a value to a valid URL using its string representation.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#to-map">to_map</a></td>
<td>Converts a value to a map.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#is-null">is_null</a></td>
<td>Checks whether a value is <code class="docutils literal notranslate"><span class="pre">null</span></code>.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#is-not-null">is_not_null</a></td>
<td>Checks whether a value is not <code class="docutils literal notranslate"><span class="pre">null</span></code>.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#is-boolean">is_boolean</a></td>
<td>Checks whether a value is a boolean value (<code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#is-number">is_number</a></td>
<td>Checks whether a value is a numeric value (of type <code class="docutils literal notranslate"><span class="pre">long</span></code> or <code class="docutils literal notranslate"><span class="pre">double</span></code>).</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#is-double">is_double</a></td>
<td>Checks whether a value is a floating point value (of type <code class="docutils literal notranslate"><span class="pre">double</span></code>).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#is-long">is_long</a></td>
<td>Checks whether a value is an integer value (of type <code class="docutils literal notranslate"><span class="pre">long</span></code>).</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#is-string">is_string</a></td>
<td>Checks whether a value is a string.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#is-collection">is_collection</a></td>
<td>Checks whether a value is an iterable collection.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#is-list">is_list</a></td>
<td>Checks whether a value is an iterable list.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#is-map">is_map</a></td>
<td>Checks whether a value is a map.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#is-date">is_date</a></td>
<td>Checks whether a value is a date (of type <code class="docutils literal notranslate"><span class="pre">DateTime</span></code>).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#is-period">is_period</a></td>
<td>Checks whether a value is a time period (of type <code class="docutils literal notranslate"><span class="pre">Period</span></code>).</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#is-ip">is_ip</a></td>
<td>Checks whether a value is an IP address (IPv4 or IPv6).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#is-json">is_json</a></td>
<td>Checks whether a value is a parsed JSON tree.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#is-url">is_url</a></td>
<td>Checks whether a value is a parsed URL.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#abbreviate">abbreviate</a></td>
<td>Abbreviates a String using ellipses.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#capitalize">capitalize</a></td>
<td>Capitalizes a String changing the first letter to title case.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#uncapitalize">uncapitalize</a></td>
<td>Uncapitalizes a String changing the first letter to lower case.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#uppercase">uppercase</a></td>
<td>Converts a String to upper case.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#lowercase">lowercase</a></td>
<td>Converts a String to lower case.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#swapcase">swapcase</a></td>
<td>Swaps the case of a String.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#contains">contains</a></td>
<td>Checks if a string contains another string.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#starts-with">starts_with</a></td>
<td>Checks if a string starts with a given prefix.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ends-with">ends_with</a></td>
<td>Checks if a string ends with a given suffix.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#substring">substring</a></td>
<td>Returns a substring of <code class="docutils literal notranslate"><span class="pre">value</span></code> with the given start and end offsets.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#concat">concat</a></td>
<td>Concatenates two strings.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#split">split</a></td>
<td>Split a string around matches of this pattern (Java syntax).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#regex">regex</a></td>
<td>Match a regular expression against a string, with matcher groups.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#grok">grok</a></td>
<td>Applies a Grok pattern to a string.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#key-value">key_value</a></td>
<td>Extracts key/value pairs from a string.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#crc32">crc32</a></td>
<td>Returns the hex encoded CRC32 digest of the given string.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#crc32c">crc32c</a></td>
<td>Returns the hex encoded CRC32C (RFC 3720, Section 12.1) digest of the given string.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#md5">md5</a></td>
<td>Returns the hex encoded MD5 digest of the given string.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#murmur3-32">murmur3_32</a></td>
<td>Returns the hex encoded MurmurHash3 (32-bit) digest of the given string.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#murmur3-128">murmur3_128</a></td>
<td>Returns the hex encoded MurmurHash3 (128-bit) digest of the given string.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#sha1">sha1</a></td>
<td>Returns the hex encoded SHA1 digest of the given string.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#sha256">sha256</a></td>
<td>Returns the hex encoded SHA256 digest of the given string.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#sha512">sha512</a></td>
<td>Returns the hex encoded SHA512 digest of the given string.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#parse-json">parse_json</a></td>
<td>Parse a string into a JSON tree.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#select-jsonpath">select_jsonpath</a></td>
<td>Selects one or more named JSON Path expressions from a JSON tree.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#to-ip">to_ip</a></td>
<td>Converts the given string to an IP object.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#cidr-match">cidr_match</a></td>
<td>Checks whether the given IP matches a CIDR pattern.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#from-input">from_input</a></td>
<td>Checks whether the current message was received by the given input.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#route-to-stream">route_to_stream</a></td>
<td>Assigns the current message to the specified stream.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#remove-from-stream">remove_from_stream</a></td>
<td>Removes the current message from the specified stream.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#create-message">create_message</a></td>
<td><strong>Currently incomplete</strong> Creates a new message which will be evaluated by the entire processing pipeline.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#clone-message">clone_message</a></td>
<td>Clones a message.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#drop-message">drop_message</a></td>
<td>This currently processed message will be removed from the processing pipeline after the rule finishes.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#has-field">has_field</a></td>
<td>Checks whether the currently processed message contains the named field.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#remove-field">remove_field</a></td>
<td>Removes the named field from the currently processed message.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#set-field">set_field</a></td>
<td>Sets the name field to the given value in the currently processed message.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#set-fields">set_fields</a></td>
<td>Sets multiple fields to the given values in the currently processed message.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#rename-field">rename_field</a></td>
<td>Rename a message field.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#syslog-facility">syslog_facility</a></td>
<td>Converts a syslog facility number to its string representation.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#syslog-level">syslog_level</a></td>
<td>Converts a syslog level number to its string representation.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#expand-syslog-priority">expand_syslog_priority</a></td>
<td>Converts a syslog priority number to its level and facility.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#expand-syslog-priority-as-string">expand_syslog_priority_as_string</a></td>
<td>Converts a syslog priority number to its level and facility string representations.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#now">now</a></td>
<td>Returns the current date and time.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#parse-date">parse_date</a></td>
<td>Parses a date and time from the given string, according to a strict pattern.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#flex-parse-date">flex_parse_date</a></td>
<td>Attempts to parse a date and time using the Natty date parser.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#parse-unix-milliseconds">parse_unix_milliseconds</a></td>
<td>Attempts to parse a UNIX millisecond timestamp (milliseconds since 1970-01-01T00:00:00.000Z).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#format-date">format_date</a></td>
<td>Formats a date and time according to a given formatter pattern.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#to-date">to_date</a></td>
<td>Converts a type to a date.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#years">years</a></td>
<td>Create a period with a specified number of years.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#months">months</a></td>
<td>Create a period with a specified number of months.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#weeks">weeks</a></td>
<td>Create a period with a specified number of weeks.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#days">days</a></td>
<td>Create a period with a specified number of days.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#hours">hours</a></td>
<td>Create a period with a specified number of hours.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#minutes">minutes</a></td>
<td>Create a period with a specified number of minutes.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#seconds">seconds</a></td>
<td>Create a period with a specified number of seconds.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#millis">millis</a></td>
<td>Create a period with a specified number of millis.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#period">period</a></td>
<td>Parses an ISO 8601 period from the specified string.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#lookup">lookup</a></td>
<td>Looks up a multi value in the named lookup table.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#lookup-value">lookup_value</a></td>
<td>Looks up a single value in the named lookup table.</td>
</tr>
</tbody>
</table>
<div class="section" id="debug">
<h5>debug<a class="headerlink" href="#debug" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">debug(value:</span> <span class="pre">any)</span></code></p>
<p>Print any passed value as string in the Graylog log.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The debug message will only appear in the log of the Graylog node that was processing the message you are trying to debug.</p>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// Print: &quot;INFO : org.graylog.plugins.pipelineprocessor.ast.functions.Function - PIPELINE DEBUG: Dropped message from &lt;source&gt;&quot;
let debug_message = concat(&quot;Dropped message from &quot;, to_string($message.source));
debug(debug_message);
</pre></div>
</div>
</div>
<div class="section" id="to-bool">
<h5>to_bool<a class="headerlink" href="#to-bool" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">to_bool(value:</span> <span class="pre">any)</span></code></p>
<p>Converts the single parameter to a boolean value using its string value.</p>
</div>
<div class="section" id="to-double">
<h5>to_double<a class="headerlink" href="#to-double" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">to_double(value:</span> <span class="pre">any,</span> <span class="pre">[default:</span> <span class="pre">double])</span></code></p>
<p>Converts the first parameter to a double floating point value.</p>
</div>
<div class="section" id="to-long">
<h5>to_long<a class="headerlink" href="#to-long" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">to_long(value:</span> <span class="pre">any,</span> <span class="pre">[default:</span> <span class="pre">long])</span></code></p>
<p>Converts the first parameter to a long integer value.</p>
</div>
<div class="section" id="to-string">
<h5>to_string<a class="headerlink" href="#to-string" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">to_string(value:</span> <span class="pre">any,</span> <span class="pre">[default:</span> <span class="pre">string])</span></code></p>
<p>Converts the first parameter to its string representation.</p>
</div>
<div class="section" id="to-url">
<h5>to_url<a class="headerlink" href="#to-url" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">to_url(url:</span> <span class="pre">any,</span> <span class="pre">[default:</span> <span class="pre">string])</span></code></p>
<p>Converts the given <code class="docutils literal notranslate"><span class="pre">url</span></code> to a valid URL.</p>
</div>
<div class="section" id="to-map">
<h5>to_map<a class="headerlink" href="#to-map" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">to_map(value:</span> <span class="pre">any)</span></code></p>
<p>Converts the given map-like value to a valid map.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">to_map()</span></code> function currently only supports converting a parsed JSON tree into a map so that it can be used together with <a class="reference internal" href="#set-fields">set_fields</a>.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>let json = parse_json(to_string($message.json_payload));
let map = to_map(json);
set_fields(map);
</pre></div>
</div>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#set-fields">set_fields</a></li>
<li><a class="reference internal" href="#parse-json">parse_json</a></li>
</ul>
</div>
<div class="section" id="is-null">
<h5>is_null<a class="headerlink" href="#is-null" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">is_null(value:</span> <span class="pre">any)</span></code></p>
<p>Checks if the given value is <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// Check if the `src_addr` field is null (empty).
// If null, boolean true is returned. If not null, boolean false is returned.
is_null(src_addr)
</pre></div>
</div>
</div>
<div class="section" id="is-not-null">
<h5>is_not_null<a class="headerlink" href="#is-not-null" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">is_not_null(value:</span> <span class="pre">any)</span></code></p>
<p>Checks if the given value is not <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// Check if the `src_addr` field is not null.
// If not null, boolean true is returned. If null, boolean false is returned.
is_not_null(src_addr)
</pre></div>
</div>
</div>
<div class="section" id="is-boolean">
<h5>is_boolean<a class="headerlink" href="#is-boolean" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">is_boolean(value:</span> <span class="pre">any)</span></code></p>
<p>Checks whether the given value is a boolean value (<code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>).</p>
</div>
<div class="section" id="is-number">
<h5>is_number<a class="headerlink" href="#is-number" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">is_number(value:</span> <span class="pre">any)</span></code></p>
<p>Checks whether the given value is a numeric value (of type <code class="docutils literal notranslate"><span class="pre">long</span></code> or <code class="docutils literal notranslate"><span class="pre">double</span></code>).</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#is-double">is_double</a></li>
<li><a class="reference internal" href="#to-double">to_double</a></li>
<li><a class="reference internal" href="#is-long">is_long</a></li>
<li><a class="reference internal" href="#to-long">to_long</a></li>
</ul>
</div>
<div class="section" id="is-double">
<h5>is_double<a class="headerlink" href="#is-double" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">is_double(value:</span> <span class="pre">any)</span></code></p>
<p>Checks whether the given value is a floating point value (of type <code class="docutils literal notranslate"><span class="pre">double</span></code>).</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#to-double">to_double</a></li>
</ul>
</div>
<div class="section" id="is-long">
<h5>is_long<a class="headerlink" href="#is-long" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">is_long(value:</span> <span class="pre">any)</span></code></p>
<p>Checks whether the given value is an integer value (of type <code class="docutils literal notranslate"><span class="pre">long</span></code>).</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#to-long">to_long</a></li>
</ul>
</div>
<div class="section" id="is-string">
<h5>is_string<a class="headerlink" href="#is-string" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">is_string(value:</span> <span class="pre">any)</span></code></p>
<p>Checks whether the given value is a string.</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#to-string">to_string</a></li>
</ul>
</div>
<div class="section" id="is-collection">
<h5>is_collection<a class="headerlink" href="#is-collection" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">is_collection(value:</span> <span class="pre">any)</span></code></p>
<p>Checks whether the given value is an iterable collection.</p>
</div>
<div class="section" id="is-list">
<h5>is_list<a class="headerlink" href="#is-list" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">is_list(value:</span> <span class="pre">any)</span></code></p>
<p>Checks whether the given value is an iterable list.</p>
</div>
<div class="section" id="is-map">
<h5>is_map<a class="headerlink" href="#is-map" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">is_map(value:</span> <span class="pre">any)</span></code></p>
<p>Checks whether the given value is a map.</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#to-map">to_map</a></li>
</ul>
</div>
<div class="section" id="is-date">
<h5>is_date<a class="headerlink" href="#is-date" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">is_date(value:</span> <span class="pre">any)</span></code></p>
<p>Checks whether the given value is a date (of type <code class="docutils literal notranslate"><span class="pre">DateTime</span></code>).</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#now">now</a></li>
<li><a class="reference internal" href="#parse-date">parse_date</a></li>
<li><a class="reference internal" href="#flex-parse-date">flex_parse_date</a></li>
<li><a class="reference internal" href="#parse-unix-milliseconds">parse_unix_milliseconds</a></li>
</ul>
</div>
<div class="section" id="is-period">
<h5>is_period<a class="headerlink" href="#is-period" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">is_period(value:</span> <span class="pre">any)</span></code></p>
<p>Checks whether the given value is a time period (of type <code class="docutils literal notranslate"><span class="pre">Period</span></code>).</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#years">years</a></li>
<li><a class="reference internal" href="#months">months</a></li>
<li><a class="reference internal" href="#weeks">weeks</a></li>
<li><a class="reference internal" href="#days">days</a></li>
<li><a class="reference internal" href="#hours">hours</a></li>
<li><a class="reference internal" href="#minutes">minutes</a></li>
<li><a class="reference internal" href="#seconds">seconds</a></li>
<li><a class="reference internal" href="#millis">millis</a></li>
<li><a class="reference internal" href="#period">period</a></li>
</ul>
</div>
<div class="section" id="is-ip">
<h5>is_ip<a class="headerlink" href="#is-ip" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">is_ip(value:</span> <span class="pre">any)</span></code></p>
<p>Checks whether the given value is an IP address (IPv4 or IPv6).</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#to-ip">to_ip</a></li>
</ul>
</div>
<div class="section" id="is-json">
<h5>is_json<a class="headerlink" href="#is-json" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">is_json(value:</span> <span class="pre">any)</span></code></p>
<p>Checks whether the given value is a parsed JSON tree.</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#parse-json">parse_json</a></li>
</ul>
</div>
<div class="section" id="is-url">
<h5>is_url<a class="headerlink" href="#is-url" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">is_url(value:</span> <span class="pre">any)</span></code></p>
<p>Checks whether the given value is a parsed URL.</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#to-url">to_url</a></li>
</ul>
</div>
<div class="section" id="abbreviate">
<h5>abbreviate<a class="headerlink" href="#abbreviate" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">abbreviate(value:</span> <span class="pre">string,</span> <span class="pre">width:</span> <span class="pre">long)</span></code></p>
<p>Abbreviates a String using ellipses, the width defines the maximum length of the resulting string.</p>
</div>
<div class="section" id="capitalize">
<h5>capitalize<a class="headerlink" href="#capitalize" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">capitalize(value:</span> <span class="pre">string)</span></code></p>
<p>Capitalizes a String changing the first letter to title case.</p>
</div>
<div class="section" id="uncapitalize">
<h5>uncapitalize<a class="headerlink" href="#uncapitalize" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">uncapitalize(value:</span> <span class="pre">string)</span></code></p>
<p>Uncapitalizes a String changing the first letter to lower case.</p>
</div>
<div class="section" id="uppercase">
<h5>uppercase<a class="headerlink" href="#uppercase" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">uppercase(value:</span> <span class="pre">string,</span> <span class="pre">[locale:</span> <span class="pre">string])</span></code></p>
<p>Converts a String to upper case. The locale (IETF BCP 47 language tag) defaults to “en”.</p>
</div>
<div class="section" id="lowercase">
<h5>lowercase<a class="headerlink" href="#lowercase" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">lowercase(value:</span> <span class="pre">string,</span> <span class="pre">[locale:</span> <span class="pre">string])</span></code></p>
<p>Converts a String to lower case. The locale (IETF BCP 47 language tag) defaults to “en”.</p>
</div>
<div class="section" id="swapcase">
<h5>swapcase<a class="headerlink" href="#swapcase" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">swapcase(value:</span> <span class="pre">string)</span></code></p>
<p>Swaps the case of a String changing upper and title case to lower case, and lower case to upper case.</p>
</div>
<div class="section" id="contains">
<h5>contains<a class="headerlink" href="#contains" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">contains(value:</span> <span class="pre">string,</span> <span class="pre">search:</span> <span class="pre">string,</span> <span class="pre">[ignore_case:</span> <span class="pre">boolean])</span></code></p>
<p>Checks if <code class="docutils literal notranslate"><span class="pre">value</span></code> contains <code class="docutils literal notranslate"><span class="pre">search</span></code>, optionally ignoring the case of the search pattern.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// Check if the `example.org` is in the `hostname` field. Ignore case.
contains(to_string($message.hostname), &quot;example.org&quot;, true)
</pre></div>
</div>
</div>
<div class="section" id="starts-with">
<h5>starts_with<a class="headerlink" href="#starts-with" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">starts_with(value:</span> <span class="pre">string,</span> <span class="pre">prefix:</span> <span class="pre">string,</span> <span class="pre">[ignore_case:</span> <span class="pre">boolean])</span></code></p>
<p>Checks if <code class="docutils literal notranslate"><span class="pre">value</span></code> starts with <code class="docutils literal notranslate"><span class="pre">prefix</span></code>, optionally ignoring the case of the string.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Returns</span> <span class="n">true</span>
<span class="n">starts_with</span><span class="p">(</span><span class="s2">&quot;Foobar Baz Quux&quot;</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="n">true</span><span class="p">);</span>
<span class="o">//</span> <span class="n">Returns</span> <span class="n">false</span>
<span class="n">starts_with</span><span class="p">(</span><span class="s2">&quot;Foobar Baz Quux&quot;</span><span class="p">,</span> <span class="s2">&quot;Quux&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="ends-with">
<h5>ends_with<a class="headerlink" href="#ends-with" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">ends_with(value:</span> <span class="pre">string,</span> <span class="pre">suffix:</span> <span class="pre">string,</span> <span class="pre">[ignore_case:</span> <span class="pre">boolean])</span></code></p>
<p>Checks if <code class="docutils literal notranslate"><span class="pre">value</span></code> ends with <code class="docutils literal notranslate"><span class="pre">suffix</span></code>, optionally ignoring the case of the string.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Returns</span> <span class="n">true</span>
<span class="n">starts_with</span><span class="p">(</span><span class="s2">&quot;Foobar Baz Quux&quot;</span><span class="p">,</span> <span class="s2">&quot;quux&quot;</span><span class="p">,</span> <span class="n">true</span><span class="p">);</span>
<span class="o">//</span> <span class="n">Returns</span> <span class="n">false</span>
<span class="n">starts_with</span><span class="p">(</span><span class="s2">&quot;Foobar Baz Quux&quot;</span><span class="p">,</span> <span class="s2">&quot;Baz&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="substring">
<h5>substring<a class="headerlink" href="#substring" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">substring(value:</span> <span class="pre">string,</span> <span class="pre">start:</span> <span class="pre">long,</span> <span class="pre">[end:</span> <span class="pre">long])</span></code></p>
<p>Returns a substring of <code class="docutils literal notranslate"><span class="pre">value</span></code> starting at the <code class="docutils literal notranslate"><span class="pre">start</span></code> offset (zero based indices), optionally ending at
the <code class="docutils literal notranslate"><span class="pre">end</span></code> offset. Both offsets can be negative, indicating positions relative to the end of <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p>
</div>
<div class="section" id="concat">
<h5>concat<a class="headerlink" href="#concat" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">concat(first:</span> <span class="pre">string,</span> <span class="pre">second:</span> <span class="pre">string)</span></code></p>
<p>Returns a new string combining the text of <code class="docutils literal notranslate"><span class="pre">first</span></code> and <code class="docutils literal notranslate"><span class="pre">second</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">concat()</span></code> function only concatenates two strings. If you want to build a string from more than two sub-strings, you’ll have to use <code class="docutils literal notranslate"><span class="pre">concat()</span></code> multiple times, see the example below.</p>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// Build a message like:
// &#39;TCP connect from 88.99.35.172 to 192.168.1.10 Port 443&#39;
let build_message_0 = concat(to_string($message.protocol), &quot; connect from &quot;);
let build_message_1 = concat(build_message_0, to_string($message.src_ip));
let build_message_2 = concat(build_message_1, &quot; to &quot;);
let build_message_3 = concat(build_message_2, to_string($message.dst_ip));
let build_message_4 = concat(build_message_3, &quot; Port &quot;);
let build_message_5 = concat(build_message_4, to_string($message.dst_port));
set_field(&quot;message&quot;, build_message_5);
</pre></div>
</div>
</div>
<div class="section" id="split">
<h5>split<a class="headerlink" href="#split" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">split(pattern:</span> <span class="pre">string,</span> <span class="pre">value:</span> <span class="pre">string,</span> <span class="pre">[limit:</span> <span class="pre">int])</span></code></p>
<p>Split a <code class="docutils literal notranslate"><span class="pre">value</span></code> around matches of <code class="docutils literal notranslate"><span class="pre">pattern</span></code>. Use <code class="docutils literal notranslate"><span class="pre">limit</span></code> to indicate the number of times the pattern
should be applied.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Patterns have to be valid <a class="reference external" href="https://docs.oracle.com/javase/tutorial/essential/regex/literals.html">Java String literals</a>, please ensure you escape any backslashes in your regular expressions!</p>
</div>
</div>
<div class="section" id="regex">
<h5>regex<a class="headerlink" href="#regex" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">regex(pattern:</span> <span class="pre">string,</span> <span class="pre">value:</span> <span class="pre">string,</span> <span class="pre">[group_names:</span> <span class="pre">array[string])</span></code></p>
<p>Match the regular expression in <code class="docutils literal notranslate"><span class="pre">pattern</span></code> against <code class="docutils literal notranslate"><span class="pre">value</span></code>. Returns a match object, with the boolean property
<code class="docutils literal notranslate"><span class="pre">matches</span></code> to indicate whether the regular expression matched and, if requested, the matching groups as <code class="docutils literal notranslate"><span class="pre">groups</span></code>.
The groups can optionally be named using the <code class="docutils literal notranslate"><span class="pre">group_names</span></code> array. If not named, the groups names are strings starting with <code class="docutils literal notranslate"><span class="pre">&quot;0&quot;</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Patterns have to be valid <a class="reference external" href="https://docs.oracle.com/javase/tutorial/essential/regex/literals.html">Java String literals</a>, please ensure you escape any backslashes in your regular expressions!</p>
</div>
</div>
<div class="section" id="grok">
<h5>grok<a class="headerlink" href="#grok" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">grok(pattern:</span> <span class="pre">string,</span> <span class="pre">value:</span> <span class="pre">string,</span> <span class="pre">[only_named_captures:</span> <span class="pre">boolean])</span></code></p>
<p>Applies the grok pattern <code class="docutils literal notranslate"><span class="pre">grok</span></code> to <code class="docutils literal notranslate"><span class="pre">value</span></code>. Returns a match object, containing a Map of field names and values.
You can set <code class="docutils literal notranslate"><span class="pre">only_named_captures</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code> to only return matches using named captures.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">The result of executing the <code class="docutils literal notranslate"><span class="pre">grok</span></code> function can be passed as argument for <a class="reference internal" href="#set-fields">set_fields</a> to set the extracted fields into a message.</p>
</div>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#set-fields">set_fields</a></li>
</ul>
</div>
<div class="section" id="key-value">
<h5>key_value<a class="headerlink" href="#key-value" title="Permalink to this headline">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">key_value</span><span class="p">(</span>
  <span class="n">value</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
  <span class="p">[</span><span class="n">delimiters</span><span class="p">:</span> <span class="n">string</span><span class="p">],</span>
  <span class="p">[</span><span class="n">kv_delimiters</span><span class="p">:</span> <span class="n">string</span><span class="p">],</span>
  <span class="p">[</span><span class="n">ignore_empty_values</span><span class="p">:</span> <span class="n">boolean</span><span class="p">],</span>
  <span class="p">[</span><span class="n">allow_dup_keys</span><span class="p">:</span> <span class="n">boolean</span><span class="p">],</span>
  <span class="p">[</span><span class="n">handle_dup_keys</span><span class="p">:</span> <span class="n">string</span><span class="p">],</span>
  <span class="p">[</span><span class="n">trim_key_chars</span><span class="p">:</span> <span class="n">string</span><span class="p">],</span>
  <span class="p">[</span><span class="n">trim_value_chars</span><span class="p">:</span> <span class="n">string</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Extracts key-value pairs from the given <code class="docutils literal notranslate"><span class="pre">value</span></code> and returns them as a Map of field names and values. You can optionally specify:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">delimiters</span></code></dt>
<dd>Characters used to separate pairs. We will use each character in the string, so you do not need to separate them. Default value: <code class="docutils literal notranslate"><span class="pre">&lt;whitespace&gt;</span></code>.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">kv_delimiters</span></code></dt>
<dd>Characters used to separate keys from values. Again, there is no need to separate each character. Default value: <code class="docutils literal notranslate"><span class="pre">=</span></code>.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ignore_empty_values</span></code></dt>
<dd>Ignores keys containing empty values. Default value: <code class="docutils literal notranslate"><span class="pre">true</span></code>.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">allow_dup_keys</span></code></dt>
<dd>Indicates if duplicated keys are allowed. Default value: <code class="docutils literal notranslate"><span class="pre">true</span></code>.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">handle_dup_keys</span></code></dt>
<dd>How to handle duplicated keys (if <code class="docutils literal notranslate"><span class="pre">allow_dup_keys</span></code> is set). It can take the values <code class="docutils literal notranslate"><span class="pre">take_first</span></code>, which will only use the first value for the key;
or <code class="docutils literal notranslate"><span class="pre">take_last</span></code>, which will only use the last value for the key. Setting this option to any other value will change the handling to concatenate, which
will combine all values given to the key, separating them with the value set in this option. For example, setting <code class="docutils literal notranslate"><span class="pre">handle_dup_keys:</span> <span class="pre">&quot;,&quot;</span></code>, would
combine all values given to a key <code class="docutils literal notranslate"><span class="pre">a</span></code>, separating them with a comma, such as <code class="docutils literal notranslate"><span class="pre">1,2,foo</span></code>. Default value: <code class="docutils literal notranslate"><span class="pre">take_first</span></code>.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">trim_key_chars</span></code></dt>
<dd>Characters to trim (remove from the beginning and end) from keys. Default value: no trim.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">trim_value_chars</span></code></dt>
<dd>Characters to trim (remove from the beginning and end) from values. Default value: no trim.</dd>
</dl>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">The result of executing the <code class="docutils literal notranslate"><span class="pre">key_value</span></code> function can be passed as argument for <a class="reference internal" href="#set-fields">set_fields</a> to set the extracted fields into a message.</p>
</div>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#set-fields">set_fields</a></li>
</ul>
</div>
<div class="section" id="crc32">
<h5>crc32<a class="headerlink" href="#crc32" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">crc32(value:</span> <span class="pre">string)</span></code></p>
<p>Creates the hex encoded CRC32 digest of the <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p>
</div>
<div class="section" id="crc32c">
<h5>crc32c<a class="headerlink" href="#crc32c" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">crc32c(value:</span> <span class="pre">string)</span></code></p>
<p>Creates the hex encoded CRC32C (RFC 3720, Section 12.1) digest of the <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p>
</div>
<div class="section" id="md5">
<h5>md5<a class="headerlink" href="#md5" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">md5(value:</span> <span class="pre">string)</span></code></p>
<p>Creates the hex encoded MD5 digest of the <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p>
</div>
<div class="section" id="murmur3-32">
<h5>murmur3_32<a class="headerlink" href="#murmur3-32" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">murmur3_32(value:</span> <span class="pre">string)</span></code></p>
<p>Creates the hex encoded MurmurHash3 (32-bit) digest of the <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p>
</div>
<div class="section" id="murmur3-128">
<h5>murmur3_128<a class="headerlink" href="#murmur3-128" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">murmur3_128(value:</span> <span class="pre">string)</span></code></p>
<p>Creates the hex encoded MurmurHash3 (128-bit) digest of the <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p>
</div>
<div class="section" id="sha1">
<h5>sha1<a class="headerlink" href="#sha1" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">sha1(value:</span> <span class="pre">string)</span></code></p>
<p>Creates the hex encoded SHA1 digest of the <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p>
</div>
<div class="section" id="sha256">
<h5>sha256<a class="headerlink" href="#sha256" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">sha256(value:</span> <span class="pre">string)</span></code></p>
<p>Creates the hex encoded SHA256 digest of the <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p>
</div>
<div class="section" id="sha512">
<h5>sha512<a class="headerlink" href="#sha512" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">sha512(value:</span> <span class="pre">string)</span></code></p>
<p>Creates the hex encoded SHA512 digest of the <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p>
</div>
<div class="section" id="parse-json">
<h5>parse_json<a class="headerlink" href="#parse-json" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">parse_json(value:</span> <span class="pre">string)</span></code></p>
<p>Parses the <code class="docutils literal notranslate"><span class="pre">value</span></code> string as JSON, returning the resulting JSON tree.</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#to-map">to_map</a></li>
</ul>
</div>
<div class="section" id="select-jsonpath">
<h5>select_jsonpath<a class="headerlink" href="#select-jsonpath" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">select_jsonpath(json:</span> <span class="pre">JsonNode,</span> <span class="pre">paths:</span> <span class="pre">Map&lt;string,</span> <span class="pre">string&gt;)</span></code></p>
<p>Evaluates the given <code class="docutils literal notranslate"><span class="pre">paths</span></code> against the <code class="docutils literal notranslate"><span class="pre">json</span></code> tree and returns the map of the resulting values.</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#is-json">is_json</a></li>
<li><a class="reference internal" href="#parse-json">parse_json</a></li>
</ul>
</div>
<div class="section" id="to-ip">
<h5>to_ip<a class="headerlink" href="#to-ip" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">to_ip(ip:</span> <span class="pre">string)</span></code></p>
<p>Converts the given <code class="docutils literal notranslate"><span class="pre">ip</span></code> string to an IpAddress object.</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#cidr-match">cidr_match</a></li>
</ul>
</div>
<div class="section" id="cidr-match">
<h5>cidr_match<a class="headerlink" href="#cidr-match" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">cidr_match(cidr:</span> <span class="pre">string,</span> <span class="pre">ip:</span> <span class="pre">IpAddress)</span></code></p>
<p>Checks whether the given <code class="docutils literal notranslate"><span class="pre">ip</span></code> address object matches the <code class="docutils literal notranslate"><span class="pre">cidr</span></code> pattern.</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#to-ip">to_ip</a></li>
</ul>
</div>
<div class="section" id="from-input">
<h5>from_input<a class="headerlink" href="#from-input" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">from_input(id:</span> <span class="pre">string</span> <span class="pre">|</span> <span class="pre">name:</span> <span class="pre">string)</span></code></p>
<p>Checks whether the currently processed message was received on the given input. The input can be looked up by either
specifying its <code class="docutils literal notranslate"><span class="pre">name</span></code> (the comparison ignores the case) or the <code class="docutils literal notranslate"><span class="pre">id</span></code>.</p>
</div>
<div class="section" id="route-to-stream">
<h5>route_to_stream<a class="headerlink" href="#route-to-stream" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">route_to_stream(id:</span> <span class="pre">string</span> <span class="pre">|</span> <span class="pre">name:</span> <span class="pre">string,</span> <span class="pre">[message:</span> <span class="pre">Message],</span> <span class="pre">[remove_from_default:</span> <span class="pre">boolean])</span></code></p>
<p>Routes the <code class="docutils literal notranslate"><span class="pre">message</span></code> to the given stream. The stream can be looked up by either
specifying its <code class="docutils literal notranslate"><span class="pre">name</span></code> or the <code class="docutils literal notranslate"><span class="pre">id</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">message</span></code> is omitted, this function uses the currently processed message.</p>
<p>This causes the message to be evaluated on the pipelines connected to that stream, unless the stream has already been
processed for this message.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">remove_from_default</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>, the message is also removed from the default stream “All messages”.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// Route the current processed message to a stream with ID `512bad1a535b43bd6f3f5e86` (preferred method)
route_to_stream(&quot;512bad1a535b43bd6f3f5e86&quot;);

// Route the current processed message to a stream named `Custom Stream`
route_to_stream(&quot;Custom Stream&quot;);
</pre></div>
</div>
</div>
<div class="section" id="remove-from-stream">
<h5>remove_from_stream<a class="headerlink" href="#remove-from-stream" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">remove_from_stream(id:</span> <span class="pre">string</span> <span class="pre">|</span> <span class="pre">name:</span> <span class="pre">string,</span> <span class="pre">[message:</span> <span class="pre">Message])</span></code></p>
<p>Removes the <code class="docutils literal notranslate"><span class="pre">message</span></code> from the given stream. The stream can be looked up by either
specifying its <code class="docutils literal notranslate"><span class="pre">name</span></code> or the <code class="docutils literal notranslate"><span class="pre">id</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">message</span></code> is omitted, this function uses the currently processed message.</p>
<p>If the message ends up being on no stream anymore, it is implicitly routed back to the default stream “All messages”.
This ensures that you the message is not accidentally lost due to complex stream routing rules.
If you want to discard the message entirely, use the <code class="docutils literal notranslate"><span class="pre">drop_message</span></code> function.</p>
</div>
<div class="section" id="create-message">
<h5>create_message<a class="headerlink" href="#create-message" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">create_message([message:</span> <span class="pre">string],</span> <span class="pre">[source:</span> <span class="pre">string],</span> <span class="pre">[timestamp:</span> <span class="pre">DateTime])</span></code></p>
<p>Creates a new message with from the given parameters. If any of them is omitted, its value is taken from the corresponding
fields of the currently processed message. If <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> is omitted, the timestamp of the created message will
be the timestamp at that moment.</p>
</div>
<div class="section" id="clone-message">
<h5>clone_message<a class="headerlink" href="#clone-message" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">clone_message([message:</span> <span class="pre">Message])</span></code></p>
<p>Clones a message. If <code class="docutils literal notranslate"><span class="pre">message</span></code> is omitted, this function uses the currently processed message.</p>
</div>
<div class="section" id="drop-message">
<span id="id2"></span><h5>drop_message<a class="headerlink" href="#drop-message" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">drop_message(message:</span> <span class="pre">Message)</span></code></p>
<p>The processing pipeline will remove the given <code class="docutils literal notranslate"><span class="pre">message</span></code> after the rule is finished executing.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">message</span></code> is omitted, this function uses the currently processed message.</p>
<p>This can be used to implement flexible blacklisting based on various conditions.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>rule &quot;drop messages over 16383 characters&quot;
when
    has_field(&quot;message&quot;) AND
    regex(pattern: &quot;^.{16383,}$&quot;, value: to_string($message.message)).matches == true
then
    drop_message();
    // added debug message to be notified about the dropped message
    debug( concat(&quot;dropped oversized message from &quot;, to_string($message.source)));
end
</pre></div>
</div>
</div>
<div class="section" id="has-field">
<h5>has_field<a class="headerlink" href="#has-field" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">has_field(field:</span> <span class="pre">string,</span> <span class="pre">[message:</span> <span class="pre">Message])</span></code></p>
<p>Checks whether the given <code class="docutils literal notranslate"><span class="pre">message</span></code> contains a field with the name <code class="docutils literal notranslate"><span class="pre">field</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">message</span></code> is omitted, this function uses the currently processed message.</p>
</div>
<div class="section" id="remove-field">
<h5>remove_field<a class="headerlink" href="#remove-field" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">remove_field(field:</span> <span class="pre">string,</span> <span class="pre">[message:</span> <span class="pre">Message])</span></code></p>
<p>Removes the given field with the name <code class="docutils literal notranslate"><span class="pre">field</span></code> from the given <code class="docutils literal notranslate"><span class="pre">message</span></code>, unless the field is reserved.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">message</span></code> is omitted, this function uses the currently processed message.</p>
</div>
<div class="section" id="set-field">
<h5>set_field<a class="headerlink" href="#set-field" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">set_field(field:</span> <span class="pre">string,</span> <span class="pre">value:</span> <span class="pre">any,</span> <span class="pre">[prefix:</span> <span class="pre">string],</span> <span class="pre">[suffix:</span> <span class="pre">string],</span> <span class="pre">[message:</span> <span class="pre">Message])</span></code></p>
<p>Sets the given field named <code class="docutils literal notranslate"><span class="pre">field</span></code> to the new <code class="docutils literal notranslate"><span class="pre">value</span></code>. The <code class="docutils literal notranslate"><span class="pre">field</span></code> name must be valid, and specifically cannot include
a <code class="docutils literal notranslate"><span class="pre">.</span></code> character. It is trimmed of leading and trailing whitespace. String values are trimmed of whitespace as well.</p>
<p>The optional <code class="docutils literal notranslate"><span class="pre">prefix</span></code> and <code class="docutils literal notranslate"><span class="pre">suffix</span></code> parameters specify which prefix or suffix should be added to the inserted field name.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">message</span></code> is omitted, this function uses the currently processed message.</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#set-fields">set_fields</a></li>
</ul>
</div>
<div class="section" id="set-fields">
<span id="id3"></span><h5>set_fields<a class="headerlink" href="#set-fields" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">set_fields(fields:</span> <span class="pre">Map&lt;string,</span> <span class="pre">any&gt;,</span> <span class="pre">[prefix:</span> <span class="pre">string],</span> <span class="pre">[suffix:</span> <span class="pre">string],</span> <span class="pre">[message:</span> <span class="pre">Message])</span></code></p>
<p>Sets all of the given name-value pairs in <code class="docutils literal notranslate"><span class="pre">field</span></code> in the given message. This is a convenience function
acting like <a class="reference internal" href="#set-field">set_field</a>. It can be helpful for using the result of a function like <a class="reference internal" href="#select-jsonpath">select_jsonpath</a> or <a class="reference internal" href="#regex">regex</a> in the
currently processed message especially when the key names are the result of a regular expression.</p>
<p>The optional <code class="docutils literal notranslate"><span class="pre">prefix</span></code> and <code class="docutils literal notranslate"><span class="pre">suffix</span></code> parameters specify which prefix or suffix should be added to the inserted field names.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">message</span></code> is omitted, this function uses the currently processed message.</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#set-field">set_field</a></li>
<li><a class="reference internal" href="#to-map">to_map</a></li>
<li><a class="reference internal" href="#grok">grok</a></li>
<li><a class="reference internal" href="#key-value">key_value</a></li>
</ul>
</div>
<div class="section" id="rename-field">
<h5>rename_field<a class="headerlink" href="#rename-field" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">rename_field(old_field:</span> <span class="pre">string,</span> <span class="pre">new_field:</span> <span class="pre">string,</span> <span class="pre">[message:</span> <span class="pre">Message])</span></code></p>
<p>Modifies the field name <code class="docutils literal notranslate"><span class="pre">old_field</span></code> to <code class="docutils literal notranslate"><span class="pre">new_field</span></code> in the given message, keeping the field value unchanged.</p>
</div>
<div class="section" id="syslog-facility">
<h5>syslog_facility<a class="headerlink" href="#syslog-facility" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">syslog_facility(value:</span> <span class="pre">any)</span></code></p>
<p>Converts the <a class="reference external" href="https://tools.ietf.org/html/rfc3164#section-4.1.1">syslog facility number</a> in <code class="docutils literal notranslate"><span class="pre">value</span></code> to its string representation.</p>
</div>
<div class="section" id="syslog-level">
<h5>syslog_level<a class="headerlink" href="#syslog-level" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">syslog_level(value:</span> <span class="pre">any)</span></code></p>
<p>Converts the <a class="reference external" href="https://tools.ietf.org/html/rfc3164#section-4.1.1">syslog severity number</a> in <code class="docutils literal notranslate"><span class="pre">value</span></code> to its string representation.</p>
</div>
<div class="section" id="expand-syslog-priority">
<h5>expand_syslog_priority<a class="headerlink" href="#expand-syslog-priority" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">expand_syslog_priority(value:</span> <span class="pre">any)</span></code></p>
<p>Converts the <a class="reference external" href="https://tools.ietf.org/html/rfc3164#section-4.1.1">syslog priority number</a> in <code class="docutils literal notranslate"><span class="pre">value</span></code> to its numeric severity and facility values.</p>
</div>
<div class="section" id="expand-syslog-priority-as-string">
<h5>expand_syslog_priority_as_string<a class="headerlink" href="#expand-syslog-priority-as-string" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">expand_syslog_priority_as_string(value:</span> <span class="pre">any)</span></code></p>
<p>Converts the <a class="reference external" href="https://tools.ietf.org/html/rfc3164#section-4.1.1">syslog priority number</a> in <code class="docutils literal notranslate"><span class="pre">value</span></code> to its severity and facility string representations.</p>
</div>
<div class="section" id="now">
<h5>now<a class="headerlink" href="#now" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">now([timezone:</span> <span class="pre">string])</span></code></p>
<p>Returns the current date and time. Uses the default time zone <code class="docutils literal notranslate"><span class="pre">UTC</span></code>.</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#is-date">is_date</a></li>
</ul>
</div>
<div class="section" id="parse-date">
<h5>parse_date<a class="headerlink" href="#parse-date" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">parse_date(value:</span> <span class="pre">string,</span> <span class="pre">pattern:</span> <span class="pre">string,</span> <span class="pre">[locale:</span> <span class="pre">string],</span> <span class="pre">[timezone:</span> <span class="pre">string])</span></code></p>
<p>Parses the <code class="docutils literal notranslate"><span class="pre">value</span></code> into a date and time object, using the <code class="docutils literal notranslate"><span class="pre">pattern</span></code>. If no timezone is detected in the pattern, the optional
timezone parameter is used as the assumed timezone. If omitted the timezone defaults to <code class="docutils literal notranslate"><span class="pre">UTC</span></code>.</p>
<p>The format used for the <code class="docutils literal notranslate"><span class="pre">pattern</span></code> parameter is identical to the pattern of the <a class="reference external" href="http://www.joda.org/joda-time/apidocs/org/joda/time/format/DateTimeFormat.html">Joda-Time DateTimeFormat</a>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="34%" />
<col width="15%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Symbol</th>
<th class="head">Meaning</th>
<th class="head">Presentation</th>
<th class="head">Examples</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">G</span></code></td>
<td>era</td>
<td>text</td>
<td>AD</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">C</span></code></td>
<td>century of era (&gt;=0)</td>
<td>number</td>
<td>20</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">Y</span></code></td>
<td>year of era (&gt;=0)</td>
<td>year</td>
<td>1996</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">x</span></code></td>
<td>weekyear</td>
<td>year</td>
<td>1996</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">w</span></code></td>
<td>week of weekyear</td>
<td>number</td>
<td>27</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">e</span></code></td>
<td>day of week</td>
<td>number</td>
<td>2</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">E</span></code></td>
<td>day of week</td>
<td>text</td>
<td>Tuesday; Tue</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">y</span></code></td>
<td>year</td>
<td>year</td>
<td>1996</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">D</span></code></td>
<td>day of year</td>
<td>number</td>
<td>189</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">M</span></code></td>
<td>month of year</td>
<td>month</td>
<td>July; Jul; 07</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">d</span></code></td>
<td>day of month</td>
<td>number</td>
<td>10</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">a</span></code></td>
<td>halfday of day</td>
<td>text</td>
<td>PM</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">K</span></code></td>
<td>hour of halfday (0~11)</td>
<td>number</td>
<td>0</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">h</span></code></td>
<td>clockhour of halfday (1~12)</td>
<td>number</td>
<td>12</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">H</span></code></td>
<td>hour of day (0~23)</td>
<td>number</td>
<td>0</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">k</span></code></td>
<td>clockhour of day (1~24)</td>
<td>number</td>
<td>24</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">m</span></code></td>
<td>minute of hour</td>
<td>number</td>
<td>30</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">s</span></code></td>
<td>second of minute</td>
<td>number</td>
<td>55</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">S</span></code></td>
<td>fraction of second</td>
<td>millis</td>
<td>978</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">z</span></code></td>
<td>time zone</td>
<td>text</td>
<td>Pacific Standard Time; PST</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">Z</span></code></td>
<td>time zone offset/id</td>
<td>zone</td>
<td>-0800; -08:00; America/Los_Angeles</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">'</span></code></td>
<td>escape for text</td>
<td>delimiter</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">''</span></code></td>
<td>single quote</td>
<td>literal</td>
<td>‘</td>
</tr>
</tbody>
</table>
<p>The format used for the <code class="docutils literal notranslate"><span class="pre">locale</span></code> parameter is a valid language tag according to <a class="reference external" href="https://tools.ietf.org/html/bcp47">IETF BCP 47</a> which can be parsed by the <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#forLanguageTag-java.lang.String-">Locale#forLanguageTag(String)</a> method.</p>
<p>Also see <a class="reference external" href="https://www.iana.org/assignments/language-subtag-registry/language-subtag-registry">IANA Language Subtag Registry</a>.</p>
<p>If no locale was specified, the locale of the system running Graylog (the default locale) is being used.</p>
<p>Examples:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Language Tag</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">en</span></code></td>
<td>English</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">en-US</span></code></td>
<td>English as used in the United States</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">de-CH</span></code></td>
<td>German for Switzerland</td>
</tr>
</tbody>
</table>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#is-date">is_date</a></li>
</ul>
</div>
<div class="section" id="flex-parse-date">
<h5>flex_parse_date<a class="headerlink" href="#flex-parse-date" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">flex_parse_date(value:</span> <span class="pre">string,</span> <span class="pre">[default:</span> <span class="pre">DateTime],</span> <span class="pre">[timezone:</span> <span class="pre">string])</span></code></p>
<p>Uses the <a class="reference external" href="http://natty.joestelmach.com/">Natty date parser</a> to parse a date and time <code class="docutils literal notranslate"><span class="pre">value</span></code>. If no timezone is detected in
the pattern, the optional timezone parameter is used as the assumed timezone. If omitted the timezone defaults to <code class="docutils literal notranslate"><span class="pre">UTC</span></code>.</p>
<p>In case the parser fails to detect a valid date and time the <code class="docutils literal notranslate"><span class="pre">default</span></code> date and time is being returned, otherwise the expression
fails to evaluate and will be aborted.</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#is-date">is_date</a></li>
</ul>
</div>
<div class="section" id="parse-unix-milliseconds">
<h5>parse_unix_milliseconds<a class="headerlink" href="#parse-unix-milliseconds" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">parse_unix_milliseconds(value:</span> <span class="pre">long)</span></code></p>
<p>Attempts to parse a UNIX millisecond timestamp (milliseconds since 1970-01-01T00:00:00.000Z) into a proper <code class="docutils literal notranslate"><span class="pre">DateTime</span></code> object.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="mi">1519902000000</span> <span class="o">==</span> <span class="mi">2018</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">01</span><span class="n">T12</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.000</span><span class="n">Z</span>
<span class="n">let</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="n">parse_unix_milliseconds</span><span class="p">(</span><span class="mi">1519902000000</span><span class="p">);</span>
<span class="n">set_field</span><span class="p">(</span><span class="s2">&quot;timestamp&quot;</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#is-date">is_date</a></li>
</ul>
</div>
<div class="section" id="format-date">
<h5>format_date<a class="headerlink" href="#format-date" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">format_date(value:</span> <span class="pre">DateTime,</span> <span class="pre">format:</span> <span class="pre">string,</span> <span class="pre">[timezone:</span> <span class="pre">string])</span></code></p>
<p>Returns the given date and time <code class="docutils literal notranslate"><span class="pre">value</span></code> formatted according to the <code class="docutils literal notranslate"><span class="pre">format</span></code> string. If no timezone is given,
it defaults to <code class="docutils literal notranslate"><span class="pre">UTC</span></code>.</p>
</div>
<div class="section" id="to-date">
<h5>to_date<a class="headerlink" href="#to-date" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">to_date(value:</span> <span class="pre">any,</span> <span class="pre">[timezone:</span> <span class="pre">string])</span></code></p>
<p>Converts <code class="docutils literal notranslate"><span class="pre">value</span></code> to a date. If no <code class="docutils literal notranslate"><span class="pre">timezone</span></code> is given, it defaults to <code class="docutils literal notranslate"><span class="pre">UTC</span></code>.</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#is-date">is_date</a></li>
</ul>
</div>
<div class="section" id="years">
<h5>years<a class="headerlink" href="#years" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">years(value:</span> <span class="pre">long)</span></code></p>
<p>Create a time period with <code class="docutils literal notranslate"><span class="pre">value</span></code> number of years.</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#is-period">is_period</a></li>
<li><a class="reference internal" href="#period">period</a></li>
</ul>
</div>
<div class="section" id="months">
<h5>months<a class="headerlink" href="#months" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">months(value:</span> <span class="pre">long)</span></code></p>
<p>Create a time period with <code class="docutils literal notranslate"><span class="pre">value</span></code> number of months.</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#is-period">is_period</a></li>
<li><a class="reference internal" href="#period">period</a></li>
</ul>
</div>
<div class="section" id="weeks">
<h5>weeks<a class="headerlink" href="#weeks" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">weeks(value:</span> <span class="pre">long)</span></code></p>
<p>Create a time period with <code class="docutils literal notranslate"><span class="pre">value</span></code> number of weeks.</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#is-period">is_period</a></li>
<li><a class="reference internal" href="#period">period</a></li>
</ul>
</div>
<div class="section" id="days">
<h5>days<a class="headerlink" href="#days" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">days(value:</span> <span class="pre">long)</span></code></p>
<p>Create a time period with <code class="docutils literal notranslate"><span class="pre">value</span></code> number of days.</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#is-period">is_period</a></li>
<li><a class="reference internal" href="#period">period</a></li>
</ul>
</div>
<div class="section" id="hours">
<h5>hours<a class="headerlink" href="#hours" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">hours(value:</span> <span class="pre">long)</span></code></p>
<p>Create a time period with <code class="docutils literal notranslate"><span class="pre">value</span></code> number of hours.</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#is-period">is_period</a></li>
<li><a class="reference internal" href="#period">period</a></li>
</ul>
</div>
<div class="section" id="minutes">
<h5>minutes<a class="headerlink" href="#minutes" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">minutes(value:</span> <span class="pre">long)</span></code></p>
<p>Create a time period with <code class="docutils literal notranslate"><span class="pre">value</span></code> number of minutes.</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#is-period">is_period</a></li>
<li><a class="reference internal" href="#period">period</a></li>
</ul>
</div>
<div class="section" id="seconds">
<h5>seconds<a class="headerlink" href="#seconds" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">seconds(value:</span> <span class="pre">long)</span></code></p>
<p>Create a time period with <code class="docutils literal notranslate"><span class="pre">value</span></code> number of seconds.</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#is-period">is_period</a></li>
<li><a class="reference internal" href="#period">period</a></li>
</ul>
</div>
<div class="section" id="millis">
<h5>millis<a class="headerlink" href="#millis" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">millis(value:</span> <span class="pre">long)</span></code></p>
<p>Create a time period with <code class="docutils literal notranslate"><span class="pre">value</span></code> number of milliseconds.</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#is-period">is_period</a></li>
<li><a class="reference internal" href="#period">period</a></li>
</ul>
</div>
<div class="section" id="period">
<h5>period<a class="headerlink" href="#period" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">period(value:</span> <span class="pre">string)</span></code></p>
<p>Parses an ISO 8601 time period from <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p>
<p><strong>See also:</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#is-period">is_period</a></li>
<li><a class="reference internal" href="#years">years</a></li>
<li><a class="reference internal" href="#months">months</a></li>
<li><a class="reference internal" href="#days">days</a></li>
<li><a class="reference internal" href="#hours">hours</a></li>
<li><a class="reference internal" href="#minutes">minutes</a></li>
<li><a class="reference internal" href="#seconds">seconds</a></li>
<li><a class="reference internal" href="#millis">millis</a></li>
</ul>
</div>
<div class="section" id="lookup">
<h5>lookup<a class="headerlink" href="#lookup" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">lookup(lookup_table:</span> <span class="pre">string,</span> <span class="pre">key:</span> <span class="pre">any,</span> <span class="pre">[default:</span> <span class="pre">any])</span></code></p>
<p>Looks up a multi value in the named lookup table.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>rule &quot;dst_ip geoip lookup&quot;
when
  has_field(&quot;dst_ip&quot;)
then
  let geo = lookup(&quot;geoip-lookup&quot;, to_string($message.dst_ip));
  set_field(&quot;dst_ip_geolocation&quot;, geo[&quot;coordinates&quot;]);
  set_field(&quot;dst_ip_geo_country_code&quot;, geo[&quot;country&quot;].iso_code);
  set_field(&quot;dst_ip_geo_country_name&quot;, geo[&quot;country&quot;].names.en);
  set_field(&quot;dst_ip_geo_city_name&quot;, geo[&quot;city&quot;].names.en);
end
</pre></div>
</div>
</div>
<div class="section" id="lookup-value">
<h5>lookup_value<a class="headerlink" href="#lookup-value" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">lookup_value(lookup_table:</span> <span class="pre">string,</span> <span class="pre">key:</span> <span class="pre">any,</span> <span class="pre">[default:</span> <span class="pre">any])</span></code></p>
<p>Looks up a single value in the named lookup table.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// Lookup a value in lookup table &quot;ip_lookup&quot; where the key is the string representation of the src_addr field.
lookup_value(&quot;ip_lookup&quot;, to_string($message.src_addr));
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-pages/pipelines/usage"></span><div class="section" id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<div class="section" id="overview">
<h4>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h4>
<p>Once you understand the concepts explained in <a class="reference internal" href="index.html#document-pages/pipelines/pipelines"><span class="doc">Pipelines</span></a>, <a class="reference internal" href="index.html#document-pages/pipelines/rules"><span class="doc">Rules</span></a>, and
<a class="reference internal" href="index.html#document-pages/pipelines/stream_connections"><span class="doc">Stream connections</span></a>, you’re ready to start creating your own processing pipelines. This
page gives you the information you need to get started with the user interface.</p>
</div>
<div class="section" id="configuration">
<h4>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h4>
<div class="section" id="configure-the-message-processor">
<h5>Configure the message processor<a class="headerlink" href="#configure-the-message-processor" title="Permalink to this headline">¶</a></h5>
<p>Before start using the processing pipelines you need to ensure the <em>Pipeline Processor</em> message processor is enabled
and correctly configured. You can do so by going to the <em>System -&gt; Configurations</em> page, and
checking the configuration in the <em>Message Processors Configuration</em> section.</p>
<img alt="_images/pipelines_message_processor.png" src="http://res.fansdoc.com/graylog/_images/pipelines_message_processor.png" />
<p>On the Configurations page, you need to <strong>enable the Pipeline Processor</strong> message processor and, if you want your pipelines
to have access to static fields set on inputs and/or fields set by extractors, <strong>set the Pipeline Processor after the Message Filter Chain</strong>.</p>
</div>
</div>
<div class="section" id="manage-rules">
<h4>Manage rules<a class="headerlink" href="#manage-rules" title="Permalink to this headline">¶</a></h4>
<p>You can create, edit, and delete your pipeline rules in the <cite>Manage rules</cite> page, under
<cite>System -&gt; Pipelines</cite>.</p>
<img alt="_images/pipelines_manage_rules.png" src="http://res.fansdoc.com/graylog/_images/pipelines_manage_rules.png" />
<p>Clicking on <cite>Create Rule</cite> or <cite>Edit</cite> in one of the rules will open a page where you can write
your own rule. The page lists available functions and their details to make the task a bit more manageable.</p>
<img alt="_images/pipelines_edit_rule.png" src="http://res.fansdoc.com/graylog/_images/pipelines_edit_rule.png" />
</div>
<div class="section" id="managing-pipelines">
<h4>Managing pipelines<a class="headerlink" href="#managing-pipelines" title="Permalink to this headline">¶</a></h4>
<p>Once there are some rules in Graylog, you can create pipelines that use them to modify and enrich
your messages.</p>
<p>To manage your pipelines, access <cite>Manage pipelines</cite> page under <cite>System -&gt; Pipelines</cite>.
This page is where you can create, edit, and delete pipelines.</p>
<img alt="_images/pipelines_manage_pipelines.png" src="http://res.fansdoc.com/graylog/_images/pipelines_manage_pipelines.png" />
<p>In order to create or edit pipelines, and as explained in <a class="reference internal" href="index.html#document-pages/pipelines/pipelines"><span class="doc">Pipelines</span></a>, you need to add your
rules to a stage, which has a certain priority. The Web interface will let you add rules to the default
stage (priority 0), and to create new stages with potentially different priorities.</p>
<img alt="_images/pipelines_show_pipeline.png" src="http://res.fansdoc.com/graylog/_images/pipelines_show_pipeline.png" />
<p>A pipeline can have more than one stage, and when you create or edit a stage you need to select how
to proceed to the next stage in the pipeline:</p>
<dl class="docutils">
<dt>All rules on this stage match the message</dt>
<dd>This option will only consider further stages in the pipeline when all conditions in rules
evaluated in this stage are <code class="docutils literal notranslate"><span class="pre">true</span></code>. This is equivalent to <code class="docutils literal notranslate"><span class="pre">match</span> <span class="pre">all</span></code> in the <a class="reference internal" href="index.html#document-pages/pipelines/pipelines"><span class="doc">Pipelines</span></a>
section.</dd>
<dt>At least one of the rules on this stage matches the message</dt>
<dd>Selecting this option will continue to further stages in the pipeline when one or more of the
conditions in rules evaluated in this stage are <code class="docutils literal notranslate"><span class="pre">true</span></code>.  This is equivalent to <code class="docutils literal notranslate"><span class="pre">match</span> <span class="pre">either</span></code> in
the <a class="reference internal" href="index.html#document-pages/pipelines/pipelines"><span class="doc">Pipelines</span></a> section.</dd>
</dl>
</div>
<div class="section" id="connect-pipelines-to-streams">
<h4>Connect pipelines to streams<a class="headerlink" href="#connect-pipelines-to-streams" title="Permalink to this headline">¶</a></h4>
<p>You can decide which streams are connected to a pipeline from the pipeline details page. Under
<cite>System -&gt; Pipelines</cite>, click on the title of the pipeline you want to connect to a stream, and
then click on the <cite>Edit connections</cite> button.</p>
<img alt="_images/pipelines_manage_connections.png" src="http://res.fansdoc.com/graylog/_images/pipelines_manage_connections.png" />
<p>You can assign many pipelines to the same stream, in which case all connected pipelines will process messages routed into that stream
based upon the overall order of stage priorities.</p>
<img alt="_images/pipelines_edit_connections.png" src="http://res.fansdoc.com/graylog/_images/pipelines_edit_connections.png" />
<p>Remember, as mentioned in the <a class="reference internal" href="index.html#document-pages/pipelines/stream_connections"><span class="doc">Stream connections</span></a> documentation, the <cite>All messages</cite> stream is where all messages are
initially routed, and is therefore a good place to apply pipelines applicable to all of your messages. Such pipelines might be responsible for stream routing, blacklisting, field manipulation, etc.</p>
</div>
<div class="section" id="simulate-your-changes">
<h4>Simulate your changes<a class="headerlink" href="#simulate-your-changes" title="Permalink to this headline">¶</a></h4>
<p>After performing some changes in a processing pipeline, you most likely want to see how they are
applied to incoming messages. This is what the pipeline simulator is for.</p>
<p>Click the <cite>Simulate processing</cite> button under <cite>System -&gt; Pipelines</cite> or in the pipeline details page
to access the pipeline simulator.</p>
<img alt="_images/pipelines_simulation_1.png" src="http://res.fansdoc.com/graylog/_images/pipelines_simulation_1.png" />
<p>In order to test the message processing you need to provide a raw message that will be routed into
the stream you want to simulate. The raw message should use the same format Graylog will
receive.  For example: you can type a <a class="reference internal" href="index.html#gelf"><span class="std std-ref">GELF</span></a> message, in the same format your GELF library would send, in the <cite>Raw message</cite> field.
Don’t forget to select the correct codec for the message you provide.</p>
<p>After specifying the message and codec, click <cite>Load message</cite> to start the simulation and display the results.</p>
<img alt="_images/pipelines_simulation_2.png" src="http://res.fansdoc.com/graylog/_images/pipelines_simulation_2.png" />
<p>The simulation provides the following results:</p>
<dl class="docutils">
<dt>Changes summary</dt>
<dd>Provides a summary of modified fields in the original message, as well as a list of added and dropped
messages.</dd>
<dt>Results preview</dt>
<dd>Shows all fields in the processed message.</dd>
<dt>Simulation trace</dt>
<dd>Displays a trace of the processing, indicating which rules were evaluated and which were executed.
It also includes a timeline, in microseconds, to allow you to see which rules and pipelines are
taking up the most time during message processing.</dd>
</dl>
</div>
</div>
</div>
</div>
<span id="document-pages/lookuptables"></span><div class="section" id="lookup-tables">
<span id="lookuptables"></span><h2>Lookup Tables<a class="headerlink" href="#lookup-tables" title="Permalink to this headline">¶</a></h2>
<p>Graylog 2.3 introduced the lookup tables feature. It allows you to lookup/map/translate
message field values into new values and write them into new message fields or
overwrite existing fields.
A simple example is to use a static CSV file to map IP addresses to host names.</p>
<div class="section" id="components">
<h3>Components<a class="headerlink" href="#components" title="Permalink to this headline">¶</a></h3>
<p>The lookup table systems consists of four components.</p>
<ul class="simple">
<li>Data adapters</li>
<li>Caches</li>
<li>Lookup tables</li>
<li>Lookup results</li>
</ul>
<div class="section" id="data-adapters">
<h4>Data Adapters<a class="headerlink" href="#data-adapters" title="Permalink to this headline">¶</a></h4>
<p>Data adapters are used to do the actual lookup for a value. They might read
from a CSV file, connect to a database or execute HTTP requests to receive
the lookup result.</p>
<p>Data adapter implementations are pluggable and new ones can be added through plugins.</p>
</div>
<div class="section" id="caches">
<h4>Caches<a class="headerlink" href="#caches" title="Permalink to this headline">¶</a></h4>
<p>The caches are responsible for caching the lookup results to improve the lookup
performance and/or to avoid overloading databases and APIs. They are separate
entities to make it possible to reuse a cache implementation for different
data adapters. That way, the data adapters do not have to care about caching
and do not have to implement it on their own.</p>
<p>Cache implementations are pluggable and new ones can be added through plugins.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">The CSV file adapter reads the entire contents of the file into
HEAP memory. Ensure that you size the HEAP accordingly.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The CSV file adapter refreshes its contents within each check interval
if the file was changed. If the cache was purged but the check interval
has not elapsed, lookups might return expired values.</p>
</div>
</div>
<div class="section" id="id1">
<h4>Lookup Tables<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>The lookup table component ties together a data adapter instance and a cache
instance. It is needed to actually enable the usage of the lookup table in
extractors, converters, pipeline functions and decorators.</p>
</div>
<div class="section" id="lookup-results">
<h4>Lookup Results<a class="headerlink" href="#lookup-results" title="Permalink to this headline">¶</a></h4>
<p>The lookup result is returned by a lookup table through the data adapter and
can contain two types of data. A <strong>single value</strong> and a <strong>multi value</strong>.</p>
<p>The <strong>single value</strong> can be a string, number or boolean and will be used in
extractors, converters, decorators and pipeline rules. In our CSV example to
lookup host names for IP addresses, this would be the host name string.</p>
<p>A <strong>multi value</strong> is a map/dictionary-like data structure and can contain
several different values. This is useful if the data adapter can provide
multiple values for a key. A good example for this would be the geo-ip data
adapter which does not only provide the latitude and longitude for an IP
address, but also information about the city and country of the location.
Currently, the multi value can only be used in a pipeline rule when using the
<code class="docutils literal notranslate"><span class="pre">lookup()</span></code> pipeline function.</p>
<p><strong>Example 1:</strong> Output for a CSV data adapter including a single value
and a multi value.</p>
<img alt="_images/example-single-value.png" src="http://res.fansdoc.com/graylog/_images/example-single-value.png" />
<p><strong>Example 2:</strong> Output for the geo-ip data adapter including a single value
and a multi value.</p>
<img alt="_images/example-multi-value.png" src="http://res.fansdoc.com/graylog/_images/example-multi-value.png" />
</div>
</div>
<div class="section" id="setup">
<span id="lookuptables-setup"></span><h3>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h3>
<p>The lookup tables can be configured on the “System/Lookup Tables” page.</p>
<p>You need to create at least one data adapter and one cache before you can
create your first lookup table. The following example setup creates a
lookup table with a CSV file data adapter and an in-memory cache.</p>
<div class="section" id="create-data-adapter">
<h4>Create Data Adapter<a class="headerlink" href="#create-data-adapter" title="Permalink to this headline">¶</a></h4>
<p>Navigate to “System/Lookup Tables” and click the “Data Adapters” button in the
top right corner. Then you first have to select a data adapter type.</p>
<p>Every data adapter form includes data adapter specific documentation that
helps you to configure it correctly.</p>
<img alt="_images/setup-data-adapter.png" src="http://res.fansdoc.com/graylog/_images/setup-data-adapter.png" />
</div>
<div class="section" id="create-cache">
<h4>Create Cache<a class="headerlink" href="#create-cache" title="Permalink to this headline">¶</a></h4>
<p>Navigate to “System/Lookup Tables” and click the “Caches” button in the
top right corner. Then you first have to select a cache type.</p>
<p>Every cache form includes cache specific documentation that helps you to
configure it correctly.</p>
<img alt="_images/setup-cache.png" src="http://res.fansdoc.com/graylog/_images/setup-cache.png" />
</div>
<div class="section" id="create-lookup-table">
<h4>Create Lookup Table<a class="headerlink" href="#create-lookup-table" title="Permalink to this headline">¶</a></h4>
<p>Now you can create a lookup table with the newly created data adapter and
cache by navigating to “System/Lookup Tables” and clicking “Create lookup table”.</p>
<p>Make sure to select the data adapter and cache instances in the creation form.</p>
<img alt="_images/setup-table.png" src="http://res.fansdoc.com/graylog/_images/setup-table.png" />
<div class="section" id="default-values">
<h5>Default Values<a class="headerlink" href="#default-values" title="Permalink to this headline">¶</a></h5>
<p>Every lookup table can optionally be configured with default values which will
be used if a lookup operation does not return any result.</p>
<img alt="_images/setup-table-defaults.png" src="http://res.fansdoc.com/graylog/_images/setup-table-defaults.png" />
</div>
</div>
</div>
<div class="section" id="usage">
<span id="lookuptables-usage"></span><h3>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<p>Lookup tables can be used with the following Graylog components.</p>
<ul class="simple">
<li>Extractors</li>
<li>Converters</li>
<li>Decorators</li>
<li>Pipeline rules</li>
</ul>
<div class="section" id="extractors">
<h4>Extractors<a class="headerlink" href="#extractors" title="Permalink to this headline">¶</a></h4>
<p>A lookup table extractor can be used to lookup the value of a message field
in a lookup table and write the result into a new field or overwrite an
existing field.</p>
<img alt="_images/usage-extractor.png" src="http://res.fansdoc.com/graylog/_images/usage-extractor.png" />
</div>
<div class="section" id="converters">
<h4>Converters<a class="headerlink" href="#converters" title="Permalink to this headline">¶</a></h4>
<p>When you use an extractor to get values out of a text message, you can use a
lookup table converter to do a lookup on the extracted value.</p>
<img alt="_images/usage-converter.png" src="http://res.fansdoc.com/graylog/_images/usage-converter.png" />
</div>
<div class="section" id="decorators">
<h4>Decorators<a class="headerlink" href="#decorators" title="Permalink to this headline">¶</a></h4>
<p>A lookup table decorator can be used to enrich messages by looking up values
at search time.</p>
<img alt="_images/usage-decorator.png" src="http://res.fansdoc.com/graylog/_images/usage-decorator.png" />
</div>
<div class="section" id="pipeline-rules">
<h4>Pipeline Rules<a class="headerlink" href="#pipeline-rules" title="Permalink to this headline">¶</a></h4>
<p>There are two lookup functions that can be used in a pipeline rule,
<code class="docutils literal notranslate"><span class="pre">lookup()</span></code> and <code class="docutils literal notranslate"><span class="pre">lookup_value()</span></code>. The first returns the <strong>multi value</strong> data
of the lookup result, the second returns the <strong>single value</strong>.</p>
<img alt="_images/usage-pipeline-rule.png" src="http://res.fansdoc.com/graylog/_images/usage-pipeline-rule.png" />
</div>
</div>
<div class="section" id="built-in-data-adapters">
<h3>Built-in Data Adapters<a class="headerlink" href="#built-in-data-adapters" title="Permalink to this headline">¶</a></h3>
<p>The following Data Adapters are shipped with Graylog by default. Detailed on-screen documentation for each is available
on the Add/Edit Data Adapter page in Graylog.</p>
<div class="section" id="csv-file-adapter">
<h4>CSV File Adapter<a class="headerlink" href="#csv-file-adapter" title="Permalink to this headline">¶</a></h4>
<p>Performs key/value lookups from a CSV file.</p>
</div>
<div class="section" id="dns-lookup-adapter">
<h4>DNS Lookup Adapter<a class="headerlink" href="#dns-lookup-adapter" title="Permalink to this headline">¶</a></h4>
<p>Provides the ability to perform the following types of DNS resolutions:</p>
<ul class="simple">
<li>Resolve hostname to IPv4 address (A records)</li>
<li>Resolve hostname to IPv6 address (AAAA records)</li>
<li>Resolve hostname to IPv4 and IPv6 address (A and AAAA records)</li>
<li>Reverse lookup (PTR record)</li>
<li>Text lookup (TXT records)</li>
</ul>
</div>
<div class="section" id="dsv-file-from-http-adapter">
<h4>DSV File from HTTP Adapter<a class="headerlink" href="#dsv-file-from-http-adapter" title="Permalink to this headline">¶</a></h4>
<p>Performs key/value from a DSV file. This adapter supports more advanced customization than the
CSV File adapter (such a custom delimiter and customizable key/value columns).</p>
</div>
<div class="section" id="http-jsonpath-adapter">
<h4>HTTP JSONPath Adapter<a class="headerlink" href="#http-jsonpath-adapter" title="Permalink to this headline">¶</a></h4>
<p>Executes HTTP GET requests to lookup a key and parses the result based on configured JSONPath expressions.</p>
</div>
<div class="section" id="geo-ip-maxmind-databases">
<h4>Geo IP - MaxMind Databases<a class="headerlink" href="#geo-ip-maxmind-databases" title="Permalink to this headline">¶</a></h4>
<p>Provides the ability to extract geolocation information of IP addresses
from MaxMind Country and City databases.</p>
</div>
</div>
</div>
<span id="document-pages/geolocation"></span><div class="section" id="geolocation">
<span id="id1"></span><h2>Geolocation<a class="headerlink" href="#geolocation" title="Permalink to this headline">¶</a></h2>
<p>Graylog lets you extract and visualize geolocation information from IP addresses in your logs.
Here we will explain how to configure the geolocation resolution, and how to create a
map with the extracted geo-information.</p>
<div class="section" id="setup">
<span id="configure-geolocation"></span><h3>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h3>
<p>Graylog ships with geolocation capabilities by default but <strong>some configuration is still required on your
side</strong>. This section explains how to configure the functionality in detail.</p>
<p>On Graylog 3.0, the preferred way of configuring geolocation is by using
<a class="reference internal" href="index.html#document-pages/lookuptables"><span class="doc">Lookup Tables</span></a>, as it provides more flexibility
and is compatible with more database types. If you would rather use the old
Message Processor, please check the
<a class="reference external" href="/en/2.5/pages/geolocation.html#configure-the-database">2.5 documentation</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Before you get started, we recommend taking a look at some Lookup
Table concepts in <a class="reference internal" href="index.html#lookuptables"><span class="std std-ref">the documentation</span></a>.</p>
</div>
<div class="section" id="download-the-database">
<h4>Download the database<a class="headerlink" href="#download-the-database" title="Permalink to this headline">¶</a></h4>
<p>In the first place, you need to download a geolocation database. The Lookup Table
Geo IP Data Adapter supports both <strong>MaxMind City and Country databases</strong> in
the <strong>MaxMind DB format</strong>, as the
<a class="reference external" href="https://www.maxmind.com/en/geoip2-databases">GeoIP2 Databases</a> or
<a class="reference external" href="https://dev.maxmind.com/geoip/geoip2/geolite2/">GeoLite2 Databases</a> that MaxMind provides.</p>
<p>The next step is to store the geolocation database on all servers running
Graylog. Make sure you grant the right permissions to the file so the user
running Graylog can read the database.</p>
</div>
<div class="section" id="configure-lookup-table">
<h4>Configure Lookup Table<a class="headerlink" href="#configure-lookup-table" title="Permalink to this headline">¶</a></h4>
<p>The next step is to configure a Graylog Lookup Table that is able to use the
geolocation database. Follow the
<a class="reference internal" href="index.html#lookuptables-setup"><span class="std std-ref">Lookup Tables setup documentation</span></a> to see what you
need to do. In most common cases you need to:</p>
<ol class="arabic simple">
<li>Create a Geo IP Data Adapter and point it to the location where you store
the database. You can additionally test the Data Adapter to ensure it all
works as expected.</li>
<li>Create a Cache (if needed) to make your lookups faster.</li>
<li>Create a Lookup Table that uses the Data Adapter and Cache you created in
previous steps.</li>
</ol>
</div>
<div class="section" id="use-the-lookup-table">
<h4>Use the Lookup Table<a class="headerlink" href="#use-the-lookup-table" title="Permalink to this headline">¶</a></h4>
<p>Now you are almost ready to extract geolocation information from IP addresses.
All you need to do is to use the Lookup Table you created in the previous step
in a Extractor, Converter, Decorator or Pipeline Rule. Take a look at the
<a class="reference internal" href="index.html#lookuptables-usage"><span class="std std-ref">Lookup Tables usage documentation</span></a> for more information.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Make sure to read <a class="reference internal" href="index.html#message-processor-ordering"><span class="std std-ref">The importance of message processor ordering</span></a>, specially if
you will use the Lookup Table with a Pipeline, in order to better understand
how Graylog will process messages.</p>
</div>
</div>
</div>
<div class="section" id="visualize-geolocations-in-a-map">
<h3>Visualize geolocations in a map<a class="headerlink" href="#visualize-geolocations-in-a-map" title="Permalink to this headline">¶</a></h3>
<p>Graylog can display maps from geolocation stored in any field, as long as the geo-points are using the
<code class="docutils literal notranslate"><span class="pre">latitude,longitude</span></code> format. The default return value of the Geo IP Data Adapter
returns the coordinates in the right format, so you most likely don’t need to do
anything special if you are using a Lookup Table for extracting geolocation
information.</p>
<div class="section" id="display-a-map-in-the-search-results-page">
<h4>Display a map in the search results page<a class="headerlink" href="#display-a-map-in-the-search-results-page" title="Permalink to this headline">¶</a></h4>
<p>On any search result page, you can expand the field you want to use to draw a map in the search sidebar, and
click on the <em>World Map</em> link. That will show a map with all different points stored in that field.</p>
<img alt="_images/geolocation_7.png" src="http://res.fansdoc.com/graylog/_images/geolocation_7.png" />
</div>
<div class="section" id="add-map-to-a-dashboard">
<h4>Add map to a dashboard<a class="headerlink" href="#add-map-to-a-dashboard" title="Permalink to this headline">¶</a></h4>
<p>You can add the map visualization into any dashboards as you do with other widgets. Once you displayed a map
in the search result page, click on <em>Add to dashboard</em>, and select the dashboard where you want to add the map.</p>
<img alt="_images/geolocation_8.png" src="http://res.fansdoc.com/graylog/_images/geolocation_8.png" />
<img alt="_images/geolocation_9.png" src="http://res.fansdoc.com/graylog/_images/geolocation_9.png" />
</div>
</div>
<div class="section" id="faqs">
<h3>FAQs<a class="headerlink" href="#faqs" title="Permalink to this headline">¶</a></h3>
<div class="section" id="will-graylog-extract-ips-from-all-fields">
<h4>Will Graylog extract IPs from all fields?<a class="headerlink" href="#will-graylog-extract-ips-from-all-fields" title="Permalink to this headline">¶</a></h4>
<p>No, you can configure which fields you want to extract data from in the Pipeline
Rule or Extractor using the Lookup Table configured in the <a class="reference internal" href="#configure-geolocation"><span class="std std-ref">setup section</span></a>.</p>
</div>
<div class="section" id="what-geo-information-is-extracted-from-ips">
<h4>What geo-information is extracted from IPs?<a class="headerlink" href="#what-geo-information-is-extracted-from-ips" title="Permalink to this headline">¶</a></h4>
<p>Depending on the database you use, the extracted information will be different.
By using a Pipeline Rule alongside a Lookup Table, you can extract any information
returned by the MaxMind Database for the IP in your logs.</p>
</div>
<div class="section" id="where-is-the-extracted-geo-information-stored">
<h4>Where is the extracted geo-information stored?<a class="headerlink" href="#where-is-the-extracted-geo-information-stored" title="Permalink to this headline">¶</a></h4>
<p>Extracted geo-information is stored in message fields, which you can name as
you wish.</p>
</div>
<div class="section" id="which-geo-points-format-does-graylog-use-to-store-coordinates">
<h4>Which geo-points format does Graylog use to store coordinates?<a class="headerlink" href="#which-geo-points-format-does-graylog-use-to-store-coordinates" title="Permalink to this headline">¶</a></h4>
<p>Graylog returns the geolocation information in the <code class="docutils literal notranslate"><span class="pre">latitude,longitude</span></code> format.
The Map visualization also requires that format to be able to draw the coordinates
on a map.</p>
</div>
<div class="section" id="i-have-a-field-in-my-messages-with-coordinates-information-already-can-i-use-it-in-graylog">
<h4>I have a field in my messages with coordinates information already, can I use it in Graylog?<a class="headerlink" href="#i-have-a-field-in-my-messages-with-coordinates-information-already-can-i-use-it-in-graylog" title="Permalink to this headline">¶</a></h4>
<p>Yes, you can display a map for coordinates as long as they are in the
<code class="docutils literal notranslate"><span class="pre">latitude,longitude</span></code> format.</p>
</div>
<div class="section" id="not-all-fields-containing-ip-addresses-are-resolved-why-does-this-happen">
<h4>Not all fields containing IP addresses are resolved. Why does this happen?<a class="headerlink" href="#not-all-fields-containing-ip-addresses-are-resolved-why-does-this-happen" title="Permalink to this headline">¶</a></h4>
<p>Most likely it is a misconfiguration issue. It is easier to extract information
if <strong>IP addresses are in their own field</strong>. You should also make sure your
<strong>Message Processors are in the right order</strong> in the <em>Message Processors
Configuration</em>, as explained in <a class="reference internal" href="index.html#message-processor-ordering"><span class="std std-ref">The importance of message processor ordering</span></a>.</p>
</div>
</div>
</div>
<span id="document-pages/indexer_failures"></span><div class="section" id="indexer-failures">
<h2>Indexer failures<a class="headerlink" href="#indexer-failures" title="Permalink to this headline">¶</a></h2>
<p>Every Graylog node is constantly keeping track about every indexing
operation it performs. This is important for making sure that you are not silently
losing any messages. The web interface can show you a number of write operations
that failed and also a list of failed operations. Like any other information in the
web interface this is also available via the REST APIs so you can hook it into your
own monitoring systems.</p>
<img alt="_images/indexerfailures_1.png" src="http://res.fansdoc.com/graylog/_images/indexerfailures_1.png" />
<p>Information about the indexing failure is stored in a capped MongoDB collection that
is limited in size. A lot (many tens of thousands) of failure messages should fit in there but
it should not be considered a complete collection of all errors ever thrown.</p>
<div class="section" id="common-indexer-failure-reasons">
<h3>Common indexer failure reasons<a class="headerlink" href="#common-indexer-failure-reasons" title="Permalink to this headline">¶</a></h3>
<p>There are some common failures that can occur under certain circumstances. Those are
explained here:</p>
<div class="section" id="mapperparsingexception">
<h4>MapperParsingException<a class="headerlink" href="#mapperparsingexception" title="Permalink to this headline">¶</a></h4>
<p>An error message would look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MapperParsingException</span><span class="p">[</span><span class="n">failed</span> <span class="n">to</span> <span class="n">parse</span> <span class="p">[</span><span class="n">failure</span><span class="p">]];</span> <span class="n">nested</span><span class="p">:</span> <span class="n">NumberFormatException</span><span class="p">[</span><span class="n">For</span> <span class="nb">input</span> <span class="n">string</span><span class="p">:</span> <span class="s2">&quot;some string value&quot;</span><span class="p">];</span>
</pre></div>
</div>
<p>You tried to write a <code class="docutils literal notranslate"><span class="pre">string</span></code> into a numeric field of the index. The indexer tried
to convert it to a number, but failed because the <code class="docutils literal notranslate"><span class="pre">string</span></code> did contain characters
that could not be converted.</p>
<p>This can be triggered by for example sending GELF messages with different field
types or extractors trying to write <code class="docutils literal notranslate"><span class="pre">strings</span></code> without converting them to numeric
values first. <strong>The recommended solution is to actively decide on field types</strong>. If
you sent in a field like <code class="docutils literal notranslate"><span class="pre">http_response_code</span></code> with a numeric value then you should
never change that type in the future.</p>
<p>The same can happen with all other field types like for example booleans.</p>
<p><strong>Note that index cycling is something to keep in mind here.</strong> The first type
written to a field per index wins. If the Graylog index cycles then the field
types are starting from scratch for that index. If the first message written to
that index has the <code class="docutils literal notranslate"><span class="pre">http_response_code</span></code> set as <code class="docutils literal notranslate"><span class="pre">string</span></code> then it will be a <code class="docutils literal notranslate"><span class="pre">string</span></code>
until the index cycles the next time. Take a look
at <a class="reference internal" href="index.html#document-pages/configuration/index_model"><span class="doc">Index model</span></a> for more information.</p>
</div>
</div>
</div>
<span id="document-pages/users_and_roles"></span><div class="section" id="users-and-roles">
<span id="usersandrolestoc"></span><h2>Users and Roles<a class="headerlink" href="#users-and-roles" title="Permalink to this headline">¶</a></h2>
<p>Graylog has a granular permission system which secures the access to its features. Each interaction which can look at
data or change configuration in Graylog must be performed as an authenticated user.</p>
<p>Each user can have varying levels of access to Graylog’s features, which can be controlled with assigning roles to users.</p>
<p>The following sections describe the capabilities of users and roles <strong>and also how to use LDAP for authentication</strong>.</p>
<div class="toctree-wrapper compound">
<span id="document-pages/users_and_roles/users"></span><div class="section" id="users">
<h3>Users<a class="headerlink" href="#users" title="Permalink to this headline">¶</a></h3>
<p>It is recommended to create an account for each individual user accessing Graylog.</p>
<p>User accounts have the usual properties such as a login name, email address, full name, password etc.
In addition to these fields, you can also configure the session timeout, roles and timezone.</p>
<img alt="_images/create_user.png" src="http://res.fansdoc.com/graylog/_images/create_user.png" />
<div class="section" id="sessions">
<h4>Sessions<a class="headerlink" href="#sessions" title="Permalink to this headline">¶</a></h4>
<p>Each login for a user creates a session, which is bound to the browser the user is currently using. Whenever the user
interacts with Graylog this session is extended.</p>
<p>For security reasons you will want to have Graylog expire sessions after a certain period of inactivity. Once the interval
specified by <code class="docutils literal notranslate"><span class="pre">timeout</span></code> expires the user will be logged out of the system. Requests like displaying throughput statistics
do not extend the session, which means that if the user keeps Graylog open in a browser tab, but does not interact with it,
their session will expire as if the browser was closed.</p>
<p>Logging out explicitly terminates the session.</p>
</div>
<div class="section" id="timezone">
<h4>Timezone<a class="headerlink" href="#timezone" title="Permalink to this headline">¶</a></h4>
<p>Since Graylog internally processes and stores messages in the UTC timezone, it is important to set the correct timezone for each
user.</p>
<p>Even though the system defaults are often enough to display correct times, in case your team is spread across different
timezones, each user can be assigned and change their respective timezone setting. You can find the current timezone settings
for the various components on the <strong>System / Overview</strong> page of your Graylog web interface.</p>
</div>
<div class="section" id="initial-roles">
<h4>Initial Roles<a class="headerlink" href="#initial-roles" title="Permalink to this headline">¶</a></h4>
<p>Each user needs to be assigned at least one role, which governs the basic set of permissions this user has in Graylog.</p>
<p>Normal users, which do not need to create inputs, outputs or perform administrative tasks like managing access control etc,
should be assigned the built in <code class="docutils literal notranslate"><span class="pre">Reader</span></code> role in addition to the custom roles which grant access to streams and dashboards.</p>
</div>
</div>
<span id="document-pages/users_and_roles/roles"></span><div class="section" id="roles">
<span id="id1"></span><h3>Roles<a class="headerlink" href="#roles" title="Permalink to this headline">¶</a></h3>
<p>In Graylog, roles are named collections of individual permissions which can be assigned to users. Previous Graylog versions
could only assign individual permissions to each user in the system, making updating stream or dashboard permissions for
a large group of users difficult to deal with.</p>
<p>Starting with Graylog 1.2 you can create roles which bundle permissions to streams and dashboards. These roles can then
be assigned to any number of users and later be updated to include new streams and dashboards.</p>
<img alt="_images/roles.png" src="http://res.fansdoc.com/graylog/_images/roles.png" />
<p>The two roles <code class="docutils literal notranslate"><span class="pre">Admin</span></code> and <code class="docutils literal notranslate"><span class="pre">Reader</span></code> are built in and cannot be changed. The <code class="docutils literal notranslate"><span class="pre">Admin</span></code> role grants all permissions
and should only be assigned to users operating Graylog. The <code class="docutils literal notranslate"><span class="pre">Reader</span></code> role grants the basic permissions every user needs
to be able to use Graylog. The interface will ensure that every user at least has the <code class="docutils literal notranslate"><span class="pre">Reader</span></code> role in addition to
more business specific roles you create.</p>
<p>Roles cannot be deleted as long as users are still assigned to them to prevent accidentally locking users out.</p>
<div class="section" id="creating-a-role">
<h4>Creating a role<a class="headerlink" href="#creating-a-role" title="Permalink to this headline">¶</a></h4>
<p>In order to create a new role, choose the green <strong>Add new role</strong> button on the <strong>System / Authentication / Roles</strong> page.</p>
<p>This will display a dialog allowing you to describe the new role and select the permissions it grants.</p>
<img alt="_images/create_role_1.png" src="http://res.fansdoc.com/graylog/_images/create_role_1.png" />
<p>After naming the role, select the permissions you want to grant using the buttons to the right of the respective stream
or dashboard names. For each stream or dashboard you can select whether to grant <code class="docutils literal notranslate"><span class="pre">edit</span></code> or <code class="docutils literal notranslate"><span class="pre">read</span></code> permissions, but
note that edit permissions always imply read permissions as well.</p>
<p>In case you have many streams or dashboards you can use the filter to narrow the list down, and use the checkboxes on the
left hand side of the table to select multiple items. You can then use the bulk action buttons on the right hand side
to toggle the permissions for all of the selected items at once.</p>
<img alt="_images/create_role_2.png" src="http://res.fansdoc.com/graylog/_images/create_role_2.png" />
<p>Once you are done, be sure to save your changes. The save button is disabled until you select at least one permission.</p>
</div>
<div class="section" id="editing-a-role">
<h4>Editing a role<a class="headerlink" href="#editing-a-role" title="Permalink to this headline">¶</a></h4>
<p>Administrators can edit roles to add or remove access to new streams and dashboards in the system. The two built in <code class="docutils literal notranslate"><span class="pre">Admin</span></code>
and <code class="docutils literal notranslate"><span class="pre">Reader</span></code> roles cannot be edited or deleted because they are vital for Graylog’s permission system.</p>
<p>Simply choose the <strong>Edit</strong> button on the <strong>System / Authentication / Roles</strong> page and change the settings of the role in the following page:</p>
<img alt="_images/edit_role.png" src="http://res.fansdoc.com/graylog/_images/edit_role.png" />
<p>You can safely rename the role as well as updating its description, the existing role assignment for users will be kept.</p>
</div>
<div class="section" id="deleting-a-role">
<h4>Deleting a role<a class="headerlink" href="#deleting-a-role" title="Permalink to this headline">¶</a></h4>
<p>Deleting roles checks whether a role still has users assigned to it, to avoid accidentally locking users out.
If you want to remove a role, please remove it from all users first.</p>
</div>
</div>
<span id="document-pages/users_and_roles/permission_system"></span><div class="section" id="permission-system">
<span id="permissions"></span><h3>Permission system<a class="headerlink" href="#permission-system" title="Permalink to this headline">¶</a></h3>
<p>The Graylog permission system is extremely flexible and allows you to create users that are only allowed to perform
certain REST calls. The <a class="reference internal" href="index.html#roles"><span class="std std-ref">Roles</span></a> UI allows you to create roles based on stream or dashboard access but does not
expose permissions on a REST call level yet. This guide describes how to create those roles using the Graylog REST API.</p>
<p>Imagine we want to create a role that is only allowed to start or stop message processing on <code class="docutils literal notranslate"><span class="pre">graylog-server</span></code> nodes.</p>
<div class="section" id="rest-call-permissions">
<h4>REST call permissions<a class="headerlink" href="#rest-call-permissions" title="Permalink to this headline">¶</a></h4>
<p>Almost every REST call in Graylog has to be authenticated or it will return an HTTP 403 (Forbidden). In addition to that,
the requesting user also has to have the permissions to execute the REST call. A Graylog admin user can always execute
all calls and roles based on the standard stream or dashboard permissions can execute calls related to those entities.</p>
<p>If you want to create a user that can only execute calls to start or stop message processing you have to find the name
of the required permission first.</p>
<p>You can learn about available permissions by querying the <code class="docutils literal notranslate"><span class="pre">/system/permissions</span></code> endpoint:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">XGET</span> <span class="o">-</span><span class="n">u</span> <span class="n">ADMIN</span><span class="p">:</span><span class="n">PASSWORD</span> <span class="s1">&#39;http://graylog.example.org:9000/api/system/permissions?pretty=true&#39;</span>
</pre></div>
</div>
<p>The server responds with a list such as this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;permissions&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;outputs&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;create&quot;</span><span class="p">,</span> <span class="s2">&quot;edit&quot;</span><span class="p">,</span> <span class="s2">&quot;terminate&quot;</span><span class="p">,</span> <span class="s2">&quot;read&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;users&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;tokencreate&quot;</span><span class="p">,</span> <span class="s2">&quot;rolesedit&quot;</span><span class="p">,</span> <span class="s2">&quot;edit&quot;</span><span class="p">,</span> <span class="s2">&quot;permissionsedit&quot;</span><span class="p">,</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span> <span class="s2">&quot;tokenlist&quot;</span><span class="p">,</span> <span class="s2">&quot;create&quot;</span><span class="p">,</span> <span class="s2">&quot;passwordchange&quot;</span><span class="p">,</span> <span class="s2">&quot;tokenremove&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;processing&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;changestate&quot;</span> <span class="p">],</span>
    <span class="o">...</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Starting and stopping message processing corresponds to the <code class="docutils literal notranslate"><span class="pre">changestate</span></code> permission in the <code class="docutils literal notranslate"><span class="pre">processing</span></code>
category. We combine both pieces to the permission key <code class="docutils literal notranslate"><span class="pre">processing:changestate</span></code>.</p>
</div>
<div class="section" id="creating-the-role">
<h4>Creating the role<a class="headerlink" href="#creating-the-role" title="Permalink to this headline">¶</a></h4>
<p>You can create a new role using the REST API like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">XPOST</span> <span class="o">-</span><span class="n">u</span> <span class="n">ADMIN</span><span class="p">:</span><span class="n">PASSWORD</span> <span class="o">-</span><span class="n">H</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">-</span><span class="n">H</span> <span class="s1">&#39;X-Requested-By: cli&#39;</span> <span class="s1">&#39;http://graylog.example.org:9000/api/roles&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;read_only&quot;: false,&quot;permissions&quot;: [&quot;processing:changestate&quot;],&quot;name&quot;: &quot;Change processing state&quot;,&quot;description&quot;: &quot;Permission to start or stop processing on Graylog nodes&quot;}&#39;</span>
</pre></div>
</div>
<p>Notice the <code class="docutils literal notranslate"><span class="pre">processing:changestate</span></code> permission that we assigned. Every user with this role will be able to start and
stop processing on <code class="docutils literal notranslate"><span class="pre">graylog-server</span></code> nodes. Graylog’s standard <code class="docutils literal notranslate"><span class="pre">reader</span></code> permissions do not provide any access to data
or maintenance functionalities.</p>
<p>This is the POST body in an easier to read formatting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Change processing state&quot;</span><span class="p">,</span>
  <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Permission to start or stop processing on graylog-server nodes&quot;</span><span class="p">,</span>
  <span class="s2">&quot;permissions&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;processing:changestate&quot;</span>
  <span class="p">],</span>
  <span class="s2">&quot;read_only&quot;</span><span class="p">:</span> <span class="n">false</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="assigning-the-role-to-a-user">
<h4>Assigning the role to a user<a class="headerlink" href="#assigning-the-role-to-a-user" title="Permalink to this headline">¶</a></h4>
<p>Create a new user in the Graylog web interface and assign the new role to it:</p>
<img alt="_images/sysuser.png" src="http://res.fansdoc.com/graylog/_images/sysuser.png" />
<p>Every user needs to at least have the standard “Reader” permissions but those do not provide any access to data
or maintenance functionalities.</p>
<p>Now request the user information to see what permissions have been assigned:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -XGET -u ADMIN:PASSWORD &#39;http://graylog.example.org:9000/api/users/maintenanceuser?pretty=true&#39;
{
  &quot;id&quot; : &quot;563d1024d4c63709999c4ac2&quot;,
  &quot;username&quot; : &quot;maintenanceuser&quot;,
  &quot;email&quot; : &quot;it-ops@example.org&quot;,
  &quot;full_name&quot; : &quot;Rock Solid&quot;,
  &quot;permissions&quot; : [
    &quot;indexercluster:read&quot;,
    &quot;messagecount:read&quot;,
    &quot;journal:read&quot;,
    &quot;inputs:read&quot;,
    &quot;metrics:read&quot;,
    &quot;processing:changestate&quot;,
    &quot;savedsearches:edit&quot;,
    &quot;fieldnames:read&quot;,
    &quot;buffers:read&quot;,
    &quot;system:read&quot;,
    &quot;users:edit:maintenanceuser&quot;,
    &quot;users:passwordchange:maintenanceuser&quot;,
    &quot;savedsearches:create&quot;,
    &quot;jvmstats:read&quot;,
    &quot;throughput:read&quot;,
    &quot;savedsearches:read&quot;,
    &quot;messages:read&quot;
  ],
  &quot;preferences&quot; : {
    &quot;updateUnfocussed&quot; : false,
    &quot;enableSmartSearch&quot; : true
  },
  &quot;timezone&quot; : &quot;America/Chicago&quot;,
  &quot;session_timeout_ms&quot; : 300000,
  &quot;read_only&quot; : false,
  &quot;external&quot; : false,
  &quot;startpage&quot; : { },
  &quot;roles&quot; : [
    &quot;Change processing state&quot;,
    &quot;Reader&quot;
  ]
}
</pre></div>
</div>
<p>Now you can use this user in your maintenance scripts or automated tasks.</p>
</div>
</div>
<span id="document-pages/users_and_roles/external_auth"></span><div class="section" id="external-authentication">
<h3>External authentication<a class="headerlink" href="#external-authentication" title="Permalink to this headline">¶</a></h3>
<div class="section" id="ldap-active-directory">
<h4>LDAP / Active Directory<a class="headerlink" href="#ldap-active-directory" title="Permalink to this headline">¶</a></h4>
<p>It is possible to use an external LDAP or Active Directory server to perform user authentication in Graylog.</p>
<p>Since Graylog 1.2.0, you can also use LDAP groups to perform authorization by mapping them to Graylog roles.</p>
<div class="section" id="configuration">
<h5>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h5>
<p>To set up your LDAP or Active Directory server, go to <strong>System / Authentication / LDAP/Active Directory</strong>.</p>
<p>Once LDAP is enabled, you need to provide some details about the directory server.</p>
<img alt="_images/ldap_settings.png" src="http://res.fansdoc.com/graylog/_images/ldap_settings.png" />
<p>Please test the server connection before continuing to the next steps.</p>
</div>
<div class="section" id="user-mapping">
<h5>User mapping<a class="headerlink" href="#user-mapping" title="Permalink to this headline">¶</a></h5>
<p>In order to be able to look for users in the LDAP server you configured, Graylog needs to know some more details about it:
the base tree to limit user search queries, the pattern used to look for users, and the field containing the full name of the
user. You can test the configuration any time by using the login test form that you can find at the bottom of that page.</p>
<img alt="_images/login_test.png" src="http://res.fansdoc.com/graylog/_images/login_test.png" />
<p>The login test information will indicate if Graylog was able to load the given user (and perform authentication, if a password was
provided), and it will display all LDAP attributes belonging to the user, as you can see in the screenshot.</p>
<p>That’s it for the basic LDAP configuration. Don’t forget to save your settings at this point!</p>
</div>
<div class="section" id="group-mapping">
<h5>Group mapping<a class="headerlink" href="#group-mapping" title="Permalink to this headline">¶</a></h5>
<p>You can additionally control the default permissions for users logging in with LDAP or Active Directory by mapping LDAP groups
into Graylog roles. That is extremely helpful if you already use LDAP groups to authorize users in your organization, as you can
control the default permissions members of LDAP groups will have.</p>
<p>Once you configure group mapping, Graylog will rely on your LDAP groups to assign roles into users. That means that each time an
LDAP user logs into Graylog, their roles will be assigned based on the LDAP groups their belong to.</p>
<p>In first place, you need to fill in the details in the <em>Group Mapping</em> section under <strong>System / Authentication / LDAP/Active Directory</strong>, by
giving the base where to limit group searches, a pattern used to look for groups, and the group name attribute.</p>
<p>Then you need to select which default user role will be assigned to any users authenticated with the LDAP server should have. It
is also possible to assign additional roles to any users logging in with LDAP. Please refer to <a class="reference internal" href="index.html#roles"><span class="std std-ref">Roles</span></a> for more details
about user roles.</p>
<p><strong>Note:</strong> Graylog only synchronizes with LDAP when users log in. After changing the default and additional roles for LDAP users,
you may need to modify existing users manually or delete them in order to force them to log in again.</p>
<p>You can test the group mapping information by using the login test form, as it will display LDAP groups that the test user belongs to.
Save the LDAP settings once you are satisfied with the results.</p>
<img alt="_images/ldap_group_mapping.png" src="http://res.fansdoc.com/graylog/_images/ldap_group_mapping.png" />
<p>Finally, in order to map LDAP groups into roles, you need to go to <strong>System / Authentication / LDAP/Active Directory -&gt; LDAP group mapping</strong>.
This page will load all available LDAP groups using the configuration you previously provided, and will allow you to select a Graylog role
which defines the permissions that group will have inside Graylog.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Loading LDAP groups may take some time in certain configurations, specially if you have many groups. In those cases, creating a better filter for groups may help with the loading times.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Remember that Graylog only synchronizes with LDAP when users log in, so you may need to modify existing users manually after changing the LDAP group mapping.</p>
</div>
</div>
<div class="section" id="troubleshooting">
<h5>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h5>
<p>LDAP referrals for groups can be a problem during group mapping. Referral issues are most likely to come up with larger AD setups. The Active Directory servers literally refer to other servers in search results, and it is the client’s responsibility to follow all referrals. Support for that is currently not implemented in Graylog.</p>
<p>Referral issues can be detected by warnings in the server logs about group mapping failing, for example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>2016-04-11T15:52:06.045Z WARN  [LdapConnector] Unable to iterate over user&#39;s groups,
unable to perform group mapping. Graylog does not support LDAP referrals at the moment.
Please see http://docs.graylog.org/en/2.2/pages/users_and_roles/external_auth.html#troubleshooting
</pre></div>
</div>
<p>These issues may be resolved by either managing the groups manually, or configuring the LDAP connection to work against the <a class="reference external" href="https://technet.microsoft.com/en-us/library/cc728188(v=ws.10).aspx">global catalog</a>. The first solution means simply that the LDAP group settings must not be set, and the groups are managed locally. The global catalog solution requires using the 3268/TCP, or 3269/TCP (TLS) port of eligible Active Directory server. The downside is that using the global catalog service consumes slightly more server resources.</p>
</div>
</div>
<div class="section" id="single-sign-on">
<h4>Single Sign-On<a class="headerlink" href="#single-sign-on" title="Permalink to this headline">¶</a></h4>
<p>The <a class="reference external" href="https://marketplace.graylog.org/addons/eeeb0704-d50a-4df0-a789-eee29b1bb11d">SSO Authentication Plugin for Graylog</a> allows to use arbitrary HTTP request headers for authenticating Graylog users.</p>
<p>Once the plugin has been <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-auth-sso/releases">downloaded</a> and installed on all Graylog nodes, it can be configured on the <strong>System / Authentication / Single Sign-On (SSO)</strong> page.</p>
<img alt="_images/sso_1.png" src="http://res.fansdoc.com/graylog/_images/sso_1.png" />
<p>The HTTP request header containing the Graylog username can be configured in the <strong>Username Header</strong> field and should contain exactly one HTTP header name. Most HTTP request header based single sign-on solutions are using the <code class="docutils literal notranslate"><span class="pre">Remote-User</span></code> or <code class="docutils literal notranslate"><span class="pre">X-Forwarded-User</span></code> HTTP request header.</p>
<p>In order to only allow trusted proxy servers to provide the Graylog username, the <strong>Request must come from a trusted proxy</strong> checkbox must be checked. The list of trusted proxy servers can be edited on each Graylog node in the configuration file using the <a class="reference external" href="https://github.com/Graylog2/graylog2-server/blob/2.1.0/misc/graylog.conf#L124-L126">trusted_proxies</a> configuration setting.</p>
<p>If user accounts not existing in the Graylog user database should automatically be created on the first login, the <strong>Automatically create user</strong> checkbox must be checked. The automatically created users can also be customized to retrieve their full name or email address from another HTTP request header, otherwise the defaults are being used.</p>
<p>If <strong>Synchronize the roles of the user from the specified HTTP header</strong> is checked, Graylog expects the roles of the user in HTTP-Headers, with a prefix configured in <strong>Role Header</strong> (e.g. Roles would match Roles_0, Roles_1). The header value can contain a comma-separated list of role-names. Graylog adds only already existing roles to the user. Only the roles from the header will be synchronized to the roles of the user, if the user has roles, that are not supplied in the header, they will be removed from the user.</p>
</div>
</div>
</div>
<div class="section" id="authentication-providers">
<h3>Authentication providers<a class="headerlink" href="#authentication-providers" title="Permalink to this headline">¶</a></h3>
<p>Graylog 2.1.0 and later supports pluggable authentication providers. This means, that Graylog cannot only use the builtin authentication mechanisms like its internal user database, LDAP/Active Directory, or access tokens, but can also be extended by plugins to support other authentication mechanisms, for example Single Sign-On or Two Factor Authentication.</p>
<div class="section" id="configuration">
<h4>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h4>
<p>The order in which the authentication providers will be queried can be configured in the Graylog web interface on the <strong>System / Authentication / Configure Provider Order</strong> page.</p>
<img alt="_images/authentication_order_1.png" src="http://res.fansdoc.com/graylog/_images/authentication_order_1.png" />
<p>If a user tries to log into Graylog, the authentication providers will be queried in the configured order until a successful authentication attempt has been made (in which case the user will be logged in) or all authentication providers have denied authentication (in which case the user will not be logged in and get an error message).</p>
<p>By clicking on the <strong>Update</strong> button on the <strong>System / Authentication / Configure Provider Order</strong> page, the order of authentication providers can be customized.</p>
<img alt="_images/authentication_order_2.png" src="http://res.fansdoc.com/graylog/_images/authentication_order_2.png" />
</div>
</div>
</div>
<span id="document-pages/integrations"></span><div class="section" id="integrations">
<h2>Integrations<a class="headerlink" href="#integrations" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<span id="document-pages/integrations/setup"></span><div class="section" id="integrations-setup">
<h3>Integrations Setup<a class="headerlink" href="#integrations-setup" title="Permalink to this headline">¶</a></h3>
<p>Integrations are tools that help Graylog work with external systems and will typically be content packs, inputs, or lookup tables.</p>
<p>Integrations are distributed in two plugins:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">graylog-integrations-plugins</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">graylog-enterprise-integrations-plugins</span></code></li>
</ul>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">The plugins needs to be installed on all your Graylog nodes!</p>
</div>
<div class="section" id="installation">
<h4>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h4>
<p>To install the plugins, you can use one of the following options.</p>
<div class="section" id="operating-system-packages">
<h5>Operating System Packages<a class="headerlink" href="#operating-system-packages" title="Permalink to this headline">¶</a></h5>
<p>If you have installed Graylog using linux system packages (as described in the <a class="reference internal" href="index.html#document-pages/installation/operating_system_packages"><span class="doc">Operating System Packages</span></a> installation guides), then you can use the following DEB or RPM operating system packages.</p>
<div class="section" id="deb">
<h6>DEB<a class="headerlink" href="#deb" title="Permalink to this headline">¶</a></h6>
<p>The installation on distributions like Debian or Ubuntu can be done with <em>apt-get</em> as installation tool from the previous installed online repository.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apt-get install graylog-integrations-plugins graylog-enterprise-integrations-plugins
</pre></div>
</div>
</div>
<div class="section" id="rpm">
<h6>RPM<a class="headerlink" href="#rpm" title="Permalink to this headline">¶</a></h6>
<p>The installation on distributions like CentOS or RedHat can be done with <em>yum</em> as installation tool from the previous installed online repository.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo yum install graylog-integrations-plugins graylog-enterprise-integrations-plugins
</pre></div>
</div>
<div class="section" id="tarballs">
<h7>Tarballs<a class="headerlink" href="#tarballs" title="Permalink to this headline">¶</a></h7>
<p>If you have done a manual installation, you download the tarballs from the following links.</p>
<ul class="simple">
<li><a class="reference external" href="https://downloads.graylog.org/releases/graylog-integrations/graylog-integrations-plugins-3.0.0.tgz">https://downloads.graylog.org/releases/graylog-integrations/graylog-integrations-plugins-3.0.0.tgz</a></li>
<li><a class="reference external" href="https://downloads.graylog.org/releases/graylog-enterprise-integrations/graylog-enterprise-integrations-plugins-3.0.0.tgz">https://downloads.graylog.org/releases/graylog-enterprise-integrations/graylog-enterprise-integrations-plugins-3.0.0.tgz</a></li>
</ul>
</div>
</div>
</div>
</div>
<div class="section" id="server-restart">
<h4>Server Restart<a class="headerlink" href="#server-restart" title="Permalink to this headline">¶</a></h4>
<p>Make sure to restart your Graylog servers once the plugins are installed.</p>
</div>
<div class="section" id="installation-success">
<h4>Installation Success<a class="headerlink" href="#installation-success" title="Permalink to this headline">¶</a></h4>
<p>The following server log message will indicate that each plugin was installed properly.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INFO</span><span class="p">:</span> <span class="p">[</span><span class="n">CmdLineTool</span><span class="p">]</span> <span class="n">Loaded</span> <span class="n">plugin</span><span class="p">:</span> <span class="n">Integrations</span> <span class="n">Plugin</span> <span class="mf">3.0</span><span class="o">.</span><span class="mi">0</span> <span class="p">[</span><span class="n">org</span><span class="o">.</span><span class="n">graylog</span><span class="o">.</span><span class="n">integrations</span><span class="o">.</span><span class="n">IntegrationsPlugin</span><span class="p">]</span>
<span class="n">INFO</span><span class="p">:</span> <span class="p">[</span><span class="n">CmdLineTool</span><span class="p">]</span> <span class="n">Loaded</span> <span class="n">plugin</span><span class="p">:</span> <span class="n">Enterprise</span> <span class="n">Integrations</span> <span class="n">Plugin</span> <span class="mf">3.0</span><span class="o">.</span><span class="mi">0</span> <span class="p">[</span><span class="n">org</span><span class="o">.</span><span class="n">graylog</span><span class="o">.</span><span class="n">integrations</span><span class="o">.</span><span class="n">EnterpriseIntegrationsPlugin</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<p>Integrations are tools that help Graylog work with external systems. Integrations will typically be content packs, inputs, or lookup tables and can either be open source or Enterprise.</p>
<p>Reference the <a class="reference internal" href="index.html#document-pages/integrations/setup"><span class="doc">Integrations Setup</span></a> document for installation instructions.</p>
<p>Below are the available features:</p>
<div class="section" id="open-source">
<h3>Open Source<a class="headerlink" href="#open-source" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="index.html#palo-alto-network-input"><span class="std std-ref">Palo Alto Network Input</span></a></li>
</ul>
<div class="toctree-wrapper compound">
<span id="document-pages/integrations/inputs/palo_alto_networks_input"></span><div class="section" id="palo-alto-networks-input">
<span id="palo-alto-network-input"></span><h4>Palo Alto Networks Input<a class="headerlink" href="#palo-alto-networks-input" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This input is available since Graylog version 2.5.0. Installation of an additional <code class="docutils literal notranslate"><span class="pre">graylog-plugin-enterprise-integrations</span></code> package is required. See the <a class="reference internal" href="index.html#document-pages/integrations/setup"><span class="doc">Integrations Setup</span></a> page for more info.</p>
</div>
<p>This input allows Graylog to receive <code class="docutils literal notranslate"><span class="pre">SYSTEM</span></code>, <code class="docutils literal notranslate"><span class="pre">THREAT</span></code> and <code class="docutils literal notranslate"><span class="pre">TRAFFIC</span></code> logs directly from a Palo Alto device
and the Palo Alto Panorama system. Logs are sent with a typical Syslog header followed by a comma-separated list of fields. The
fields order might change between versions of <a class="reference external" href="https://www.paloaltonetworks.com/documentation/81/pan-os">PAN OS</a>.</p>
<p>Example <code class="docutils literal notranslate"><span class="pre">SYSTEM</span></code> message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="mi">14</span><span class="o">&gt;</span><span class="mi">1</span> <span class="mi">2018</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">19</span><span class="n">T11</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mi">35</span><span class="o">-</span><span class="mi">05</span><span class="p">:</span><span class="mi">00</span> <span class="n">Panorama</span><span class="o">-</span><span class="mi">1</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span><span class="mi">2018</span><span class="o">/</span><span class="mi">09</span><span class="o">/</span><span class="mi">19</span> <span class="mi">11</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mi">35</span><span class="p">,</span><span class="mi">000710000506</span><span class="p">,</span><span class="n">SYSTEM</span><span class="p">,</span><span class="n">general</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2018</span><span class="o">/</span><span class="mi">09</span><span class="o">/</span><span class="mi">19</span> <span class="mi">11</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mi">35</span><span class="p">,,</span><span class="n">general</span><span class="p">,,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">general</span><span class="p">,</span><span class="n">informational</span><span class="p">,</span><span class="s2">&quot;Deviating device: Prod--2, Serial: 007255000045717, Object: N/A, Metric: mp-cpu, Value: 34&quot;</span><span class="p">,</span><span class="mi">1163103</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,,</span><span class="n">Panorama</span><span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
<p>To get started, add a new Palo Alto Networks Input (TCP) in the <code class="docutils literal notranslate"><span class="pre">System</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">Inputs</span></code> area in Graylog. Specify the
Graylog Node, Bind address, Port, and adjust the field mappings as needed.</p>
<p>This input ships with a field configuration that is compatible with <a class="reference external" href="https://www.paloaltonetworks.com/documentation/81/pan-os">PAN OS 8.1</a>.
Other versions can easily be supported by customizing the <code class="docutils literal notranslate"><span class="pre">SYSTEM</span></code>, <code class="docutils literal notranslate"><span class="pre">THREAT</span></code> and <code class="docutils literal notranslate"><span class="pre">TRAFFIC</span></code> mappings on the Add/Edit
input page in Graylog.</p>
<p>The configuration for each message type is a CSV block that must include the <code class="docutils literal notranslate"><span class="pre">position</span></code>, <code class="docutils literal notranslate"><span class="pre">field</span></code>, and <code class="docutils literal notranslate"><span class="pre">type</span></code> headers.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">position</span><span class="p">,</span><span class="n">field</span><span class="p">,</span><span class="nb">type</span>
<span class="mi">1</span><span class="p">,</span><span class="n">receive_time</span><span class="p">,</span><span class="n">STRING</span>
<span class="mi">2</span><span class="p">,</span><span class="n">serial_number</span><span class="p">,</span><span class="n">STRING</span>
<span class="mi">3</span><span class="p">,</span><span class="nb">type</span><span class="p">,</span><span class="n">STRING</span>
<span class="mi">4</span><span class="p">,</span><span class="n">content_threat_type</span><span class="p">,</span><span class="n">STRING</span>
<span class="mi">5</span><span class="p">,</span><span class="n">future_use1</span><span class="p">,</span><span class="n">STRING</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Accepted values for each column:</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="94%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Accepted Values</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">position</span></code></td>
<td>A positive integer value.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">field</span></code></td>
<td>A contiguous string value to use for the field name. Must not include the reserved field names: <code class="docutils literal notranslate"><span class="pre">_id</span></code>, <code class="docutils literal notranslate"><span class="pre">message</span></code>, <code class="docutils literal notranslate"><span class="pre">full_message</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>,  <code class="docutils literal notranslate"><span class="pre">level</span></code>, <code class="docutils literal notranslate"><span class="pre">streams</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">type</span></code></td>
<td>One of the following supported types: <code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code>, <code class="docutils literal notranslate"><span class="pre">LONG</span></code>, <code class="docutils literal notranslate"><span class="pre">STRING</span></code></td>
</tr>
</tbody>
</table>
<p>The validity of each CSV configuration is checked when the Palo Alto input is started. If the CSV is malformed (or
contains invalid properties), the input will fail to start. An error describing the specific issue will be logged in
the <code class="docutils literal notranslate"><span class="pre">graylog-server</span></code> log file and also displayed at the top of the <code class="docutils literal notranslate"><span class="pre">http://&lt;grayloghost&gt;/system/overview</span></code> page for
the affected node.</p>
<p>For example:</p>
<img alt="_images/input_failed_to_start.png" src="http://res.fansdoc.com/graylog/_images/input_failed_to_start.png" />
<p>The mappings for each type look like this on the add/edit input page:</p>
<img alt="_images/system_message_mappings.png" src="http://res.fansdoc.com/graylog/_images/system_message_mappings.png" />
<p>The mappings built into the plugin by default are based on the following PAN OS 8.1 specifications. If you are running
PAN OS 8.1, then there is no need to edit the mappings. However, if you are running a different version of PAN OS,
please reference the official Palo Alto Networks log fields documentation that that version and customize the mappings
on the Add/Edit Input page accordingly.</p>
<p>We have included a links to a few recent versions here for reference.</p>
<p>Version 8.1</p>
<ul class="simple">
<li><a class="reference external" href="https://www.paloaltonetworks.com/documentation/81/pan-os/pan-os/monitoring/use-syslog-for-monitoring/syslog-field-descriptions/traffic-log-fields">8.1 - Traffic Log Fields</a></li>
<li><a class="reference external" href="https://www.paloaltonetworks.com/documentation/81/pan-os/pan-os/monitoring/use-syslog-for-monitoring/syslog-field-descriptions/threat-log-fields">8.1 - Threat Log Fields</a></li>
<li><a class="reference external" href="https://www.paloaltonetworks.com/documentation/81/pan-os/pan-os/monitoring/use-syslog-for-monitoring/syslog-field-descriptions/system-log-fields">8.1 - System Log Fields</a></li>
</ul>
<p>Version 8.0</p>
<ul class="simple">
<li><a class="reference external" href="https://www.paloaltonetworks.com/documentation/80/pan-os/pan-os/monitoring/use-syslog-for-monitoring/syslog-field-descriptions/traffic-log-fields">8.0 - Traffic Log Fields</a></li>
<li><a class="reference external" href="https://www.paloaltonetworks.com/documentation/80/pan-os/pan-os/monitoring/use-syslog-for-monitoring/syslog-field-descriptions/threat-log-fields">8.0 - Threat Log Fields</a></li>
<li><a class="reference external" href="https://www.paloaltonetworks.com/documentation/80/pan-os/pan-os/monitoring/use-syslog-for-monitoring/syslog-field-descriptions/system-log-fields">8.0 - System Log Fields</a></li>
</ul>
<p>Version 7.1</p>
<ul class="simple">
<li><a class="reference external" href="https://www.paloaltonetworks.com/documentation/71/pan-os/pan-os/monitoring/syslog-field-descriptions#41809">7.1 - Traffic Log Fields</a></li>
<li><a class="reference external" href="https://www.paloaltonetworks.com/documentation/71/pan-os/pan-os/monitoring/syslog-field-descriptions#67983">7.1 - Threat Log Fields</a></li>
<li><a class="reference external" href="https://www.paloaltonetworks.com/documentation/71/pan-os/pan-os/monitoring/syslog-field-descriptions#74679">7.1 - System Log Fields</a></li>
</ul>
<p>Also see <a class="reference external" href="https://www.paloaltonetworks.com/documentation/eol">Documentation for older PAN OS versions</a>.</p>
</div>
</div>
</div>
<div class="section" id="enterprise">
<h3>Enterprise<a class="headerlink" href="#enterprise" title="Permalink to this headline">¶</a></h3>
<p>Enterprise Integrations plugin feature require an <a class="reference external" href="https://www.graylog.org/enterprise">Graylog Enterprise license</a> .
For a comprehensive list of available features included, see our  <a class="reference internal" href="index.html#enterprise-features"><span class="std std-ref">Enterprise List page</span></a></p>
<ul class="simple">
<li><a class="reference internal" href="index.html#document-pages/integrations/forwarder"><span class="doc">Forwarder</span></a></li>
<li><a class="reference internal" href="index.html#alerts-script-alert"><span class="std std-ref">Script Alert Notification</span></a></li>
</ul>
<div class="toctree-wrapper compound">
<span id="document-pages/integrations/forwarder"></span><div class="section" id="forwarder">
<span id="id1"></span><h4>Forwarder<a class="headerlink" href="#forwarder" title="Permalink to this headline">¶</a></h4>
<p>The Forwarder provides the ability to forward messages from a one Graylog cluster to another over HTTP/2.
This centralizes log messages from multiple distributed Graylog source clusters into one destination cluster,
which allows centralized alerting, reporting, and oversight.</p>
<p>Two Graylog clusters are required to use the Forwarder: A Graylog source cluster (Forwarder Output) and a Graylog
destination cluster (Forwarder Input). The Graylog source cluster will forward messages, and the Graylog
destination cluster will receive messages being forwarded.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is an Enterprise Integrations feature and is only available since Graylog version 3.0.1 and thus requires an Enterprise license. See the <a class="reference internal" href="index.html#document-pages/integrations/setup"><span class="doc">Integrations Setup</span></a> page for more info.</p>
</div>
<img alt="_images/forwarder_diagram.png" src="http://res.fansdoc.com/graylog/_images/forwarder_diagram.png" />
<div class="section" id="forwarder-output">
<h5>Forwarder Output<a class="headerlink" href="#forwarder-output" title="Permalink to this headline">¶</a></h5>
<p>The Forwarder Output (Graylog source cluster) is responsible for forwarding messages to the
Graylog destination cluster. It first writes the messages to an on-disk journal in the Graylog source cluster
(Forwarder Output). Messages stay in the on-disk journal until the Graylog destination cluster is available
to receive messages.</p>
<p>Messages are only forwarded until after they are done being processed through the pipeline of the Graylog source
cluster, but simultaneously as they are written to Elasticsearch.</p>
<p><strong>Forwarder Journal</strong></p>
<p>The Forwarder is equipped with a disk journal. This journal immediately persists messages received from the Graylog
Output system to disk before attempting to send them to the remote Graylog destination cluster. This allows the Forwarder to
keep receiving and reliably queuing messages, even if the remote Graylog destination cluster is temporarily unavailable due to
network issues. The Journal has many configuration options (such as Maximum Journal Size) available and described on
below.</p>
<div class="section" id="forwarder-output-options">
<h6>Forwarder Output Options<a class="headerlink" href="#forwarder-output-options" title="Permalink to this headline">¶</a></h6>
<p>The Graylog Forwarder is capable of forwarding messages at very high throughput rates.
Many hardware factors will affect throughput (such as CPU clock speed, number of CPU cores, available memory, and
network bandwidth). Several Forwarder Output configuration options are also available to help you tune performance
for your throughput requirements and environment.</p>
<img alt="_images/forwarder_output.png" src="http://res.fansdoc.com/graylog/_images/forwarder_output.png" />
</div>
</div>
<div class="section" id="forwarder-input">
<h5>Forwarder Input<a class="headerlink" href="#forwarder-input" title="Permalink to this headline">¶</a></h5>
<p>The Forwarder Input (Graylog destination cluster) is responsible for receiving messages that have been
forwarded from the Graylog cluster source.</p>
<p>When the Graylog destination cluster (Forwarder Input) receives the forwarded messages, the following relevant fields
are added to help track which Graylog cluster and node the messages originated from.</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">gl2_source_cluster_id</span></code></dt>
<dd><ul class="first last">
<li>The id of the source Graylog cluster.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">gl2_source_node_id</span></code></dt>
<dd><ul class="first last">
<li>The id of the source Graylog node.</li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="section" id="forwarder-input-options">
<h6>Forwarder Input Options<a class="headerlink" href="#forwarder-input-options" title="Permalink to this headline">¶</a></h6>
<img alt="_images/forwarder_input.png" src="http://res.fansdoc.com/graylog/_images/forwarder_input.png" />
</div>
<div class="section" id="ssl-tls">
<h6>SSL/TLS<a class="headerlink" href="#ssl-tls" title="Permalink to this headline">¶</a></h6>
<p>TLS encryption is supported to ensure secure transport of forwarded messages. You can enable it by checking the Enable
TLS check box on both the Forwarder input and output. The Forwarder Input requires that both the certificate and key
locations must be specified. The Forwarder Output requires only the certification location be specified.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Only X.509 certificates and keys in PEM format are supported. TLS Authentication is not currently supported.</p>
</div>
</div>
<div class="section" id="load-balancing">
<span id="forwarder-load-balancing"></span><h6>Load Balancing<a class="headerlink" href="#load-balancing" title="Permalink to this headline">¶</a></h6>
<p>The Forwarder uses HTTP/2 (gRPC) for transport. When only one Concurrent Network Sender is used,
then load balancing is not supported. However, if more than one Concurrent Network Senders are used, then
load balancing is supported, which allows each of these sender connections to be distributed to the destination host.
For more information see <a class="reference external" href="https://grpc.io/blog/loadbalancing">Load Balancing gRPC</a>.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<span id="document-pages/plugins"></span><div class="section" id="plugins">
<span id="id1"></span><h2>Plugins<a class="headerlink" href="#plugins" title="Permalink to this headline">¶</a></h2>
<div class="section" id="about-plugins">
<h3>About Plugins<a class="headerlink" href="#about-plugins" title="Permalink to this headline">¶</a></h3>
<p>Graylog offers various extension points to customize and extend its functionality through writing Java code.</p>
<p>The first step for writing a plugin is creating a skeleton that is the same for each type of plugin. The next chapter
is explaining how to do this and will then go over to chapters explaining plugin types in detail.</p>
</div>
<div class="section" id="plugin-types">
<span id="id2"></span><h3>Plugin Types<a class="headerlink" href="#plugin-types" title="Permalink to this headline">¶</a></h3>
<p>Graylog comes with a stable plugin API for the following plugin types:</p>
<blockquote>
<div><ul class="simple">
<li><strong>Inputs:</strong> Accept/write any messages into Graylog</li>
<li><strong>Outputs:</strong> Forward ingested messages to other systems as they are processed</li>
<li><strong>Services:</strong> Run at startup and able to implement any functionality</li>
<li><a class="reference internal" href="index.html#alert-conditions-api"><span class="std std-ref">Alert Conditions</span></a>: Decide whether an alert will be triggered depending on a condition</li>
<li><a class="reference internal" href="index.html#alert-notifications-api"><span class="std std-ref">Alert Notifications</span></a>: Called when a stream alert condition has been triggered</li>
<li><strong>Processors:</strong> Transform/drop incoming messages (can create multiple new messages)</li>
<li><strong>Filters:</strong> (Deprecated) Transform/drop incoming messages during processing</li>
<li><strong>REST API Resources:</strong> An HTTP resource exposed as part of the Graylog REST API</li>
<li><strong>Periodical:</strong> Called at periodical intervals during server runtime</li>
<li><a class="reference internal" href="index.html#decorators-api"><span class="std std-ref">Decorators</span></a>: Used during search time to modify the presentation of messages</li>
<li><strong>Authentication Realms</strong>: Allowing to implement different authentication mechanisms (like single sign-on or 2FA)</li>
</ul>
</div></blockquote>
<div class="toctree-wrapper compound">
<span id="document-pages/plugins/general_concepts"></span><div class="section" id="api-concepts">
<span id="general-concepts-api"></span><h4>API concepts<a class="headerlink" href="#api-concepts" title="Permalink to this headline">¶</a></h4>
<p>Graylog uses certain patterns in its code bases to make it easier to write extensions.
It is important to know about these to be successful in writing custom for it.</p>
<p>You can browse the Graylog <a class="reference external" href="https://javadoc.io/doc/org.graylog2/graylog2-server/2.2.0">Javadoc documentation</a> for details on each class and method mentioned here.</p>
<div class="section" id="factory-class">
<span id="concept-factory-api"></span><h5>Factory Class<a class="headerlink" href="#factory-class" title="Permalink to this headline">¶</a></h5>
<p>Many newer Graylog extension points split the common aspects of custom code into three different classes:</p>
<ul class="simple">
<li>instance creation - an, usually inner, interface commonly called <code class="docutils literal notranslate"><span class="pre">Factory</span></code></li>
<li>configuration - the factory returns a <code class="docutils literal notranslate"><span class="pre">ConfigurationRequest</span></code> instance (or a wrapped instance of it), commonly called <code class="docutils literal notranslate"><span class="pre">Config</span></code></li>
<li>descriptor - the factory returns a display descriptor instance, commonly called <code class="docutils literal notranslate"><span class="pre">Descriptor</span></code></li>
</ul>
<p>Say Graylog exposes an extension point interface called <code class="docutils literal notranslate"><span class="pre">ExtensionPoint</span></code>, which contains inner interfaces calles <code class="docutils literal notranslate"><span class="pre">Factory</span></code>, <code class="docutils literal notranslate"><span class="pre">Config</span></code> and <code class="docutils literal notranslate"><span class="pre">Descriptor</span></code>.
An implementation of <code class="docutils literal notranslate"><span class="pre">ExtensionPoint</span></code> then looks as following:</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">AwesomeExtension</span> <span class="n">implements</span> <span class="n">ExtensionPoint</span> <span class="p">{</span>

        <span class="n">public</span> <span class="n">interface</span> <span class="n">Factory</span> <span class="n">extends</span> <span class="n">ExtensionPoint</span><span class="o">.</span><span class="n">Factory</span> <span class="p">{</span>
                <span class="nd">@Override</span>
                <span class="n">AwesomeExtension</span> <span class="n">create</span><span class="p">(</span><span class="n">Decorator</span> <span class="n">decorator</span><span class="p">);</span>

                <span class="nd">@Override</span>
                <span class="n">AwesomeExtension</span><span class="o">.</span><span class="n">Config</span> <span class="n">getConfig</span><span class="p">();</span>

                <span class="nd">@Override</span>
                <span class="n">AwesomeExtension</span><span class="o">.</span><span class="n">Descriptor</span> <span class="n">getDescriptor</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="n">public</span> <span class="n">static</span> <span class="k">class</span> <span class="nc">Config</span> <span class="n">implements</span> <span class="n">ExtensionPoint</span><span class="o">.</span><span class="n">Config</span> <span class="p">{</span>
                <span class="nd">@Override</span>
                <span class="n">public</span> <span class="n">ConfigurationRequest</span> <span class="n">getRequestedConfiguration</span><span class="p">()</span> <span class="p">{</span>
                        <span class="k">return</span> <span class="n">new</span> <span class="n">ConfigurationRequest</span><span class="p">();</span>
                <span class="p">}</span>
        <span class="p">}</span>

        <span class="n">public</span> <span class="n">static</span> <span class="k">class</span> <span class="nc">Descriptor</span> <span class="n">extends</span> <span class="n">ExtensionPoint</span><span class="o">.</span><span class="n">Descriptor</span> <span class="p">{</span>
                <span class="n">public</span> <span class="n">Descriptor</span><span class="p">()</span> <span class="p">{</span>
                        <span class="nb">super</span><span class="p">(</span><span class="s2">&quot;awesome&quot;</span><span class="p">,</span> <span class="s2">&quot;http://docs.graylog.org/&quot;</span><span class="p">,</span> <span class="s2">&quot;Awesome Extension&quot;</span><span class="p">);</span>
                <span class="p">}</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This pattern is used to prevent instantiation of extensions just to get their descriptor or configuration information, because some extensions might be expensive to set up or require some external service and configuration to work.</p>
<p>The factory itself is built using Guice’s <a class="reference external" href="https://github.com/google/guice/wiki/AssistedInject">assisted injection</a> for auto-wired factories.
This allows plugin authors (and Graylog’s internals as well) to cleanly describe their extension as well as taking advantage of dependency injection.</p>
<p>To register such an extension, Graylog typically offers a convenience method via its Guice modules (<code class="docutils literal notranslate"><span class="pre">GraylogModule</span></code> or <code class="docutils literal notranslate"><span class="pre">PluginModule</span></code>).
For example alert conditions follow the same pattern and are registered as such:</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="k">class</span> <span class="nc">SampleModule</span> <span class="n">extends</span> <span class="n">PluginModule</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">other</span> <span class="n">methods</span> <span class="n">omitted</span> <span class="k">for</span> <span class="n">clarity</span>
        <span class="nd">@Override</span>
        <span class="n">protected</span> <span class="n">void</span> <span class="n">configure</span><span class="p">()</span> <span class="p">{</span>
                <span class="n">addAlertCondition</span><span class="p">(</span><span class="n">SampleAlertCondition</span><span class="o">.</span><span class="n">class</span><span class="o">.</span><span class="n">getCanonicalName</span><span class="p">(),</span>
                                <span class="n">SampleAlertCondition</span><span class="o">.</span><span class="n">class</span><span class="p">,</span>
                                <span class="n">SampleAlertCondition</span><span class="o">.</span><span class="n">Factory</span><span class="o">.</span><span class="n">class</span><span class="p">);</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<span id="document-pages/plugins/alert_conditions"></span><div class="section" id="alert-conditions">
<span id="alert-conditions-api"></span><h4>Alert Conditions<a class="headerlink" href="#alert-conditions" title="Permalink to this headline">¶</a></h4>
<p>An alert condition determines whether an alert is triggered. The result of a condition is sent to an alert notification for sending to remote systems.</p>
<p>In Graylog alerting is based on searches and typically includes a list of messages that lead to the alert. However nothing prevents user code to query other systems than Elasticsearch to produce alerts.</p>
<div class="section" id="class-overview">
<h5>Class Overview<a class="headerlink" href="#class-overview" title="Permalink to this headline">¶</a></h5>
<p>The central interface is <code class="docutils literal notranslate"><span class="pre">org.graylog2.plugin.alarms.AlertCondition</span></code> which is also the type that a plugin module must register using <code class="docutils literal notranslate"><span class="pre">org.graylog2.plugin.PluginModule#addAlertCondition</span></code>.</p>
<p>Alert conditions are configurable at runtime and thus need a corresponding <code class="docutils literal notranslate"><span class="pre">org.graylog2.plugin.configuration.ConfigurationRequest</span></code>.</p>
<p>Like many other types they also require a <code class="docutils literal notranslate"><span class="pre">org.graylog2.plugin.alarms.AlertCondition.Descriptor</span></code> for displaying information about the alert condition.</p>
<p>Typically you will not implement <code class="docutils literal notranslate"><span class="pre">AlertCondition</span></code> directly, but instead use <code class="docutils literal notranslate"><span class="pre">org.graylog2.alerts.AbstractAlertCondition</span></code> which handles the configuration persistence for you automatically and implements two helper to provide the result of a condition check.</p>
</div>
<div class="section" id="example">
<h5>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h5>
<p>Please refer to the sample <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-sample/blob/2.2/src/main/java/org/graylog/plugins/sample/alerts/SampleAlertCondition.java">plugin implementation</a> for the full code.</p>
</div>
<div class="section" id="bindings">
<h5>Bindings<a class="headerlink" href="#bindings" title="Permalink to this headline">¶</a></h5>
<p>Compare with the code in the <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-sample/blob/2.2/src/main/java/org/graylog/plugins/sample/SampleModule.java">sample plugin</a>.</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span>public class SampleModule extends PluginModule {

  @Override
  public Set&lt;? extends PluginConfigBean&gt; getConfigBeans() {
      return Collections.emptySet();
  }

  @Override
  protected void configure() {
      addAlertCondition(SampleAlertCondition.class.getCanonicalName(),
              SampleAlertCondition.class,
              SampleAlertCondition.Factory.class);
  }
}
</pre></div>
</div>
</div>
<div class="section" id="user-interface">
<h5>User Interface<a class="headerlink" href="#user-interface" title="Permalink to this headline">¶</a></h5>
<p>Alert conditions have no special user interface elements.</p>
</div>
</div>
<span id="document-pages/plugins/alert_notifications"></span><div class="section" id="alert-notifications">
<span id="alert-notifications-api"></span><h4>Alert Notifications<a class="headerlink" href="#alert-notifications" title="Permalink to this headline">¶</a></h4>
<p>Alert Notifications are responsible for sending information about alerts to external systems, such as sending an email, push notifications, opening tickets, writing to chat systems etc.</p>
<p>They receive the stream they were bound to as well as the result of the configured <a class="reference internal" href="index.html#alert-conditions-api"><span class="std std-ref">Alert Conditions</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Alert Notifications were called Alarm Callbacks in previous versions of Graylog.</p>
<p class="last">The old name is still used in the code and REST API endpoints for backwards compatibility, so you will see it when implementing your plugins.</p>
</div>
<div class="section" id="class-overview">
<h5>Class Overview<a class="headerlink" href="#class-overview" title="Permalink to this headline">¶</a></h5>
<p>The interface to implement is <code class="docutils literal notranslate"><span class="pre">org.graylog2.plugin.alarms.callbacks.AlarmCallback</span></code> which is also the type that a plugin module must register using <code class="docutils literal notranslate"><span class="pre">org.graylog2.plugin.PluginModule#addAlarmCallback</span></code>.</p>
</div>
<div class="section" id="example-alert-notification">
<h5>Example Alert Notification<a class="headerlink" href="#example-alert-notification" title="Permalink to this headline">¶</a></h5>
<p>You can find a <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-sample/blob/2.2/src/main/java/org/graylog/plugins/sample/alerts/SampleAlertNotification.java">minimal implementation in the sample plugin</a>.</p>
<p>To create an alert notification plugin implement the <code class="docutils literal notranslate"><span class="pre">AlarmCallback</span></code> interface interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="k">class</span> <span class="nc">SampleAlertNotification</span> <span class="n">implements</span> <span class="n">AlarmCallback</span>
</pre></div>
</div>
<p>Your IDE should offer you to create the methods you need to implement:</p>
<p><strong>public void initialize(Configuration configuration) throws AlarmCallbackConfigurationException</strong></p>
<p>This is called once at the very beginning of the lifecycle of this plugin. It is common practice to store the <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> as a private member
for later access.</p>
<p><strong>public void call(Stream stream, AlertCondition.CheckResult checkResult) throws AlarmCallbackException</strong></p>
<p>This is the actual alert notification being triggered. Implement your login that interacts with a remote system here, for example sending a push notification, posts into a chat system etc.</p>
<p><strong>public ConfigurationRequest getRequestedConfiguration()</strong></p>
<p>Plugins can request configurations. The UI in the Graylog web interface is generated from this information and the filled out configuration values
are passed back to the plugin in <code class="docutils literal notranslate"><span class="pre">initialize(Configuration</span> <span class="pre">configuration)</span></code>.</p>
<p>The return value must not be <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p>
<p>This is an example configuration request:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">final</span> <span class="n">ConfigurationRequest</span> <span class="n">configurationRequest</span> <span class="o">=</span> <span class="n">new</span> <span class="n">ConfigurationRequest</span><span class="p">();</span>
<span class="n">configurationRequest</span><span class="o">.</span><span class="n">addField</span><span class="p">(</span><span class="n">new</span> <span class="n">TextField</span><span class="p">(</span>
        <span class="s2">&quot;service_key&quot;</span><span class="p">,</span> <span class="s2">&quot;Service key&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;JIRA API token. You can find this token in your account settings.&quot;</span><span class="p">,</span>
        <span class="n">ConfigurationField</span><span class="o">.</span><span class="n">Optional</span><span class="o">.</span><span class="n">NOT_OPTIONAL</span><span class="p">));</span> <span class="o">//</span> <span class="n">required</span><span class="p">,</span> <span class="n">must</span> <span class="n">be</span> <span class="n">filled</span> <span class="n">out</span>
<span class="n">configurationRequest</span><span class="o">.</span><span class="n">addField</span><span class="p">(</span><span class="n">new</span> <span class="n">BooleanField</span><span class="p">(</span>
        <span class="s2">&quot;use_https&quot;</span><span class="p">,</span> <span class="s2">&quot;HTTPs&quot;</span><span class="p">,</span> <span class="n">true</span><span class="p">,</span>
        <span class="s2">&quot;Use HTTP for API communication?&quot;</span><span class="p">));</span>
</pre></div>
</div>
<p><strong>public String getName()</strong></p>
<p>Return a human readable name of this plugin.</p>
<p><strong>public Map&lt;String, Object&gt; getAttributes()</strong></p>
<p>Return attributes that might be interesting to be shown under the alert notification in the Graylog web interface. It is common practice to at least
return the used configuration here.</p>
<p><strong>public void checkConfiguration() throws ConfigurationException</strong></p>
<p>Throw a <code class="docutils literal notranslate"><span class="pre">ConfigurationException</span></code> if the user should have entered missing or invalid configuration parameters.</p>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p>The alert notification may be created multiple times, so be sure to not perform business logic in the constructor.</p>
<p class="last">You should however inject custom dependencies, such as a specific client library or other objects in the constructor.</p>
</div>
</div>
<div class="section" id="bindings">
<h5>Bindings<a class="headerlink" href="#bindings" title="Permalink to this headline">¶</a></h5>
<p id="registering-alarm-callback">Compare with the code in the <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-sample/blob/2.2/src/main/java/org/graylog/plugins/sample/SampleModule.java">sample plugin</a>.</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span>public class SampleModule extends PluginModule {

        @Override
        public Set&lt;? extends PluginConfigBean&gt; getConfigBeans() {
                return Collections.emptySet();
        }

        @Override
        protected void configure() {
                addAlarmCallback(SampleAlertNotification.class);
        }
}
</pre></div>
</div>
</div>
<div class="section" id="user-interface">
<h5>User Interface<a class="headerlink" href="#user-interface" title="Permalink to this headline">¶</a></h5>
<p>Alert notifications have no custom user interface elements.</p>
</div>
</div>
<span id="document-pages/plugins/decorators"></span><div class="section" id="decorators">
<span id="decorators-api"></span><h4>Decorators<a class="headerlink" href="#decorators" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="index.html#decorators"><span class="std std-ref">Decorators</span></a> can be used to transform a message field at display time. Multiple decorators can be applied at the same time, but you cannot make any assumptions about their order, as that is user defined. Stacked decorators receive the value of the previous decorator results.</p>
<p>They are typically used to map between the stored value and a human readable form of that value,
for example like the <a class="reference internal" href="index.html#syslog-severity-mapper"><span class="std std-ref">Syslog severity mapper</span></a> (compare its <a class="reference external" href="https://github.com/Graylog2/graylog2-server/blob/master/graylog2-server/src/main/java/org/graylog2/decorators/SyslogSeverityMapperDecorator.java">code</a>) maps between numeric values and their textual representation.</p>
<p>Other uses include looking up user names based on a user’s ID in a remote database, triggering a <code class="docutils literal notranslate"><span class="pre">whois</span></code> request on a domain name etc.</p>
<div class="section" id="class-overview">
<span id="writing-decorators"></span><h5>Class Overview<a class="headerlink" href="#class-overview" title="Permalink to this headline">¶</a></h5>
<p>You need to implement the <code class="docutils literal notranslate"><span class="pre">org.graylog2.plugin.decorators.SearchResponseDecorator</span></code> interface. This class must declare a <a class="reference internal" href="index.html#concept-factory-api"><span class="std std-ref">Factory Class</span></a>.</p>
<p>Beyond the factory, configuration and descriptor classes, the only thing that a decorator needs to implement is the <code class="docutils literal notranslate"><span class="pre">apply</span></code> function:</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SearchResponse</span> <span class="n">apply</span><span class="p">(</span><span class="n">SearchResponse</span> <span class="n">searchResponse</span><span class="p">);</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">org.graylog2.rest.resources.search.responses.SearchResponse</span></code> class represents the result that is being returned to the web interface (or other callers of the REST API).</p>
<p>You are free to modify any field, create new fields or remove fields. However, the web interface makes certain assumptions regarding fields that start with <code class="docutils literal notranslate"><span class="pre">gl2_</span></code> and requires at least the <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code> and <code class="docutils literal notranslate"><span class="pre">message</span></code> fields to be present.</p>
<p>Thrown exceptions are being logged as errors and lead to returning the original search response, without any modifications.</p>
</div>
<div class="section" id="example">
<h5>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h5>
<p>Please refer to the sample <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-sample/blob/2.2/src/main/java/org/graylog/plugins/sample/decorator/SampleDecorator.java">plugin implementation</a> for the full code.</p>
</div>
<div class="section" id="bindings">
<h5>Bindings<a class="headerlink" href="#bindings" title="Permalink to this headline">¶</a></h5>
<p>Compare with the code in the <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-sample/blob/2.2/src/main/java/org/graylog/plugins/sample/SampleModule.java">sample plugin</a>.</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span>public class SampleModule extends PluginModule {

  @Override
  public Set&lt;? extends PluginConfigBean&gt; getConfigBeans() {
      return Collections.emptySet();
  }

  @Override
  protected void configure() {
    installSearchResponseDecorator(searchResponseDecoratorBinder(),
                    PipelineProcessorMessageDecorator.class,
                    PipelineProcessorMessageDecorator.Factory.class);
  }
}
</pre></div>
</div>
</div>
<div class="section" id="user-interface">
<h5>User Interface<a class="headerlink" href="#user-interface" title="Permalink to this headline">¶</a></h5>
<p>Decorators have no custom user interface elements.</p>
</div>
</div>
</div>
</div>
<div class="section" id="writing-plugins">
<span id="plugin-prerequisites"></span><h3>Writing Plugins<a class="headerlink" href="#writing-plugins" title="Permalink to this headline">¶</a></h3>
<p>What you need in your development environment before starting is:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="https://git-scm.com">git</a></li>
<li><a class="reference external" href="https://maven.apache.org">maven</a></li>
</ul>
</div></blockquote>
<p>There are lots of different ways to get those on your local machine, unfortunately we cannot list all of them, so please refer to your operating system-specific documentation,</p>
<p>Graylog uses a couple of conventions and techniques in its code, so be sure to read about the <a class="reference internal" href="index.html#general-concepts-api"><span class="std std-ref">API concepts</span></a> for an overview.</p>
<div class="section" id="sample-plugin">
<span id="id3"></span><h4>Sample Plugin<a class="headerlink" href="#sample-plugin" title="Permalink to this headline">¶</a></h4>
<p>To go along with this documentation, there is a <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-sample/tree/2.2">sample plugin on Github</a>. This documentation will link to specific parts for your reference.
It is fully functional, even though it does not implement any useful functionality. Its purpose to provide a reference for helping to implement your own plugins.</p>
</div>
<div class="section" id="creating-a-plugin-skeleton">
<span id="creating-plugin-skeleton"></span><h4>Creating a plugin skeleton<a class="headerlink" href="#creating-a-plugin-skeleton" title="Permalink to this headline">¶</a></h4>
<p>The easiest way to get started is to use our <a class="reference external" href="https://github.com/Graylog2/graylog-project">Graylog meta project</a>,
which will create a complete plugin project infrastructure will all required classes, build definitions, and configurations. Using the meta project allows you to have the <a class="reference external" href="https://github.com/graylog2/graylog2-server">Graylog server project</a> and your own plugins (or 3rd party plugins) in the same project, which means that you can run and debug everything in your favorite IDE or navigate seamlessly in the code base.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We are working on a replacement tool for the <code class="docutils literal notranslate"><span class="pre">graylog-project</span></code> meta project, but for the time being it still works.</p>
</div>
<p>Maven is a widely used build tool for Java, that comes pre-installed on many operating systems or can be installed using most package managers. Make sure that you have at least version 3 before you go on.</p>
<p>Use it like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone git@github.com:Graylog2/graylog-project.git
</pre></div>
</div>
<p>This will create a checkout of the meta project in your current work dir. Now change to the <code class="docutils literal notranslate"><span class="pre">graylog-project</span></code> directory and execute the step which to download the necessary base modules:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ scripts/bootstrap
</pre></div>
</div>
<p>Now you can bootstrap the plugin you want to write from here, by doing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ scripts/bootstrap-plugin jira-alarmcallback
</pre></div>
</div>
<p>It will ask you a few questions about the plugin you are planning to build. Let’s say you work for a company called ACMECorp and want to build
an alarm callback plugin that creates a JIRA ticket for each alarm that is triggered:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">groupId</span><span class="p">:</span> <span class="n">com</span><span class="o">.</span><span class="n">acmecorp</span>
<span class="n">version</span><span class="p">:</span> <span class="mf">1.0</span><span class="o">.</span><span class="mi">0</span>
<span class="n">package</span><span class="p">:</span> <span class="n">com</span><span class="o">.</span><span class="n">acmecorp</span>
<span class="n">pluginClassName</span><span class="p">:</span> <span class="n">JiraAlarmCallback</span>
</pre></div>
</div>
<p>Note that you do not have to tell the archetype wizard what kind of plugin you want to build because it is creating the generic plugin
skeleton for you but nothing that is related to the actual implementation. More on this in the example plugin chapters later.</p>
<p>You now have a new folder called <code class="docutils literal notranslate"><span class="pre">graylog-plugin-jira-alarmcallback</span></code> that includes a complete plugin skeleton including Maven build files. Every Java IDE
out there can now import the project automatically without any required further configuration.</p>
<p>In <a class="reference external" href="https://www.jetbrains.com/idea/">IntelliJ IDEA</a> for example you can just use the <em>File -&gt; Open</em> dialog to open the <code class="docutils literal notranslate"><span class="pre">graylog-project</span></code> directory as a fully configured Java project, which should include the Graylog server and your plugin as submodules.</p>
<p>Please pay close attention to the <a class="reference external" href="https://github.com/Graylog2/graylog-project/blob/master/README.md">README file</a> of the Graylog meta project and follow any further instructions listed there to set up your IDE properly.</p>
<p>If you want to continue working on the command line, you can do the following to compile the server and your plugin:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mvn package
</pre></div>
</div>
</div>
<div class="section" id="the-anatomy-of-a-plugin">
<h4>The anatomy of a plugin<a class="headerlink" href="#the-anatomy-of-a-plugin" title="Permalink to this headline">¶</a></h4>
<p>Each plugin contains information to describe itself and register the extensions it contains.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>A single plugin can contain multiple extensions to Graylog.</p>
<p class="last">For example a hypothetical plugin might contribute an input, an output and alert notifications to communicate with systems. For convenience this would be bundled in a single plugin registering multiple extensions.</p>
</div>
<div class="section" id="required-classes">
<h5>Required classes<a class="headerlink" href="#required-classes" title="Permalink to this headline">¶</a></h5>
<p>At the very minimum you need to implement two interfaces:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">org.graylog2.plugin.Plugin</span></code> - which is the entry to your <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-sample/blob/2.2/src/main/java/org/graylog/plugins/sample/SamplePlugin.java">plugin</a> code</li>
<li><code class="docutils literal notranslate"><span class="pre">org.graylog2.plugin.PluginMetaData</span></code> - which <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-sample/blob/2.2/src/main/java/org/graylog/plugins/sample/SampleMetaData.java">describes your plugin</a></li>
</ul>
</div></blockquote>
<p>The <code class="docutils literal notranslate"><span class="pre">bootstrap-plugin</span></code> script generates these implementations for you, and you simply need to fill out the details.</p>
<p>Graylog uses Java’s <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/ServiceLoader.html">ServiceLoader</a> mechanism to find your plugin’s main class, so if you rename your <code class="docutils literal notranslate"><span class="pre">Plugin</span></code> implementation, you need to also adjust the <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-sample/blob/2.2/src/main/resources/META-INF/services/org.graylog2.plugin.Plugin">service file</a>.
Please also see Google Guava’s <a class="reference external" href="https://github.com/google/auto/tree/master/service">AutoService</a> which Graylog uses in conjunction with the plain ServiceLoader.</p>
<p>In addition to the service, Graylog needs an additional resource file called <code class="docutils literal notranslate"><span class="pre">graylog-plugin.properties</span></code> in a special location. This file contains information about the plugin, specifically which classloader the plugin needs to be in, so it needs to be read before the plugin is actually loaded.
Typically you can simply take the default that has been <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-sample/blob/2.2/src/main/resources/org.graylog.plugins.graylog-plugin-sample/graylog-plugin.properties">generated for you</a>.</p>
</div>
<div class="section" id="registering-your-extension">
<h5>Registering your extension<a class="headerlink" href="#registering-your-extension" title="Permalink to this headline">¶</a></h5>
<p>So far the plugin itself does not do anything, because it neither implements any of the available extensions, nor could Graylog know which ones are available from your code.</p>
<p>Graylog uses <a class="reference external" href="https://github.com/google/guice">dependency injection</a> to wire up its internal components as well as the plugins. Thus the extensions a plugin provides need to be exposed as a <a class="reference external" href="https://github.com/Graylog2/graylog2-server/blob/master/graylog2-server/src/main/java/org/graylog2/plugin/PluginModule.java">PluginModule</a> which provides you with a lot of helper methods to register the various available extensions to cut down the boiler plate code you have to write.</p>
<p>An <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-sample/blob/2.2/src/main/java/org/graylog/plugins/sample/SampleModule.java">empty module</a> is created for you.</p>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p>The <code class="docutils literal notranslate"><span class="pre">PluginModule</span></code> exposes a lot of extension points, but not all of them are considered stable API for external use.</p>
<p class="last">If in doubt, please reach out to us on our <a class="reference external" href="https://www.graylog.org/community-support">community support channels</a>.</p>
</div>
<p>Please refer to the available <a class="reference internal" href="#plugin-types"><span class="std std-ref">Plugin Types</span></a> for detailed information what you can implement. The <a class="reference internal" href="#sample-plugin"><span class="std std-ref">Sample Plugin</span></a> contains stub implementations for each of the supported extensions.</p>
</div>
<div class="section" id="web-plugin-creation">
<h5>Web Plugin creation<a class="headerlink" href="#web-plugin-creation" title="Permalink to this headline">¶</a></h5>
<p>Sometimes your plugin is not only supposed to work under the hoods inside a Graylog server as an input, output, alarm callback, etc. but you also want to contribute previously nonexisting functionality to Graylog’s web interface. Since version 2.0 this is now possible. When using the most recent <a class="reference external" href="https://github.com/Graylog2/graylog-project">Graylog meta project</a> to bootstrap the plugin skeleton, you are already good to go for this. Otherwise please see our chapter about <a class="reference internal" href="#creating-plugin-skeleton"><span class="std std-ref">Creating a plugin skeleton</span></a>.</p>
<p>The Graylog web interface is written in JavaScript, based on <a class="reference external" href="https://facebook.github.io/react/">React</a>. It is built using <a class="reference external" href="http://webpack.github.io">webpack</a>, which is bundling all JavaScript code (and other files you use, like stylesheets, fonts, images, even audio or video files if you need them) into chunks digestible by your browser and <a class="reference external" href="http://npmjs.com">npm</a>, which is managing our external (and own) dependencies. During the build process all of this will be bundled and included in the jar file of your plugin.</p>
<p>This might be overwhelming at first if you are not accustomed to JS-development, but fortunately we have set up a lot to make writing plugins easier for you!</p>
<p>If you use our proposed way for <a class="reference internal" href="#creating-plugin-skeleton"><span class="std std-ref">Creating a plugin skeleton</span></a>, and followed the part about the <a class="reference internal" href="#plugin-prerequisites"><span class="std std-ref">Writing Plugins</span></a>, you are already good to go for building a plugin with a web part. <strong>All you need is a running Graylog server on your machine.</strong> Everything else is fetched at build time!</p>
<p>Getting up and running with a web development environment is as easy as this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ scripts/start-web-dev
[...]
$ open http://localhost:8080
</pre></div>
</div>
<p>This starts the development web server. It even tries to open a browser window going to it (probably working on Mac OS X only).</p>
<p>If your Graylog server is not running on <code class="docutils literal notranslate"><span class="pre">http://localhost:9000/api/</span></code>, then you need to edit <code class="docutils literal notranslate"><span class="pre">graylog2-server/graylog2-web-interface/config.js</span></code> (in your <code class="docutils literal notranslate"><span class="pre">graylog-project</span></code> directory) and adapt the <code class="docutils literal notranslate"><span class="pre">gl2ServerUrl</span></code> parameter.</p>
</div>
<div class="section" id="web-plugin-structure">
<h5>Web Plugin structure<a class="headerlink" href="#web-plugin-structure" title="Permalink to this headline">¶</a></h5>
<p>These are the relevant files and directories in your plugin directory for the web part of it:</p>
<blockquote>
<div><dl class="docutils">
<dt>webpack.config.js</dt>
<dd>This is the configuration file for the <a class="reference external" href="http://webpack.github.io">webpack</a> module bundler. Most of it is already preconfigured by our <code class="docutils literal notranslate"><span class="pre">PluginWebpackConfig</span></code> class, so the file is very small. You can override/extend every configuration option by passing a webpack snippet though.</dd>
<dt>build.config.js.sample</dt>
<dd>In this file you can customize some of the parameters of the build. There is one mandatory parameter named <code class="docutils literal notranslate"><span class="pre">web_src_path</span></code> which defines the absolute or relative location to a checkout of the <a class="reference external" href="https://github.com/Graylog2/graylog2-server">Graylog source repository</a>.</dd>
<dt>package.json</dt>
<dd>This is a standard <a class="reference external" href="http://npmjs.com">npm</a> JSON file describing the web part of your plugin, especially its dependencies. You can read more about its <a class="reference external" href="https://docs.npmjs.com/files/package.json">format</a>.</dd>
<dt>src/web</dt>
<dd>This is where the actual code for thw web part of your plugin goes to. For the start there is a simple <code class="docutils literal notranslate"><span class="pre">index.jsx</span></code> file, which shows you how to register your plugin and the parts it provides with the Graylog web interface. We will get to this in detail later.</dd>
</dl>
</div></blockquote>
</div>
</div>
<div class="section" id="required-conventions-for-web-plugins">
<h4>Required conventions for web plugins<a class="headerlink" href="#required-conventions-for-web-plugins" title="Permalink to this headline">¶</a></h4>
<div class="section" id="plugin-entrypoint">
<h5>Plugin Entrypoint<a class="headerlink" href="#plugin-entrypoint" title="Permalink to this headline">¶</a></h5>
<p>There is a single file which is the entry point of your plugin, which means that the execution of your plugin starts there. By convention this is <cite>src/web/index.jsx</cite>. You can rename/move this file, you just have to adapt your webpack configuration to reflect this change, but it is not recommended.</p>
<p>In any case, this file needs to contain the following code at the very top:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">eslint</span><span class="o">-</span><span class="n">disable</span><span class="o">-</span><span class="nb">next</span><span class="o">-</span><span class="n">line</span> <span class="n">no</span><span class="o">-</span><span class="n">unused</span><span class="o">-</span><span class="nb">vars</span>
<span class="kn">import</span> <span class="nn">webpackEntry</span> <span class="kn">from</span> <span class="s1">&#39;webpack-entry&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>This part is responsible to include and execute the <a class="reference external" href="https://github.com/Graylog2/graylog2-server/blob/master/graylog2-web-interface/src/webpack-entry.js">webpack-entry</a> file, which is responsible to set up webpack to use the correct URL format when loading assets for this plugin. If you leave this out, erratic behavior will be the result.</p>
</div>
<div class="section" id="linking-to-other-pages-from-your-plugin">
<h5>Linking to other pages from your plugin<a class="headerlink" href="#linking-to-other-pages-from-your-plugin" title="Permalink to this headline">¶</a></h5>
<p>If you want to generate links from the web frontend to other pages of your plugin or the main web interface, you need to use the <code class="docutils literal notranslate"><span class="pre">Routes.pluginRoute()</span></code> helper method to generate the URLs properly.</p>
<p>See <a class="reference external" href="https://github.com/Graylog2/graylog2-server/blob/master/graylog2-web-interface/src/routing/Routes.jsx#L5-L20">this file</a> for more information.</p>
</div>
</div>
<div class="section" id="best-practices-for-web-plugin-development">
<h4>Best practices for web plugin development<a class="headerlink" href="#best-practices-for-web-plugin-development" title="Permalink to this headline">¶</a></h4>
<div class="section" id="using-eslint">
<h5>Using ESLint<a class="headerlink" href="#using-eslint" title="Permalink to this headline">¶</a></h5>
<p><a class="reference external" href="http://eslint.org">ESLint</a> is an awesome tool for linting JavaScript code. It makes sure that any written code is in line with general best practises and the project-specific coding style/guideline. We at Graylog are striving to make the best use of this tools as possible, to help our developers and you to generate top quality code with little bugs. Therefore we highly recommend to enable it for a Graylog plugin you are writing.</p>
</div>
<div class="section" id="code-splitting">
<h5>Code Splitting<a class="headerlink" href="#code-splitting" title="Permalink to this headline">¶</a></h5>
<p>Both the web interface and plugins for it depend on a number of libraries like React, RefluxJS and others. To prevent those getting bundled into <em>both</em> the web interface <em>and</em> plugin assets, therefore wasting space or causing problems (especially React does not like to be present more than once), we extract those into a commons chunk which is reused by the web interface and plugins.</p>
<p>This has no consequences for you as a plugin author, because the configuration to make use of this is already generated for you when using the meta project or the maven archetype. But here are some details about it:</p>
<p>Common libraries are built into a separate <code class="docutils literal notranslate"><span class="pre">vendor</span></code> bundle using an own configuration file named <a class="reference external" href="https://github.com/Graylog2/graylog2-server/blob/2.1/graylog2-web-interface/webpack.vendor.js">webpack.vendor.js</a>. Using the <a class="reference external" href="https://github.com/webpack/docs/wiki/list-of-plugins">DLLPlugin</a> a <a class="reference external" href="https://github.com/Graylog2/graylog2-server/blob/2.1/graylog2-web-interface/webpack.vendor.js#L30-L33">manifest is extracted</a> which allow us to reuse the generated bundle. This is then imported in our main <a class="reference external" href="https://github.com/Graylog2/graylog2-server/blob/2.1/graylog2-web-interface/webpack.config.js#L48">web interface webpack configuration file</a> and the corresponding <a class="reference external" href="https://github.com/Graylog2/graylog-web-plugin/blob/master/src/PluginWebpackConfig.js#L45">generated webpack config file for plugins</a>.</p>
</div>
</div>
<div class="section" id="building-plugins">
<h4>Building plugins<a class="headerlink" href="#building-plugins" title="Permalink to this headline">¶</a></h4>
<p>Building the plugin is easy because the meta project has created all necessary files and settings for you. Just run <code class="docutils literal notranslate"><span class="pre">mvn</span> <span class="pre">package</span></code> either from the meta project’s directory (to build the server <em>and</em> the plugin) or from the plugin
directory (to build the plugin only):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mvn package
</pre></div>
</div>
<p>This will generate a <code class="docutils literal notranslate"><span class="pre">.jar</span></code> file in <code class="docutils literal notranslate"><span class="pre">target/</span></code> that is the complete plugin file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ls target/jira-alarmcallback-1.0.0-SNAPSHOT.jar
target/jira-alarmcallback-1.0.0-SNAPSHOT.jar
</pre></div>
</div>
</div>
</div>
<div class="section" id="installing-and-loading-plugins">
<span id="id6"></span><h3>Installing and loading plugins<a class="headerlink" href="#installing-and-loading-plugins" title="Permalink to this headline">¶</a></h3>
<p>The only thing you need to do to run the plugin in Graylog is to copy the <code class="docutils literal notranslate"><span class="pre">.jar</span></code> file to your plugins folder that is configured in your
<code class="docutils literal notranslate"><span class="pre">graylog.conf</span></code>. The default is just <code class="docutils literal notranslate"><span class="pre">plugin/</span></code> relative from your <code class="docutils literal notranslate"><span class="pre">graylog-server</span></code> directory.</p>
<p>This is a list of default plugin locations for the different installation methods.</p>
<table border="1" class="colwidths-given docutils" id="id7">
<caption><span class="caption-text">Plugin Installation Locations</span><a class="headerlink" href="#id7" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Installation Method</th>
<th class="head">Directory</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="index.html#document-pages/installation/operating_system_packages"><span class="doc">Operating System Packages</span></a></td>
<td><code class="docutils literal notranslate"><span class="pre">/usr/share/graylog-server/plugin/</span></code></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="index.html#document-pages/installation/manual_setup"><span class="doc">Manual Setup</span></a></td>
<td><code class="docutils literal notranslate"><span class="pre">/&lt;extracted-graylog-tarball-path&gt;/plugin/</span></code></td>
</tr>
</tbody>
</table>
<p>Restart <code class="docutils literal notranslate"><span class="pre">graylog-server</span></code> and the plugin should be available to use from the web interface immediately.</p>
</div>
</div>
<span id="document-pages/content_packs"></span><div class="section" id="content-packs">
<h2>Content Packs<a class="headerlink" href="#content-packs" title="Permalink to this headline">¶</a></h2>
<div class="section" id="what-are-content-packs">
<h3>What are content packs?<a class="headerlink" href="#what-are-content-packs" title="Permalink to this headline">¶</a></h3>
<p>Content packs are a convenient way to share configuration. A content pack is a
JSON file which contains a set of configurations of Graylog components.
This JSON file can be uploaded to Graylog instances and then installed.
A user who took the time to create a input, pipelines and dashboard for a
certain type of log format, can so easily share his efforts with the community.</p>
<p>Content packs can be found on the <a class="reference external" href="https://marketplace.graylog.org/">Graylog Marketplace</a>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Content packs in 3.0 have changed fundamentally from previous
versions. Graylog will try to support older versions in the
future, but at this point there is no guarantee that older
content packs still work.</p>
</div>
<div class="section" id="parameter">
<h4>Parameter<a class="headerlink" href="#parameter" title="Permalink to this headline">¶</a></h4>
<p>Content packs can have parameters. Those parameters help to adjust the
configuration to the needs of the user. A good example usage is the port of
an input. The creator of the content pack may have his input running on port
55055, but the user of the content pack may already have an input running on
that specific port.
The creator can specify a parameter and assign it to the port.
The user of the content pack will be asked for a value of the parameter on
installation. The provided value will then be used as the port of the input on
the new system.</p>
</div>
</div>
<div class="section" id="how-do-i-create-a-content-pack">
<h3>How do I create a Content Pack?<a class="headerlink" href="#how-do-i-create-a-content-pack" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Navigate to <strong>System / Content Packs</strong>.</li>
<li>Click on <strong>Create a Content Pack</strong> on the upper right side of the page.
A new content pack is created in a wizard. On the left side
of that page is the navigation of the wizard. There are 3 steps to
content pack creation: <strong>Content Selection</strong>, <strong>Parameters</strong> and <strong>Preview</strong>.
In the middle part of the page is the form of each wizard step. And on the
right side is the summary of the content pack in creation.</li>
</ol>
<img alt="_images/content_pack_selection.png" src="http://res.fansdoc.com/graylog/_images/content_pack_selection.png" />
<ol class="arabic simple" start="3">
<li>Fill out the general information of the content pack.</li>
<li>The <strong>Content Selection</strong> offers configurations which can be included to the
content pack. Necessary dependencies will be included automatically.</li>
</ol>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The one exception to this rule is dependencies for pipeline
rules. Currently, grok patterns and lookup tables for pipeline
rules must be added manually to the content pack. Support for
automatic inclusion of pipeline rule dependencies will be
added in a future release.</p>
</div>
<ol class="arabic simple" start="5">
<li>Click on <strong>Next</strong> or <strong>Parameter</strong> to go the Parameter Page.
Parameter are placeholders which will be filled out during installation
of a content pack. That way, parts of the configuration may be adjusted
according to the needs of the user.
To create a parameter click on <strong>Create Parameter</strong>. In the opening modal
can the name, type and default value of the parameter be specified. Graylog
supports four types of configuration values: String, Integer, Double
and Boolean.</li>
</ol>
<img alt="_images/content_pack_parameter.png" src="http://res.fansdoc.com/graylog/_images/content_pack_parameter.png" />
<ol class="arabic simple" start="6">
<li>The created parameter can be assigned to a configuration key by
pressing <strong>Edit</strong> on one of the previously selected configurations
under <strong>Entity List</strong>.</li>
<li>The final step of creation can be reached by clicking on <strong>Next</strong> or
<strong>Preview</strong>.
On the preview page displays a summary of the new content pack.
This page is meant for a final close inspection of the content pack
before creation.</li>
<li>To finish the creation click on <strong>Create</strong> or <strong>Create and Download</strong>.</li>
</ol>
</div>
<div class="section" id="upload-a-content-pack">
<h3>Upload a content pack<a class="headerlink" href="#upload-a-content-pack" title="Permalink to this headline">¶</a></h3>
<p>Content packs may be downloaded at the
<a class="reference external" href="https://marketplace.graylog.org/">Graylog Marketplace</a>.
To upload these content packs navigate to <strong>System / Content Packs</strong> and
click on <strong>Upload</strong>. The now showing modal has a file finder to select
the downloaded content pack. Click on <strong>Upload</strong> to finish the process.
The uploaded content pack may now be installed on the new Graylog system.</p>
</div>
<div class="section" id="installing-a-content-pack">
<h3>Installing a content pack<a class="headerlink" href="#installing-a-content-pack" title="Permalink to this headline">¶</a></h3>
<p>To install the newest version of a content pack, navigate to
<strong>System / Content Packs</strong>.
This page shows the list of uploaded and created content packs.
By clicking <strong>Install</strong> on the desired content pack, a modal will open
which will ask for a <strong>Install Comment</strong> and the values of the parameters.
It also shows the list of configurations that will be installed on the
system. Click on <strong>Install</strong> to complete the installation.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Some entities need a unique title or name (e.g Lookup Table).
When installing such an entity and the title is already
present on the system, then Graylog will use the installed
entity instead of installing a new one. Even when the
new configuration differs from the already installed one.</p>
</div>
</div>
<div class="section" id="uninstalling-a-content-pack">
<h3>Uninstalling a content pack<a class="headerlink" href="#uninstalling-a-content-pack" title="Permalink to this headline">¶</a></h3>
<p>Navigate to <strong>System / Content Packs</strong> and click on the name of the content
pack that should be uninstalled.
The displayed page shows the details of a uploaded or created content pack.</p>
<img alt="_images/content_pack_show.png" src="http://res.fansdoc.com/graylog/_images/content_pack_show.png" />
<p>On the left, select the version of the content pack.
Below that is a list of installations of that content pack.
Click <strong>Uninstall</strong> next to the desired installation.
A list of entities about to be removed will be displayed.</p>
</div>
</div>
<span id="document-pages/external_dashboards"></span><div class="section" id="external-dashboards">
<h2>External dashboards<a class="headerlink" href="#external-dashboards" title="Permalink to this headline">¶</a></h2>
<p>There are other frontends that are connecting to the Graylog REST API and display data or information in a
special way.</p>
<div class="section" id="cli-stream-dashboard">
<h3>CLI stream dashboard<a class="headerlink" href="#cli-stream-dashboard" title="Permalink to this headline">¶</a></h3>
<p>This official Graylog dashboard which is developed by us is showing live information of a specific stream in
your terminal. For example it is the perfect companion during a deployment of your platform: Run it next to
the deployment output and show information of a stream that is catching all errors or exceptions on your
systems.</p>
<img alt="_images/cli_dashboard.png" src="http://res.fansdoc.com/graylog/_images/cli_dashboard.png" />
<p>The CLI stream dashboard documentation <a class="reference external" href="https://github.com/Graylog2/cli-dashboard">is available on GitHub</a>.</p>
</div>
</div>
<span id="document-pages/marketplace"></span><div class="section" id="graylog-marketplace">
<span id="marketplace"></span><h2>Graylog Marketplace<a class="headerlink" href="#graylog-marketplace" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="http://marketplace.graylog.org">Graylog Marketplace</a> is the central directory
of add-ons for Graylog. It contains plugins, content packs, GELF libraries and
more content built by Graylog developers and community members.</p>
<img alt="_images/marketplace.png" src="http://res.fansdoc.com/graylog/_images/marketplace.png" />
<div class="section" id="github-integration">
<h3>GitHub integration<a class="headerlink" href="#github-integration" title="Permalink to this headline">¶</a></h3>
<p>The Marketplace is deeply integrated with GitHub. You sign-in with your GitHub
account if you want to submit content and only have to select an existing
repository to list on the Marketplace.</p>
<p>From there on you manage your releases and code changes in GitHub. The Marketplace
will automatically update your content.</p>
<p>There is no need to sign-in if you only want to browse or download content.</p>
</div>
<div class="section" id="general-best-practices">
<h3>General best practices<a class="headerlink" href="#general-best-practices" title="Permalink to this headline">¶</a></h3>
<div class="section" id="readme-content">
<span id="mpreadme"></span><h4>README content<a class="headerlink" href="#readme-content" title="Permalink to this headline">¶</a></h4>
<p>We kindly ask you to provide an as descriptive as possible <code class="docutils literal notranslate"><span class="pre">README</span></code> file with your
submission. This
file will be displayed on the Marketplace detail page and should provide the following
information:</p>
<ul class="simple">
<li>What is it.</li>
<li>Why would you want to use it? (Use cases)</li>
<li>Do you have to register somewhere to get for example an API token?</li>
<li>How to install and configure it.</li>
<li>How to use it in a Graylog context.</li>
</ul>
<p>Take a look at the <a class="reference external" href="https://marketplace.graylog.org/addons/974efcc3-8d78-4847-becd-0f26821d2646">Splunk plug-in</a>
as an example.</p>
<p>The README supports <a class="reference external" href="http://daringfireball.net/projects/markdown">Markdown</a>
for formatting. You cannot submit content that does not contain a <code class="docutils literal notranslate"><span class="pre">README</span></code> file.</p>
</div>
<div class="section" id="license">
<span id="mplicense"></span><h4>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h4>
<p>You cannot submit content that does not contain a <code class="docutils literal notranslate"><span class="pre">LICENSE</span></code> or <code class="docutils literal notranslate"><span class="pre">COPYING</span></code> file.
We recommend to consult <a class="reference external" href="http://choosealicense.com">ChooseALicense.com</a> if you are
unsure which license to use.</p>
</div>
</div>
<div class="section" id="types-of-add-ons">
<h3>4 Types of Add-Ons<a class="headerlink" href="#types-of-add-ons" title="Permalink to this headline">¶</a></h3>
<p>Plug-Ins: Code that extends Graylog to support a specific use case that it doesn’t support out of the box.</p>
<p>Content Pack: A file that can be uploaded into your Graylog system that sets up streams, inputs, extractors, dashboards, etc. to support a given log source or use case.</p>
<p>GELF Library: A library for a programming language or logging framework that supports sending log messages in GELF format for easy integration and pre-structured messages.</p>
<p>Other Solutions: Any other content or guide that helps you integrate Graylog with an external system or device. For example, how to configure a specific device to support a format Graylog understands out of the box.</p>
</div>
<div class="section" id="contributing-plug-ins">
<h3>Contributing plug-ins<a class="headerlink" href="#contributing-plug-ins" title="Permalink to this headline">¶</a></h3>
<p>You <a class="reference internal" href="index.html#plugins"><span class="std std-ref">created a Graylog plugin</span></a> and want to list it in the
Marketplace? This is great. Here are the simple steps to follow:</p>
<ol class="arabic simple">
<li>Create a GitHub repository for your plugin</li>
<li>Include a <a class="reference internal" href="#mpreadme"><span class="std std-ref">README</span></a> and a <a class="reference internal" href="#mplicense"><span class="std std-ref">LICENSE</span></a> file in
the repository.</li>
<li>Push all your code to the repository.</li>
<li><a class="reference external" href="https://help.github.com/articles/creating-releases/">Create a GitHub release</a>
and give it the name of the plugin version. For example <code class="docutils literal notranslate"><span class="pre">0.1</span></code>. The
Marketplace will always show and link the latest version. You can upload
as many release artifacts as you want here. For example the <code class="docutils literal notranslate"><span class="pre">.jar</span></code> file
together with <code class="docutils literal notranslate"><span class="pre">DEB</span></code> and <code class="docutils literal notranslate"><span class="pre">RPM</span></code> files. The Marketplace will link to the
detail page of a release for downloads.</li>
<li>Submit the repository to the Marketplace</li>
</ol>
</div>
<div class="section" id="contributing-content-packs">
<h3>Contributing content packs<a class="headerlink" href="#contributing-content-packs" title="Permalink to this headline">¶</a></h3>
<p>Graylog content packs can be shared on the Marketplace by following these steps:</p>
<ol class="arabic simple">
<li>Download a Graylog content pack from the Graylog Web Interface and save the
generated JSON in a file called <code class="docutils literal notranslate"><span class="pre">content_pack.json</span></code>.</li>
<li>Create a GitHub repository for your content pack</li>
<li>Include a <a class="reference internal" href="#mpreadme"><span class="std std-ref">README</span></a> and a <a class="reference internal" href="#mplicense"><span class="std std-ref">LICENSE</span></a> file in
the repository.</li>
<li>Include the <code class="docutils literal notranslate"><span class="pre">content_pack.json</span></code> file in the root of your GitHub repository.</li>
<li>Submit the repository to the Marketplace</li>
</ol>
</div>
<div class="section" id="contributing-gelf-libraries">
<h3>Contributing GELF libraries<a class="headerlink" href="#contributing-gelf-libraries" title="Permalink to this headline">¶</a></h3>
<p>A GELF library can be added like this:</p>
<ol class="arabic simple">
<li>Create a GitHub repository for your GELF library.</li>
<li>Include a <a class="reference internal" href="#mpreadme"><span class="std std-ref">README</span></a> and a <a class="reference internal" href="#mplicense"><span class="std std-ref">LICENSE</span></a> file in
the repository.</li>
<li>Describe where to download and how to use the GELF library in the <code class="docutils literal notranslate"><span class="pre">README</span></code>.</li>
</ol>
</div>
<div class="section" id="contributing-other-content">
<h3>Contributing other content<a class="headerlink" href="#contributing-other-content" title="Permalink to this headline">¶</a></h3>
<p>You want to contribute content that does not really fit into the other categories
but describes how to integrate a certain system or make it send messages to Graylog?</p>
<p>This is how you can do it:</p>
<ol class="arabic simple">
<li>Create a GitHub repository for your content</li>
<li>Include a <a class="reference internal" href="#mpreadme"><span class="std std-ref">README</span></a> and a <a class="reference internal" href="#mplicense"><span class="std std-ref">LICENSE</span></a> file in
the repository.</li>
<li>All content goes into the <code class="docutils literal notranslate"><span class="pre">README</span></code>.</li>
</ol>
</div>
</div>
<span id="document-pages/faq"></span><div class="section" id="frequently-asked-questions">
<h2>Frequently asked questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="general">
<h3>General<a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h3>
<div class="section" id="do-i-need-to-buy-a-license-to-use-graylog">
<h4>Do I need to buy a license to use Graylog?<a class="headerlink" href="#do-i-need-to-buy-a-license-to-use-graylog" title="Permalink to this headline">¶</a></h4>
<p>We believe software should be open and accessible to all.  You should not have to pay to analyze your own data, no matter how much you have.</p>
<p>Graylog is licensed under the <a class="reference external" href="http://www.gnu.org/licenses/gpl-3.0.en.html">GNU General Public License</a>.  We do not require license fees for production or non-production use.</p>
</div>
<div class="section" id="how-long-do-you-support-older-versions-of-the-graylog-product">
<h4>How long do you support older versions of the Graylog product?<a class="headerlink" href="#how-long-do-you-support-older-versions-of-the-graylog-product" title="Permalink to this headline">¶</a></h4>
<p>For our commercial support customers, we support older versions of Graylog up to 12 months after the next major release is available. So if you’re using 1.X, you will continue to receive 1.X support up to a full year after 2.0 has been released.</p>
</div>
</div>
<div class="section" id="architecture">
<h3>Architecture<a class="headerlink" href="#architecture" title="Permalink to this headline">¶</a></h3>
<div class="section" id="what-is-mongodb-used-for">
<h4>What is MongoDB used for?<a class="headerlink" href="#what-is-mongodb-used-for" title="Permalink to this headline">¶</a></h4>
<p>Graylog uses MongoDB to store your configuration data, not your log data. Only metadata is stored, such as user information or stream configurations. None of your log messages are ever stored in MongoDB. This is why MongoDB does not have a big system impact, and you won’t have to worry too much about scaling it. With our recommended setup architecture, MongoDB will simply run alongside your graylog-server processes and use almost no resources.</p>
</div>
<div class="section" id="can-you-guide-me-on-how-to-replicate-mongodb-for-high-availability">
<h4>Can you guide me on how to replicate MongoDB for High Availability?<a class="headerlink" href="#can-you-guide-me-on-how-to-replicate-mongodb-for-high-availability" title="Permalink to this headline">¶</a></h4>
<p>MongoDB actually supplies this information as part of their documentation.  Check out
:</p>
<ul class="simple">
<li>About <a class="reference external" href="https://docs.mongodb.org/manual/replication/">MongoDB Replica Sets</a>.</li>
<li>How to <a class="reference external" href="https://docs.mongodb.org/manual/tutorial/convert-standalone-to-replica-set/">convert a standalone MongoDB node to a replica set</a>.</li>
</ul>
<p>After you’ve done this, add all MongoDB nodes into the replica_set configuration in all graylog-server.conf files.</p>
</div>
<div class="section" id="i-have-datacenters-across-the-world-and-do-not-want-logs-forwarding-from-everywhere-to-a-central-location-due-to-bandwidth-etc-how-do-i-handle-this">
<h4>I have datacenters across the world and do not want logs forwarding from everywhere to a central location due to bandwidth, etc.  How do I handle this?<a class="headerlink" href="#i-have-datacenters-across-the-world-and-do-not-want-logs-forwarding-from-everywhere-to-a-central-location-due-to-bandwidth-etc-how-do-i-handle-this" title="Permalink to this headline">¶</a></h4>
<p>You can have multiple graylog-server instances in a federated structure, and forward select messages to a centralized GL server.</p>
</div>
<div class="section" id="which-load-balancers-do-you-recommend-we-use-with-graylog">
<h4>Which load balancers do you recommend we use with Graylog?<a class="headerlink" href="#which-load-balancers-do-you-recommend-we-use-with-graylog" title="Permalink to this headline">¶</a></h4>
<p>You can use any.  We have clients running AWS ELB, HAProxy, F5 BIG-IP, and KEMP.</p>
</div>
<div class="section" id="isnt-java-slow-does-it-need-a-lot-of-memory">
<h4>Isn’t Java slow? Does it need a lot of memory?<a class="headerlink" href="#isnt-java-slow-does-it-need-a-lot-of-memory" title="Permalink to this headline">¶</a></h4>
<p>This is a concern that we hear from time to time. We understand Java has a bad reputation from slow and laggy desktop/GUI applications that eat a lot of memory. However, we are usually able to prove this assumption wrong. Well written Java code for server systems is very efficient and does not need a lot of memory resources.</p>
<p>Give it a try, you might be surprised!</p>
</div>
<div class="section" id="does-graylog-encrypt-log-data">
<h4>Does Graylog encrypt log data?<a class="headerlink" href="#does-graylog-encrypt-log-data" title="Permalink to this headline">¶</a></h4>
<p>All log data is stored in Elasticsearch. <a class="reference external" href="https://discuss.elastic.co/t/how-should-i-encrypt-data-at-rest-with-elasticsearch/96">Elastic recommends</a> you use <em>dm-crypt</em> at the file system level.</p>
</div>
<div class="section" id="where-are-the-log-files-graylog-produces">
<h4>Where are the log files Graylog produces?<a class="headerlink" href="#where-are-the-log-files-graylog-produces" title="Permalink to this headline">¶</a></h4>
<p>You can find the log data for Graylog under the below directory with timestamps and levels and exception messages. This is useful for debugging or when the server won’t start.</p>
<blockquote>
<div>/var/log/graylog-server/server.log</div></blockquote>
<p>If you use the pre-build appliances, take a look into</p>
<blockquote>
<div>/var/log/graylog/&lt;servicename&gt;/current</div></blockquote>
</div>
</div>
<div class="section" id="installation-setup">
<h3>Installation / Setup<a class="headerlink" href="#installation-setup" title="Permalink to this headline">¶</a></h3>
<div class="section" id="should-i-download-the-ova-appliances-or-the-separate-packages">
<h4>Should I download the OVA appliances or the separate packages?<a class="headerlink" href="#should-i-download-the-ova-appliances-or-the-separate-packages" title="Permalink to this headline">¶</a></h4>
<p>If you are downloading Graylog for the first time to evaluate it, go for the appliance.  It is really easy, and can be quickly setup so you can understand if Graylog is right for you.  If you are wanting to use Graylog at some scale in production, and do things like high availability (Mongo replication) we recommend you go for the separate packages.</p>
</div>
<div class="section" id="how-do-i-find-out-if-a-specific-log-source-is-supported">
<h4>How do I find out if a specific log source is supported?<a class="headerlink" href="#how-do-i-find-out-if-a-specific-log-source-is-supported" title="Permalink to this headline">¶</a></h4>
<p>We support many log sources – and more are coming everyday.  For a complete list, check out <a class="reference external" href="https://marketplace.graylog.org/">Graylog Marketplace</a>, the central repository of Graylog extensions. There are 4 types of content on the Marketplace:</p>
<ul class="simple">
<li>Plug-Ins: Code that extends Graylog to support a specific use case that it doesn’t support out of the box.</li>
<li>Content Pack: A file that can be uploaded into your Graylog system that sets up streams, inputs, extractors, dashboards, etc. to support a given log source or use case.</li>
<li>GELF Library: A library for a programming language or logging framework that supports sending log messages in GELF format for easy integration and pre-structured messages.</li>
<li>Other Solutions: Any other content or guide that helps you integrate Graylog with an external system or device. For example, how to configure a specific device to support a format Graylog understands out of the box.</li>
</ul>
</div>
<div class="section" id="can-i-install-the-graylog-server-on-windows">
<h4>Can I install the Graylog Server on Windows?<a class="headerlink" href="#can-i-install-the-graylog-server-on-windows" title="Permalink to this headline">¶</a></h4>
<p>Even though our engineers say it is “technically possible”, don’t do it.  The Graylog server is built using Java, so technically it can run anywhere. But we currently have it optimized to run better on other operating systems. If you don’t feel comfortable running your own Linux system, we recommend you use our Linux virtual appliance which will run under VMWare.</p>
</div>
<div class="section" id="can-i-run-graylog-on-azure">
<h4>Can I run Graylog on Azure?<a class="headerlink" href="#can-i-run-graylog-on-azure" title="Permalink to this headline">¶</a></h4>
<p>You can <a class="reference external" href="https://docs.microsoft.com/en-us/azure/virtual-machines/virtual-machines-linux-quick-create-portal">create a Linux VM</a> and use our <a class="reference internal" href="index.html#step-by-step-guides"><span class="std std-ref">step-by-step</span></a> to install your customized Graylog. As a second option you can use <a class="reference external" href="https://cloudbase.it/convert-virtualbox-to-hyper-v/">this guide</a> to convert our <a class="reference internal" href="index.html#virtual-machine-appliances"><span class="std std-ref">Appliance</span></a> into some Azure compatible virtual machine.</p>
</div>
</div>
<div class="section" id="functionality">
<h3>Functionality<a class="headerlink" href="#functionality" title="Permalink to this headline">¶</a></h3>
<div class="section" id="can-graylog-automatically-clean-old-data">
<h4>Can Graylog automatically clean old data?<a class="headerlink" href="#can-graylog-automatically-clean-old-data" title="Permalink to this headline">¶</a></h4>
<p>Absolutely we have <a class="reference internal" href="index.html#document-pages/configuration/index_model"><span class="doc">data retention features</span></a>.</p>
</div>
<div class="section" id="does-graylog-support-ldap-ad-and-its-groups">
<h4>Does Graylog support LDAP / AD and its groups?<a class="headerlink" href="#does-graylog-support-ldap-ad-and-its-groups" title="Permalink to this headline">¶</a></h4>
<p>Yup, we’re all over this too with read/write roles and group permissions.  To start, see <a class="reference internal" href="index.html#document-pages/users_and_roles/external_auth"><span class="doc">this</span></a>.  If you want to get very granular, you can go through the Graylog REST API.</p>
</div>
<div class="section" id="do-we-have-a-user-audit-log-for-compliance">
<h4>Do we have a user audit log for compliance?<a class="headerlink" href="#do-we-have-a-user-audit-log-for-compliance" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="https://www.graylog.org/enterprise">Graylog Enterprise</a> includes audit log functionality. You can explore the <a class="reference internal" href="index.html#auditlog-toc"><span class="std std-ref">documentation</span></a> for more details.</p>
</div>
<div class="section" id="does-graylog-have-reporting-functionality">
<h4>Does Graylog have reporting functionality?<a class="headerlink" href="#does-graylog-have-reporting-functionality" title="Permalink to this headline">¶</a></h4>
<p>Since Graylog 3.0, <a class="reference external" href="https://www.graylog.org/enterprise">Graylog Enterprise</a> includes reporting capabilities. Take a look at the <a class="reference internal" href="index.html#reporting-toc"><span class="std std-ref">documentation</span></a> for more details.</p>
</div>
<div class="section" id="can-i-filter-inbound-messages-before-they-are-processed-by-the-graylog-server">
<h4>Can I filter inbound messages before they are processed by the Graylog server?<a class="headerlink" href="#can-i-filter-inbound-messages-before-they-are-processed-by-the-graylog-server" title="Permalink to this headline">¶</a></h4>
<p>Yes, check out our page on how to use <a class="reference internal" href="index.html#document-pages/blacklisting"><span class="doc">blacklisting</span></a>.</p>
</div>
<div class="section" id="dedicated-partition-for-the-journal">
<h4>Dedicated Partition for the Journal<a class="headerlink" href="#dedicated-partition-for-the-journal" title="Permalink to this headline">¶</a></h4>
<p>If you create a dedicated Partition for your Kafka Journal, you need to watch that this is a clean directory. Even <em>lost+found</em> can break it, for <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2348">your reference</a>.</p>
</div>
<div class="section" id="raise-the-java-heap">
<span id="raise-java-heap"></span><h4>Raise the Java Heap<a class="headerlink" href="#raise-the-java-heap" title="Permalink to this headline">¶</a></h4>
<p>On Systems that run as virtual appliances or are installed with <a class="reference internal" href="index.html#operating-package-deb-apt"><span class="std std-ref">DEB / APT</span></a> this setting can be made in <code class="docutils literal notranslate"><span class="pre">/etc/default/graylog-server</span></code>.</p>
<p>Systems that are installed with <a class="reference internal" href="index.html#operating-package-rpm-yum-dnf"><span class="std std-ref">RPM / YUM / DNF</span></a> the file is found in <code class="docutils literal notranslate"><span class="pre">/etc/sysconfig/graylog-server</span></code>.</p>
</div>
<div class="section" id="how-can-i-start-an-input-on-a-port-below-1024">
<h4>How can I start an input on a port below 1024?<a class="headerlink" href="#how-can-i-start-an-input-on-a-port-below-1024" title="Permalink to this headline">¶</a></h4>
<p>If you try to start an input on one of the <a class="reference external" href="https://www.w3.org/Daemon/User/Installation/PrivilegedPorts.html">privileged ports</a> , it will only work for the “root” user.
To be able to use a privileged port, you can use <a class="reference external" href="https://en.wikipedia.org/wiki/Authbind">authbind</a> on Debian-based systems, or you redirect the traffic with an <code class="docutils literal notranslate"><span class="pre">iptables</span></code> rule like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">iptables</span> <span class="o">-</span><span class="n">t</span> <span class="n">nat</span> <span class="o">-</span><span class="n">A</span> <span class="n">PREROUTING</span> <span class="o">-</span><span class="n">p</span> <span class="n">tcp</span> <span class="o">--</span><span class="n">dport</span> <span class="mi">514</span> <span class="o">-</span><span class="n">j</span> <span class="n">REDIRECT</span> <span class="o">--</span><span class="n">to</span> <span class="mi">1514</span>
<span class="n">iptables</span> <span class="o">-</span><span class="n">t</span> <span class="n">nat</span> <span class="o">-</span><span class="n">A</span> <span class="n">PREROUTING</span> <span class="o">-</span><span class="n">p</span> <span class="n">udp</span> <span class="o">--</span><span class="n">dport</span> <span class="mi">514</span> <span class="o">-</span><span class="n">j</span> <span class="n">REDIRECT</span> <span class="o">--</span><span class="n">to</span> <span class="mi">1514</span>
</pre></div>
</div>
<p>The input needs to be started on port 1514 in this case and will be made available on port 514 to the outside. The clients can then send data to port 514.</p>
</div>
</div>
<div class="section" id="graylog-integrations">
<h3>Graylog &amp; Integrations<a class="headerlink" href="#graylog-integrations" title="Permalink to this headline">¶</a></h3>
<div class="section" id="what-is-the-best-way-to-integrate-my-applications-to-graylog">
<h4>What is the best way to integrate my applications to Graylog?<a class="headerlink" href="#what-is-the-best-way-to-integrate-my-applications-to-graylog" title="Permalink to this headline">¶</a></h4>
<p>We recommend that you use <a class="reference internal" href="index.html#document-pages/sending_data"><span class="doc">GELF</span></a>.  It’s easy for your application developers and eliminates the need to store the messages locally.  Also, GELF can just send what app person wants so you don’t have to build extractors or do any extra processing in Graylog.</p>
</div>
<div class="section" id="i-have-a-log-source-that-creates-dynamic-syslog-messages-based-on-events-and-subtypes-and-grok-patterns-are-difficult-to-use-what-is-the-best-way-to-handle-this">
<h4>I have a log source that creates dynamic syslog messages based on events and subtypes and grok patterns are difficult to use - what is the best way to handle this?<a class="headerlink" href="#i-have-a-log-source-that-creates-dynamic-syslog-messages-based-on-events-and-subtypes-and-grok-patterns-are-difficult-to-use-what-is-the-best-way-to-handle-this" title="Permalink to this headline">¶</a></h4>
<p>Not a problem!  Use our <a class="reference internal" href="index.html#document-pages/extractors"><span class="doc">key=value extractor</span></a>.</p>
</div>
<div class="section" id="i-want-to-archive-my-log-data-can-i-write-to-another-database-for-example-hdfs-hadoop-from-graylog">
<h4>I want to archive my log data. Can I write to another database, for example HDFS / Hadoop, from Graylog?<a class="headerlink" href="#i-want-to-archive-my-log-data-can-i-write-to-another-database-for-example-hdfs-hadoop-from-graylog" title="Permalink to this headline">¶</a></h4>
<p>Yes, you can output data from Graylog to a different database. We currently have an HDFS output <a class="reference external" href="https://marketplace.graylog.org/addons/99259226-6ba3-48c8-a710-9598b65eda0e">plug-in</a> in the Marketplace - thank you <a class="reference external" href="https://github.com/sivasamyk">sivasamyk</a>!</p>
<p>It’s also easy and fun to <a class="reference internal" href="index.html#document-pages/plugins"><span class="doc">write your own</span></a>, which you can then add to Graylog Marketplace for others to use.</p>
</div>
<div class="section" id="i-dont-want-to-use-elasticsearch-as-my-backend-storage-system-can-i-use-another-database-like-mysql-oracle-etc">
<h4>I don’t want to use Elasticsearch as my backend storage system – can I use another database, like MySQL, Oracle, etc?<a class="headerlink" href="#i-dont-want-to-use-elasticsearch-as-my-backend-storage-system-can-i-use-another-database-like-mysql-oracle-etc" title="Permalink to this headline">¶</a></h4>
<p>You can, but we don’t suggest you do. You will not be able to use our query functionality or our analytic engine on the dataset outside the system. We only recommend another database if you want it for secondary storage.</p>
</div>
<div class="section" id="how-can-i-create-a-restricted-user-to-check-internal-graylog-metrics-in-my-monitoring-system">
<h4>How can I create a restricted user to check internal Graylog metrics in my monitoring system?<a class="headerlink" href="#how-can-i-create-a-restricted-user-to-check-internal-graylog-metrics-in-my-monitoring-system" title="Permalink to this headline">¶</a></h4>
<p>You can create a restricted user which only has access to the <code class="docutils literal notranslate"><span class="pre">/system/metrics</span></code> resource on the Graylog REST API.
This way it will be possible to integrate the internal metrics of Graylog into your monitoring system.
Giving the user only restricted access will minimize the impact of these credentials getting compromised.</p>
<p>Send a POST request via the Graylog API Browser or curl to the <code class="docutils literal notranslate"><span class="pre">/roles</span></code> resource of the Graylog REST API:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Metrics Access&quot;</span><span class="p">,</span>
  <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Provides read access to all system metrics&quot;</span><span class="p">,</span>
  <span class="s2">&quot;permissions&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;metrics:*&quot;</span><span class="p">],</span>
  <span class="s2">&quot;read_only&quot;</span><span class="p">:</span> <span class="n">false</span>
 <span class="p">}</span>
</pre></div>
</div>
<p>The following curl command will create the required role (modify the URL of the Graylog REST API, here <code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:9000/api/</span></code>, and the user credentials, here <code class="docutils literal notranslate"><span class="pre">admin</span></code>/<code class="docutils literal notranslate"><span class="pre">admin</span></code>, according to your setup):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -u admin:admin -H &quot;Content-Type: application/json&quot; -H &#39;X-Requested-By: cli&#39; -X POST -d &#39;{&quot;name&quot;: &quot;Metrics Access&quot;, &quot;description&quot;: &quot;Provides read access to all system metrics&quot;, &quot;permissions&quot;: [&quot;metrics:*&quot;], &quot;read_only&quot;: false}&#39; &#39;http://127.0.0.1:9000/api/roles&#39;
</pre></div>
</div>
</div>
</div>
<div class="section" id="troubleshooting">
<h3>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h3>
<div class="section" id="im-sending-in-messages-and-i-can-see-they-are-being-accepted-by-graylog-but-i-cant-see-them-in-the-search-what-is-going-wrong">
<h4>I’m sending in messages, and I can see they are being accepted by Graylog, but I can’t see them in the search.  What is going wrong?<a class="headerlink" href="#im-sending-in-messages-and-i-can-see-they-are-being-accepted-by-graylog-but-i-cant-see-them-in-the-search-what-is-going-wrong" title="Permalink to this headline">¶</a></h4>
<p>A common reason for this issue is that the timestamp in the message is wrong. First, confirm that the message was received by selecting ‘all messages’ as the time range for your search. Then identify and fix the source that is sending the wrong timestamp.</p>
</div>
<div class="section" id="i-have-configured-an-smtp-server-or-an-output-with-tls-connection-and-receive-handshake-errors-what-should-i-do">
<h4>I have configured an SMTP server or an output with TLS connection and receive handshake errors. What should I do?<a class="headerlink" href="#i-have-configured-an-smtp-server-or-an-output-with-tls-connection-and-receive-handshake-errors-what-should-i-do" title="Permalink to this headline">¶</a></h4>
<p>Outbound TLS connections have CA (<em>certification authority</em>) certificate verification enabled by default. In case the target server’s certificate is not signed by a CA found from trust store, the connection will fail. A typical symptom for this is the following error message in the server logs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Caused</span> <span class="n">by</span><span class="p">:</span> <span class="n">javax</span><span class="o">.</span><span class="n">mail</span><span class="o">.</span><span class="n">MessagingException</span><span class="p">:</span> <span class="n">Could</span> <span class="ow">not</span> <span class="n">convert</span> <span class="n">socket</span> <span class="n">to</span> <span class="n">TLS</span><span class="p">;</span> <span class="n">nested</span> <span class="n">exception</span> <span class="ow">is</span><span class="p">:</span> <span class="n">javax</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">ssl</span><span class="o">.</span><span class="n">SSLHandshakeException</span><span class="p">:</span> <span class="n">sun</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">validator</span><span class="o">.</span><span class="n">ValidatorException</span><span class="p">:</span> <span class="n">PKIX</span> <span class="n">path</span> <span class="n">building</span> <span class="n">failed</span><span class="p">:</span> <span class="n">sun</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">certpath</span><span class="o">.</span><span class="n">SunCertPathBuilderException</span><span class="p">:</span> <span class="n">unable</span> <span class="n">to</span> <span class="n">find</span> <span class="n">valid</span> <span class="n">certification</span> <span class="n">path</span> <span class="n">to</span> <span class="n">requested</span> <span class="n">target</span>
</pre></div>
</div>
<p>This should be corrected by either adding the missing CA certificates to the Java default trust store (typically found at <code class="docutils literal notranslate"><span class="pre">$JAVA_HOME/jre/lib/security/cacerts</span></code>), or a custom store that is configured (by using <code class="docutils literal notranslate"><span class="pre">-Djavax.net.ssl.trustStore</span></code>) for the Graylog server process. The same procedure applies for both missing valid CAs and self-signed certificates.</p>
<p>For Debian/Ubuntu-based systems using OpenJDK JRE, CA certificates may be added to the systemwide trust store. After installing the JRE (including <code class="docutils literal notranslate"><span class="pre">ca-certificates-java</span></code>, ergo <code class="docutils literal notranslate"><span class="pre">ca-certificates</span></code> packages), place <code class="docutils literal notranslate"><span class="pre">name-of-certificate-dot-crt</span></code> (in PEM format) into <code class="docutils literal notranslate"><span class="pre">/usr/local/share/ca-certificates/</span></code> and run <code class="docutils literal notranslate"><span class="pre">/usr/sbin/update-ca-certificates</span></code>. The hook script in <code class="docutils literal notranslate"><span class="pre">/etc/ca-certificates/update.d/</span></code> should automatically generate <code class="docutils literal notranslate"><span class="pre">/etc/ssl/certs/java/cacerts</span></code>.</p>
<p>Fedora/RHEL-based systems may refer to <a class="reference external" href="https://fedoraproject.org/wiki/Features/SharedSystemCertificates">Shared System Certificates in the Fedora Project Wiki</a>.</p>
</div>
<div class="section" id="suddenly-parts-of-graylog-did-not-work-as-expected">
<h4>Suddenly parts of Graylog did not work as expected<a class="headerlink" href="#suddenly-parts-of-graylog-did-not-work-as-expected" title="Permalink to this headline">¶</a></h4>
<p>If you notice multiple different non working parts in Graylog and found something like <code class="docutils literal notranslate"><span class="pre">java.lang.OutOfMemoryError:</span> <span class="pre">unable</span> <span class="pre">to</span> <span class="pre">create</span> <span class="pre">new</span> <span class="pre">native</span> <span class="pre">thread</span></code> in your Graylog Server logfile, you need to raise the process/thread limit of the graylog user. The limit can be checked with <code class="docutils literal notranslate"><span class="pre">ulimit</span> <span class="pre">-u</span></code> and you need to check how you can raise <code class="docutils literal notranslate"><span class="pre">nproc</span></code> in your OS.</p>
</div>
<div class="section" id="i-cannot-go-past-page-66-in-search-results">
<h4>I cannot go past page 66 in search results<a class="headerlink" href="#i-cannot-go-past-page-66-in-search-results" title="Permalink to this headline">¶</a></h4>
<p>Elasticsearch limits the number of messages per search result to 10000 by default. Graylog displays 150 messages per page, which means that the last full page with default settings will be page 66.</p>
<p>You can increase the maximum result window by adjusting the parameter <code class="docutils literal notranslate"><span class="pre">index.max_result_window</span></code> as described in the <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.4/index-modules.html#dynamic-index-settings">Elasticsearch index modules dynamic settings</a>, but be careful as this requires more memory in your Elasticsearch nodes for deep pagination.</p>
<p>This setting can be <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.4/cluster-update-settings.html#cluster-update-settings">dynamically updated</a> in Elasticsearch, so that it does not require a cluster restart to be effective.</p>
</div>
<div class="section" id="my-field-names-contain-dots-and-stream-alerts-do-not-match-anymore">
<h4>My field names contain dots and stream alerts do not match anymore<a class="headerlink" href="#my-field-names-contain-dots-and-stream-alerts-do-not-match-anymore" title="Permalink to this headline">¶</a></h4>
<p>Due to restrictions in certain Elasticsearch versions, Graylog needs to convert field names that contain <code class="docutils literal notranslate"><span class="pre">.</span></code> characters with another character, by default the replacement character is <code class="docutils literal notranslate"><span class="pre">_</span></code>.</p>
<p>This replacement is done just prior to writing messages to Elasticsearch, which causes a mismatch between what stream rules and alert conditions see as field names when they are evaluated.</p>
<p>Stream rules, the conditions that determine whether or not a message is routed to a stream, are being run as data is being processed by Graylog. These see the field names as containing the dots.</p>
<p>However, alert conditions, which are also attached to streams, are converted to searches and run in the background. They operate on stored data in Elasticsearch and thus see the replacement character for the dots.
Thus alert conditions need to use the <code class="docutils literal notranslate"><span class="pre">_</span></code> instead of <code class="docutils literal notranslate"><span class="pre">.</span></code> when referring to fields. There is currently no way to maintain backwards compatibility and transparently fixing this issue, so you need to take action.</p>
<p>The best option, apart from not sending fields with dots, is to remember to write alert conditions using the replacement character, and never use <code class="docutils literal notranslate"><span class="pre">.</span></code> in the field names. In general Graylog will use the version with <code class="docutils literal notranslate"><span class="pre">_</span></code> in searches etc.</p>
<p>For example, if an incoming message contains the field <code class="docutils literal notranslate"><span class="pre">docker.container</span></code> stream rules use that name, whereas alert conditions need to use <code class="docutils literal notranslate"><span class="pre">docker_container</span></code>. You will notice that the search results also use the latter name.</p>
</div>
<div class="section" id="what-does-uncommited-messages-deleted-from-journal-mean">
<h4>What does “Uncommited messages deleted from journal” mean?<a class="headerlink" href="#what-does-uncommited-messages-deleted-from-journal-mean" title="Permalink to this headline">¶</a></h4>
<p>Some messages were deleted from the Graylog journal before they could be written to Elasticsearch. Please
verify that your Elasticsearch cluster is healthy and fast enough. You may also want to review your Graylog
journal settings and set a higher limit.</p>
<p>This can happen when Graylog is not able to connect to Elasticsearch or the Elasticsearch Cluster is not able to process the ingested messages in time. Add more resources to Elasticsearch or adjust <a class="reference internal" href="index.html#output-batch-size"><span class="std std-ref">the output settings</span></a> from Graylog to Elasticsearch.</p>
</div>
<div class="section" id="what-does-journal-utilization-is-too-high-mean">
<h4>What does “Journal utilization is too high” mean?<a class="headerlink" href="#what-does-journal-utilization-is-too-high-mean" title="Permalink to this headline">¶</a></h4>
<p>Journal utilization is too high and may go over the limit soon. Please verify that your Elasticsearch cluster
is healthy and fast enough. You may also want to review your Graylog journal settings and set a higher limit.</p>
<p>This can happen when Graylog is not able to connect to Elasticsearch or the Elasticsearch Cluster is not able to process the ingested messages in time. Add more resources to Elasticsearch or adjust <a class="reference internal" href="index.html#output-batch-size"><span class="std std-ref">the output settings</span></a> from Graylog to Elasticsearch.</p>
</div>
<div class="section" id="how-do-i-fix-the-deflector-exists-as-an-index-and-is-not-an-alias-error-message">
<h4>How do I fix the “Deflector exists as an index and is not an alias” error message?<a class="headerlink" href="#how-do-i-fix-the-deflector-exists-as-an-index-and-is-not-an-alias-error-message" title="Permalink to this headline">¶</a></h4>
<p>Graylog is using an Elasticsearch index alias per index set pointing to the active write index, the so-called “deflector”, to write messages into Elasticsearch such as <code class="docutils literal notranslate"><span class="pre">graylog_deflector</span></code> in the default index set.</p>
<p>Please refer to <a class="reference internal" href="index.html#index-model"><span class="std std-ref">Index model</span></a> for a more in-depth explanation of the Elasticsearch index model used by Graylog.</p>
<p>In some rare situations, there might be an Elasticsearch index with a name which has been reserved for the deflector of an index set managed by Graylog, so that Graylog is unable to create the proper Elasticsearch index alias.</p>
<p>This error situation leads to the following system notification in Graylog:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">Deflector</span> <span class="n">exists</span> <span class="k">as</span> <span class="n">an</span> <span class="n">index</span> <span class="ow">and</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">an</span> <span class="n">alias</span><span class="o">.</span>
<span class="o">&gt;</span> <span class="n">The</span> <span class="n">deflector</span> <span class="ow">is</span> <span class="n">meant</span> <span class="n">to</span> <span class="n">be</span> <span class="n">an</span> <span class="n">alias</span> <span class="n">but</span> <span class="n">exists</span> <span class="k">as</span> <span class="n">an</span> <span class="n">index</span><span class="o">.</span> <span class="n">Multiple</span> <span class="n">failures</span> <span class="n">of</span> <span class="n">infrastructure</span> <span class="n">can</span> <span class="n">lead</span> <span class="n">to</span> <span class="n">this</span><span class="o">.</span> <span class="n">Your</span> <span class="n">messages</span> <span class="n">are</span> <span class="n">still</span> <span class="n">indexed</span> <span class="n">but</span> <span class="n">searches</span> <span class="ow">and</span> <span class="nb">all</span> <span class="n">maintenance</span> <span class="n">tasks</span> <span class="n">will</span> <span class="n">fail</span> <span class="ow">or</span> <span class="n">produce</span> <span class="n">incorrect</span> <span class="n">results</span><span class="o">.</span> <span class="n">It</span> <span class="ow">is</span> <span class="n">strongly</span> <span class="n">recommend</span> <span class="n">that</span> <span class="n">you</span> <span class="n">act</span> <span class="k">as</span> <span class="n">soon</span> <span class="k">as</span> <span class="n">possible</span><span class="o">.</span>
</pre></div>
</div>
<p>The logs of the Graylog <em>master</em> node will contain a warning message similar to the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WARN</span>  <span class="p">[</span><span class="n">IndexRotationThread</span><span class="p">]</span> <span class="n">There</span> <span class="ow">is</span> <span class="n">an</span> <span class="n">index</span> <span class="n">called</span> <span class="p">[</span><span class="n">graylog_deflector</span><span class="p">]</span><span class="o">.</span> <span class="n">Cannot</span> <span class="n">fix</span> <span class="n">this</span> <span class="n">automatically</span> <span class="ow">and</span> <span class="n">published</span> <span class="n">a</span> <span class="n">notification</span><span class="o">.</span>
</pre></div>
</div>
<ol class="arabic simple">
<li>Stop all Graylog nodes</li>
<li>(<em>OPTIONAL</em>) If you want to keep the already ingested messages, reindex them into the Elasticsearch index with the greatest number, e. g. <code class="docutils literal notranslate"><span class="pre">graylog_23</span></code> if you want to fix the deflector <code class="docutils literal notranslate"><span class="pre">graylog_deflector</span></code>, via the <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.6/docs-reindex.html">Elasticsearch Reindex API</a>.</li>
<li>Delete the <code class="docutils literal notranslate"><span class="pre">graylog_deflector</span></code> index via the <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.6/indices-delete-index.html">Elasticsearch Delete Index API</a>.</li>
<li>Add <code class="docutils literal notranslate"><span class="pre">action.auto_create_index:</span> <span class="pre">false</span></code> to the configuration files of all Elasticsearch nodes in your cluster and restart these Elasticsearch nodes, see <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.6/docs-index_.html#index-creation">Elasticsearch Index API - Automatic Index Creation</a> and <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/guide/2.x/_creating_an_index.html">Creating an Index</a> for details.</li>
<li>Start the Graylog <em>master</em> node.</li>
<li>Manually rotate the active write index of the index set on the <em>System</em> / <em>Indices</em> / <em>Index Set</em> page in the <em>Maintenance</em> dropdown menu.</li>
<li>(<em>OPTIONAL</em>) Start all remaining Graylog <em>slave</em> nodes.</li>
</ol>
</div>
<div class="section" id="how-do-i-enable-debug-logging-for-a-specific-plugin-or-area-of-graylog">
<h4>How do I enable debug logging for a specific plugin or area of Graylog?<a class="headerlink" href="#how-do-i-enable-debug-logging-for-a-specific-plugin-or-area-of-graylog" title="Permalink to this headline">¶</a></h4>
<p>When troubleshooting an issue in Graylog, it might be useful to enable <code class="docutils literal notranslate"><span class="pre">debug</span></code> or <code class="docutils literal notranslate"><span class="pre">trace</span></code> logging for the entire Graylog
subsystem in (<em>System &gt; Logging</em>). However, you may find that this generates too much log output (possibly making it
difficult to review log messages for a particular area of concern).</p>
<p>Graylog supports the ability to enable <code class="docutils literal notranslate"><span class="pre">debug</span></code> or <code class="docutils literal notranslate"><span class="pre">trace</span></code> logging for specific application areas or plugins. To do this,
execute the following terminal command against a particular Graylog node.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">I</span> <span class="o">-</span><span class="n">X</span> <span class="n">PUT</span> <span class="n">http</span><span class="p">:</span><span class="o">//&lt;</span><span class="n">graylog</span><span class="o">-</span><span class="n">username</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">graylog</span><span class="o">-</span><span class="n">password</span><span class="o">&gt;@&lt;</span><span class="n">graylog</span><span class="o">-</span><span class="n">node</span><span class="o">-</span><span class="n">ip</span><span class="o">&gt;</span><span class="p">:</span><span class="mi">9000</span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">loggers</span><span class="o">/&lt;</span><span class="n">application</span><span class="o">-</span><span class="n">package</span><span class="o">&gt;/</span><span class="n">level</span><span class="o">/</span><span class="n">debug</span> \
<span class="o">-</span><span class="n">H</span> <span class="s1">&#39;X-Requested-By: graylog-api-user&#39;</span> \
<span class="o">-</span><span class="n">X</span> <span class="n">PUT</span> \
<span class="o">-</span><span class="n">I</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">application-package</span></code> is the Java package for the area of concern (eg. <code class="docutils literal notranslate"><span class="pre">org.graylog.aws</span></code>  for the AWS plugin or <code class="docutils literal notranslate"><span class="pre">org.graylog2.lookup</span></code> for Lookup Tables). You might need to look at the Graylog source code to identify the desired application-package.</p>
</div>
</div>
<div class="section" id="have-another-troubleshooting-question">
<h4>Have another troubleshooting question?<a class="headerlink" href="#have-another-troubleshooting-question" title="Permalink to this headline">¶</a></h4>
<p>See below for some additional support options where you can ask your question.</p>
</div>
</div>
<div class="section" id="support">
<h3>Support<a class="headerlink" href="#support" title="Permalink to this headline">¶</a></h3>
<div class="section" id="i-think-ive-found-a-bug-how-do-i-report-it">
<h4>I think I’ve found a bug, how do I report it?<a class="headerlink" href="#i-think-ive-found-a-bug-how-do-i-report-it" title="Permalink to this headline">¶</a></h4>
<p>Think you spotted a bug? Oh no! Please report it in our issue trackers so we can take a look at it.  All issue trackers are hosted on <a class="reference external" href="https://github.com/Graylog2">GitHub</a>, tightly coupled to our code and milestones. Don’t hesitate to open issues – we’ll just close them if there is nothing to do. Most issues will be in the <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues">Graylog server</a> repository, but you should choose others if you have found a bug in one of the plugins.</p>
</div>
<div class="section" id="im-having-issues-installing-or-configuring-graylog-where-can-i-go-for-support">
<h4>I’m having issues installing or configuring Graylog, where can I go for support?<a class="headerlink" href="#im-having-issues-installing-or-configuring-graylog-where-can-i-go-for-support" title="Permalink to this headline">¶</a></h4>
<p>Check out the <a class="reference external" href="https://community.graylog.org">Graylog Community Forums</a> – you can search for your problem which may already have an answer, or post a new question.</p>
<p>Another source is the <a class="reference external" href="https://riot.im/app/#/room/%23graylog:matrix.org">Graylog channel on Matrix.org</a> or the <a class="reference external" href="https://webchat.freenode.net/?channels=%23graylog">#graylog IRC chat channel on freenode</a> (both are bridged, so you’ll see messages from either channels).  Our developers and a lot of community members hang out here. Just join the channel and add any questions, suggestions or general topics you have.</p>
<p>If you’re looking for professional commercial support from the Graylog team, we do that too.  Please <a class="reference external" href="https://www.graylog.org/professional-support">get in touch here</a> for more details.</p>
</div>
</div>
</div>
<span id="document-pages/gelf"></span><div class="section" id="gelf">
<span id="id1"></span><h2>GELF<a class="headerlink" href="#gelf" title="Permalink to this headline">¶</a></h2>
<div class="section" id="structured-events-from-anywhere-compressed-and-chunked">
<h3>Structured events from anywhere. Compressed and chunked.<a class="headerlink" href="#structured-events-from-anywhere-compressed-and-chunked" title="Permalink to this headline">¶</a></h3>
<p>The Graylog Extended Log Format (GELF) is a log format that avoids the shortcomings of classic plain syslog:</p>
<blockquote>
<div><ul class="simple">
<li>Limited to length of 1024 bytes – Not much space for payloads like backtraces</li>
<li>No data types in structured syslog. You don’t know what is a number and what is a string.</li>
<li>The RFCs are strict enough but there are so many syslog dialects out there that you cannot possibly parse all of them.</li>
<li>No compression</li>
</ul>
</div></blockquote>
<p>Syslog is okay for logging system messages of your machines or network gear. GELF is a great choice for logging from within applications.
There are libraries and appenders for many programming languages and logging frameworks so it is easy to implement. You could use GELF to
send every exception as a log message to your Graylog cluster. You don’t have to care about timeouts, connection problems or anything
that might break your application from within your logging class because GELF can be sent via UDP.</p>
</div>
<div class="section" id="gelf-via-udp">
<h3>GELF via UDP<a class="headerlink" href="#gelf-via-udp" title="Permalink to this headline">¶</a></h3>
<div class="section" id="chunking">
<h4>Chunking<a class="headerlink" href="#chunking" title="Permalink to this headline">¶</a></h4>
<p>UDP datagrams are usually limited to a size of 8192 bytes. A lot of compressed information fits in there but you sometimes might just have
more information to send. This is why Graylog supports chunked GELF.</p>
<p>You can define chunks of messages by prepending a byte header to a GELF message including a message ID and sequence number to reassemble the message later.</p>
<p>Most GELF libraries support chunking transparently and will detect if a message is too big to be sent in one datagram.</p>
<p>Of course TCP would solve this problem on a transport layer but it brings other problems that are even harder to tackle:
You would have to care about slow connections, timeouts and other nasty network problems.</p>
<p>With UDP you may just lose a message while with TCP it could bring your whole application down when not designed with care.</p>
<p>Of course TCP makes sense in some (especially high volume environments) so it is your decision. Many GELF libraries support both TCP and UDP as transport. Some
do even support HTTP.</p>
<p>Prepend the following structure to your GELF message to make it chunked:</p>
<blockquote>
<div><ul class="simple">
<li><strong>Chunked GELF magic bytes - 2 bytes:</strong> <code class="docutils literal notranslate"><span class="pre">0x1e</span> <span class="pre">0x0f</span></code></li>
<li><strong>Message ID - 8 bytes:</strong> Must be the same for every chunk of this message. Identifying the whole message and is used to reassemble the chunks later. Generate from millisecond timestamp + hostname for example.</li>
<li><strong>Sequence number - 1 byte:</strong> The sequence number of this chunk. Starting at 0 and always less than the sequence count.</li>
<li><strong>Sequence count - 1 byte:</strong> Total number of chunks this message has.</li>
</ul>
</div></blockquote>
<p>All chunks <strong>MUST</strong> arrive within 5 seconds or the server will discard all already arrived and still arriving chunks. A message <strong>MUST NOT</strong> consist of more than 128 chunks.</p>
</div>
<div class="section" id="compression">
<h4>Compression<a class="headerlink" href="#compression" title="Permalink to this headline">¶</a></h4>
<p>When using UDP as transport layer, GELF messages can be sent uncompressed or compressed with either GZIP or ZLIB.</p>
<p>Graylog nodes detect the compression type in the GELF magic byte header automatically.</p>
<p>Decide if you want to trade a bit more CPU load for saving a lot of network bandwidth. GZIP is the protocol default.</p>
</div>
</div>
<div class="section" id="gelf-via-tcp">
<h3>GELF via TCP<a class="headerlink" href="#gelf-via-tcp" title="Permalink to this headline">¶</a></h3>
<p>At the current time, GELF TCP only supports uncompressed and non-chunked payloads. Each message needs to be delimited with a null byte (<code class="docutils literal notranslate"><span class="pre">\0</span></code>) when sent in the same TCP connection.</p>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">GELF TCP <strong>does not support</strong> compression due to the use of the null byte (<code class="docutils literal notranslate"><span class="pre">\0</span></code>) as frame delimiter.</p>
</div>
</div>
<div class="section" id="gelf-payload-specification">
<h3>GELF Payload Specification<a class="headerlink" href="#gelf-payload-specification" title="Permalink to this headline">¶</a></h3>
<p>Version 1.1 (11/2013)</p>
<p>A GELF message is a JSON string with the following fields:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt><strong>version</strong> <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">(UTF-8)</span></code></dt>
<dd><ul class="first last">
<li>GELF spec version – “1.1”; <strong>MUST</strong> be set by client library.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>host</strong> <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">(UTF-8)</span></code></dt>
<dd><ul class="first last">
<li>the name of the host, source or application that sent this message; <strong>MUST</strong> be set by client library.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>short_message</strong> <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">(UTF-8)</span></code></dt>
<dd><ul class="first last">
<li>a short descriptive message; <strong>MUST</strong> be set by client library.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>full_message</strong> <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">(UTF-8)</span></code></dt>
<dd><ul class="first last">
<li>a long message that can i.e. contain a backtrace; optional.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>timestamp</strong> <code class="docutils literal notranslate"><span class="pre">number</span></code></dt>
<dd><ul class="first last">
<li>Seconds since UNIX epoch with optional decimal places for milliseconds; <em>SHOULD</em> be set by client library. Will be set to the current timestamp (now) by the server if absent.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>level</strong> <code class="docutils literal notranslate"><span class="pre">number</span></code></dt>
<dd><ul class="first last">
<li>the level equal to the standard syslog levels; optional, default is 1 (ALERT).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>facility</strong> <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">(UTF-8)</span></code></dt>
<dd><ul class="first last">
<li>optional, deprecated. Send as additional field instead.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>line</strong> <code class="docutils literal notranslate"><span class="pre">number</span></code></dt>
<dd><ul class="first last">
<li>the line in a file that caused the error (decimal); optional, deprecated. Send as additional field instead.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>file</strong> <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">(UTF-8)</span></code></dt>
<dd><ul class="first last">
<li>the file (with path if you want) that caused the error (string); optional, deprecated. Send as additional field instead.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>_[additional field]</strong> <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">(UTF-8)</span></code> or <code class="docutils literal notranslate"><span class="pre">number</span></code></dt>
<dd><ul class="first last">
<li>every field you send and prefix with an underscore (<code class="docutils literal notranslate"><span class="pre">_</span></code>) will be treated as an additional field. Allowed characters in field names are any word character (letter, number, underscore), dashes and dots. The verifying regular expression is: <code class="docutils literal notranslate"><span class="pre">^[\w\.\-]*$</span></code>. Libraries SHOULD not allow to send id as additional field (<code class="docutils literal notranslate"><span class="pre">_id</span></code>). Graylog server nodes omit this field automatically.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="example-payload">
<h3>Example payload<a class="headerlink" href="#example-payload" title="Permalink to this headline">¶</a></h3>
<p>This is an example GELF message payload. Any graylog-server node accepts and stores this as a message when GZIP/ZLIB compressed or even when sent
uncompressed over a plain socket (without newlines).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Newlines must be denoted with the <code class="docutils literal notranslate"><span class="pre">\n</span></code> escape sequence to ensure the payload is valid JSON as per <a class="reference external" href="https://tools.ietf.org/html/rfc7159#page-8">RFC 7159</a>.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;example.org&quot;</span><span class="p">,</span>
  <span class="s2">&quot;short_message&quot;</span><span class="p">:</span> <span class="s2">&quot;A short message that helps you identify what is going on&quot;</span><span class="p">,</span>
  <span class="s2">&quot;full_message&quot;</span><span class="p">:</span> <span class="s2">&quot;Backtrace here</span><span class="se">\n\n</span><span class="s2">more stuff&quot;</span><span class="p">,</span>
  <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="mf">1385053862.3072</span><span class="p">,</span>
  <span class="s2">&quot;level&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s2">&quot;_user_id&quot;</span><span class="p">:</span> <span class="mi">9001</span><span class="p">,</span>
  <span class="s2">&quot;_some_info&quot;</span><span class="p">:</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span>
  <span class="s2">&quot;_some_env_var&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="sending-gelf-messages-via-udp-using-netcat">
<h4>Sending GELF messages via UDP using netcat<a class="headerlink" href="#sending-gelf-messages-via-udp-using-netcat" title="Permalink to this headline">¶</a></h4>
<p>Sending an example message to a GELF UDP input (running on host <code class="docutils literal notranslate"><span class="pre">graylog.example.com</span></code> on port 12201):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="o">-</span><span class="n">n</span> <span class="s1">&#39;{ &quot;version&quot;: &quot;1.1&quot;, &quot;host&quot;: &quot;example.org&quot;, &quot;short_message&quot;: &quot;A short message&quot;, &quot;level&quot;: 5, &quot;_some_info&quot;: &quot;foo&quot; }&#39;</span> <span class="o">|</span> <span class="n">nc</span> <span class="o">-</span><span class="n">w0</span> <span class="o">-</span><span class="n">u</span> <span class="n">graylog</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="mi">12201</span>
</pre></div>
</div>
</div>
<div class="section" id="sending-gelf-messages-via-tcp-using-netcat">
<h4>Sending GELF messages via TCP using netcat<a class="headerlink" href="#sending-gelf-messages-via-tcp-using-netcat" title="Permalink to this headline">¶</a></h4>
<p>Sending an example message to a GELF TCP input (running on host <code class="docutils literal notranslate"><span class="pre">graylog.example.com</span></code> on port 12201):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="o">-</span><span class="n">n</span> <span class="o">-</span><span class="n">e</span> <span class="s1">&#39;{ &quot;version&quot;: &quot;1.1&quot;, &quot;host&quot;: &quot;example.org&quot;, &quot;short_message&quot;: &quot;A short message&quot;, &quot;level&quot;: 5, &quot;_some_info&quot;: &quot;foo&quot; }&#39;</span><span class="s2">&quot;</span><span class="se">\0</span><span class="s2">&quot;</span> <span class="o">|</span> <span class="n">nc</span> <span class="o">-</span><span class="n">w0</span> <span class="n">graylog</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="mi">12201</span>
</pre></div>
</div>
</div>
<div class="section" id="sending-gelf-messages-via-http-using-curl">
<h4>Sending GELF messages via HTTP using curl<a class="headerlink" href="#sending-gelf-messages-via-http-using-curl" title="Permalink to this headline">¶</a></h4>
<p>Sending an example message to a GELF HTTP input (running on <code class="docutils literal notranslate"><span class="pre">http://graylog.example.com:12201/gelf</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">-</span><span class="n">H</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{ &quot;version&quot;: &quot;1.1&quot;, &quot;host&quot;: &quot;example.org&quot;, &quot;short_message&quot;: &quot;A short message&quot;, &quot;level&quot;: 5, &quot;_some_info&quot;: &quot;foo&quot; }&#39;</span> <span class="s1">&#39;http://graylog.example.com:12201/gelf&#39;</span>
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-pages/ideas_explained"></span><div class="section" id="the-thinking-behind-the-graylog-architecture-and-why-it-matters-to-you">
<h2>The thinking behind the Graylog architecture and why it matters to you<a class="headerlink" href="#the-thinking-behind-the-graylog-architecture-and-why-it-matters-to-you" title="Permalink to this headline">¶</a></h2>
<div class="section" id="a-short-history-of-graylog">
<h3>A short history of Graylog<a class="headerlink" href="#a-short-history-of-graylog" title="Permalink to this headline">¶</a></h3>
<p>The Graylog project was started by Lennart Koopmann some time around 2009. Back then the most prominent log management software
vendor issued a quote for a one year license of their product that was so expensive that he decided to write a log management system
himself. Now you might call this a bit over optimistic (<em>I’ll build this in two weeks</em>, end of quote) but the situation was
hopeless: there was basically no other product on the market and especially no open source alternatives.</p>
</div>
<div class="section" id="the-log-management-market-today">
<h3>The log management market today<a class="headerlink" href="#the-log-management-market-today" title="Permalink to this headline">¶</a></h3>
<p>Things have changed a bit since 2009. Now there are viable open source projects with serious products and a growing list of
SaaS offerings for log management.</p>
<div class="section" id="architectural-considerations">
<h4>Architectural considerations<a class="headerlink" href="#architectural-considerations" title="Permalink to this headline">¶</a></h4>
<p>Graylog has been successful in providing log management software <strong>because it was built for log management from the beginning</strong>.
Software that stores and analyzes log data must have a very specific
architecture to do it efficiently. It is more than just a database or a full text search engine because it has to deal with both
text data and metrics data on a time axis. Searches are always bound to a time frame (relative or absolute) and only going back
into the past because future log data has not been written yet. <strong>A general purpose database or full text search engine that could
also store and index the private messages of your online platform for search will never be able to effectively manage your log data.</strong>
Adding a specialized frontend on top of it makes it look like it could do the job in a good way but is basically just putting lipstick
on the wrong stack.</p>
<p>A log management system has to be constructed of several services that take care of processing, indexing, and data access. The most
important reason is that you need to scale parts of it horizontally with your changing use cases and usually the different parts
of the system have different hardware requirements. All services must be tightly integrated to allow efficient management and configuration
of the system as a whole. A data ingestion or forwarder tool is hard to tedious to manage if the configuration <strong>has</strong> to be stored
on the client machines and is not possible via for example REST APIs controlled by a simple interface. A system administrator needs to
be able to log into the web interface of a log management product and select log files of a remote host (that has a forwarder running)
for ingestion into the tool.</p>
<p>You also want to be able to see the health and configuration of all forwarders, data processors and indexers in a central place because
the whole log management stack can easily involve thousands of machines if you include the log emitting clients into this calculation.
You need to be able to see which clients are forwarding log data and which are not to make sure that you are not missing any important
data.</p>
<p><strong>Graylog is coming the closest to the Splunk architecture:</strong></p>
<ul class="simple">
<li><strong>Graylog was solely built as a log management system from the first line of code.</strong> This makes it very efficient
and easy to use.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">graylog-server</span></code> component sits in the middle and works around shortcomings of Elasticsearch (a full text search engine, not a
log management system) for log management. It also builds an abstraction layer on top of it to make data access as easy as possible
without having to select indices and write tedious time range selection filters, etc. - Just submit the search query and Graylog
will take care of the rest for you.</li>
<li>All parts of the system are tightly integrated and many parts speak to each other to make your job easier.</li>
<li>Like WordPress makes MySQL a good solution for blogging, Graylog makes Elasticsearch a good solution for logging. You should never
have a system or frontend query Elasticsearch directly for log management so we are putting <code class="docutils literal notranslate"><span class="pre">graylog-server</span></code> in front of it.</li>
</ul>
<img alt="_images/architecture_comparison.png" src="http://res.fansdoc.com/graylog/_images/architecture_comparison.png" />
</div>
<div class="section" id="blackboxes">
<h4>Blackboxes<a class="headerlink" href="#blackboxes" title="Permalink to this headline">¶</a></h4>
<p>Closed source systems tend to become black boxes that you cannot extend or adapt to fit the needs of your use case. This is an important
thing to consider especially for log management software. The use cases can range from simple syslog centralization to ultra flexible
data bus requirements. A closed source system will always make you depending on the vendor because there is no way to adapt. As your
setup reaches a certain point of flexibility you might hit a wall earlier than expected.</p>
<p>Consider spending a part of the money you would spend for the wrong license model for developing your own plugins or integrations.</p>
</div>
</div>
<div class="section" id="the-future">
<h3>The future<a class="headerlink" href="#the-future" title="Permalink to this headline">¶</a></h3>
<p>Graylog is the only open source log management system that will be able to deliver functionality and scaling in a way that Splunk
does. It will be possible to replace Elasticsearch with something that is really suited for log data analysis without even changing
the public facing APIs.</p>
</div>
</div>
<span id="document-pages/changelog"></span><div class="section" id="changelog">
<h2>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h2>
<div class="section" id="graylog-3-0-2">
<h3>Graylog 3.0.2<a class="headerlink" href="#graylog-3-0-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2019-05-03</p>
<p><strong>Integrations Plugin</strong></p>
<ul class="simple">
<li>Fix issue handling quoted values in PaloAlto input <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-integrations/issues/15">Graylog2/graylog-plugin-integrations#15</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-integrations/issues/16">Graylog2/graylog-plugin-integrations#16</a></li>
</ul>
</div>
<div class="section" id="graylog-3-0-1">
<h3>Graylog 3.0.1<a class="headerlink" href="#graylog-3-0-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2019-04-01</p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Fix dashboard position migration. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5737">Graylog2/graylog2-server#5737</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5763">Graylog2/graylog2-server#5763</a></li>
<li>Fix HTTP 100 handling in http inputs. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5690">Graylog2/graylog2-server#5690</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5725">Graylog2/graylog2-server#5725</a></li>
<li>Fix http input keep-alive handling. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5720">Graylog2/graylog2-server#5720</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5728">Graylog2/graylog2-server#5728</a></li>
<li>Fix running Graylog web interface under a path prefix. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5702">Graylog2/graylog2-server#5702</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5703">Graylog2/graylog2-server#5703</a></li>
<li>Fix issue with wildcards in the search query parser when running with newer Elasticsearch versions. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5719">Graylog2/graylog2-server#5719</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5766">Graylog2/graylog2-server#5766</a></li>
<li>Fix Grok patterns that use “OR” to not return “null” values. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4773">Graylog2/graylog2-server#4773</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5749">Graylog2/graylog2-server#5749</a></li>
<li>Fix NetFlow parsing for Cisco ASA devices. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5715">Graylog2/graylog2-server#5715</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5729">Graylog2/graylog2-server#5729</a></li>
<li>Fix Grok patterns to support underscores in match group names again. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5704">Graylog2/graylog2-server#5704</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5563">Graylog2/graylog2-server#5563</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5800">Graylog2/graylog2-server#5800</a></li>
<li>Document password escaping issue for the MongoDB connection URL. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5680">Graylog2/graylog2-server#5680</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5764">Graylog2/graylog2-server#5764</a></li>
</ul>
<p><strong>Integrations Plugin</strong></p>
<ul class="simple">
<li>Fix input parsing problem in PaloAlto input. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-integrations/issues/10">Graylog2/graylog-plugin-integrations#10</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-integrations/issues/11">Graylog2/graylog-plugin-integrations#11</a></li>
</ul>
<p><strong>Threatintel Plugin</strong></p>
<ul class="simple">
<li>Fix problem with content pack migration. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-threatintel/issues/123">Graylog2/graylog-plugin-threatintel#123</a></li>
</ul>
</div>
<div class="section" id="graylog-3-0-0">
<h3>Graylog 3.0.0<a class="headerlink" href="#graylog-3-0-0" title="Permalink to this headline">¶</a></h3>
<p>Released: 2019-02-14</p>
<ul class="simple">
<li>Announcement blog post: <a class="reference external" href="https://www.graylog.org/post/announcing-graylog-v3-0-ga">https://www.graylog.org/post/announcing-graylog-v3-0-ga</a></li>
<li>Upgrade notes: <a class="reference internal" href="index.html#document-pages/upgrade/graylog-3.0"><span class="doc">Upgrading to Graylog 3.0.x</span></a></li>
</ul>
<p>A detailed changelog is following soon!</p>
</div>
<div class="section" id="graylog-2-5-2">
<h3>Graylog 2.5.2<a class="headerlink" href="#graylog-2-5-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2019-03-15</p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Mask password fields of inputs returned by the REST API.  <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5432">Graylog2/graylog2-server#5432</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5733">Graylog2/graylog2-server#5733</a></li>
</ul>
<p><strong>Integrations Plugin</strong></p>
<ul class="simple">
<li>Fix input parsing problem in PaloAlto input. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-integrations/issues/10">Graylog2/graylog-plugin-integrations#10</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-integrations/issues/11">Graylog2/graylog-plugin-integrations#11</a></li>
</ul>
</div>
<div class="section" id="graylog-2-5-1">
<h3>Graylog 2.5.1<a class="headerlink" href="#graylog-2-5-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2018-12-19</p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Improve description of <code class="docutils literal notranslate"><span class="pre">web_endpoint_uri</span></code> in <code class="docutils literal notranslate"><span class="pre">graylog.conf</span></code>. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5359">Graylog2/graylog2-server#5359</a></li>
<li>Add CSRF backward compatibility for older Sidecars. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5388">Graylog2/graylog2-server#5388</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4987">Graylog2/graylog2-server#4987</a></li>
</ul>
<p><strong>AWS Plugin</strong></p>
<ul class="simple">
<li>Remove low limit for GZIP decompression of AWS events. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-aws/issues/98">Graylog2/graylog-plugin-aws#98</a></li>
</ul>
<p><strong>Pipeline Processor Plugin</strong></p>
<ul class="simple">
<li>Fix IPv6 handling in IPv4 <code class="docutils literal notranslate"><span class="pre">cidr_match</span></code> pipeline function. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/254">Graylog2/graylog-plugin-pipeline-processor#254</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5405">Graylog2/graylog2-server#5405</a></li>
</ul>
</div>
<div class="section" id="graylog-2-5-0">
<h3>Graylog 2.5.0<a class="headerlink" href="#graylog-2-5-0" title="Permalink to this headline">¶</a></h3>
<p>Released: 2018-11-30</p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Improve CSRF protection by requiring a custom HTTP header for non-GET requests sent to the API. (<a class="reference external" href="https://github.com/Graylog2/collector-sidecar/releases/tag/0.1.7)">requires sidecar 0.1.7</a>) <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4998">Graylog2/graylog2-server#4998</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5012">Graylog2/graylog2-server#5012</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5182">Graylog2/graylog2-server#5182</a></li>
<li>Improve alert conditions by making the query string configurable. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5277">Graylog2/graylog2-server#5277</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3966">Graylog2/graylog2-server#3966</a></li>
<li>Improve alert overview for streams. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5311">Graylog2/graylog2-server#5311</a></li>
<li>Add test button for alert conditions. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5322">Graylog2/graylog2-server#5322</a></li>
<li>Add DNS lookup adapter that supports foward and reverse lookups. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5274">Graylog2/graylog2-server#5274</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4200">Graylog2/graylog2-server#4200</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5124">Graylog2/graylog2-server#5124</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-threatintel/issues/64">Graylog2/graylog-plugin-threatintel#64</a></li>
<li>Add support for Elasticsearch 6.x. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5020">Graylog2/graylog2-server#5020</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5064">Graylog2/graylog2-server#5064</a></li>
<li>Update time zone database for the web interface. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5260">Graylog2/graylog2-server#5260</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5245">Graylog2/graylog2-server#5245</a></li>
<li>Fix description and default values for the DSV HTTP lookup table adapter. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4973">Graylog2/graylog2-server#4973</a> <a class="reference external" href="https://github.com/zionio">&#64;zionio</a></li>
<li>Fix slow and unreliable CSV export by using a bigger default batch size. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5172">Graylog2/graylog2-server#5172</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5304">Graylog2/graylog2-server#5304</a></li>
<li>Fix index stats in index set overview. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5306">Graylog2/graylog2-server#5306</a></li>
<li>Fix security issue with the users API where regular users could retrieve details of other users. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5308">Graylog2/graylog2-server#5308</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5068">Graylog2/graylog2-server#5068</a> <a class="reference external" href="https://github.com/radykal-com">&#64;radykal-com</a></li>
<li>Fix backslash escaping for phrase searches. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5314">Graylog2/graylog2-server#5314</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4111">Graylog2/graylog2-server#4111</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5266">Graylog2/graylog2-server#5266</a></li>
</ul>
<p><strong>Integrations Plugin</strong></p>
<ul class="simple">
<li>Add Palo Alto input</li>
</ul>
<p><strong>AWS Plugin</strong></p>
<ul class="simple">
<li>Add throttling support to the AWS Flow Logs input. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-aws/issues/94">Graylog2/graylog-plugin-aws#94</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-aws/issues/85">Graylog2/graylog-plugin-aws#85</a></li>
<li>Improve logging for the CloudTrail input. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-aws/issues/95">Graylog2/graylog-plugin-aws#95</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-aws/issues/80">Graylog2/graylog-plugin-aws#80</a></li>
</ul>
<p><strong>Pipeline Processor Plugin</strong></p>
<ul class="simple">
<li>Fix key-value function to be more robust with splitting values. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/249">Graylog2/graylog-plugin-pipeline-processor#249</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4920">Graylog2/graylog2-server#4920</a> <a class="reference external" href="https://github.com/radykal-com">&#64;radykal-com</a></li>
<li>Add support for decimal IPv4 representation in the <code class="docutils literal notranslate"><span class="pre">to_ip</span></code> function. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/253">Graylog2/graylog-plugin-pipeline-processor#253</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5268">Graylog2/graylog2-server#5268</a></li>
</ul>
</div>
<div class="section" id="graylog-2-4-7">
<h3>Graylog 2.4.7<a class="headerlink" href="#graylog-2-4-7" title="Permalink to this headline">¶</a></h3>
<p>Released: 2019-03-01</p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Mask password fields of inputs returned by the REST API. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5408">Graylog2/graylog2-server#5408</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/5734">Graylog2/graylog2-server#5734</a></li>
</ul>
</div>
<div class="section" id="graylog-2-4-6">
<h3>Graylog 2.4.6<a class="headerlink" href="#graylog-2-4-6" title="Permalink to this headline">¶</a></h3>
<p>Released: 2018-07-16</p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Unbreak input throttling by publishing throttle state again. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4850">Graylog2/graylog2-server#4850</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4321">Graylog2/graylog2-server#4321</a></li>
<li>Check for permission before terminating input. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4867">Graylog2/graylog2-server#4867</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4858">Graylog2/graylog2-server#4858</a></li>
<li>Require user to be authenticated to retrieve plugin list. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4868">Graylog2/graylog2-server#4868</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4863">Graylog2/graylog2-server#4863</a></li>
<li>Add missing permission checks. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4873">Graylog2/graylog2-server#4873</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4861">Graylog2/graylog2-server#4861</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4859">Graylog2/graylog2-server#4859</a></li>
<li>UI fixes for index rotation strategy dropdown. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4826">Graylog2/graylog2-server#4826</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4769">Graylog2/graylog2-server#4769</a></li>
<li>XSS fix for typeahead components. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4904">Graylog2/graylog2-server#4904</a></li>
<li>Fix potential NullPointerException in csv and maxmind data adapters. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4912">Graylog2/graylog2-server#4912</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4748">Graylog2/graylog2-server#4748</a></li>
<li>Add “http_non_proxy_hosts” configuration option. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4915">Graylog2/graylog2-server#4915</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4905">Graylog2/graylog2-server#4905</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4392">Graylog2/graylog2-server#4392</a></li>
</ul>
</div>
<div class="section" id="graylog-2-4-5">
<h3>Graylog 2.4.5<a class="headerlink" href="#graylog-2-4-5" title="Permalink to this headline">¶</a></h3>
<p>Released: 2018-05-28</p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Improve HTTP proxy authentication to support more proxy server software. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4788">Graylog2/graylog2-server#4788</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4790">Graylog2/graylog2-server#4790</a></li>
<li>Fix an issue where the Elasticsearch URL credentials have been written to the Graylog log file. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4804">Graylog2/graylog2-server#4804</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4806">Graylog2/graylog2-server#4806</a></li>
<li>Fix issue with deleting dashboard widgets. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4525">Graylog2/graylog2-server#4525</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4808">Graylog2/graylog2-server#4808</a></li>
</ul>
</div>
<div class="section" id="graylog-2-4-4">
<h3>Graylog 2.4.4<a class="headerlink" href="#graylog-2-4-4" title="Permalink to this headline">¶</a></h3>
<p>Released: 2018-05-02</p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Fix issues with loading example message for extractor. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4553">Graylog2/graylog2-server#4553</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/4559">Graylog2/graylog2-server#4559</a></li>
<li>Allow <code class="docutils literal notranslate"><span class="pre">:</span></code> character in password. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/4557">Graylog2/graylog2-server/#4557</a></li>
<li>Fix lookup table cache entry count metric. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/4558">Graylog2/graylog2-server#4558</a></li>
<li>Simplify plugin development for lookup table plugins. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/4586">Graylog2/graylog2-server#4586</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/4587">Graylog2/graylog2-server#4587</a></li>
<li>Fix security issue with unescaped text in notification and dashboard names. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/4727">Graylog2/graylog2-server#4727</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/4739">Graylog2/graylog2-server#4739</a></li>
<li>Improve high-availability behavior with missing Elasticsearch nodes. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4738">Graylog2/graylog2-server#4738</a></li>
<li>Fix issue with updating saved searches. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/2285">Graylog2/graylog2-server#2285</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/4743">Graylog2/graylog2-server#4743</a></li>
<li>Fix issue assigning stream outputs to the default stream. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/4747">Graylog2/graylog2-server#4747</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/4754">Graylog2/graylog2-server#4754</a></li>
<li>Improve rendering of input configuration forms.  <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/4755">Graylog2/graylog2-server#4755</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4745">Graylog2/graylog2-server#4745</a> by <a class="reference external" href="https://github.com/Al2Klimov">&#64;Al2Klimov</a></li>
<li>Add code to allow HTTP proxy authentication in <code class="docutils literal notranslate"><span class="pre">http_proxy_uri</span></code> config option. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4594">Graylog2/graylog2-server#4594</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/4758">Graylog2/graylog2-server#4758</a></li>
</ul>
<p><strong>ThreatIntel Plugin</strong></p>
<ul class="simple">
<li>Fix issue with missing threat names in lookup results. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-threatintel/pull/99">Graylog2/graylog-plugin-threatintel#99</a> by <a class="reference external" href="https://github.com/pbr0ck3r">&#64;pbr0ck3r</a></li>
</ul>
<p><strong>AWS Plugin</strong></p>
<ul class="simple">
<li>Support new AWS regions. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-aws/pull/71">Graylog2/graylog-plugin-aws#71</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-aws/pull/73">Graylog2/graylog-plugin-aws#73</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-aws/pull/75">Graylog2/graylog-plugin-aws#75</a></li>
</ul>
</div>
<div class="section" id="graylog-2-4-3">
<h3>Graylog 2.4.3<a class="headerlink" href="#graylog-2-4-3" title="Permalink to this headline">¶</a></h3>
<p>Released: 2018-01-24</p>
<p><a class="reference external" href="https://www.graylog.org/blog/108-announcing-graylog-v2-4-3">https://www.graylog.org/blog/108-announcing-graylog-v2-4-3</a></p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Fix timezone issue when using the timestamp field in quick values. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4519">Graylog2/graylog2-server#4519</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4509">Graylog2/graylog2-server#4509</a></li>
</ul>
</div>
<div class="section" id="graylog-2-4-2">
<h3>Graylog 2.4.2<a class="headerlink" href="#graylog-2-4-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2018-01-24</p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Fix issue with creating dashboards as non-admin user. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4505">Graylog2/graylog2-server#4505</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4511">Graylog2/graylog2-server#4511</a></li>
<li>Fix edge case in recent message loader for extractors. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4513">Graylog2/graylog2-server#4513</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4510">Graylog2/graylog2-server#4510</a></li>
<li>Fix formatting issue when using quick values on the timestamp field. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4423">Graylog2/graylog2-server#4423</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4288">Graylog2/graylog2-server#4288</a></li>
<li>Fix issue with handling the timestamp field in stacked quick value widgets. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4516">Graylog2/graylog2-server#4516</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4509">Graylog2/graylog2-server#4509</a></li>
</ul>
<p><strong>Threatintel Plugin</strong></p>
<ul class="simple">
<li>Fix README.md about <code class="docutils literal notranslate"><span class="pre">tor_lookup()</span></code> function. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/86">Graylog2/graylog2-server#86</a></li>
</ul>
</div>
<div class="section" id="graylog-2-4-1">
<h3>Graylog 2.4.1<a class="headerlink" href="#graylog-2-4-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2018-01-19</p>
<p><a class="reference external" href="https://www.graylog.org/blog/107-announcing-graylog-v2-4-1">https://www.graylog.org/blog/107-announcing-graylog-v2-4-1</a></p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Fix SyslogCodecTest.testCiscoSyslogMessages. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4446">Graylog2/graylog2-server#4446</a></li>
<li>Fix privileges for input start/stop operations. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4454">Graylog2/graylog2-server#4454</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4455">Graylog2/graylog2-server#4455</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4439">Graylog2/graylog2-server#4439</a></li>
<li>Fix problem with Elasticsearch indexing over HTTPS. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4485">Graylog2/graylog2-server#4485</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4232">Graylog2/graylog2-server#4232</a></li>
<li>Fix web plugin compatibility problem. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4496">Graylog2/graylog2-server#4496</a></li>
<li>Fix problem that didn’t allow a reader user to edit their own profile. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4488">Graylog2/graylog2-server#4488</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4494">Graylog2/graylog2-server#4494</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4442">Graylog2/graylog2-server#4442</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4420">Graylog2/graylog2-server#4420</a></li>
</ul>
<p><strong>Pipeline Processor Plugin</strong></p>
<ul class="simple">
<li>Fix pipeline interpreter log message by handing change event. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/235">Graylog2/graylog-plugin-pipeline-processor#235</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/241">Graylog2/graylog-plugin-pipeline-processor#241</a></li>
</ul>
<p><strong>AWS Plugin</strong></p>
<ul class="simple">
<li>Fix problem updating the AWS configuration in the UI. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-aws/issues/58">Graylog2/graylog-plugin-aws#58</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-aws/issues/60">Graylog2/graylog-plugin-aws#60</a></li>
<li>Add missing proxy configuration option to UI. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-aws/issues/59">Graylog2/graylog-plugin-aws#59</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-aws/issues/61">Graylog2/graylog-plugin-aws#61</a></li>
</ul>
<p><strong>Threatintel Plugin</strong></p>
<ul class="simple">
<li>Fix <code class="docutils literal notranslate"><span class="pre">otx_lookup_domain</span></code> pipeline function. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-threatintel/issues/83">Graylog2/graylog-plugin-threatintel#83</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4489">Graylog2/graylog2-server#4489</a></li>
</ul>
</div>
<div class="section" id="graylog-2-4-0">
<h3>Graylog 2.4.0<a class="headerlink" href="#graylog-2-4-0" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-12-22</p>
<p><a class="reference external" href="https://www.graylog.org/blog/106-announcing-graylog-v2-4-0">https://www.graylog.org/blog/106-announcing-graylog-v2-4-0</a></p>
<p>No changes since 2.4.0-rc.2.</p>
</div>
<div class="section" id="graylog-2-4-0-rc-2">
<h3>Graylog 2.4.0-rc.2<a class="headerlink" href="#graylog-2-4-0-rc-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-12-20</p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Fixed node-id validator problem by removing the validator for now. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4433">Graylog2/graylog2-server#4433</a></li>
</ul>
</div>
<div class="section" id="graylog-2-4-0-rc-1">
<h3>Graylog 2.4.0-rc.1<a class="headerlink" href="#graylog-2-4-0-rc-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-12-19</p>
<p><a class="reference external" href="https://www.graylog.org/blog/105-announcing-graylog-v2-4-0-rc-1">https://www.graylog.org/blog/105-announcing-graylog-v2-4-0-rc-1</a></p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Fix problem with new node-id file check that got introduced in 2.4.0-beta.4. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4428">Graylog2/graylog2-server#4428</a> # 4427</li>
</ul>
<p><strong>Threatintel Plugin</strong></p>
<ul class="simple">
<li>Improve Whois data adapter to always use the ARIN registry for now. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/78">Graylog2/graylog2-server#78</a> 76</li>
<li>Fix object comparison in Whois data adapter. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/69">Graylog2/graylog2-server#69</a></li>
</ul>
</div>
<div class="section" id="graylog-2-4-0-beta-4">
<h3>Graylog 2.4.0-beta.4<a class="headerlink" href="#graylog-2-4-0-beta-4" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-12-15</p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Improve HTTPJSONPath lookup table data adapter UI. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4406">Graylog2/graylog2-server#4406</a></li>
<li>Add and use ExternalLink and ExternalLinkButton components. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4414">Graylog2/graylog2-server#4414</a></li>
<li>Improve UI components when user lacks permissions. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4416">Graylog2/graylog2-server#4416</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4407">Graylog2/graylog2-server#4407</a></li>
<li>Fix output traffic graph on “System/Overview”. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4418">Graylog2/graylog2-server#4418</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4395">Graylog2/graylog2-server#4395</a></li>
<li>Improve query suggestions for field existence. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4422">Graylog2/graylog2-server#4422</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4362">Graylog2/graylog2-server#4362</a></li>
<li>Check node-id file permissions and improve error messages. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4417">Graylog2/graylog2-server#4417</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4410">Graylog2/graylog2-server#4410</a></li>
</ul>
<p><strong>Pipeline Processor Plugin</strong></p>
<ul class="simple">
<li>Fix problem with <code class="docutils literal notranslate"><span class="pre">null</span></code> values in the <code class="docutils literal notranslate"><span class="pre">select_jsonpath</span></code> function. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/233">Graylog2/graylog-plugin-pipeline-processor#233</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/232">Graylog2/graylog-plugin-pipeline-processor#232</a></li>
</ul>
<p><strong>Threatintel Plugin</strong></p>
<ul class="simple">
<li>Fix several issues with OTX and Whois data adapters. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-threatintel/issues/75">Graylog2/graylog-plugin-threatintel#75</a></li>
</ul>
<p><strong>Anonymous Usage-Stats Plugin</strong></p>
<ul class="simple">
<li>The plugin got removed.</li>
</ul>
</div>
<div class="section" id="graylog-2-4-0-beta-3">
<h3>Graylog 2.4.0-beta.3<a class="headerlink" href="#graylog-2-4-0-beta-3" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-12-04</p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Improve documentation for outputbuffer settings. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4331">Graylog2/graylog2-server#4331</a></li>
<li>Improve QuickValues stacking. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4343">Graylog2/graylog2-server#4343</a></li>
<li>Improve auth providers UI. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4347">Graylog2/graylog2-server#4347</a></li>
<li>Add pluggable global notification area to page. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4353">Graylog2/graylog2-server#4353</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4389">Graylog2/graylog2-server#4389</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4393">Graylog2/graylog2-server#4393</a></li>
<li>Fix changing the default index set from the UI. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4377">Graylog2/graylog2-server#4377</a></li>
<li>Add global traffic counter to system overview page. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4357">Graylog2/graylog2-server#4357</a></li>
<li>Remove anonymous usage-stats plugin. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4349">Graylog2/graylog2-server#4349</a></li>
</ul>
<p><strong>AWS Plugin</strong></p>
<ul class="simple">
<li>Add “logGroup” and “logStream” attributes to flow log and raw log codecs. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-aws/issues/55">Graylog2/graylog-plugin-aws#55</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-aws/issues/54">Graylog2/graylog-plugin-aws#54</a></li>
</ul>
<p><strong>CEF Plugin</strong></p>
<ul class="simple">
<li>Upgrade to CEF parser 0.0.1.10. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-cef/issues/23">Graylog2/graylog-plugin-cef#23</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-cef/issues/24">Graylog2/graylog-plugin-cef#24</a></li>
</ul>
<p><strong>Threatintel Plugin</strong></p>
<ul class="simple">
<li>Fix lookup table used in <code class="docutils literal notranslate"><span class="pre">tor_lookup()</span></code> function. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-threatintel/issues/71">Graylog2/graylog-plugin-threatintel#71</a></li>
<li>Fix lookup table used in <code class="docutils literal notranslate"><span class="pre">spamhaus_lookup_ip()</span></code> function. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-threatintel/issues/73">Graylog2/graylog-plugin-threatintel#73</a></li>
</ul>
</div>
<div class="section" id="graylog-2-4-0-beta-2">
<h3>Graylog 2.4.0-beta.2<a class="headerlink" href="#graylog-2-4-0-beta-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-11-07</p>
<p><a class="reference external" href="https://www.graylog.org/blog/104-announcing-graylog-v2-4-0-beta-2">https://www.graylog.org/blog/104-announcing-graylog-v2-4-0-beta-2</a></p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Improve UI elements for field analyzers. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4280">Graylog2/graylog2-server#4280</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4230">Graylog2/graylog2-server#4230</a></li>
<li>Add upgrade notes for new plugins. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4187">Graylog2/graylog2-server#4187</a></li>
<li>Fix query button in QuickValues widget. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4216">Graylog2/graylog2-server#4216</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4278">Graylog2/graylog2-server#4278</a></li>
<li>Improve QuickValues histogram data. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4312">Graylog2/graylog2-server#4312</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4309">Graylog2/graylog2-server#4309</a></li>
<li>Add loading indicator when reloading field chart data. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4319">Graylog2/graylog2-server#4319</a></li>
<li>Add feedback on create widget modal. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4320">Graylog2/graylog2-server#4320</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4318">Graylog2/graylog2-server#4318</a></li>
<li>Improve robustness of QuickValues widget with stacked fields. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4322">Graylog2/graylog2-server#4322</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4289">Graylog2/graylog2-server#4289</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4287">Graylog2/graylog2-server#4287</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4082">Graylog2/graylog2-server#4082</a></li>
</ul>
</div>
<div class="section" id="graylog-2-4-0-beta-1">
<h3>Graylog 2.4.0-beta.1<a class="headerlink" href="#graylog-2-4-0-beta-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-10-20</p>
<p><a class="reference external" href="https://www.graylog.org/blog/103-announcing-graylog-v2-4-0-beta-1">https://www.graylog.org/blog/103-announcing-graylog-v2-4-0-beta-1</a></p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Ship NetFlow plugin by default. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4086">Graylog2/graylog2-server#4086</a></li>
<li>Ship AWS plugin by default. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4085">Graylog2/graylog2-server#4085</a></li>
<li>Ship Threat Intelligence plugin by default. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4084">Graylog2/graylog2-server#4084</a></li>
<li>Ship CEF plugin by default. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4161">Graylog2/graylog2-server#4161</a></li>
<li>Fix race condition in user session removal. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4041">Graylog2/graylog2-server#4041</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3634">Graylog2/graylog2-server#3634</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3948">Graylog2/graylog2-server#3948</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3973">Graylog2/graylog2-server#3973</a></li>
<li>Update web interface dependencies and fix deprecations. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4057">Graylog2/graylog2-server#4057</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4059">Graylog2/graylog2-server#4059</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4037">Graylog2/graylog2-server#4037</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4192">Graylog2/graylog2-server#4192</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4189">Graylog2/graylog2-server#4189</a></li>
<li>Improve Elasticsearch query performance. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4056">Graylog2/graylog2-server#4056</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4051">Graylog2/graylog2-server#4051</a></li>
<li>Improve web UI performance by using React production mode. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4048">Graylog2/graylog2-server#4048</a></li>
<li>Add possibility for server plugins to add database migrations. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4095">Graylog2/graylog2-server#4095</a></li>
<li>Add support for custom HTTP headers in HTTPJSONPath lookup table adapter. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4094">Graylog2/graylog2-server#4094</a></li>
<li>Fix HTTP header size settings. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4128">Graylog2/graylog2-server#4128</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4118">Graylog2/graylog2-server#4118</a></li>
<li>Add <code class="docutils literal notranslate"><span class="pre">/system/indices/index_sets/{id}/stats</span></code> REST API endpoint to fetch stats for a single index set. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4129">Graylog2/graylog2-server#4129</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4088">Graylog2/graylog2-server#4088</a></li>
<li>Add DSV over HTTP data adapter for lookup tables. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4096">Graylog2/graylog2-server#4096</a></li>
<li>Improve and update Elasticsearch testing infrastructure. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4125">Graylog2/graylog2-server#4125</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4165">Graylog2/graylog2-server#4165</a></li>
<li>Improve dashboard widget layout to show long widget titles. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4072">Graylog2/graylog2-server#4072</a> <a class="reference external" href="https://github.com/billmurrin">&#64;billmurrin</a></li>
<li>Fix problem in GELF output by removing special handling of the <code class="docutils literal notranslate"><span class="pre">facility</span></code>. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4141">Graylog2/graylog2-server#4141</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4140">Graylog2/graylog2-server#4140</a></li>
<li>Expose <code class="docutils literal notranslate"><span class="pre">LdapUserAuthenticator#syncLdapUser()</span></code> method to allow usage from plugins. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4159">Graylog2/graylog2-server#4159</a> <a class="reference external" href="https://github.com/gaspardpetit">&#64;gaspardpetit</a></li>
<li>Fix problem with getting Elasticsearch stats. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4127">Graylog2/graylog2-server#4127</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4119">Graylog2/graylog2-server#4119</a></li>
<li>Fix Elasticsearch document counting with lots of indices. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4147">Graylog2/graylog2-server#4147</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4136">Graylog2/graylog2-server#4136</a></li>
<li>Fix link placement in multi select UI elements. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3911">Graylog2/graylog2-server#3911</a></li>
<li>Fix HTTP problems when searching in lots of indices. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4149">Graylog2/graylog2-server#4149</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4054">Graylog2/graylog2-server#4054</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4168">Graylog2/graylog2-server#4168</a></li>
<li>Fix config issues with stacked charts. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4151">Graylog2/graylog2-server#4151</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4150">Graylog2/graylog2-server#4150</a></li>
<li>Improve eslint rules for UI development. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4173">Graylog2/graylog2-server#4173</a></li>
<li>Update serveral server dependencies. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4134">Graylog2/graylog2-server#4134</a></li>
<li>Add config option to disable analysis features (such a QuickValues) for certain message fields. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4175">Graylog2/graylog2-server#4175</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3957">Graylog2/graylog2-server#3957</a></li>
<li>Improve message separator handling for TCP based inputs. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4106">Graylog2/graylog2-server#4106</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4105">Graylog2/graylog2-server#4105</a></li>
<li>Improve CSV lookup table adapter to use the same field for key and value. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4181">Graylog2/graylog2-server#4181</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4177">Graylog2/graylog2-server#4177</a></li>
<li>Add possibility to create charts for non-numeric fields to show cardinality and total counts. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4182">Graylog2/graylog2-server#4182</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4083">Graylog2/graylog2-server#4083</a></li>
<li>Improve widget and grid positioning and styling. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4160">Graylog2/graylog2-server#4160</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4209">Graylog2/graylog2-server#4209</a></li>
<li>Improve UI testing environment. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4162">Graylog2/graylog2-server#4162</a></li>
<li>Improve error logging on indexing failures. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4195">Graylog2/graylog2-server#4195</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4166">Graylog2/graylog2-server#4166</a></li>
<li>Improve styling for highlighting checkbox in the search sidebar. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4201">Graylog2/graylog2-server#4201</a></li>
<li>Fix problem with lookup table content pack import. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4197">Graylog2/graylog2-server#4197</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-threatintel/issues/57">Graylog2/graylog-plugin-threatintel#57</a></li>
<li>Add configuration options to QuickValue widget. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4205">Graylog2/graylog2-server#4205</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4082">Graylog2/graylog2-server#4082</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4259">Graylog2/graylog2-server#4259</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4258">Graylog2/graylog2-server#4258</a></li>
<li>Improve styling and positioning for search page widget buttons. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4219">Graylog2/graylog2-server#4219</a></li>
<li>Improve permission handling to allow regular users to create dashboards. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4155">Graylog2/graylog2-server#4155</a></li>
<li>Add stats summary for all index sets to the “System/Indices” page. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4211">Graylog2/graylog2-server#4211</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4204">Graylog2/graylog2-server#4204</a></li>
<li>Improve table layout in lookup table UI for entries with long descriptions. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4239">Graylog2/graylog2-server#4239</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4172">Graylog2/graylog2-server#4172</a></li>
<li>Fix permission check which was hiding a menu item in the UI. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4237">Graylog2/graylog2-server#4237</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4234">Graylog2/graylog2-server#4234</a></li>
<li>Fix error with message histogram selection. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4243">Graylog2/graylog2-server#4243</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4214">Graylog2/graylog2-server#4214</a></li>
<li>Add histogram option to QuickValue widget to show values over time. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4244">Graylog2/graylog2-server#4244</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4082">Graylog2/graylog2-server#4082</a></li>
<li>Fix permission handling for editing/deleting roles. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4265">Graylog2/graylog2-server#4265</a></li>
<li>Fix some smaller lookup table issues. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4266">Graylog2/graylog2-server#4266</a></li>
</ul>
<p><strong>Map Widget plugin</strong></p>
<ul class="simple">
<li>Improve rendering and styling for map widget. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-map-widget/issues/53">Graylog2/graylog-plugin-map-widget#53</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-map-widget/issues/54">Graylog2/graylog-plugin-map-widget#54</a></li>
<li>Improve styling and positioning for search page widget buttons. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-map-widget/issues/56">Graylog2/graylog-plugin-map-widget#56</a></li>
</ul>
<p><strong>Pipeline Processor plugin</strong></p>
<ul class="simple">
<li>Add various Base encoding functions. (e.g. Base16, Base32, Base64) <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/190">Graylog2/graylog-plugin-pipeline-processor#190</a></li>
<li>Fix sorting of pipeline rules. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/208">Graylog2/graylog-plugin-pipeline-processor#208</a></li>
<li>Fix <code class="docutils literal notranslate"><span class="pre">parse_json()</span></code> function on invalid input. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/210">Graylog2/graylog-plugin-pipeline-processor#210</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/209">Graylog2/graylog-plugin-pipeline-processor#209</a></li>
<li>Fix NullPointerException when parsing invalid rules. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/212">Graylog2/graylog-plugin-pipeline-processor#212</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/211">Graylog2/graylog-plugin-pipeline-processor#211</a></li>
<li>Improve documentation for lookup table function. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/217">Graylog2/graylog-plugin-pipeline-processor#217</a> <a class="reference external" href="https://github.com/supahgreg">&#64;supahgreg</a></li>
<li>Fix numeric conversions with <code class="docutils literal notranslate"><span class="pre">to_double()</span></code> and <code class="docutils literal notranslate"><span class="pre">to_long()</span></code>. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/219">Graylog2/graylog-plugin-pipeline-processor#219</a></li>
<li>Improve rule function documentation in editor by sorting functions alphabetically by name. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/222">Graylog2/graylog-plugin-pipeline-processor#222</a></li>
<li>Add <code class="docutils literal notranslate"><span class="pre">remove_from_default</span></code> option to <code class="docutils literal notranslate"><span class="pre">route_to_stream()</span></code> function. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/220">Graylog2/graylog-plugin-pipeline-processor#220</a></li>
<li>Add <code class="docutils literal notranslate"><span class="pre">remove_from_stream()</span></code> function. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/220">Graylog2/graylog-plugin-pipeline-processor#220</a></li>
</ul>
<p><strong>Collector plugin</strong></p>
<ul class="simple">
<li>Add <code class="docutils literal notranslate"><span class="pre">exclude_files</span></code> configuration option for filebeat collectors. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-collector/issues/63">Graylog2/graylog-plugin-collector#63</a> <a class="reference external" href="https://github.com/silenceper">&#64;silenceper</a></li>
</ul>
<p><strong>AWS plugin</strong></p>
<ul class="simple">
<li>Fix problem with parsing SNS notification messages. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-aws/issues/47">Graylog2/graylog-plugin-aws#47</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-aws/issues/44">Graylog2/graylog-plugin-aws#44</a></li>
<li>Add support for overriding the <code class="docutils literal notranslate"><span class="pre">source</span></code> field for all input types. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-aws/issues/46">Graylog2/graylog-plugin-aws#46</a></li>
<li>Add support for cross account role based authentication. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-aws/issues/49">Graylog2/graylog-plugin-aws#49</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-aws/issues/48">Graylog2/graylog-plugin-aws#48</a> <a class="reference external" href="https://github.com/radykal-com">&#64;radykal-com</a></li>
</ul>
<p><strong>CEF plugin</strong></p>
<ul class="simple">
<li>Improve CEF parser and add proper testing infrastructure.</li>
<li>Fix problems with Kafka and AMQP inputs.</li>
</ul>
<p><strong>NetFlow plugin</strong></p>
<ul class="simple">
<li>Improved NetFlow v9 support. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-netflow/issues/21">Graylog2/graylog-plugin-netflow#21</a></li>
</ul>
<p><strong>Threat Intelligence plugin</strong></p>
<ul class="simple">
<li>Convert plugin to use the lookup table system. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-threatintel/issues/48">Graylog2/graylog-plugin-threatintel#48</a></li>
<li>Fix problem with absent OTX API key in plugin configuration. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-threatintel/issues/54">Graylog2/graylog-plugin-threatintel#54</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-threatintel/issues/53">Graylog2/graylog-plugin-threatintel#53</a></li>
<li>Improve pipeline function parameter consistency. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-threatintel/issues/58">Graylog2/graylog-plugin-threatintel#58</a></li>
<li>Improve lookup table based data adapters. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-threatintel/issues/63">Graylog2/graylog-plugin-threatintel#63</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-threatintel/issues/61">Graylog2/graylog-plugin-threatintel#61</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-threatintel/issues/59">Graylog2/graylog-plugin-threatintel#59</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-threatintel/issues/67">Graylog2/graylog-plugin-threatintel#67</a></li>
</ul>
</div>
<div class="section" id="graylog-2-3-2">
<h3>Graylog 2.3.2<a class="headerlink" href="#graylog-2-3-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-10-19</p>
<p><a class="reference external" href="https://www.graylog.org/blog/102-announcing-graylog-v2-3-2">https://www.graylog.org/blog/102-announcing-graylog-v2-3-2</a></p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Fix permission handling for editing/deleting roles. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4270">Graylog2/graylog2-server#4270</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4254">Graylog2/graylog2-server#4254</a></li>
<li>Fix CSV export when using lots of Elasticsearch index shards. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4269">Graylog2/graylog2-server#4269</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4190">Graylog2/graylog2-server#4190</a></li>
<li>Fix infinite redirect loop when accessing non-permitted resources/entities. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4139">Graylog2/graylog2-server#4139</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4117">Graylog2/graylog2-server#4117</a></li>
</ul>
</div>
<div class="section" id="graylog-2-3-1">
<h3>Graylog 2.3.1<a class="headerlink" href="#graylog-2-3-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-08-25</p>
<p><a class="reference external" href="https://www.graylog.org/blog/100-announcing-graylog-v2-3-1">https://www.graylog.org/blog/100-announcing-graylog-v2-3-1</a></p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Fix NullPointerException for field stats. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4026">Graylog2/graylog2-server#4026</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4045">Graylog2/graylog2-server#4045</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4046">Graylog2/graylog2-server#4046</a></li>
<li>Make GELF parser less strict. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4055">Graylog2/graylog2-server#4055</a></li>
<li>Fix search requests with selected fields by using source filtering. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4069">Graylog2/graylog2-server#4069</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4077">Graylog2/graylog2-server#4077</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4068">Graylog2/graylog2-server#4068</a></li>
<li>Add missing index for <cite>session_id</cite> in “sessions” MongoDB collection. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4070">Graylog2/graylog2-server#4070</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4076">Graylog2/graylog2-server#4076</a></li>
<li>Fix search errors when lots of indices will be used. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4062">Graylog2/graylog2-server#4062</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4078">Graylog2/graylog2-server#4078</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4054">Graylog2/graylog2-server#4054</a></li>
<li>Upgrade to Jest 2.4.7+jackson. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4107">Graylog2/graylog2-server#4107</a></li>
<li>Fix search term highlighting. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4108">Graylog2/graylog2-server#4108</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4101">Graylog2/graylog2-server#4101</a></li>
</ul>
<p><strong>Pipeline Processor Plugin</strong></p>
<ul class="simple">
<li>Make <code class="docutils literal notranslate"><span class="pre">locale</span></code> parameter of <code class="docutils literal notranslate"><span class="pre">parse_date()</span></code> optional. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/202">Graylog2/graylog-plugin-pipeline-processor#202</a></li>
</ul>
</div>
<div class="section" id="graylog-2-3-0">
<h3>Graylog 2.3.0<a class="headerlink" href="#graylog-2-3-0" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-07-26</p>
<p><a class="reference external" href="https://www.graylog.org/blog/98-announcing-graylog-v2-3-0">https://www.graylog.org/blog/98-announcing-graylog-v2-3-0</a></p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Fix remote address field for GELF UDP inputs. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3982">Graylog2/graylog2-server#3982</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3988">Graylog2/graylog2-server#3988</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3980">Graylog2/graylog2-server#3980</a></li>
<li>Improve error messages for rotation strategies. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3995">Graylog2/graylog2-server#3995</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3990">Graylog2/graylog2-server#3990</a></li>
<li>Fix legend for stacked charts. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4010">Graylog2/graylog2-server#4010</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3996">Graylog2/graylog2-server#3996</a></li>
<li>Fix size based index rotation strategy. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4011">Graylog2/graylog2-server#4011</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4008">Graylog2/graylog2-server#4008</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3997">Graylog2/graylog2-server#3997</a></li>
<li>Implement retry handling for failed Elasticsearch requests. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4012">Graylog2/graylog2-server#4012</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3993">Graylog2/graylog2-server#3993</a></li>
<li>Fix NullPointerException in ExceptionUtils. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4014">Graylog2/graylog2-server#4014</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/4003">Graylog2/graylog2-server#4003</a></li>
<li>Avoid noisy stack traces when Elasticsearch is not available. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3934">Graylog2/graylog2-server#3934</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3861">Graylog2/graylog2-server#3861</a></li>
<li>Do not run SetIndexReadOnlyAndCalculateRangeJob if index is closed. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3931">Graylog2/graylog2-server#3931</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3909">Graylog2/graylog2-server#3909</a></li>
<li>Fix issues when updating users and user roles. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3942">Graylog2/graylog2-server#3942</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3918">Graylog2/graylog2-server#3918</a></li>
<li>Improved IPv6 support. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3926">Graylog2/graylog2-server#3926</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3870">Graylog2/graylog2-server#3870</a></li>
<li>Fix login code to unbreak SSO plugin. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3973">Graylog2/graylog2-server#3973</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3948">Graylog2/graylog2-server#3948</a></li>
<li>Allow case-insensitive lookups for CSV lookup data adapter. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3971">Graylog2/graylog2-server#3971</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3961">Graylog2/graylog2-server#3961</a></li>
<li>Allow manual lookup table cache purge via UI and API. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3967">Graylog2/graylog2-server#3967</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3962">Graylog2/graylog2-server#3962</a></li>
<li>Mark Message class as not thread-safe. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3978">Graylog2/graylog2-server#3978</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3876">Graylog2/graylog2-server#3876</a></li>
<li>Fail fast and loud for invalid GELF messages. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3972">Graylog2/graylog2-server#3972</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3970">Graylog2/graylog2-server#3970</a></li>
<li>Add support for automatic Elasticsearch node discovery. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3805">Graylog2/graylog2-server#3805</a></li>
<li>Fix DateHistogram-related functionality in Searches class. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3806">Graylog2/graylog2-server#3806</a></li>
<li>Hide update spinner with auto-update interval &lt;=5s. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3738">Graylog2/graylog2-server#3738</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3723">Graylog2/graylog2-server#3723</a> <a class="reference external" href="https://github.com/billmurrin">&#64;billmurrin</a></li>
<li>Small spelling/documentation fixes. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3817">Graylog2/graylog2-server#3817</a></li>
<li>Fix pagination and offset/total hits in Searches. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3821">Graylog2/graylog2-server#3821</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3813">Graylog2/graylog2-server#3813</a></li>
<li>Add sort order to terms API call. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3829">Graylog2/graylog2-server#3829</a></li>
<li>Don’t start stopped inputs after updating them. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3824">Graylog2/graylog2-server#3824</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3479">Graylog2/graylog2-server#3479</a></li>
<li>Allow specifying locale for Date converter. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3820">Graylog2/graylog2-server#3820</a></li>
<li>Hide “Delete from stream” button if stream is undefined. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3822">Graylog2/graylog2-server#3822</a></li>
<li>Don’t reload errorstates on  pages that don’t need them. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3839">Graylog2/graylog2-server#3839</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3834">Graylog2/graylog2-server#3834</a></li>
<li>Emit StreamsChangedEvent and StreamDeletedEvent in BundleImporter. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3848">Graylog2/graylog2-server#3848</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3842">Graylog2/graylog2-server#3842</a></li>
<li>Add Lookup Table search result decorator. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3852">Graylog2/graylog2-server#3852</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3844">Graylog2/graylog2-server#3844</a></li>
<li>Check Elasticsearch version when creating index template. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3862">Graylog2/graylog2-server#3862</a></li>
<li>Add admin user to list of receivers in EmailAlarmCallback. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3864">Graylog2/graylog2-server#3864</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3859">Graylog2/graylog2-server#3859</a></li>
<li>Fix parameters for count query in <code class="docutils literal notranslate"><span class="pre">Searches#count()</span></code>. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3865">Graylog2/graylog2-server#3865</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3841">Graylog2/graylog2-server#3841</a></li>
<li>Add search system for objects in MongoDB <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3877">Graylog2/graylog2-server#3877</a></li>
<li>Make Kafka config setting <code class="docutils literal notranslate"><span class="pre">auto.offset.reset</span></code> configurable for input. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3743">Graylog2/graylog2-server#3743</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3894">Graylog2/graylog2-server#3894</a> <a class="reference external" href="https://github.com/r4um">&#64;r4um</a></li>
<li>Use preemptive authentication for Elasticsearch if credentials are given. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3895">Graylog2/graylog2-server#3895</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3907">Graylog2/graylog2-server#3907</a></li>
<li>Add lookup adapter and cache config validation. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3836">Graylog2/graylog2-server#3836</a></li>
<li>Unbreak elasticsearch duration config settings. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3899">Graylog2/graylog2-server#3899</a></li>
<li>Fix lookup table UI state problem. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3898">Graylog2/graylog2-server#3898</a></li>
<li>Enable search for lookup tables, data adapters and caches. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3878">Graylog2/graylog2-server#3878</a></li>
<li>Make Elasticsearch version injectable. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3896">Graylog2/graylog2-server#3896</a></li>
<li>Refactor lifecycle for lookup adapters and caches. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3873">Graylog2/graylog2-server#3873</a></li>
<li>Introduce setting for enabling ES request compression. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3901">Graylog2/graylog2-server#3901</a></li>
<li>Add content pack import/export for lookup tables, caches and adapters. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3892">Graylog2/graylog2-server#3892</a></li>
<li>Upgrade to Jackson 2.8.9. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3908">Graylog2/graylog2-server#3908</a></li>
<li>Fix and centralize lookup adapter/cache error handling. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3905">Graylog2/graylog2-server#3905</a></li>
<li>Switch RoleResponse to java.util.Optional to fix serialization. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3915">Graylog2/graylog2-server#3915</a></li>
<li>Add lookup table/cache/adapter permissions. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3914">Graylog2/graylog2-server#3914</a></li>
<li>Collect and show metrics for lookup caches and adapters. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3917">Graylog2/graylog2-server#3917</a></li>
<li>Remove obsolete “disableExpensiveUpdates” user preference. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3922">Graylog2/graylog2-server#3922</a></li>
<li>Migrate to Jackson-based release of Jest 2.4.5. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3925">Graylog2/graylog2-server#3925</a></li>
<li>Use aliases for reopened indices. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3897">Graylog2/graylog2-server#3897</a></li>
<li>Add default values for lookup tables. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3921">Graylog2/graylog2-server#3921</a></li>
<li>Add support for updating extractors in InputService. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3910">Graylog2/graylog2-server#3910</a></li>
<li>Fix index set overview with closed indices. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3930">Graylog2/graylog2-server#3930</a></li>
<li>Don’t check ES cluster health when flushing messages. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3927">Graylog2/graylog2-server#3927</a></li>
<li>Retrying bulk indexing in case of all IOExceptions. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3929">Graylog2/graylog2-server#3929</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3941">Graylog2/graylog2-server#3941</a></li>
<li>Add support for automatic Elasticsearch node discovery. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3805">Graylog2/graylog2-server#3805</a></li>
<li>Fix DateHistogram-related functionality in Searches class. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3806">Graylog2/graylog2-server#3806</a></li>
<li>Hide update spinner with auto-update interval &lt;=5s. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3738">Graylog2/graylog2-server#3738</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3723">Graylog2/graylog2-server#3723</a> <a class="reference external" href="https://github.com/billmurrin">&#64;billmurrin</a></li>
<li>Small spelling/documentation fixes. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3817">Graylog2/graylog2-server#3817</a></li>
<li>Fix pagination and offset/total hits in Searches. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3821">Graylog2/graylog2-server#3821</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3813">Graylog2/graylog2-server#3813</a></li>
<li>Add timing metrics to GelfOutput. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3810">Graylog2/graylog2-server#3810</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3716">Graylog2/graylog2-server#3716</a></li>
<li>Add sort order to terms API call. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3829">Graylog2/graylog2-server#3829</a></li>
<li>Don’t start stopped inputs after updating them. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3824">Graylog2/graylog2-server#3824</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3479">Graylog2/graylog2-server#3479</a></li>
<li>Allow specifying locale for Date converter. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3820">Graylog2/graylog2-server#3820</a></li>
<li>Hide “Delete from stream” button if stream is undefined. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3822">Graylog2/graylog2-server#3822</a></li>
<li>Don’t reload errorstates on  pages that don’t need them. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3839">Graylog2/graylog2-server#3839</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3834">Graylog2/graylog2-server#3834</a></li>
<li>Emit StreamsChangedEvent and StreamDeletedEvent in BundleImporter. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3848">Graylog2/graylog2-server#3848</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3842">Graylog2/graylog2-server#3842</a></li>
<li>Add Lookup Table search result decorator. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3852">Graylog2/graylog2-server#3852</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3844">Graylog2/graylog2-server#3844</a></li>
<li>Check Elasticsearch version when creating index template. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3862">Graylog2/graylog2-server#3862</a></li>
<li>Add admin user to list of receivers in EmailAlarmCallback. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3864">Graylog2/graylog2-server#3864</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3859">Graylog2/graylog2-server#3859</a></li>
<li>Fix parameters for count query in <code class="docutils literal notranslate"><span class="pre">Searches#count()</span></code>. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3865">Graylog2/graylog2-server#3865</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3841">Graylog2/graylog2-server#3841</a></li>
<li>Allow version ‘0’ for structured syslog messages. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3503">Graylog2/graylog2-server#3503</a></li>
<li>Ignore Content-Type in <code class="docutils literal notranslate"><span class="pre">HttpTransport</span></code>. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3508">Graylog2/graylog2-server#3508</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3477">Graylog2/graylog2-server#3477</a></li>
<li>Ensure that <code class="docutils literal notranslate"><span class="pre">index_prefix</span></code> is lower case. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3509">Graylog2/graylog2-server#3509</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3476">Graylog2/graylog2-server#3476</a></li>
<li>Make map in <code class="docutils literal notranslate"><span class="pre">MessageInput#asMap()</span></code> mutable. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3521">Graylog2/graylog2-server#3521</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3515">Graylog2/graylog2-server#3515</a></li>
<li>Fix pagination for alert conditions. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3529">Graylog2/graylog2-server#3529</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3528">Graylog2/graylog2-server#3528</a></li>
<li>Wait until alert notification types are loaded. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3537">Graylog2/graylog2-server#3537</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3534">Graylog2/graylog2-server#3534</a></li>
<li>Upgrade development environment to Webpack v2. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3460">Graylog2/graylog2-server#3460</a></li>
<li>Add an option to repeat alert notifications again. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3536">Graylog2/graylog2-server#3536</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3511">Graylog2/graylog2-server#3511</a></li>
<li>Fix accidentally changed exports of <code class="docutils literal notranslate"><span class="pre">UsersStore</span></code> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3560">Graylog2/graylog2-server#3560</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3556">Graylog2/graylog2-server#3556</a></li>
<li>Properly escape username/roles in web interface. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3570">Graylog2/graylog2-server#3570</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3569">Graylog2/graylog2-server#3569</a></li>
<li>Improved dashboard grid system. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3575">Graylog2/graylog2-server#3575</a></li>
<li>Add support for sorting by count to <code class="docutils literal notranslate"><span class="pre">Search#terms()</span></code>. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3540">Graylog2/graylog2-server#3540</a> (<a class="reference external" href="https://github.com/billmurrin">&#64;billmurrin</a>)</li>
<li>Fix for copy query button. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3548">Graylog2/graylog2-server#3548</a> (<a class="reference external" href="https://github.com/billmurrin">&#64;billmurrin</a>)</li>
<li>Fix issue with cloning streams. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3615">Graylog2/graylog2-server#3615</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3608">Graylog2/graylog2-server#3608</a></li>
<li>Prevent session extension when polling system messages. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3632">Graylog2/graylog2-server#3632</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3628">Graylog2/graylog2-server#3628</a></li>
<li>Prevent session extension when polling system jobs. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3625">Graylog2/graylog2-server#3625</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3587">Graylog2/graylog2-server#3587</a></li>
<li>Prevent NPE due to race between rotation and retention threads. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3637">Graylog2/graylog2-server#3637</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3494">Graylog2/graylog2-server#3494</a></li>
<li>Fix problem with message decorators and field selection. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3585">Graylog2/graylog2-server#3585</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3584">Graylog2/graylog2-server#3584</a></li>
<li>Fix issue with loading indicator on an empty search result page. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3652">Graylog2/graylog2-server#3652</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3650">Graylog2/graylog2-server#3650</a></li>
<li>Fix navigation in LDAP users UI. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3651">Graylog2/graylog2-server#3651</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3485">Graylog2/graylog2-server#3485</a></li>
<li>Ensure that plugin RPMs will be built for Linux. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3658">Graylog2/graylog2-server#3658</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3657">Graylog2/graylog2-server#3657</a></li>
<li>Fix reloading problem with content packs and GROK patterns. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3621">Graylog2/graylog2-server#3621</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3610">Graylog2/graylog2-server#3610</a></li>
<li>Add support for Cisco and FortiGate Syslog messages. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3599">Graylog2/graylog2-server#3599</a></li>
<li>Fix permission problem for inputs API. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3681">Graylog2/graylog2-server#3681</a></li>
<li>Restore removal of role permissions upon roles update. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3683">Graylog2/graylog2-server#3683</a></li>
<li>Comply with grace condition when repeat alert notifications is enabled. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3676">Graylog2/graylog2-server#3676</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3579">Graylog2/graylog2-server#3579</a></li>
<li>Invalidate dashboards data after logout. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3700">Graylog2/graylog2-server#3700</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3693">Graylog2/graylog2-server#3693</a></li>
<li>Fix OptionalStringValidator and validations for extractors. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3633">Graylog2/graylog2-server#3633</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3630">Graylog2/graylog2-server#3630</a></li>
<li>Better time range for “Show Received Messages” button on inputs page. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3725">Graylog2/graylog2-server#3725</a></li>
<li>Remove deprecated rotation/retention configuration resources. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3724">Graylog2/graylog2-server#3724</a></li>
<li>Introduce lookup tables feature. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3748">Graylog2/graylog2-server#3748</a></li>
<li>Creating dashboard from search page does now select the right ID <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3786">Graylog2/graylog2-server#3786</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3785">Graylog2/graylog2-server#3785</a></li>
<li>Fix importing of dashboards from content packs <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3766">Graylog2/graylog2-server#3766</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3765">Graylog2/graylog2-server#3765</a></li>
</ul>
<p><strong>Beats Plugin</strong></p>
<ul class="simple">
<li>Spelling fixes. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-beats/issues/22">Graylog2/graylog-plugin-beats#22</a> <a class="reference external" href="https://github.com/jsoref">&#64;jsoref</a></li>
</ul>
<p><strong>Collector Plugin</strong></p>
<ul class="simple">
<li>Increase “Show messages” time range.</li>
<li>Allow collectors list to be filtered by tags. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-collector/issues/52">Graylog2/graylog-plugin-collector#52</a></li>
<li>UI and UX improvements.  <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-collector/issues/55">Graylog2/graylog-plugin-collector#55</a></li>
<li>Fix configuration setting usage for collector heartbeat interval. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-collector/issues/58">Graylog2/graylog-plugin-collector#58</a></li>
<li>Prevent unwanted session extension. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-collector/issues/49">Graylog2/graylog-plugin-collector#49</a></li>
</ul>
<p><strong>Map Widget Plugin</strong></p>
<ul class="simple">
<li>Adjust to lookup cache and adapter changes in server. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-map-widget/issues/48">Graylog2/graylog-plugin-map-widget#48</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-map-widget/issues/50">Graylog2/graylog-plugin-map-widget#50</a></li>
<li>Fix refresh handling in error conditions. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-map-widget/issues/49">Graylog2/graylog-plugin-map-widget#49</a></li>
<li>Fix HMR as in Graylog/graylog2-server#3591 <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-map-widget/issues/51">Graylog2/graylog-plugin-map-widget#51</a></li>
<li>Update to a new GeoIP2 release.</li>
<li>Add lookup tables data adapter for the GeoIP2 database. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-map-widget/issues/40">Graylog2/graylog-plugin-map-widget#40</a></li>
</ul>
<p><strong>Pipeline Processor Plugin</strong></p>
<ul class="simple">
<li>Improve robustness of <code class="docutils literal notranslate"><span class="pre">clone_message()</span></code> pipeline function. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/192">Graylog2/graylog-plugin-pipeline-processor#192</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3880">Graylog2/graylog2-server#3880</a></li>
<li>Fix pipline condition handling of “match all”/”match either”. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/193">Graylog2/graylog-plugin-pipeline-processor#193</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3924">Graylog2/graylog2-server#3924</a></li>
<li>Fix serialization/deserialization of pipeline StageSource. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/195">Graylog2/graylog-plugin-pipeline-processor#195</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/194">Graylog2/graylog-plugin-pipeline-processor#194</a></li>
<li>Improve error handling with invalid expressions. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/196">Graylog2/graylog-plugin-pipeline-processor#196</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/185">Graylog2/graylog-plugin-pipeline-processor#185</a></li>
<li>Spelling fixes. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/181">Graylog2/graylog-plugin-pipeline-processor#181</a> <a class="reference external" href="https://github.com/jsoref">&#64;jsoref</a></li>
<li>Add support for custom locale in <code class="docutils literal notranslate"><span class="pre">parse_date()</span></code> function. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/184">Graylog2/graylog-plugin-pipeline-processor#184</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/183">Graylog2/graylog-plugin-pipeline-processor#183</a></li>
<li>Smaller UI and UX changes. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/186">Graylog2/graylog-plugin-pipeline-processor#186</a></li>
<li>New function: debug() <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/188">Graylog2/graylog-plugin-pipeline-processor#188</a></li>
<li>Allow snake-case access to bean objects <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/189">Graylog2/graylog-plugin-pipeline-processor#189</a></li>
<li>Improve lookup functions. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/191">Graylog2/graylog-plugin-pipeline-processor#191</a></li>
<li>Spelling fixes. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/181">Graylog2/graylog-plugin-pipeline-processor#181</a> <a class="reference external" href="https://github.com/jsoref">&#64;jsoref</a></li>
<li>Use uppercase timezone in <code class="docutils literal notranslate"><span class="pre">TimezoneAwareFunction</span></code> and fix default value. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/169">Graylog2/graylog2-server#169</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/168">Graylog2/graylog2-server#168</a></li>
<li>Add <code class="docutils literal notranslate"><span class="pre">lookup</span></code> and <code class="docutils literal notranslate"><span class="pre">lookup_value</span></code> pipeline functions for lookup table support. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/177">Graylog2/graylog2-server#177</a></li>
</ul>
</div>
<div class="section" id="graylog-2-2-3">
<h3>Graylog 2.2.3<a class="headerlink" href="#graylog-2-2-3" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-04-04</p>
<p><a class="reference external" href="https://www.graylog.org/blog/92-announcing-graylog-v2-2-3">https://www.graylog.org/blog/92-announcing-graylog-v2-2-3</a></p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Prevent unwanted session extension. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3583">Graylog2/graylog2-server#3583</a></li>
<li>Properly escape username/roles in web interface. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3588">Graylog2/graylog2-server#3588</a></li>
<li>Allow “-” in the path pattern for the index range rebuild endpoint. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3600">Graylog2/graylog2-server#3600</a></li>
<li>Copy Query Button Fix. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3491">Graylog2/graylog2-server#3491</a></li>
<li>Fixing slicing of alert notifications in pagination. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3619">Graylog2/graylog2-server#3619</a></li>
<li>Fix cloning alert conditions with identical id when cloning stream. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3616">Graylog2/graylog2-server#3616</a></li>
<li>Use UTC for embedded Date objects as well. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3626">Graylog2/graylog2-server#3626</a></li>
<li>Prevent session extension for polling system messages. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3638">Graylog2/graylog2-server#3638</a></li>
<li>Support replacing whitespace in nested keys for JSON extractor. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3623">Graylog2/graylog2-server#3623</a></li>
<li>Prevent NPE due to race between rotation and retention threads. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3640">Graylog2/graylog2-server#3640</a></li>
<li>Prevent session extension in SystemJobsStore. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3625">Graylog2/graylog2-server#3625</a></li>
<li>Render loading indicator on no results page. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3667">Graylog2/graylog2-server#3667</a></li>
<li>Using consistent collection of non displayable fields to filter against. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3668">Graylog2/graylog2-server#3668</a></li>
<li>Ensure that plugin RPMs will be built for Linux. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3659">Graylog2/graylog2-server#3659</a></li>
<li>Fix navigation in LDAP components. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3670">Graylog2/graylog2-server#3670</a></li>
<li>Publish GrokPatternsChangedEvent when using content packs. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3621">Graylog2/graylog2-server#3621</a></li>
<li>Add support for Cisco and FortiGate syslog messages. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3599">Graylog2/graylog2-server#3599</a></li>
<li>Effectively change user permissions when listing inputs. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3682">Graylog2/graylog2-server#3682</a></li>
<li>Restore removal of role permissions upon roles update. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3684">Graylog2/graylog2-server#3684</a></li>
<li>Comply with grace condition when repeat alert notifications is enabled <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3676">Graylog2/graylog2-server#3676</a></li>
</ul>
<p><strong>Pipeline Processor</strong></p>
<ul class="simple">
<li>Use uppercase timezone in TimezoneAwareFunction and fix default value. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/169">Graylog2/graylog-plugin-pipeline-processor#169</a></li>
</ul>
</div>
<div class="section" id="graylog-2-2-2">
<h3>Graylog 2.2.2<a class="headerlink" href="#graylog-2-2-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-03-03</p>
<p><a class="reference external" href="https://www.graylog.org/blog/90-announcing-graylog-v2-2-2">https://www.graylog.org/blog/90-announcing-graylog-v2-2-2</a></p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Give an option to repeat alert notifications. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3511">Graylog2/graylog2-server#3511</a></li>
<li>Wait until notification types are loaded. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3534">Graylog2/graylog2-server#3534</a></li>
<li>Fixing slicing of alert conditions in pagination. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3528">Graylog2/graylog2-server#3528</a></li>
<li>Fix command line help of the server jar. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/3527">Graylog2/graylog2-server#3527</a></li>
</ul>
</div>
<div class="section" id="graylog-2-2-1">
<h3>Graylog 2.2.1<a class="headerlink" href="#graylog-2-2-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-02-20</p>
<p><a class="reference external" href="https://www.graylog.org/blog/89-announcing-graylog-v2-2-1">https://www.graylog.org/blog/89-announcing-graylog-v2-2-1</a></p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Allow version ‘0’ for structured syslog messages. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3502">Graylog2/graylog2-server#3502</a></li>
<li>Ignore <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> in <code class="docutils literal notranslate"><span class="pre">HttpTransport</span></code>. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3477">Graylog2/graylog2-server#3477</a></li>
<li>Ensure that <code class="docutils literal notranslate"><span class="pre">index_prefix</span></code> is lower case. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3476">Graylog2/graylog2-server#3476</a></li>
<li>Add missing whitespace in SystemOutputsPage. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3505">Graylog2/graylog2-server#3505</a></li>
</ul>
</div>
<div class="section" id="graylog-2-2-0">
<h3>Graylog 2.2.0<a class="headerlink" href="#graylog-2-2-0" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-02-14</p>
<p><a class="reference external" href="https://www.graylog.org/blog/88-announcing-graylog-v2-2-0">https://www.graylog.org/blog/88-announcing-graylog-v2-2-0</a></p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Warn about pipeline stream routing <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3472">Graylog2/graylog2-server#3472</a></li>
<li>Add npm shrinkwrap for 2.2.0 <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3468">Graylog2/graylog2-server#3468</a></li>
<li>Use consistent case in old message count conditions <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3454">Graylog2/graylog2-server#3454</a></li>
<li>Fix stream filter view. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3390">Graylog2/graylog2-server#3390</a></li>
<li>Use the default index set by default in stream create form. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3397">Graylog2/graylog2-server#3397</a></li>
<li>Fix broken decorator with duplicate messages. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3400">Graylog2/graylog2-server#3400</a></li>
<li>Updating index sets store when stream form is opened. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3410">Graylog2/graylog2-server#3410</a></li>
<li>Only show extractor actions on string fields. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3404">Graylog2/graylog2-server#3404</a></li>
<li>Use correct format when adding timestamp to search. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3412">Graylog2/graylog2-server#3412</a></li>
<li>Properly escape strings sent to /messages/{index}/analyze. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3418">Graylog2/graylog2-server#3418</a></li>
<li>Retain input and stream IDs in content packs. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3416">Graylog2/graylog2-server#3416</a></li>
<li>Use “order”: -1 in default index template to allow override. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3422">Graylog2/graylog2-server#3422</a></li>
<li>Improve base-line memory usage. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3425">Graylog2/graylog2-server#3425</a></li>
<li>Use condition and notification placeholders. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3432">Graylog2/graylog2-server#3432</a></li>
<li>Get field stats for indices only, which contain field. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3424">Graylog2/graylog2-server#3424</a></li>
<li>Redirect to overview after editing index set configuration. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3438">Graylog2/graylog2-server#3438</a></li>
<li>Send “stream” property when updating a decorator. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3439">Graylog2/graylog2-server#3439</a></li>
<li>Adding simple cache for index sets in MongoIndexSetRegistry. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3440">Graylog2/graylog2-server#3440</a></li>
<li>Restrict search in RecentMessageLoader to 1 hour. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3367">Graylog2/graylog2-server#3367</a></li>
<li>Remove stray whitespace in MongoIndexSet. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3371">Graylog2/graylog2-server#3371</a></li>
<li>Add more detail to index range system notification. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3372">Graylog2/graylog2-server#3372</a></li>
<li>Suppress error notification when loading a potentially missing input. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3373">Graylog2/graylog2-server#3373</a></li>
<li>Ensure resolved at is non-null on resolvedSecondsAgo. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3376">Graylog2/graylog2-server#3376</a></li>
<li>Do not allow testing a message against the default stream. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3377">Graylog2/graylog2-server#3377</a></li>
<li>Propagate shard failure in multi-index search to global search failure. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3379">Graylog2/graylog2-server#3379</a></li>
<li>Add support for arrays to “contains” stream rule. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3380">Graylog2/graylog2-server#3380</a></li>
<li>Automatically unsubscribe from DecoratorsStore in SearchPage. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3363">Graylog2/graylog2-server#3363</a></li>
<li>Keep modified search bar params when opening modal. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3384">Graylog2/graylog2-server#3384</a></li>
<li>Reset keyword content after changing range type. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3386">Graylog2/graylog2-server#3386</a></li>
<li>Disable the “set as default” action for the default index set. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3385">Graylog2/graylog2-server#3385</a></li>
<li>Unregistering component callbacks from Stream(Rules)Store. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3378">Graylog2/graylog2-server#3378</a></li>
<li>Check for stream existence when displaying replay link. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3387">Graylog2/graylog2-server#3387</a></li>
<li>Reuse Generator instance in DocumentationResource. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3293">Graylog2/graylog2-server#3293</a></li>
<li>Fix: Refreshing saved searches store after deleting one. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3309">Graylog2/graylog2-server#3309</a></li>
<li>Escape curly braces in Swagger resource URIs for challenged browsers. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3290">Graylog2/graylog2-server#3290</a></li>
<li>Unbreak Firefox by requesting JSON when pinging the API <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3312">Graylog2/graylog2-server#3312</a></li>
<li>Escape search query when using surrounding search. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3314">Graylog2/graylog2-server#3314</a></li>
<li>Close idle GELF HTTP connections after a timeout. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3315">Graylog2/graylog2-server#3315</a></li>
<li>Ensure that index ranges are deleted when an index set is removed. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3310">Graylog2/graylog2-server#3310</a></li>
<li>Ignore reopened indices for count-based retention strategies. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3321">Graylog2/graylog2-server#3321</a></li>
<li>Ignore deprecated “default” field in IndexSetConfig. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3329">Graylog2/graylog2-server#3329</a></li>
<li>Use last executed search data on auto-refresh. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3330">Graylog2/graylog2-server#3330</a></li>
<li>Show stats for each index set on the index sets overview page. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3322">Graylog2/graylog2-server#3322</a></li>
<li>Not fetching/checking unnecessary streams in AlertScannerThread. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3336">Graylog2/graylog2-server#3336</a></li>
<li>Add more metrics for extractors. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3332">Graylog2/graylog2-server#3332</a></li>
<li>Saved search improvements. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3338">Graylog2/graylog2-server#3338</a></li>
<li>Warn when neither reader nor admin roles are selected for a user. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3337">Graylog2/graylog2-server#3337</a></li>
<li>Prevent setting default index set readonly. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3339">Graylog2/graylog2-server#3339</a></li>
<li>Add migration to fix parameter value types for alert conditions. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3340">Graylog2/graylog2-server#3340</a></li>
<li>Fix unlock dashboard from link. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3344">Graylog2/graylog2-server#3344</a></li>
<li>Allow re-configuration of shards and replicas in the UI. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3349">Graylog2/graylog2-server#3349</a></li>
<li>Adapt grace period to latest changes in alerts. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3346">Graylog2/graylog2-server#3346</a></li>
<li>Go back in history instead to users page when canceling user form. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3350">Graylog2/graylog2-server#3350</a></li>
<li>Improve wrapping of entity title and description. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3351">Graylog2/graylog2-server#3351</a></li>
<li>Keep stream filter after editing stream. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3352">Graylog2/graylog2-server#3352</a></li>
<li>Guard against duplication key error from MongoDB. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3358">Graylog2/graylog2-server#3358</a></li>
<li>Keep calling convention of SearchPage._refreshData consistent. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3357">Graylog2/graylog2-server#3357</a></li>
<li>Creating MongoDB indices in services running conditional queries. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3345">Graylog2/graylog2-server#3345</a></li>
<li>Fix NPE in MongoDbSessionDAO#doDelete(). <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3227">Graylog2/graylog2-server#3227</a></li>
<li>Support syslog messages with ISO-8601 timestamps. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3228">Graylog2/graylog2-server#3228</a></li>
<li>Use local copies of Droid Sans font in Swagger UI. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3229">Graylog2/graylog2-server#3229</a></li>
<li>Remove empty row if input description is empty. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3237">Graylog2/graylog2-server#3237</a></li>
<li>Make “sender” optional in EmailAlarmCallback. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3224">Graylog2/graylog2-server#3224</a></li>
<li>Fix URL for throbber image. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3242">Graylog2/graylog2-server#3242</a></li>
<li>Remove special handling in SplitAndCountConverter. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3230">Graylog2/graylog2-server#3230</a></li>
<li>Add missing AuditBindings to journal commands. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3226">Graylog2/graylog2-server#3226</a></li>
<li>Don’t check private key/certificate if REST API and web interface on same port. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3231">Graylog2/graylog2-server#3231</a></li>
<li>Add configuration settings for timeout and concurrency of OptimizeIndexJob. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3225">Graylog2/graylog2-server#3225</a></li>
<li>Change way of exporting CSV search results. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3238">Graylog2/graylog2-server#3238</a></li>
<li>Add space in processing limit notification. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3256">Graylog2/graylog2-server#3256</a></li>
<li>Only recalculate index set ranges in index set maintenance menu. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3252">Graylog2/graylog2-server#3252</a></li>
<li>Fix alert condition validations. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3257">Graylog2/graylog2-server#3257</a></li>
<li>Validate alarm callbacks before saving them. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3262">Graylog2/graylog2-server#3262</a></li>
<li>Only update index ranges for managed indices. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3259">Graylog2/graylog2-server#3259</a></li>
<li>Resolve alerts from deleted alert conditions. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3265">Graylog2/graylog2-server#3265</a></li>
<li>Alert UI changes. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3266">Graylog2/graylog2-server#3266</a></li>
<li>Properly track stream throughput for the default stream. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3278">Graylog2/graylog2-server#3278</a></li>
<li>Add support for OPTIONS request to HttpTransport. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3234">Graylog2/graylog2-server#3234</a></li>
<li>Add list of stream IDs to Message#toElasticSearchObject(). <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3277">Graylog2/graylog2-server#3277</a></li>
<li>Fix document counts with an empty index set. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3291">Graylog2/graylog2-server#3291</a></li>
<li>Handle ElasticsearchException in Counts class. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3288">Graylog2/graylog2-server#3288</a></li>
<li>Move client-side split/import of Grok pattern files to server. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3284">Graylog2/graylog2-server#3284</a></li>
<li>Showing index set in stream listing only if user is permitted to. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3300">Graylog2/graylog2-server#3300</a></li>
<li>Fix reloading after notification changes. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3264">Graylog2/graylog2-server#3264</a></li>
<li>Add “messages:analyze” permission to reader permission set. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3305">Graylog2/graylog2-server#3305</a></li>
<li>Disable alarm notification controls if user is not permitted to edit. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3303">Graylog2/graylog2-server#3303</a></li>
<li>Changing conditional to check for presence of index set definition. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3304">Graylog2/graylog2-server#3304</a></li>
<li>Allow to get a thread dump as plain text. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3289">Graylog2/graylog2-server#3289</a></li>
<li>Add missing authentication to ClusterResource and ClusterStatsResource. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3279">Graylog2/graylog2-server#3279</a></li>
<li>Save anchor and last rotation in TimeBasedRotationStrategy depending on IndexSet. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3306">Graylog2/graylog2-server#3306</a></li>
<li>Fix loading of plugins in development mode. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3185">Graylog2/graylog2-server#3185</a></li>
<li>Add contains string tester. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3186">Graylog2/graylog2-server#3186</a></li>
<li>Index set fixes. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3193">Graylog2/graylog2-server#3193</a></li>
<li>Add synthetic JavaBean getters to AutoValue classes. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3188">Graylog2/graylog2-server#3188</a></li>
<li>Improve IndexSetValidator. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3197">Graylog2/graylog2-server#3197</a></li>
<li>Add custom Jackson (de-) serializer for ZonedDateTime and DateTime. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3198">Graylog2/graylog2-server#3198</a></li>
<li>Improved alarm callback testing. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3196">Graylog2/graylog2-server#3196</a></li>
<li>Fix DateTime serialization. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3202">Graylog2/graylog2-server#3202</a></li>
<li>Fix labels on field graphs. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3204">Graylog2/graylog2-server#3204</a></li>
<li>Alerts cleanup. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3205">Graylog2/graylog2-server#3205</a></li>
<li>Index set UI fixes. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3203">Graylog2/graylog2-server#3203</a></li>
<li>Fix quickvalues and field statistics refresh. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3206">Graylog2/graylog2-server#3206</a></li>
<li>Allow fetching streams by index set ID. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3207">Graylog2/graylog2-server#3207</a></li>
<li>UI improvements. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3213">Graylog2/graylog2-server#3213</a></li>
<li>IndexSet default setting. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3209">Graylog2/graylog2-server#3209</a></li>
<li>Alerts UI improvements. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3214">Graylog2/graylog2-server#3214</a></li>
<li>Create DefaultIndexSetConfig when creating the default index set. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3215">Graylog2/graylog2-server#3215</a></li>
<li>ClusterEventPeriodical must use MongoJackObjectMapper. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3217">Graylog2/graylog2-server#3217</a></li>
<li>Fix V20161130141500_DefaultStreamRecalcIndexRanges. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3222">Graylog2/graylog2-server#3222</a></li>
<li>Migration improvements. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3211">Graylog2/graylog2-server#3211</a></li>
</ul>
<p><strong>Beats plugin</strong></p>
<ul class="simple">
<li>Add support for Metricbeat</li>
<li>Extract “fields” for every type of beat</li>
</ul>
<p><strong>Pipeline processor plugin</strong></p>
<ul class="simple">
<li>Allow duplicate stream titles in route_to_stream. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/154">Graylog2/graylog-plugin-pipeline-processor#154</a></li>
<li>Do not use lambdas with gauge metrics. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/152">Graylog2/graylog-plugin-pipeline-processor#152</a></li>
<li>Add clone_message() function. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/153">Graylog2/graylog-plugin-pipeline-processor#153</a></li>
<li>Track total pipeline interpreter executionTime as a single metric. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/155">Graylog2/graylog-plugin-pipeline-processor#155</a></li>
</ul>
<p><strong>Collector sidecar plugin</strong></p>
<ul class="simple">
<li>Fix: Reload on Beats configuration change.</li>
<li>Update Beats to version 5.1.1</li>
<li>Fix race conditions in start/stop/restart code for the exec runner <a class="reference external" href="https://github.com/Graylog2/collector-sidecar/issues/123">Graylog2/collector-sidecar#123</a></li>
<li>Add debug switch <a class="reference external" href="https://github.com/Graylog2/collector-sidecar/issues/124">Graylog2/collector-sidecar#124</a></li>
<li>Using Modern UI in a standard way (thanks to <a class="reference external" href="https://github.com/nicozanf">&#64;nicozanf</a>) <a class="reference external" href="https://github.com/Graylog2/collector-sidecar/issues/125">Graylog2/collector-sidecar#125</a></li>
<li>Extract etag cache into its own service. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-collector/issues/43">Graylog2/graylog-plugin-collector#43</a></li>
</ul>
</div>
<div class="section" id="graylog-2-1-3">
<h3>Graylog 2.1.3<a class="headerlink" href="#graylog-2-1-3" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-01-26</p>
<p><a class="reference external" href="https://www.graylog.org/blog/84-announcing-graylog-2-1-3">https://www.graylog.org/blog/84-announcing-graylog-2-1-3</a></p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Use “order”: -1 in default index template to allow override. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3426">Graylog2/graylog2-server#3426</a></li>
<li>Add missing authentication to ClusterResource and ClusterStatsResource. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3427">Graylog2/graylog2-server#3427</a></li>
<li>Unbreak Firefox by requesting JSON when pinging the API. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3430">Graylog2/graylog2-server#3430</a></li>
<li>Use custom Grizzly error page to prevent XSS. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3428">Graylog2/graylog2-server#3428</a></li>
</ul>
<p><strong>Beats plugin</strong></p>
<ul class="simple">
<li>Add support for Metricbeat. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-beats/issues/19">Graylog2/graylog-plugin-beats#19</a></li>
<li>Extract “fields” for every type of beat. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-beats/issues/18">Graylog2/graylog-plugin-beats#18</a></li>
</ul>
</div>
<div class="section" id="graylog-2-1-2">
<h3>Graylog 2.1.2<a class="headerlink" href="#graylog-2-1-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2016-11-04</p>
<p><a class="reference external" href="https://www.graylog.org/blog/75-announcing-graylog-v2-1-2">https://www.graylog.org/blog/75-announcing-graylog-v2-1-2</a></p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Improve logging in DecodingProcessor. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3025">Graylog2/graylog2-server#3025</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3034">Graylog2/graylog2-server#3034</a></li>
<li>Support all ZLIB compression levels for GELF messages. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3022">Graylog2/graylog2-server#3022</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3036">Graylog2/graylog2-server#3036</a></li>
<li>Implement “contains” stream rule. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3020">Graylog2/graylog2-server#3020</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3037">Graylog2/graylog2-server#3037</a></li>
<li>Make ValidatorProvider a Singleton. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3019">Graylog2/graylog2-server#3019</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3038">Graylog2/graylog2-server#3038</a></li>
<li>Fix NPE in MongoProbe if MongoDB doesn’t run with MMAPv1. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3018">Graylog2/graylog2-server#3018</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3039">Graylog2/graylog2-server#3039</a></li>
<li>Fix NPE in Indices#numberOfMessages(String). <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3016">Graylog2/graylog2-server#3016</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3041">Graylog2/graylog2-server#3041</a></li>
<li>Only create new LdapConnectionConfig if LDAP is enabled. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3017">Graylog2/graylog2-server#3017</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3040">Graylog2/graylog2-server#3040</a></li>
<li>Properly track replace-all flag and pass through to API. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3023">Graylog2/graylog2-server#3023</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3043">Graylog2/graylog2-server#3043</a></li>
<li>Replace Jersey GZipEncoder with Grizzly’s GZipFilter. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3021">Graylog2/graylog2-server#3021</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3044">Graylog2/graylog2-server#3044</a></li>
<li>Prevent n+1 query loading for Stream Rules. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3024">Graylog2/graylog2-server#3024</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3035">Graylog2/graylog2-server#3035</a>. Thank you <a class="reference external" href="https://github.com/bjoernhaeuser">&#64;bjoernhaeuser</a>!</li>
<li>Handle search execution errors. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3027">Graylog2/graylog2-server#3027</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3045">Graylog2/graylog2-server#3045</a></li>
<li>Calculate cardinality on field graphs. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3028">Graylog2/graylog2-server#3028</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3046">Graylog2/graylog2-server#3046</a></li>
<li>Update stats function in field graph description. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3029">Graylog2/graylog2-server#3029</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3047">Graylog2/graylog2-server#3047</a></li>
<li>Use response status 500 if search failed but wasn’t syntax error. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3026">Graylog2/graylog2-server#3026</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3042">Graylog2/graylog2-server#3042</a></li>
<li>Improved search indicators. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3031">Graylog2/graylog2-server#3031</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3050">Graylog2/graylog2-server#3050</a></li>
<li>Fix field analyzers loading when search changes. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3030">Graylog2/graylog2-server#3030</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3049">Graylog2/graylog2-server#3049</a></li>
<li>Close search query autocompletion on enter. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3032">Graylog2/graylog2-server#3032</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3051">Graylog2/graylog2-server#3051</a></li>
<li>Refresh stream search when stream changes. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3033">Graylog2/graylog2-server#3033</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3052">Graylog2/graylog2-server#3052</a></li>
<li>Update Joda-Time and moment-timezone. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3059">Graylog2/graylog2-server#3059</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3060">Graylog2/graylog2-server#3060</a></li>
<li>Search button does not always trigger a new search. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3062">Graylog2/graylog2-server#3062</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/3063">Graylog2/graylog2-server#3063</a></li>
</ul>
<p><strong>Beats plugin</strong></p>
<ul class="simple">
<li>Fix frame decoding in case of lost connection. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-beats/issues/14">Graylog2/graylog-plugin-beats#14</a>, <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-beats/issues/15">Graylog2/graylog-plugin-beats#15</a>, <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-beats/issues/17">Graylog2/graylog-plugin-beats#17</a>. Thank you <a class="reference external" href="https://github.com/hc4">&#64;hc4</a>!</li>
<li>Support messages &gt;1024 bytes in BeatsFrameDecoder. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-beats/issues/10">Graylog2/graylog-plugin-beats#10</a>, <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-beats/issues/12">Graylog2/graylog-plugin-beats#12</a></li>
</ul>
<p><strong>Pipeline processor plugin</strong></p>
<ul class="simple">
<li>Don’t doubly negate the value of the expression. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/126">Graylog2/graylog-plugin-pipeline-processor#126</a>, <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/127">Graylog2/graylog-plugin-pipeline-processor#127</a></li>
</ul>
</div>
<div class="section" id="graylog-2-1-1">
<h3>Graylog 2.1.1<a class="headerlink" href="#graylog-2-1-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2016-09-14</p>
<p><a class="reference external" href="https://www.graylog.org/blog/69-announcing-graylog-v2-1-1">https://www.graylog.org/blog/69-announcing-graylog-v2-1-1</a></p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Proxied requests query other nodes in parallel. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2764">Graylog2/graylog2-server#2764</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2779">Graylog2/graylog2-server#2779</a></li>
<li>Fix 404s on IE 11 using compatibility view. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2768">Graylog2/graylog2-server#2768</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2782">Graylog2/graylog2-server#2782</a></li>
<li>Modify actions in search page triggering a page reload. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2488">Graylog2/graylog2-server#2488</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2798">Graylog2/graylog2-server#2798</a></li>
<li>Do not display login form while loading. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2770">Graylog2/graylog2-server#2770</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2802">Graylog2/graylog2-server#2802</a></li>
<li>Check in SearchPage if search is in progress, reuse promise then. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2799">Graylog2/graylog2-server#2799</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2803">Graylog2/graylog2-server#2803</a></li>
<li>Use index and message_id as message identifier. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2801">Graylog2/graylog2-server#2801</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2804">Graylog2/graylog2-server#2804</a></li>
<li>Fix: file handle leak in KeyUtil (SSL). <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2808">Graylog2/graylog2-server#2808</a>. Thank you <a class="reference external" href="https://github.com/gbu-censhare">&#64;gbu-censhare</a>!</li>
<li>Use current search time configuration for CSV export. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2795">Graylog2/graylog2-server#2795</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2809">Graylog2/graylog2-server#2809</a></li>
<li>Explicitly close okhttp response body, avoiding leak connection warning. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2811">Graylog2/graylog2-server#2811</a>. Thank you <a class="reference external" href="https://github.com/chainkite">&#64;chainkite</a>!</li>
<li>Properly close OkHttp Response objects to avoid resource leaks. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2812">Graylog2/graylog2-server#2812</a></li>
<li>Remove ldap settings check from authenticators. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2817">Graylog2/graylog2-server#2817</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2820">Graylog2/graylog2-server#2820</a></li>
</ul>
<p><strong>Map plugin</strong></p>
<ul class="simple">
<li>Ignore internal message fields (starting with “gl2_”). <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-map-widget/issues/17">Graylog2/graylog-plugin-map-widget#17</a></li>
</ul>
<p><strong>Pipeline processor plugin</strong></p>
<ul class="simple">
<li>Display boolean values in pipeline simulator. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/54">Graylog2/graylog-plugin-pipeline-processor#54</a>, <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/99">Graylog2/graylog-plugin-pipeline-processor#99</a></li>
<li>Use case insensitive lookup for timezone IDs. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/100">Graylog2/graylog-plugin-pipeline-processor#100</a>, <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/102">Graylog2/graylog-plugin-pipeline-processor#102</a></li>
</ul>
</div>
<div class="section" id="graylog-2-1-0">
<h3>Graylog 2.1.0<a class="headerlink" href="#graylog-2-1-0" title="Permalink to this headline">¶</a></h3>
<p>Released: 2016-09-01</p>
<p><a class="reference external" href="https://www.graylog.org/blog/68-announcing-graylog-v-2-1-0-ga">https://www.graylog.org/blog/68-announcing-graylog-v-2-1-0-ga</a></p>
<p><strong>Core</strong></p>
<ul class="simple">
<li>Refactoring of audit events.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2687">Graylog2/graylog2-server#2687</a></li>
<li>Add a prop to display/hide the page selector.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2711">Graylog2/graylog2-server#2711</a></li>
<li>Ensure that <code class="docutils literal notranslate"><span class="pre">rest_transport_uri</span></code> can override the URI scheme of <code class="docutils literal notranslate"><span class="pre">rest_listen_uri</span></code>.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2680">Graylog2/graylog2-server#2680</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2704">Graylog2/graylog2-server#2704</a></li>
<li>Handle indexer cluster down in web interface.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2623">Graylog2/graylog2-server#2623</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2713">Graylog2/graylog2-server#2713</a></li>
<li>Prevent NPE and verbose logging if converter returns null.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2717">Graylog2/graylog2-server#2717</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2729">Graylog2/graylog2-server#2729</a></li>
<li>Let widget replay search button open in a new tab or window.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2725">Graylog2/graylog2-server#2725</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2726">Graylog2/graylog2-server#2726</a></li>
<li>Return <code class="docutils literal notranslate"><span class="pre">&quot;id&quot;</span></code> instead of <code class="docutils literal notranslate"><span class="pre">&quot;_id&quot;</span></code> for message decorators.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2734">Graylog2/graylog2-server#2734</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2735">Graylog2/graylog2-server#2735</a></li>
<li>Make id field consistent for alarm callback histories.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2737">Graylog2/graylog2-server#2737</a></li>
<li>Audit event changes.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2718">Graylog2/graylog2-server#2718</a></li>
<li>Let specific stores reuse promises if request is in progress.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2625">Graylog2/graylog2-server#2625</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2712">Graylog2/graylog2-server#2712</a></li>
<li>Disable editing controls for decorator if user lacks permissions.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2730">Graylog2/graylog2-server#2730</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2736">Graylog2/graylog2-server#2736</a></li>
<li>Styling of decorator list.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2743">Graylog2/graylog2-server#2743</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2744">Graylog2/graylog2-server#2744</a></li>
<li>Do not load plugins for journal commands.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2667">Graylog2/graylog2-server#2667</a></li>
<li>Use proper other count for pie chart slices.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2639">Graylog2/graylog2-server#2639</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2671">Graylog2/graylog2-server#2671</a></li>
<li>Removing unused prop type in StreamRuleList component.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2673">Graylog2/graylog2-server#2673</a></li>
<li>Add a generic search form component. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2678">Graylog2/graylog2-server#2678</a></li>
<li>Decorator improvements. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2519">Graylog2/graylog2-server#2519</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2666">Graylog2/graylog2-server#2666</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2674">Graylog2/graylog2-server#2674</a></li>
<li>Only show notification link when there are notifications.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2677">Graylog2/graylog2-server#2677</a></li>
<li>Enable gzip per default for REST API listener.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2670">Graylog2/graylog2-server#2670</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2672">Graylog2/graylog2-server#2672</a></li>
<li>Improvements in raw message loader. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2684">Graylog2/graylog2-server#2684</a></li>
<li>Allow users of MessageFields to disable field actions.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2685">Graylog2/graylog2-server#2685</a></li>
<li>Generating a relative redirect URL for web interface in root
resource. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2593">Graylog2/graylog2-server#2593</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2675">Graylog2/graylog2-server#2675</a></li>
<li>Add help text for session’s client address.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2656">Graylog2/graylog2-server#2656</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2692">Graylog2/graylog2-server#2692</a></li>
<li>Fix content pack extractor validation.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2663">Graylog2/graylog2-server#2663</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2697">Graylog2/graylog2-server#2697</a></li>
<li>Reset users’ startpages if referenced stream/dashboard is deleted.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2400">Graylog2/graylog2-server#2400</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2695">Graylog2/graylog2-server#2695</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2702">Graylog2/graylog2-server#2702</a></li>
<li>Fix token creation via API browser. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2668">Graylog2/graylog2-server#2668</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2698">Graylog2/graylog2-server#2698</a></li>
<li>Allow surrounding search to be opened in new tab.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2531">Graylog2/graylog2-server#2531</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2699">Graylog2/graylog2-server#2699</a></li>
<li>Reformatting component, adding error handler for fetching dashboard.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2576">Graylog2/graylog2-server#2576</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2703">Graylog2/graylog2-server#2703</a></li>
<li>Add format string message decorator. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2660">Graylog2/graylog2-server#2660</a></li>
<li>Reloading CurrentUserStore when updated user is the current user.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2705">Graylog2/graylog2-server#2705</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2706">Graylog2/graylog2-server#2706</a></li>
<li>General UI improvements <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2700">Graylog2/graylog2-server#2700</a></li>
<li>Add Syslog severity mapper decorator.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2590">Graylog2/graylog2-server#2590</a></li>
<li>Improvements in message decorators.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2592">Graylog2/graylog2-server#2592</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2591">Graylog2/graylog2-server#2591</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2598">Graylog2/graylog2-server#2598</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2654">Graylog2/graylog2-server#2654</a></li>
<li>Revert “Move link to API Browser into System menu”.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2586">Graylog2/graylog2-server#2586</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2587">Graylog2/graylog2-server#2587</a></li>
<li>Print - instead of null when client did not provide user agent
header.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2601">Graylog2/graylog2-server#2601</a>.
Thank you <a class="reference external" href="https://github.com/mikkolehtisalo">&#64;mikkolehtisalo</a>!</li>
<li>Change logging in normalizeDn() to debug to avoid noisy warnings.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2599">Graylog2/graylog2-server#2599</a></li>
<li>Ensure that <code class="docutils literal notranslate"><span class="pre">{rest,web}_{listen,transport,endpoint}_uri</span></code> settings are
absolute URIs.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2589">Graylog2/graylog2-server#2589</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2596">Graylog2/graylog2-server#2596</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2600">Graylog2/graylog2-server#2600</a></li>
<li>Use HTTP and HTTPS default ports for network settings.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2595">Graylog2/graylog2-server#2595</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2605">Graylog2/graylog2-server#2605</a></li>
<li>Dashboard improvements.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2084">Graylog2/graylog2-server#2084</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2281">Graylog2/graylog2-server#2281</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2626">Graylog2/graylog2-server#2626</a></li>
<li>Ensure that <code class="docutils literal notranslate"><span class="pre">password_secret</span></code> is at least 16 characters long.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2619">Graylog2/graylog2-server#2619</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2622">Graylog2/graylog2-server#2622</a></li>
<li>Reduce production .js files sizes by 51%.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2617">Graylog2/graylog2-server#2617</a></li>
<li>Allow <code class="docutils literal notranslate"><span class="pre">web_endpoint_uri</span></code> to be a relative URI.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2600">Graylog2/graylog2-server#2600</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2614">Graylog2/graylog2-server#2614</a></li>
<li>Use default session attribute for principal.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2620">Graylog2/graylog2-server#2620</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2621">Graylog2/graylog2-server#2621</a></li>
<li>Compile regex pattern for MetricFilter only once.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2637">Graylog2/graylog2-server#2637</a>.
Thank you again
<a class="reference external" href="https://github.com/mikkolehtisalo">&#64;mikkolehtisalo</a>!</li>
<li>Fix NPE in Indices#checkForReopened(IndexMetaData).
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2628">Graylog2/graylog2-server#2628</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2635">Graylog2/graylog2-server#2635</a></li>
<li>Mark message offset as committed in case of a decoding error.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2627">Graylog2/graylog2-server#2627</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2643">Graylog2/graylog2-server#2643</a></li>
<li>Fix cloning streams and editing legacy stream rules.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2244">Graylog2/graylog2-server#2244</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2346">Graylog2/graylog2-server#2346</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2646">Graylog2/graylog2-server#2646</a></li>
<li>Add back storing of index failures in MongoDB.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2633">Graylog2/graylog2-server#2633</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2644">Graylog2/graylog2-server#2644</a></li>
<li>Enable running Graylog REST API on different context path.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2603">Graylog2/graylog2-server#2603</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2397">Graylog2/graylog2-server#2397</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2634">Graylog2/graylog2-server#2634</a></li>
<li>Add support for ECDSA private keys to KeyUtil.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2454">Graylog2/graylog2-server#2454</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2641">Graylog2/graylog2-server#2641</a></li>
<li>Check for conflict of <code class="docutils literal notranslate"><span class="pre">rest_listen_uri</span></code> and <code class="docutils literal notranslate"><span class="pre">web_listen_uri</span></code>.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2634">Graylog2/graylog2-server#2634</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2652">Graylog2/graylog2-server#2652</a></li>
<li>Remove uppercase example decorator before 2.1 final.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2588">Graylog2/graylog2-server#2588</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/73">Graylog2/graylog-plugin-pipeline-processor#73</a></li>
<li>Make sure to include charset in getBytes and other relevant code
sections.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2567">Graylog2/graylog2-server#2567</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2574">Graylog2/graylog2-server#2574</a></li>
<li>Landing page greets with 2.0 in 2.1.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2579">Graylog2/graylog2-server#2579</a></li>
<li>Run WebAppNotFoundResponseFilter later and for GET requests only.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2657">Graylog2/graylog2-server#2657</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2664">Graylog2/graylog2-server#2664</a></li>
<li>Update dependencies.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2543">Graylog2/graylog2-server#2543</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2565">Graylog2/graylog2-server#2565</a></li>
<li>Allowing to run REST API and web interface on same port.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2515">Graylog2/graylog2-server#2515</a></li>
<li>Changing default to make REST API and web if to listen on same
host/port.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2446">Graylog2/graylog2-server#2446</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2525">Graylog2/graylog2-server#2525</a></li>
<li>Change plugin REST resource injection to use Class instances.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2492">Graylog2/graylog2-server#2492</a></li>
<li>Validate that Elasticsearch home/data paths are readable.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2536">Graylog2/graylog2-server#2536</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2538">Graylog2/graylog2-server#2538</a></li>
<li>Fix Version#fromClasspathProperties() when loading from JAR plugin.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2535">Graylog2/graylog2-server#2535</a></li>
<li>Decorator UI Fixes.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2539">Graylog2/graylog2-server#2539</a></li>
<li>Fix timing issue in MessageCountAlertCondition.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1704">Graylog2/graylog2-server#1704</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2382">Graylog2/graylog2-server#2382</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2546">Graylog2/graylog2-server#2546</a></li>
<li>For HttpHeadersToken pass actual remote address.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2556">Graylog2/graylog2-server#2556</a></li>
<li>Do not blindly override permission set of ldap users.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2516">Graylog2/graylog2-server#2516</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2529">Graylog2/graylog2-server#2529</a></li>
<li>Display original date time of index ranges on hover.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2549">Graylog2/graylog2-server#2549</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2552">Graylog2/graylog2-server#2552</a></li>
<li>Make it possible for plugins to request a shared class loader.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2436">Graylog2/graylog2-server#2436</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2508">Graylog2/graylog2-server#2508</a></li>
<li>Fix REST API browser after changes to the PluginRestResource
injection.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2550">Graylog2/graylog2-server#2550</a></li>
<li>Make version comparison more lenient with pre-release versions.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2462">Graylog2/graylog2-server#2462</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2548">Graylog2/graylog2-server#2548</a></li>
<li>Always trim message field values on Message class.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1936">Graylog2/graylog2-server#1936</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2510">Graylog2/graylog2-server#2510</a></li>
<li>Fix search results console warnings.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2527">Graylog2/graylog2-server#2527</a></li>
<li>Fix bulk import of Grok patterns.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2229">Graylog2/graylog2-server#2229</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2561">Graylog2/graylog2-server#2561</a></li>
<li>Add helper method to add AuditLogAppenders.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2562">Graylog2/graylog2-server#2562</a></li>
<li>Add explanation about the configuration file format.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2563">Graylog2/graylog2-server#2563</a></li>
<li>Display session information, fix usability in user list, editing
users.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2526">Graylog2/graylog2-server#2526</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2528">Graylog2/graylog2-server#2528</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2540">Graylog2/graylog2-server#2540</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2541">Graylog2/graylog2-server#2541</a></li>
<li>Fix issues with app prefix.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2564">Graylog2/graylog2-server#2564</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2583">Graylog2/graylog2-server#2583</a></li>
<li>Fix extractor and static fields creation in multi-node setups.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2580">Graylog2/graylog2-server#2580</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2584">Graylog2/graylog2-server#2584</a></li>
<li>Authentication improvements.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2572">Graylog2/graylog2-server#2572</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2573">Graylog2/graylog2-server#2573</a></li>
<li>Move Error Prone into default build profile.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2575">Graylog2/graylog2-server#2575</a></li>
<li>Journal info command does not work.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2493">Graylog2/graylog2-server#2493</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2495">Graylog2/graylog2-server#2495</a></li>
<li>Search result highlighting color similar to white.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2480">Graylog2/graylog2-server#2480</a></li>
<li>Cannot POST on Regex Tester (error 500).
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2471">Graylog2/graylog2-server#2471</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2472">Graylog2/graylog2-server#2472</a></li>
<li>Middle-clicking to open new tab not working for some System menu
items.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2468">Graylog2/graylog2-server#2468</a></li>
<li>Json extractor should check for valid lucene keys.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2434">Graylog2/graylog2-server#2434</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2481">Graylog2/graylog2-server#2481</a></li>
<li>Elasticsearch Red cluster state triggered by index rotation under
some conditions.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2371">Graylog2/graylog2-server#2371</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2429">Graylog2/graylog2-server#2429</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2477">Graylog2/graylog2-server#2477</a></li>
<li>Report syntax error when search query contains unescaped slash.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2372">Graylog2/graylog2-server#2372</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2450">Graylog2/graylog2-server#2450</a></li>
<li>Allowing path prefixes in <code class="docutils literal notranslate"><span class="pre">web_listen_uri</span></code> so web interface is
accessible via path != “/”.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2271">Graylog2/graylog2-server#2271</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2440">Graylog2/graylog2-server#2440</a></li>
<li>LDAP group mapping: stringwise comparison fails due to different DN
formats.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1790">Graylog2/graylog2-server#1790</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2484">Graylog2/graylog2-server#2484</a></li>
<li>Json extractor prefix.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1646">Graylog2/graylog2-server#1646</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2481">Graylog2/graylog2-server#2481</a></li>
<li>LDAP users are shown a change password form.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2124">Graylog2/graylog2-server#2124</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2327">Graylog2/graylog2-server#2327</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2485">Graylog2/graylog2-server#2485</a></li>
<li>Switch message filters from polling to subscribing to change events.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2391">Graylog2/graylog2-server#2391</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2496">Graylog2/graylog2-server#2496</a></li>
<li>Make auth providers fully pluggable.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2232">Graylog2/graylog2-server#2232</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2367">Graylog2/graylog2-server#2367</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2522">Graylog2/graylog2-server#2522</a></li>
<li>Grok extractor: Allow returning only named captures.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1486">Graylog2/graylog2-server#1486</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2500">Graylog2/graylog2-server#2500</a></li>
<li>Attempt reading DSA key if RSA failed.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2503">Graylog2/graylog2-server#2503</a>.
Special thanks to
<a class="reference external" href="https://github.com/mikkolehtisalo">&#64;mikkolehtisalo</a>!</li>
<li>Fix session validation propagation.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2498">Graylog2/graylog2-server#2498</a></li>
<li>A wrapper to protect from decompression bombs.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2339">Graylog2/graylog2-server#2339</a>.
Thank you again,
<a class="reference external" href="https://github.com/mikkolehtisalo">&#64;mikkolehtisalo</a>!</li>
<li>Make exceptions more useful by providing messages and context.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2478">Graylog2/graylog2-server#2478</a></li>
<li>Decorate search results.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2408">Graylog2/graylog2-server#2408</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2482">Graylog2/graylog2-server#2482</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2499">Graylog2/graylog2-server#2499</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/41">Graylog2/graylog-plugin-pipeline-processor#41</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/43">Graylog2/graylog-plugin-pipeline-processor#43</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/52">Graylog2/graylog-plugin-pipeline-processor#52</a></li>
<li>Introduce CombinedProvider to sync actions and stores initialization.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2523">Graylog2/graylog2-server#2523</a></li>
<li>Actually use the bluebird promise in FetchProvider. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2762">Graylog2/graylog2-server#2762</a></li>
<li>Audit event cleanup. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2746">Graylog2/graylog2-server#2746</a></li>
<li>Update documentation links. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2759">Graylog2/graylog2-server#2759</a></li>
<li>Allow child elements in the search form. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2756">Graylog2/graylog2-server#2756</a></li>
<li>Make key_prefix configuration optional. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2755">Graylog2/graylog2-server#2755</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2757">Graylog2/graylog2-server#2757</a></li>
<li>Invalidating widget result cache cluster wide when a widget changes. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2732">Graylog2/graylog2-server#2732</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2745">Graylog2/graylog2-server#2745</a></li>
<li>Correct documentation links in ‘misc/graylog.conf’. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2747">Graylog2/graylog2-server#2747</a>. Thank you <a class="reference external" href="https://github.com/supahgreg">&#64;supahgreg</a>!</li>
<li>Throttle LB status if journal utilization is too high.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1100">Graylog2/graylog2-server#1100</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1952">Graylog2/graylog2-server#1952</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2312">Graylog2/graylog2-server#2312</a>.
Thank you <a class="reference external" href="https://github.com/mikkolehtisalo">&#64;mikkolehtisalo</a>!</li>
<li>TLS ciphers for inputs should probably be configurable.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2051">Graylog2/graylog2-server#2051</a>.</li>
<li>SelfSignedCertificate should migrate from sun.security.*.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2132">Graylog2/graylog2-server#2132</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2316">Graylog2/graylog2-server#2316</a>.
Thank you <a class="reference external" href="https://github.com/mikkolehtisalo">&#64;mikkolehtisalo</a>!</li>
<li>Fix formatting metric names including more than one namespace prefix.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2254">Graylog2/graylog2-server#2254</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2425">Graylog2/graylog2-server#2425</a>.</li>
<li>Waiting for index range calculation before switching deflector alias.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2264">Graylog2/graylog2-server#2264</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2278">Graylog2/graylog2-server#2278</a>.</li>
<li>Specify application.context.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2271">Graylog2/graylog2-server#2271</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2440">Graylog2/graylog2-server#2440</a>.</li>
<li>Add handler for / in the Graylog REST API.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2376">Graylog2/graylog2-server#2376</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2377">Graylog2/graylog2-server#2377</a>.</li>
<li>User preferred timezone not saved.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2393">Graylog2/graylog2-server#2393</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2395">Graylog2/graylog2-server#2395</a>.</li>
<li>Unable to delete closed index.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2419">Graylog2/graylog2-server#2419</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2437">Graylog2/graylog2-server#2437</a>.</li>
<li>Absolute search results in widget using wrong time.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2428">Graylog2/graylog2-server#2428</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2452">Graylog2/graylog2-server#2452</a>.</li>
<li>Upgrade to Kafka 0.9.0.1.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1912">Graylog2/graylog2-server#1912</a>.</li>
<li>RestAccessLogFilter to use X-Forwarded-For set by trusted proxies.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1981">Graylog2/graylog2-server#1981</a>.
Thank you <a class="reference external" href="https://github.com/mikkolehtisalo">&#64;mikkolehtisalo</a>!</li>
<li>Upgrade to Drools 6.4.0.Final.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2106">Graylog2/graylog2-server#2106</a>.</li>
<li>Stream Rule Titles.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2244">Graylog2/graylog2-server#2244</a>.</li>
<li>Improve search with no results page.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2253">Graylog2/graylog2-server#2253</a>.</li>
<li>Refactor Version class to use com.github.zafarkhaja.semver.Version.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2275">Graylog2/graylog2-server#2275</a>.</li>
<li>Alert condition titles.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2282">Graylog2/graylog2-server#2282</a>.</li>
<li>Upgrade to Jackson 2.7.4.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2304">Graylog2/graylog2-server#2304</a>.</li>
<li>Support changes for pipeline processor simulator.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2320">Graylog2/graylog2-server#2320</a>.</li>
<li>Add dependency on jna to fix chatty Elasticseach log message.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2342">Graylog2/graylog2-server#2342</a>.</li>
<li>Interfaces and simple implementations of an audit log.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2344">Graylog2/graylog2-server#2344</a>.</li>
<li>Do not init available alarm callback types, fetch them explicitly.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2353">Graylog2/graylog2-server#2353</a>.</li>
<li>Move custom analyzer into index template.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2354">Graylog2/graylog2-server#2354</a>.</li>
<li>Remove automatic private key/certificate generation.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2355">Graylog2/graylog2-server#2355</a>.</li>
<li>Improved feedback.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2357">Graylog2/graylog2-server#2357</a>.</li>
<li>Longer retention interval for journal tests.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2388">Graylog2/graylog2-server#2388</a>.</li>
<li>Remove <code class="docutils literal notranslate"><span class="pre">elasticsearch_discovery_zen_ping_multicast_enabled</span></code> setting.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2394">Graylog2/graylog2-server#2394</a>.</li>
<li>Fix unrequested refresh of configuration forms/Reset configuration
forms on cancel.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2399">Graylog2/graylog2-server#2399</a>.</li>
<li>Web If: Updating a few dependencies which are safe to update.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2407">Graylog2/graylog2-server#2407</a>.</li>
<li>Added Information for journal partitions.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2412">Graylog2/graylog2-server#2412</a>.</li>
<li>Fix memory problems with webpack-dev-server in development mode.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2433">Graylog2/graylog2-server#2433</a>.</li>
<li>Remove <code class="docutils literal notranslate"><span class="pre">_ttl</span></code> in index mapping.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2435">Graylog2/graylog2-server#2435</a>.</li>
<li>Add raw message loader.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2438">Graylog2/graylog2-server#2438</a>.</li>
<li>Extracting our customized ESLint config into separate module.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2441">Graylog2/graylog2-server#2441</a>.</li>
<li>Remove deprecated MongoDB metrics reporter.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2443">Graylog2/graylog2-server#2443</a>.</li>
<li>Allow access to MongoDatabase in MongoConnection.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2444">Graylog2/graylog2-server#2444</a>.</li>
<li>Add some useful FindBugs plugins.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2447">Graylog2/graylog2-server#2447</a>.</li>
<li>Proxies deflector cycle call to make it available on every node.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2448">Graylog2/graylog2-server#2448</a>.</li>
</ul>
<p><strong>Collector sidecar plugin</strong></p>
<ul class="simple">
<li>Return updated configuration after changing configuration name</li>
<li>Prevent crashes when failed to propagate state to the server</li>
<li>Improve compatibility with old API</li>
<li>Display collector IP address. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-collector/issues/9">Graylog2/graylog-plugin-collector#9</a></li>
<li>Ability to clone collector configuration.
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-collector/issues/10">Graylog2/graylog-plugin-collector#10</a></li>
<li>NXLog GELF/TLS input should work without cert files.
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-collector/issues/13">Graylog2/graylog-plugin-collector#13</a></li>
<li>Add <code class="docutils literal notranslate"><span class="pre">tail_files</span></code> option</li>
<li>Expand verbatim text area if value is present</li>
<li>Validation improvements</li>
<li>Add buffer option to NXLog outputs</li>
<li>Make defaults compatible with Windows hosts</li>
<li>Add support for Beats. Filebeat, Winlogbeat.</li>
<li>Beats binaries are bundled with the Collector-Sidecar package</li>
<li>Improve server side validation. Graylog2/graylog2-server#2247 and Graylog2/graylog-plugin-collector#7.</li>
<li>Add NXlog GELF TCP and TCP/TLS output</li>
<li>Add support to clone input, outputs and snippets</li>
<li>Optionally display collector status information in web interface</li>
<li>Optionally display log directory listing on status page</li>
<li>If no node-id is given use the hostname as identification</li>
<li>Linux distribution is detected and can be used in Snippet template</li>
<li>Silent install on Windows works now</li>
<li>Collector log files are now auto-rotated</li>
<li>Collector processes are supervised and restarted on crashes</li>
<li>NXlog Inputs and Outputs support free text configuration</li>
<li>Fix web plugin loading on IE 11</li>
</ul>
<p><strong>Pipeline processor plugin</strong></p>
<ul class="simple">
<li>Add parse error handler for precompute args failures.
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/84">Graylog2/graylog-plugin-pipeline-processor#84</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/93">Graylog2/graylog-plugin-pipeline-processor#93</a></li>
<li>Add support for DateTime comparison.
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/86">Graylog2/graylog-plugin-pipeline-processor#86</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/92">Graylog2/graylog-plugin-pipeline-processor#92</a></li>
<li>Make some small UI changes around RuleHelper.
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/90">Graylog2/graylog-plugin-pipeline-processor#90</a></li>
<li>Use shared classloader so other plugins can contribute functions.
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/81">Graylog2/graylog-plugin-pipeline-processor#81</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/94">Graylog2/graylog-plugin-pipeline-processor#94</a></li>
<li>UI improvements. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2683">Graylog2/graylog2-server#2683</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/83">Graylog2/graylog-plugin-pipeline-processor#83</a></li>
<li>Unregister PipelineInterpreter from event bus 🚌. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/79">Graylog2/graylog-plugin-pipeline-processor#79</a></li>
<li>Use find in the regex function.
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/35">Graylog2/graylog-plugin-pipeline-processor#35</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/88">Graylog2/graylog-plugin-pipeline-processor#88</a></li>
<li>Dynamic function list.
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/89">Graylog2/graylog-plugin-pipeline-processor#89</a></li>
<li>Unresolved functions not properly handled.
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/24">Graylog2/graylog-plugin-pipeline-processor#24</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/25">Graylog2/graylog-plugin-pipeline-processor#25</a></li>
<li>Unwrap JsonNode values.
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/68">Graylog2/graylog-plugin-pipeline-processor#68</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/72">Graylog2/graylog-plugin-pipeline-processor#72</a></li>
<li>Add optional prefix/suffix to <code class="docutils literal notranslate"><span class="pre">set_fields</span></code> functions.
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/74">Graylog2/graylog-plugin-pipeline-processor#74</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/75">Graylog2/graylog-plugin-pipeline-processor#75</a></li>
<li>Add key-value parsing function.
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/38">Graylog2/graylog-plugin-pipeline-processor#38</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/77">Graylog2/graylog-plugin-pipeline-processor#77</a></li>
<li>Allow selection of an input ID for the simulation message.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2610">Graylog2/graylog2-server#2610</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2650">Graylog2/graylog2-server#2650</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/78">Graylog2/graylog-plugin-pipeline-processor#78</a></li>
<li>Support “only named captures” for pipeline grok function.
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/59">Graylog2/graylog-plugin-pipeline-processor#59</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/65">Graylog2/graylog-plugin-pipeline-processor#65</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2566">Graylog2/graylog2-server#2566</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2577">Graylog2/graylog2-server#2577</a></li>
<li>Make conversion functions more consistent.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/63">Graylog2/graylog2-server#63</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/64">Graylog2/graylog2-server#64</a></li>
<li>Unescape string literals before using them.
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/47">Graylog2/graylog-plugin-pipeline-processor#47</a></li>
<li>Add <code class="docutils literal notranslate"><span class="pre">rename_field</span></code> function.
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/50">Graylog2/graylog-plugin-pipeline-processor#50</a></li>
<li>Allow null matcher group values in regex function.
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/49">Graylog2/graylog-plugin-pipeline-processor#49</a></li>
<li>Fix 500 error during simulation.
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/51">Graylog2/graylog-plugin-pipeline-processor#51</a></li>
<li>IpAddressConversion caught wrong exception.
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/32">Graylog2/graylog-plugin-pipeline-processor#32</a></li>
<li>Add syslog-related functions.
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/19">Graylog2/graylog-plugin-pipeline-processor#19</a>.</li>
<li>Add <code class="docutils literal notranslate"><span class="pre">concat()</span></code> function.
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/20">Graylog2/graylog-plugin-pipeline-processor#20</a>.</li>
<li>NPE during preProcessArgs using Grok pattern.
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/24">Graylog2/graylog-plugin-pipeline-processor#24</a>
and
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/26">Graylog2/graylog-plugin-pipeline-processor#26</a>.</li>
<li>Streams without connections stay visible.
<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2322">Graylog2/graylog2-server#2322</a>.</li>
<li>Add pipeline simulator.
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/34">Graylog2/graylog-plugin-pipeline-processor#34</a>,
<a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/36">Graylog2/graylog-plugin-pipeline-processor#36</a>
and <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/42">Graylog2/graylog-plugin-pipeline-processor#42</a>.</li>
<li>Fix page size in function list. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/97">Graylog2/graylog-plugin-pipeline-processor#97</a></li>
</ul>
</div>
<div class="section" id="graylog-2-0-3">
<h3>Graylog 2.0.3<a class="headerlink" href="#graylog-2-0-3" title="Permalink to this headline">¶</a></h3>
<p>Released: 2016-06-20</p>
<p><a class="reference external" href="https://www.graylog.org/blog/58-graylog-v2-0-3-released">https://www.graylog.org/blog/58-graylog-v2-0-3-released</a></p>
<p><strong>Improvements</strong></p>
<ul class="simple">
<li>Make Message#getStreamIds() more reliable. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/2378">Graylog2/graylog2-server#2378</a></li>
<li>Disabling a configured proxy for requests to localhost/127.0.0.1/::1. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/2305">Graylog2/graylog2-server#2305</a></li>
</ul>
<p><strong>Bug fixes</strong></p>
<ul class="simple">
<li>Update search query on auto refresh <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/2385">Graylog2/graylog2-server#2385</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/2379">Graylog2/graylog2-server#2379</a></li>
<li>Fix permission checks for non admin users <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/2366">Graylog2/graylog2-server#2366</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/2358">Graylog2/graylog2-server#2358</a></li>
<li>Fix display of total count of indices. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/2365">Graylog2/graylog2-server#2365</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/2359">Graylog2/graylog2-server#2359</a></li>
<li>Fix base URI for API documentation <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/2362">Graylog2/graylog2-server#2362</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/2360">Graylog2/graylog2-server#2360</a></li>
<li>Fix link to API Browser on Node pages <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/2361">Graylog2/graylog2-server#2361</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/2360">Graylog2/graylog2-server#2360</a></li>
<li>Calculate keyword from and to values on the fly <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/2335">Graylog2/graylog2-server#2335</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/2301">Graylog2/graylog2-server#2301</a></li>
<li>Make MemoryAppender thread-safe <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/2307">Graylog2/graylog2-server#2307</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/2302">Graylog2/graylog2-server#2302</a></li>
<li>Use right metrics to display buffer usage <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/2300">Graylog2/graylog2-server#2300</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/2299">Graylog2/graylog2-server#2299</a></li>
<li>Check if props actually contain configuration fields before copying them <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/2298">Graylog2/graylog2-server#2298</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/2297">Graylog2/graylog2-server#2297</a></li>
</ul>
</div>
<div class="section" id="graylog-2-0-2">
<h3>Graylog 2.0.2<a class="headerlink" href="#graylog-2-0-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2016-05-27</p>
<p><a class="reference external" href="https://www.graylog.org/blog/57-graylog-v2-0-2-released">https://www.graylog.org/blog/57-graylog-v2-0-2-released</a></p>
<p><strong>Improvements</strong></p>
<ul class="simple">
<li>Improved user form. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2261">Graylog2/graylog2-server#2261</a></li>
<li>Improved logging of plugin list on server startup. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2290">Graylog2/graylog2-server#2290</a></li>
<li>Forbid empty passwords when using LDAP. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2214">Graylog2/graylog2-server#2214</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2283">Graylog2/graylog2-server#2283</a></li>
<li>Improved metrics page. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2250">Graylog2/graylog2-server#2250</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2255">Graylog2/graylog2-server#2255</a></li>
<li>Improved search histogram resolution auto selection. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2148">Graylog2/graylog2-server#2148</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2289">Graylog2/graylog2-server#2289</a></li>
<li>Improved cluster overview page. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2291">Graylog2/graylog2-server#2291</a></li>
</ul>
<p><strong>Bug Fixes</strong></p>
<ul class="simple">
<li>Fixed concurrency issue with Drools. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2119">Graylog2/graylog2-server#2119</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2188">Graylog2/graylog2-server#2188</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2231">Graylog2/graylog2-server#2231</a></li>
<li>Fixed problems with Internet Explorer. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2246">Graylog2/graylog2-server#2246</a></li>
<li>Fixed issues with old dashboards. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2262">Graylog2/graylog2-server#2262</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2163">Graylog2/graylog2-server#2163</a></li>
<li>Fixed changing log levels via REST API. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1904">Graylog2/graylog2-server#1904</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2277">Graylog2/graylog2-server#2277</a></li>
<li>Fixed plugin inter-dependencies by using one class loader for all plugins. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2280">Graylog2/graylog2-server#2280</a></li>
</ul>
<p><strong>Plugin: Pipeline Processor</strong></p>
<ul class="simple">
<li>Add syslog related rule functions. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/19">Graylog2/graylog-plugin-pipeline-processor#19</a></li>
<li>Add concat rule functions. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/20">Graylog2/graylog-plugin-pipeline-processor#20</a></li>
<li>Fixed problem with IP address function. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/28">Graylog2/graylog-plugin-pipeline-processor#28</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/32">Graylog2/graylog-plugin-pipeline-processor#32</a></li>
<li>Properly unescape strings in raw literals. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/30">Graylog2/graylog-plugin-pipeline-processor#30</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/31">Graylog2/graylog-plugin-pipeline-processor#31</a></li>
</ul>
</div>
<div class="section" id="graylog-2-0-1">
<h3>Graylog 2.0.1<a class="headerlink" href="#graylog-2-0-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2016-05-11</p>
<p><a class="reference external" href="https://www.graylog.org/blog/56-graylog-v2-0-1-released">https://www.graylog.org/blog/56-graylog-v2-0-1-released</a></p>
<p><strong>Improvements</strong></p>
<ul class="simple">
<li>Improved session handling. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2157">Graylog2/graylog2-server#2157</a></li>
<li>Included UPGRADING file in the build artifact. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2170">Graylog2/graylog2-server#2170</a></li>
<li>Added rotation/retention settings back to the config file. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2181">Graylog2/graylog2-server#2181</a></li>
<li>Improved proxy setup configuration settings. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2156">Graylog2/graylog2-server#2156</a></li>
<li>Forbid wildcard host in <cite>rest_transport_uri</cite>. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2205">Graylog2/graylog2-server#2205</a></li>
<li>Improved robustness for unreachable nodes. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2206">Graylog2/graylog2-server#2206</a></li>
<li>Use a more lightweight API to get all index names and aliases. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2194">Graylog2/graylog2-server#2194</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2210">Graylog2/graylog2-server#2210</a></li>
</ul>
<p><strong>Bug Fixes</strong></p>
<ul class="simple">
<li>Fixed some documentation links.</li>
<li>Fixed inverted stream rules. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2160">Graylog2/graylog2-server#2160</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2172">Graylog2/graylog2-server#2172</a></li>
<li>Fixed swallowed LDAP authentication exception. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2176">Graylog2/graylog2-server#2176</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2178">Graylog2/graylog2-server#2178</a></li>
<li>Fixed insecure handling of PID files. Thanks <a class="reference external" href="https://github.com/juergenhoetzel">&#64;juergenhoetzel</a>! <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2174">Graylog2/graylog2-server#2174</a></li>
<li>Fixed alert conditions that have been created in Graylog 1.x. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2169">Graylog2/graylog2-server#2169</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2182">Graylog2/graylog2-server#2182</a></li>
<li>Fixed setting of application context. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2191">Graylog2/graylog2-server#2191</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2208">Graylog2/graylog2-server#2208</a></li>
<li>Fixed setting of custom Elasticsearch analyzer. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2209">Graylog2/graylog2-server#2209</a></li>
<li>Fixed masking of password config values in the web interface. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2198">Graylog2/graylog2-server#2198</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2203">Graylog2/graylog2-server#2203</a></li>
<li>Fixed URL handling. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2200">Graylog2/graylog2-server#2200</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2213">Graylog2/graylog2-server#2213</a></li>
</ul>
<p><strong>Plugin: Collector</strong></p>
<ul class="simple">
<li>Rotate nxlog logfiles once a day by default.</li>
<li>Add GELF TCP output for nxlog.</li>
</ul>
</div>
<div class="section" id="graylog-2-0-0">
<h3>Graylog 2.0.0<a class="headerlink" href="#graylog-2-0-0" title="Permalink to this headline">¶</a></h3>
<p>Released: 2016-04-27</p>
<p><a class="reference external" href="https://www.graylog.org/blog/55-announcing-graylog-v2-0-ga">https://www.graylog.org/blog/55-announcing-graylog-v2-0-ga</a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please make sure to read the <a class="reference internal" href="index.html#upgrade-notes-graylog-2-0"><span class="std std-ref">Upgrade Guide</span></a>
before upgrading to Graylog 2.0. There are breaking changes!</p>
</div>
<p><strong>Feature Highlights</strong></p>
<p>See the release announcement for details on the new features.</p>
<ul class="simple">
<li>Web interface no longer a separate process</li>
<li>Support for Elasticsearch 2.x</li>
<li>Live tail support</li>
<li>Message Processing Pipeline</li>
<li>Map Widget Plugin</li>
<li>Collector Sidecar</li>
<li>Streams filter UI</li>
<li>Search for surrounding messages</li>
<li>Query range limit</li>
<li>Configurable query time ranges</li>
<li>Archiving (commercial feature)</li>
</ul>
<p><strong>Bug Fixes</strong></p>
<p>There have been lots of bug fixes since the 1.3 releases. We only list the ones that we worked on since the 2.0 alpha phase.</p>
<ul class="simple">
<li>Fixed issues with search page pagination and number of returned results: <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1759">Graylog2/graylog2-server#1759</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1775">Graylog2/graylog2-server#1775</a>, and <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1802">Graylog2/graylog2-server#1802</a></li>
<li>Avoid creating MongoDB collection multiple times: <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1747">Graylog2/graylog2-server#1747</a></li>
<li>Removed number of connected nodes in login page: <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1732">Graylog2/graylog2-server#1732</a></li>
<li>Fix dynamic search result histogram resolution: <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1764">Graylog2/graylog2-server#1764</a></li>
<li>Show overlay in Graylog web interface when Graylog server is not available: <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1762">Graylog2/graylog2-server#1762</a></li>
<li>Fix metric types: <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1784">Graylog2/graylog2-server#1784</a></li>
<li>Only load all metrics on demand: <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1782">Graylog2/graylog2-server#1782</a></li>
<li>Activate search refresh after selecting a refresh interval: <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1796">Graylog2/graylog2-server#1796</a></li>
<li>Fix circular dependencies: <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1789">Graylog2/graylog2-server#1789</a></li>
<li>Only render input forms when input type is available: <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1798">Graylog2/graylog2-server#1798</a></li>
<li>Document web interface configuration settings in graylog.conf. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1777">Graylog2/graylog2-server#1777</a></li>
<li>Fix roles link to documentation. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1805">Graylog2/graylog2-server#1805</a></li>
<li>Fix issue with field graphs. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1811">Graylog2/graylog2-server#1811</a></li>
<li>Fix search result pagination. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1812">Graylog2/graylog2-server#1812</a></li>
<li>Fix add to query button on quick values. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1797">Graylog2/graylog2-server#1797</a></li>
<li>Fix URL to Graylog marketplace on content pack export page. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1817">Graylog2/graylog2-server#1817</a></li>
<li>Fix elasticsearch node name for the Graylog client node. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1814">Graylog2/graylog2-server#1814</a> and <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1820">Graylog2/graylog2-server#1820</a></li>
<li>Fix widget sorting for dashboards.</li>
<li>Use _ as default key separator in JSON Extractor. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1841">Graylog2/graylog2-server#1841</a></li>
<li>Clarify that Graylog Collector needs access to rest_listen_uri. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1847">Graylog2/graylog2-server#1847</a></li>
<li>Fix potential memory leak in GELF UDP handler. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1857">Graylog2/graylog2-server#1857</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1862">Graylog2/graylog2-server#1862</a></li>
<li>Fix user with correct permissions not allowed to view stream: <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1887">Graylog2/graylog2-server#1887</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1902">Graylog2/graylog2-server#1902</a></li>
<li>Make pattern to check Graylog-managed indices stricter: <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1882">Graylog2/graylog2-server#1882</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1888">Graylog2/graylog2-server#1888</a></li>
<li>Fix throughput counter: <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1876">Graylog2/graylog2-server#1876</a></li>
<li>Fix replay search link in dashboards: <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1835">Graylog2/graylog2-server#1835</a></li>
<li>Render server unavailable page more reliably: <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1867">Graylog2/graylog2-server#1867</a></li>
<li>Fix build issue with maven. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1907">Graylog2/graylog2-server#1907</a> (Thanks &#64;gitfrederic)</li>
<li>Fix username in REST API access logs. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1815">Graylog2/graylog2-server#1815</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1918">Graylog2/graylog2-server#1918</a> (Thanks &#64;mikkolehtisalo)</li>
<li>Fix alert annotations in message histogram. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1921">Graylog2/graylog2-server#1921</a></li>
<li>Fix problem with automatic input form reload. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1870">Graylog2/graylog2-server#1870</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1929">Graylog2/graylog2-server#1929</a></li>
<li>Fix asset caching. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1924">Graylog2/graylog2-server#1924</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1930">Graylog2/graylog2-server#1930</a></li>
<li>Fix issue with cursor jumps in the search bar. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1911">Graylog2/graylog2-server#1911</a></li>
<li>Fix import of Graylog 1.x extractors. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1831">Graylog2/graylog2-server#1831</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1937">Graylog2/graylog2-server#1937</a></li>
<li>Field charts will now use the stream and time range of the current search. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1785">Graylog2/graylog2-server#1785</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1620">Graylog2/graylog2-web-interface#1620</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1618">Graylog2/graylog2-web-interface#1618</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1485">Graylog2/graylog2-web-interface#1485</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1938">Graylog2/graylog2-server#1938</a></li>
<li>Improve browser validations. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1885">Graylog2/graylog2-server#1885</a></li>
<li>Fix Internet Explorer support. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1935">Graylog2/graylog2-server#1935</a></li>
<li>Fix issue where a user was logged out when accessing an unauthorized resource. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1944">Graylog2/graylog2-server#1944</a></li>
<li>Fix issue with surrounding search. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1946">Graylog2/graylog2-server#1946</a></li>
<li>Fix problem deleting dashboard widget where the plugin got removed. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1943">Graylog2/graylog2-server#1943</a></li>
<li>Fix permission issue on user edit page. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1964">Graylog2/graylog2-server#1964</a></li>
<li>Fix histogram time range selection via mouse. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1895">Graylog2/graylog2-server#1895</a></li>
<li>Fix problems with duplicate Reflux store instances. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1967">Graylog2/graylog2-server#1967</a></li>
<li>Create PID file earlier in the startup process. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1969">Graylog2/graylog2-server#1969</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1978">Graylog2/graylog2-server#1978</a></li>
<li>Fix content type detection for static assets. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1982">Graylog2/graylog2-server#1982</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1983">Graylog2/graylog2-server#1983</a></li>
<li>Fix caching of static assets. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1982">Graylog2/graylog2-server#1982</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1983">Graylog2/graylog2-server#1983</a></li>
<li>Show error message on malformed search query. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1896">Graylog2/graylog2-server#1896</a></li>
<li>Fix parsing of GELF chunks. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1986">Graylog2/graylog2-server#1986</a></li>
<li>Fix problems editing reader users profile. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1984">Graylog2/graylog2-server#1984</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1987">Graylog2/graylog2-server#1987</a></li>
<li>Fix problem with lost extractors and static fields on input update. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1988">Graylog2/graylog2-server#1988</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1923">Graylog2/graylog2-server#1923</a></li>
<li>Improve fetching cluster metrics to avoid multiple HTTP calls. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1974">Graylog2/graylog2-server#1974</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1990">Graylog2/graylog2-server#1990</a></li>
<li>Properly handle empty messages. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1584">Graylog2/graylog2-server#1584</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1995">Graylog2/graylog2-server#1995</a></li>
<li>Add 100-Continue support to HTTP inputs. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1939">Graylog2/graylog2-server#1939</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1998">Graylog2/graylog2-server#1998</a></li>
<li>Fix setting dashboard as start page for reader users. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2005">Graylog2/graylog2-server#2005</a></li>
<li>Allow dots (“.”) in LDAP group name mappings. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1458">Graylog2/graylog2-server#1458</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2009">Graylog2/graylog2-server#2009</a></li>
<li>Update user edit form when username changes. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2000">Graylog2/graylog2-server#2000</a></li>
<li>Fix issue with permissions in user form. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1989">Graylog2/graylog2-server#1989</a></li>
<li>Update extractor example when message is loaded. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1957">Graylog2/graylog2-server#1957</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2013">Graylog2/graylog2-server#2013</a></li>
<li>Disable log4j2 shutdown hooks to avoid exception on shutdown. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1795">Graylog2/graylog2-server#1795</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2015">Graylog2/graylog2-server#2015</a></li>
<li>Fix styling issue with map widget. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2003">Graylog2/graylog2-server#2003</a></li>
<li>Fix openstreetmap URL in map widget. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1994">Graylog2/graylog2-server#1994</a></li>
<li>Fix problem with collector heartbeat validation. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2002">Graylog2/graylog2-server#2002</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1726">Graylog2/graylog2-web-interface#1726</a> <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-collector/issues/3">Graylog2/graylog-plugin-collector#3</a></li>
<li>Remove unused command line parameters. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1977">Graylog2/graylog2-server#1977</a></li>
<li>Fixed timezone issues for date time processing in JSON parser. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2007">Graylog2/graylog2-server#2007</a></li>
<li>Fixed JavaScript error with field truncation. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2025">Graylog2/graylog2-server#2025</a></li>
<li>Fixed redirection if user is not authorized. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1985">Graylog2/graylog2-server#1985</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2024">Graylog2/graylog2-server#2024</a></li>
<li>Made changing the sort order in search result table work again. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2028">Graylog2/graylog2-server#2028</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2031">Graylog2/graylog2-server#2031</a></li>
<li>Performance improvements on “System/Indices” page. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2017">Graylog2/graylog2-server#2017</a></li>
<li>Fixed content-type settings for static assets. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2052">Graylog2/graylog2-server#2052</a></li>
<li>Fixed return code for invalid input IDs. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1718">Graylog2/graylog2-server#1718</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1767">Graylog2/graylog2-server#1767</a></li>
<li>Improved field analyzer UI. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2022">Graylog2/graylog2-server#2022</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2023">Graylog2/graylog2-server#2023</a></li>
<li>Fixed login with LDAP user. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2045">Graylog2/graylog2-server#2045</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2046">Graylog2/graylog2-server#2046</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2069">Graylog2/graylog2-server#2069</a></li>
<li>Fixed issue with bad message timestamps to avoid data loss. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2064">Graylog2/graylog2-server#2064</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2065">Graylog2/graylog2-server#2065</a></li>
<li>Improved handling of Elasticsearch indices. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2058">Graylog2/graylog2-server#2058</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2062">Graylog2/graylog2-server#2062</a></li>
<li>Extractor form improvements for JSON and Grok extractors. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1883">Graylog2/graylog2-server#1883</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2020">Graylog2/graylog2-server#2020</a></li>
<li>Used search refresh to refresh field statistics. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1961">Graylog2/graylog2-server#1961</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2068">Graylog2/graylog2-server#2068</a></li>
<li>Fixed clicking zoom button in quick values. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2040">Graylog2/graylog2-server#2040</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2067">Graylog2/graylog2-server#2067</a></li>
<li>Web interface styling improvements.</li>
<li>Replaced . in message field keys with a _ for ES 2.x compatibility. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2078">Graylog2/graylog2-server#2078</a></li>
<li>Fixed unprocessed journal messages reload in node list. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2083">Graylog2/graylog2-server#2083</a></li>
<li>Fixed problems with stale sessions on the login page. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2073">Graylog2/graylog2-server#2073</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2059">Graylog2/graylog2-server#2059</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1891">Graylog2/graylog2-server#1891</a></li>
<li>Fixed issue with index retention strategies. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2100">Graylog2/graylog2-server#2100</a></li>
<li>Fixed password change form. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2103">Graylog2/graylog2-server#2103</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2105">Graylog2/graylog2-server#2105</a></li>
<li>Do not show search refresh controls on the sources page. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1821">Graylog2/graylog2-server#1821</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2104">Graylog2/graylog2-server#2104</a></li>
<li>Wait for index being available before calculating index range. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2061">Graylog2/graylog2-server#2061</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2098">Graylog2/graylog2-server#2098</a></li>
<li>Fixed issue with sorting extractors. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2086">Graylog2/graylog2-server#2086</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2088">Graylog2/graylog2-server#2088</a></li>
<li>Improve DataTable UI component. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/11">Graylog2/graylog-plugin-pipeline-processor#11</a></li>
<li>Move TCP keepalive setting into AbstractTcpTransport to simplify input development. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2112">Graylog2/graylog2-server#2112</a></li>
<li>Fixed issue with Elasticsearch index template update. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2089">Graylog2/graylog2-server#2089</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2097">Graylog2/graylog2-server#2097</a></li>
<li>Ensure that tmpDir is writable when generating self-signed certs in TCP transports. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2054">Graylog2/graylog2-server#2054</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2096">Graylog2/graylog2-server#2096</a></li>
<li>Fixed default values for plugin configuration forms. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2108">Graylog2/graylog2-server#2108</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2114">Graylog2/graylog2-server#2114</a></li>
<li>Dashboard usability improvements. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2093">Graylog2/graylog2-server#2093</a></li>
<li>Include default values in pluggable entities forms. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2122">Graylog2/graylog2-server#2122</a></li>
<li>Ignore empty authentication tokens in LdapUserAuthenticator. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2123">Graylog2/graylog2-server#2123</a></li>
<li>Add REST API authentication and permissions. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/15">Graylog2/graylog-plugin-pipeline-processor#15</a></li>
<li>Require authenticated user in REST resources. <a class="reference external" href="https://github.com/Graylog2/graylog-plugin-pipeline-processor/issues/14">Graylog2/graylog-plugin-pipeline-processor#14</a></li>
<li>Lots of UI improvements in the web interface. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2136">Graylog2/graylog2-server#2136</a></li>
<li>Fixed link to REST API browser. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2133">Graylog2/graylog2-server#2133</a></li>
<li>Fixed CSV export skipping first chunk. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2128">Graylog2/graylog2-server#2128</a></li>
<li>Fixed updating content packs. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2138">Graylog2/graylog2-server#2138</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2141">Graylog2/graylog2-server#2141</a></li>
<li>Added missing 404 page. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/2139">Graylog2/graylog2-server#2139</a></li>
</ul>
</div>
<div class="section" id="graylog-1-3-4">
<h3>Graylog 1.3.4<a class="headerlink" href="#graylog-1-3-4" title="Permalink to this headline">¶</a></h3>
<p>Released: 2016-03-16</p>
<p><a class="reference external" href="https://www.graylog.org/blog/49-graylog-1-3-4-is-now-available">https://www.graylog.org/blog/49-graylog-1-3-4-is-now-available</a></p>
<ul class="simple">
<li>Fix security issue which allowed redirecting users to arbitrary sites on login <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/pull/1729">Graylog2/graylog2-web-interface#1729</a></li>
<li>Fix issue with time-based index rotation strategy <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/725">Graylog2/graylog2-server#725</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1693">Graylog2/graylog2-server#1693</a></li>
<li>Fix issue with <code class="docutils literal notranslate"><span class="pre">IndexFailureServiceImpl</span></code> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1747">Graylog2/graylog2-server#1747</a></li>
<li>Add default Content-Type to <code class="docutils literal notranslate"><span class="pre">GettingStartedResource</span></code> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1700">Graylog2/graylog2-server#1700</a></li>
<li>Improve OS platform detection <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1737">Graylog2/graylog2-server#1737</a></li>
<li>Add prefixes <code class="docutils literal notranslate"><span class="pre">GRAYLOG_</span></code> (environment variables) and  <code class="docutils literal notranslate"><span class="pre">graylog.</span></code> (system properties) for overriding configuration settings <a class="reference external" href="https://github.com/Graylog2/graylog2-server/commit/48ed88d4a7897152f7daa16f0d77e03b824d7b48">Graylog2/graylog2-server&#64;48ed88d</a></li>
<li>Fix URL to Graylog Marketplace on Extractor/Content Pack pages <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1817">Graylog2/graylog2-server#1817</a></li>
<li>Use monospace font on message values <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/commit/3cce368bd7360c0e95dc0b635cb99f0a47daa6ac">Graylog2/graylog2-web-interface&#64;3cce368</a></li>
</ul>
</div>
<div class="section" id="graylog-1-3-3">
<h3>Graylog 1.3.3<a class="headerlink" href="#graylog-1-3-3" title="Permalink to this headline">¶</a></h3>
<p>Released: 2016-01-14</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-1-3-3-is-now-available/">https://www.graylog.org/graylog-1-3-3-is-now-available/</a></p>
<ul class="simple">
<li>Absolute and relative time spans give different results <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1572">Graylog2/graylog2-server#1572</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1463">Graylog2/graylog2-server#1463</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1672">Graylog2/graylog2-server#1672</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1679">Graylog2/graylog2-server#1679</a></li>
<li>Search result count widget not caching <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1640">Graylog2/graylog2-server#1640</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1681">Graylog2/graylog2-server#1681</a></li>
<li>Field Value Condition Alert, does not permit decimal values <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1657">Graylog2/graylog2-server#1657</a></li>
<li>Correctly handle null values in nested structures in JsonExtractor <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1676">Graylog2/graylog2-server#1676</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1677">Graylog2/graylog2-server#1677</a></li>
<li>Add <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> and <code class="docutils literal notranslate"><span class="pre">X-Graylog2-No-Session-Extension</span></code> to CORS headers <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1682">Graylog2/graylog2-server#1682</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1685">Graylog2/graylog2-server#1685</a></li>
<li>Discard Message Output <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1688">Graylog2/graylog2-server#1688</a></li>
</ul>
</div>
<div class="section" id="graylog-1-3-2">
<h3>Graylog 1.3.2<a class="headerlink" href="#graylog-1-3-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-12-18</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-1-3-2-is-now-available/">https://www.graylog.org/graylog-1-3-2-is-now-available/</a></p>
<ul class="simple">
<li>Deserializing a blacklist filter (<code class="docutils literal notranslate"><span class="pre">FilterDescription</span></code>) leads to <code class="docutils literal notranslate"><span class="pre">StackOverflowError</span></code> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1641">Graylog2/graylog2-server#1641</a></li>
</ul>
</div>
<div class="section" id="graylog-1-3-1">
<h3>Graylog 1.3.1<a class="headerlink" href="#graylog-1-3-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-12-17</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-1-3-1-is-now-available/">https://www.graylog.org/graylog-1-3-1-is-now-available/</a></p>
<ul class="simple">
<li>Add option to AMQP transports to bind the queue to the exchange <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1599">Graylog2/graylog2-server#1599</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1633">Graylog2/graylog2-server#1633</a></li>
<li>Install a Graylog index template instead of set mappings on index creation <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1624">Graylog2/graylog2-server#1624</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1628">Graylog2/graylog2-server#1628</a></li>
</ul>
</div>
<div class="section" id="graylog-1-3-0">
<h3>Graylog 1.3.0<a class="headerlink" href="#graylog-1-3-0" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-12-09</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-1-3-ga-is-ready/">https://www.graylog.org/graylog-1-3-ga-is-ready/</a></p>
<ul class="simple">
<li>Allow index range calculation for a single index. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1451">Graylog2/graylog2-server#1451</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1455">Graylog2/graylog2-server#1455</a></li>
<li>Performance improvements for index ranges.</li>
<li>Make internal server logs accessible via REST API. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1452">Graylog2/graylog2-server#1452</a></li>
<li>Make specific configuration values accessible via REST API. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1484">Graylog2/graylog2-server#1484</a></li>
<li>Added Replace Extractor. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1485">Graylog2/graylog2-server#1485</a></li>
<li>Added a default set of Grok patterns. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1495">Graylog2/graylog2-server#1495</a></li>
<li>Log operating system details on server startup. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1244">Graylog2/graylog2-server#1244</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1553">Graylog2/graylog2-server#1553</a></li>
<li>Allow reader users to set a dashboard as start page. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1681">Graylog2/graylog2-web-interface#1681</a></li>
<li>Auto content pack loader – download and install content packs automatically</li>
<li>Appliance pre-configured for log ingestion and analysis</li>
<li>Show a getting started guide on first install. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1662">Graylog2/graylog2-web-interface#1662</a></li>
<li>Include role permissions in “/roles/{rolename}/members” REST API endpoint. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1549">Graylog2/graylog2-server#1549</a></li>
<li>Fixed NullPointerException in GELF output. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1538">Graylog2/graylog2-server#1538</a></li>
<li>Fixed NullPointerException in GELF input handling. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1544">Graylog2/graylog2-server#1544</a></li>
<li>Use the root user’s timezone for LDAP users by default. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1000">Graylog2/graylog2-server#1000</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1554">Graylog2/graylog2-server#1554</a></li>
<li>Fix display of JSON messages. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1686">Graylog2/graylog2-web-interface#1686</a></li>
<li>Improve search robustness with missing Elasticsearch indices. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1574">Graylog2/graylog2-server#1547</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1533">Graylog2/graylog2-server#1533</a></li>
<li>Fixed race condition between index creation and index mapping configuration. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1502">Graylog2/graylog2-server#1502</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1563">Graylog2/graylog2-server#1563</a></li>
<li>Fixed concurrency problem in GELF input handling. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1561">Graylog2/graylog2-server#1561</a></li>
<li>Fixed issue with widget value calculation. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1588">Graylog2/graylog2-server#1588</a></li>
<li>Do not extend user sessions when updating widgets. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1655">Graylog2/graylog2-web-interface#1655</a></li>
<li>Fixed compatibility mode for Internet Explorer. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1661">Graylog2/graylog2-web-interface#1661</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1668">Graylog2/graylog2-web-interface#1668</a></li>
<li>Fixed whitespace issue in extractor example. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1650">Graylog2/graylog2-web-interface#1650</a></li>
<li>Fixed several issues on the indices page. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1691">Graylog2/graylog2-web-interface#1691</a> <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1692">Graylog2/graylog2-web-interface#1692</a></li>
<li>Fixed permission issue for stream alert management. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1659">Graylog2/graylog2-web-interface#1659</a></li>
<li>Fixed deletion of LDAP group mappings when updating LDAP settings. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1513">Graylog2/graylog2-server#1513</a></li>
<li>Fixed dangling role references after deleting a role <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1608">Graylog2/graylog2-server#1608</a></li>
<li>Support LDAP Group Mapping for Sun Directory Server (new since beta.2) <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1583">Graylog2/graylog2-server#1583</a></li>
</ul>
</div>
<div class="section" id="graylog-1-2-2">
<h3>Graylog 1.2.2<a class="headerlink" href="#graylog-1-2-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-10-27</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-1-2-2-is-now-available/">https://www.graylog.org/graylog-1-2-2-is-now-available/</a></p>
<ul class="simple">
<li>Fixed a whitespace issue in the extractor UI. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1650">Graylog2/graylog2-web-interface#1650</a></li>
<li>Fixed the index description on the indices page. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1653">Graylog2/graylog2-web-interface#1653</a></li>
<li>Fixed a memory leak in the GELF UDP handler code. (Analysis and fix contributed by &#64;lightpriest and &#64;onyxmaster on GitHub. Thank you!) <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1462">Graylog2/graylog2-server#1462</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1488">Graylog2/graylog2-server#1488</a></li>
<li>Improved the LDAP group handling code to handle more LDAP setups. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1433">Graylog2/graylog2-server#1433</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1453">Graylog2/graylog2-server#1453</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1491">Graylog2/graylog2-server#1491</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1494">Graylog2/graylog2-server#1494</a></li>
<li>Fixed email alerts for users with multiple email addresses. (LDAP setups) <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1439">Graylog2/graylog2-server#1439</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1492">Graylog2/graylog2-server#1492</a></li>
<li>Improve index range handling performance. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1465">Graylog2/graylog2-server#1465</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1493">Graylog2/graylog2-server#1493</a></li>
<li>Fixed JSON extractor with null values. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1475">Graylog2/graylog2-server#1475</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1505">Graylog2/graylog2-server#1505</a></li>
<li>Fixed role assignment when updating user via REST API. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1456">Graylog2/graylog2-server#1456</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1507">Graylog2/graylog2-server#1507</a></li>
</ul>
</div>
<div class="section" id="graylog-1-2-1">
<h3>Graylog 1.2.1<a class="headerlink" href="#graylog-1-2-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-09-22</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-1-2-1-is-now-available/">https://www.graylog.org/graylog-1-2-1-is-now-available/</a></p>
<ul class="simple">
<li>Fixed various issues around importing and applying content packs <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1423">Graylog2/graylog2-server#1423</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1434">Graylog2/graylog2-server#1434</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1605">Graylog2/graylog2-web-interface#1605</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/pull/1614">Graylog2/graylog2-web-interface#1614</a></li>
<li>Fixed loading existing alarm callbacks that had been created with Graylog 1.0.x or earlier <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1428">Graylog2/graylog2-server#1428</a></li>
<li>Fixed compatibility problem with Elasticsearch 1.5.x and earlier <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1426">Graylog2/graylog2-server#1426</a></li>
<li>Fixed handling of statistical functions in field graphs <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1604">Graylog2/graylog2-web-interface#1604</a></li>
<li>Use correct title when adding quick values to a dashboard <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1603">Graylog2/graylog2-web-interface#1603</a></li>
</ul>
</div>
<div class="section" id="graylog-1-2-0">
<h3>Graylog 1.2.0<a class="headerlink" href="#graylog-1-2-0" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-09-14</p>
<p><a class="reference external" href="https://www.graylog.org/announcing-graylog-1-2-ga-release-includes-30-new-features/">https://www.graylog.org/announcing-graylog-1-2-ga-release-includes-30-new-features/</a></p>
<ul class="simple">
<li>Make sure existing role assignments survive on LDAP account sync. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1405">Graylog2/graylog2-server#1405</a> | <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1406">Graylog2/graylog2-server#1406</a></li>
<li>Use memberOf query for ActiveDirectory to speed up LDAP queries. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1407">Graylog2/graylog2-server#1407</a></li>
<li>Removed disable_index_range_calculation configuration option. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1411">Graylog2/graylog2-server#1411</a></li>
<li>Avoid potentially long-running Elasticsearch cluster-level operations by only saving an index range if it actually changed. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1412">Graylog2/graylog2-server#1412</a></li>
<li>Allow editing the roles of LDAP users. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/pull/1598">Graylog2/graylog2-web-interface#1598</a></li>
<li>Improved quick values widget. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1487">Graylog2/graylog2-web-interface#1487</a></li>
</ul>
</div>
<div class="section" id="graylog-1-2-0-rc-4">
<h3>Graylog 1.2.0-rc.4<a class="headerlink" href="#graylog-1-2-0-rc-4" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-09-08</p>
<p><a class="reference external" href="https://www.graylog.org/announcing-graylog-1-2-rc-4/">https://www.graylog.org/announcing-graylog-1-2-rc-4/</a></p>
<ul class="simple">
<li>Deprecated MongoDB storage of internal metrics feature.</li>
<li>Added customizable LDAP filter for user groups lookup. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/951">Graylog2/graylog2-server#951</a></li>
<li>Allow usage of count and cardinality statistical functions in dashboard widgets. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1376">Graylog2/graylog2-server#1376</a></li>
<li>Disabled index range recalculation on every index rotation. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1388">Graylog2/graylog2-server#1388</a></li>
<li>Added automatic migration of user permissions to admin or reader roles. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1389">Graylog2/graylog2-server#1389</a></li>
<li>Fixed widget problem with invalid timestamps. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1390">Graylog2/graylog2-web-interface#1390</a></li>
<li>Added config option to enable TLS certificate validation in REST client. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1393">Graylog2/graylog2-server#1393</a></li>
<li>Fixed rule matching issue in stream routing engine. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1397">Graylog2/graylog2-server#1397</a></li>
<li>Changed default titles for stream widgets. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1476">Graylog2/graylog2-web-interface#1476</a></li>
<li>Changed data filters to be case insensitive. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1585">Graylog2/graylog2-web-interface#1585</a></li>
<li>Improved padding for stack charts. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1568">Graylog2/graylog2-web-interface#1568</a></li>
<li>Improved resiliency when Elasticsearch is not available. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1518">Graylog2/graylog2-web-interface#1518</a></li>
<li>Redirect to user edit form after updating a user. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1588">Graylog2/graylog2-web-interface#1588</a></li>
<li>Improved dashboard widgets error handling. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/pull/1590">Graylog2/graylog2-web-interface#1590</a></li>
<li>Fixed timing issue in streams UI. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1490">Graylog2/graylog2-web-interface#1490</a></li>
<li>Improved indices overview page. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/pull/1593">Graylog2/graylog2-web-interface#1593</a></li>
<li>Fixed browser back button behavior. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/pull/1594">Graylog2/graylog2-web-interface#1594</a></li>
<li>Fixed accidental type conversion for number configuration fields in alarmcallback plugins. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1596">Graylog2/graylog2-web-interface#1596</a></li>
<li>Fixed data type problem for extracted timestamps via grok. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1403">Graylog2/graylog2-server#1403</a></li>
</ul>
</div>
<div class="section" id="graylog-1-2-0-rc-2">
<h3>Graylog 1.2.0-rc.2<a class="headerlink" href="#graylog-1-2-0-rc-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-08-31</p>
<p><a class="reference external" href="https://www.graylog.org/announcing-graylog-1-2-rc/">https://www.graylog.org/announcing-graylog-1-2-rc/</a></p>
<ul class="simple">
<li>Implement global Elasticsearch timeout and add <code class="docutils literal notranslate"><span class="pre">elasticsearch_request_timeout</span></code> configuration setting. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1220">Graylog2/graylog2-server#1220</a></li>
<li>Fixed lots of documentation links. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1238">Graylog2/graylog2-server#1238</a></li>
<li>Groovy shell server removed. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1266">Graylog2/graylog2-server#1266</a></li>
<li>Lots of index range calculation fixes. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1274">Graylog2/graylog2-server#1274</a></li>
<li>New Raw AMQP input. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1280">Graylog2/graylog2-server#1280</a></li>
<li>New Syslog AMQP input. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1280">Graylog2/graylog2-server#1280</a></li>
<li>Updated bundled Elasticsearch to 1.7.1.</li>
<li>The fields in configuration dialogs for inputs and outputs are now ordered. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1282">Graylog2/graylog2-server#1282</a></li>
<li>Allow server startup without working Elasticsearch cluster. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1136">Graylog2/graylog2-server#1136</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1289">Graylog2/graylog2-server#1289</a></li>
<li>Added OR operator to stream matching. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1292">Graylog2/graylog2-server#1292</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/pull/1552">Graylog2/graylog2-web#1552</a></li>
<li>New stream router engine with better stream matching performance. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1305">Graylog2/graylog2-server#1305</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1309">Graylog2/graylog2-server#1309</a></li>
<li>Grok pattern import/export support for content packs. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1300">Graylog2/graylog2-server#1300</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/pull/1527">Graylog2/graylog2-web#1527</a></li>
<li>Added MessageListCodec interface for codec implementations that can decode multiple messages from one raw message. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1307">Graylog2/graylog2-server#1307</a></li>
<li>Added keepalive configuration option for all TCP transports. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1287">Graylog2/graylog2-server#1287</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1318">Graylog2/graylog2-server#1318</a></li>
<li>Support for roles and LDAP groups. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1321">Graylog2/graylog2-server#1321</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/951">Graylog2/graylog2-server#951</a></li>
<li>Added timezone configuration option to date converter. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1320">Graylog2/graylog2-server#1320</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1324">Graylog2/graylog2-server#1324</a></li>
<li>Added alarmcallback history feature. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1313">Graylog2/graylog2-server#1313</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/pull/1537">Graylog2/graylog2-web#1537</a></li>
<li>Added more configuration options to GELF output. (TCP settings, TLS support) <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1337">Graylog2/graylog2-server#1337</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/979">Graylog2/graylog2-server#979</a></li>
<li>Store timestamp and some other internal fields in Elasticsearch as doc values. Removed “elasticsearch_store_timestamps_as_doc_values” option from configuration file. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1335">Graylog2/graylog2-server#1335</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1342">Graylog2/graylog2-server#1342</a></li>
<li>Added TLS support for GELF HTTP input. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1348">Graylog2/graylog2-server#1348</a></li>
<li>Added JSON extractor. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/632">Graylog2/graylog2-server#632</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1355">Graylog2/graylog2-server#1355</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/pull/1555">Graylog2/graylog2-web#1555</a></li>
<li>Added support for TLS client certificate authentication to all TCP based inputs. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1357">Graylog2/graylog2-server#1357</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1363">Graylog2/graylog2-server#1363</a></li>
<li>Added stacked chart widget. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1284">Graylog2/graylog2-server#1284</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/pull/1513">Graylog2/graylog2-web#1513</a></li>
<li>Added cardinality option to field histograms. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/pull/1529">Graylog2/graylog2-web#1529</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1303">Graylog2/graylog2-server#1303</a></li>
<li>Lots of dashboard improvements. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/pull/1550">Graylog2/graylog2-web#1550</a></li>
<li>Replaced Gulp with Webpack. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/pull/1548">Graylog2/graylog2-web#1548</a></li>
<li>Updated to Play 2.3.10.</li>
</ul>
</div>
<div class="section" id="graylog-1-1-6">
<h3>Graylog 1.1.6<a class="headerlink" href="#graylog-1-1-6" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-08-06</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-1-1-6-released/">https://www.graylog.org/graylog-1-1-6-released/</a></p>
<ul class="simple">
<li>Fix edge case in <code class="docutils literal notranslate"><span class="pre">SyslogOctetCountFrameDecoder</span></code> which caused the Syslog TCP input to reset connections (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1105">Graylog2/graylog2-server#1105</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1339">Graylog2/graylog2-server#1339</a>)</li>
<li>Properly log errors in the Netty channel pipeline (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1340">Graylog2/graylog2-server#1340</a>)</li>
<li>Prevent creation of invalid alert conditions (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1332">Graylog2/graylog2-server#1332</a>)</li>
<li>Upgrade to <a class="reference external" href="https://www.elastic.co/blog/elasticsearch-1-7-1-and-1-6-2-released">Elasticsearch 1.6.2</a></li>
</ul>
</div>
<div class="section" id="graylog-1-1-5">
<h3>Graylog 1.1.5<a class="headerlink" href="#graylog-1-1-5" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-07-27</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-1-1-5-released/">https://www.graylog.org/graylog-1-1-5-released/</a></p>
<ul class="simple">
<li>Improve handling of exceptions in the JournallingMessageHandler (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1286">Graylog2/graylog2-server#1286</a>)</li>
<li>Upgrade to Elasticsearch 1.6.1 (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1312">Graylog2/graylog2-server#1312</a>)</li>
<li>Remove hard-coded limit for UDP receive buffer size (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1290">Graylog2/graylog2-server#1290</a>)</li>
<li>Ensure that <code class="docutils literal notranslate"><span class="pre">elasticsearch_index_prefix</span></code> is lowercase (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/commit/21732256ac36f9567be1605f533ebbba7f363468">commit 2173225</a> )</li>
<li>Add configuration option for time zone to <code class="docutils literal notranslate"><span class="pre">Date</span></code> converter (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1320">Graylog2/graylog2-server#1320</a>)</li>
<li>Fix NPE if the disk journal is disabled on a node (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/pull/1520">Graylog2/graylog2-web-interface#1520</a>)</li>
<li>Statistic and Chart error: Adding time zone offset caused overflow (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1257">Graylog2/graylog2-server#1257</a>)</li>
<li>Ignore stream alerts and throughput on serialize (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1309">Graylog2/graylog2-server#1309</a>)</li>
<li>Fix dynamic keyword time-ranges for dashboard widgets created from content packs (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/1308">Graylog2/graylog2-server#1308</a>)</li>
<li>Upgraded Anonymous Usage Statistics plugin to version 1.1.1</li>
</ul>
</div>
<div class="section" id="graylog-1-1-4">
<h3>Graylog 1.1.4<a class="headerlink" href="#graylog-1-1-4" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-06-30</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-v1-1-4-is-now-available/">https://www.graylog.org/graylog-v1-1-4-is-now-available/</a></p>
<ul class="simple">
<li>Make heartbeat timeout option for AmqpTransport optional. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1010">Graylog2/graylog2-server#1010</a></li>
<li>Export as CSV on stream fails with “Invalid range type provided.” <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1504">Graylog2/graylog2-web-interface#1504</a></li>
</ul>
</div>
<div class="section" id="graylog-1-1-3">
<h3>Graylog 1.1.3<a class="headerlink" href="#graylog-1-1-3" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-06-19</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-v1-1-3-is-now-available/">https://www.graylog.org/graylog-v1-1-3-is-now-available/</a></p>
<ul class="simple">
<li>Log error message early if there is a MongoDB connection error. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1249">Graylog2/graylog2-server#1249</a></li>
<li>Fixed field content value alert condition. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1245">Graylog2/graylog2-server#1245</a></li>
<li>Extend warning about SO_RCVBUF size to UDP inputs. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1243">Graylog2/graylog2-server#1243</a></li>
<li>Scroll on button dropdowns. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1477">Graylog2/graylog2-web-interface#1477</a></li>
<li>Normalize graph widget numbers before drawing them. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1479">Graylog2/graylog2-web-interface#1479</a></li>
<li>Fix highlight result checkbox position on old Firefox. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1440">Graylog2/graylog2-web-interface#1440</a></li>
<li>Unescape terms added to search bar. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1484">Graylog2/graylog2-web-interface#1484</a></li>
<li>Load another message in edit extractor page not working. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1488">Graylog2/graylog2-web-interface#1488</a></li>
<li>Reader users aren’t able to export search results as CSV. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1492">Graylog2/graylog2-web-interface#1492</a></li>
<li>List of streams not loaded on message details page. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1496">Graylog2/graylog2-web-interface#1496</a></li>
</ul>
</div>
<div class="section" id="graylog-1-1-2">
<h3>Graylog 1.1.2<a class="headerlink" href="#graylog-1-1-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-06-10</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-v1-1-2-is-now-available/">https://www.graylog.org/graylog-v1-1-2-is-now-available/</a></p>
<ul class="simple">
<li>Get rid of NoSuchElementException if index alias doesn’t exist. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1218">Graylog2/graylog2-server#1218</a></li>
<li>Make Alarm Callbacks API compatible to Graylog 1.0.x again. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1221">Graylog2/graylog2-server#1221</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1222">Graylog2/graylog2-server#1222</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1224">Graylog2/graylog2-server#1224</a></li>
<li>Fixed issues with natural language parser for keyword time range. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1226">Graylog2/graylog2-server#1226</a></li>
<li>Unable to write Graylog metrics to MongoDB <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1228">Graylog2/graylog2-server#1228</a></li>
<li>Unable to delete user. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1209">Graylog2/graylog2-server#1209</a></li>
<li>Unable to unpause streams, despite editing permissions. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1456">Graylog2/graylog2-web-interface#1456</a></li>
<li>Choose quick values widget size dynamically. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1422">Graylog2/graylog2-web-interface#1422</a></li>
<li>Default field sort order is not guaranteed after reload. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1436">Graylog2/graylog2-web-interface#1436</a></li>
<li>Toggling all fields in search list throws error and breaks pagination. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1434">Graylog2/graylog2-web-interface#1434</a></li>
<li>Improve multi-line log messages support. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/612">Graylog2/graylog2-web-interface#612</a></li>
<li>NPE when clicking a message from a deleted input on a stopped node. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1444">Graylog2/graylog2-web-interface#1444</a></li>
<li>Auto created search syntax must use quotes for values with whitespaces in them. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1448">Graylog2/graylog2-web-interface#1448</a></li>
<li>Quick Values doesn’t update for new field. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1438">Graylog2/graylog2-web-interface#1438</a></li>
<li>New Quick Values list too large. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1442">Graylog2/graylog2-web-interface#1442</a></li>
<li>Unloading referenced alarm callback plugin breaks alarm callback listing. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1450">Graylog2/graylog2-web-interface#1450</a></li>
<li>Add to search button doesn’t work as expected for “level” field. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1453">Graylog2/graylog2-web-interface#1453</a></li>
<li>Treat “*” query as empty query. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1420">Graylog2/graylog2-web-interface#1420</a></li>
<li>Improve title overflow on widgets. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1430">Graylog2/graylog2-web-interface#1430</a></li>
<li>Convert NaN to 0 on histograms. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1417">Graylog2/graylog2-web-interface#1417</a></li>
<li>“&amp;lt;&amp;gt;” values in fields are unescaped and don’t display in Quick Values. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1455">Graylog2/graylog2-web-interface#1455</a></li>
<li>New quickvalues are not showing number of terms. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1411">Graylog2/graylog2-web-interface#1411</a></li>
<li>Default index for split &amp;amp; index extractor results in an error. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1464">Graylog2/graylog2-web-interface#1464</a></li>
<li>Improve behaviour when field graph fails to load. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1276">Graylog2/graylog2-web-interface#1276</a></li>
<li>Unable to unpause streams, despite editing permissions. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1456">Graylog2/graylog2-web-interface#1456</a></li>
<li>Wrong initial size of quick values pie chart. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1469">Graylog2/graylog2-web-interface#1469</a></li>
<li>Problems refreshing data on quick values pie chart. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1470">Graylog2/graylog2-web-interface#1470</a></li>
<li>Ignore streams with no permissions on message details. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1472">Graylog2/graylog2-web-interface#1472</a></li>
</ul>
</div>
<div class="section" id="graylog-1-1-1">
<h3>Graylog 1.1.1<a class="headerlink" href="#graylog-1-1-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-06-05</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-v1-1-1-is-now-available/">https://www.graylog.org/graylog-v1-1-1-is-now-available/</a></p>
<ul class="simple">
<li>Fix problem with missing alarmcallbacks. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1214">Graylog2/graylog2-server#1214</a></li>
<li>Add additional newline between messages to alert email. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1216">Graylog2/graylog2-server#1216</a></li>
<li>Fix incorrect index range calculation. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1217">Graylog2/graylog2-server#1217</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1266">Graylog2/graylog2-web-interface#1266</a></li>
<li>Fix sidebar auto-height on old Firefox versions. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1410">Graylog2/graylog2-web-interface#1410</a></li>
<li>Fix “create one now” link on stream list page. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1424">Graylog2/graylog2-web-interface#1424</a></li>
<li>Do not update StreamThroughput when unmounted. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1428">Graylog2/graylog2-web-interface#1428</a></li>
<li>Fix position of alert annotations in search result histogram. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1421">Graylog2/graylog2-web-interface#1421</a></li>
<li>Fix NPE when searching. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1212">Graylog2/graylog2-web-interface#1212</a></li>
<li>Hide unlock dashboard link for reader users. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1429">Graylog2/graylog2-web-interface#1429</a></li>
<li>Open radio documentation link on a new window. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1427">Graylog2/graylog2-web-interface#1427</a></li>
<li>Use radio node page on message details. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1423">Graylog2/graylog2-web-interface#1423</a></li>
</ul>
</div>
<div class="section" id="graylog-1-1-0">
<h3>Graylog 1.1.0<a class="headerlink" href="#graylog-1-1-0" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-06-04</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-1-1-is-now-generally-available/">https://www.graylog.org/graylog-1-1-is-now-generally-available/</a></p>
<ul class="simple">
<li>Properly set <code class="docutils literal notranslate"><span class="pre">node_id</span></code> on message input <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1210">Graylog2/graylog2-server#1210</a></li>
<li>Fixed handling of booleans in configuration forms in the web interface</li>
<li>Various design fixes in the web interface</li>
</ul>
</div>
<div class="section" id="graylog-1-1-0-rc-3">
<h3>Graylog 1.1.0-rc.3<a class="headerlink" href="#graylog-1-1-0-rc-3" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-06-02</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-v1-1-rc3-is-now-available/">https://www.graylog.org/graylog-v1-1-rc3-is-now-available/</a></p>
<ul class="simple">
<li>Unbreak server startup with collector thresholds set. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1194">Graylog2/graylog2-server#1194</a></li>
<li>Adding verbal alert description to alert email templates and subject line defaults. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1158">Graylog2/graylog2-server#1158</a></li>
<li>Fix message backlog in default body template in FormattedEmailAlertSender. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1163">Graylog2/graylog2-server#1163</a></li>
<li>Make RawMessageEvent’s fields volatile to guard against cross-cpu visibility issues. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1207">Graylog2/graylog2-server#1207</a></li>
<li>Set default for “disable_index_range_calculation” to “true”.</li>
<li>Passing in value to text area fields in configuration forms. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1340">Graylog2/graylog2-web-interface#1340</a></li>
<li>Stream list has no loading spinner. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1309">Graylog2/graylog2-web-interface#1309</a></li>
<li>Showing a helpful notification when there are no active/inactive collectors. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1302">Graylog2/graylog2-web-interface#1302</a></li>
<li>Improve behavior when field graphs are stacked. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1348">Graylog2/graylog2-web-interface#1348</a></li>
<li>Keep new lines added by users on alert callbacks. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1270">Graylog2/graylog2-web-interface#1270</a></li>
<li>Fix duplicate metrics reporting if two components subscribed to the same metric on the same page. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1199">Graylog2/graylog2-server#1199</a></li>
<li>Make sidebar visible on small screens. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1390">Graylog2/graylog2-web-interface#1390</a></li>
<li>Showing warning and disabling edit button for output if plugin is missing. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1185">Graylog2/graylog2-web-interface#1185</a></li>
<li>Using formatted fields in old message loader. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1393">Graylog2/graylog2-web-interface#1393</a></li>
<li>Several styling and UX improvements</li>
</ul>
</div>
<div class="section" id="graylog-1-1-0-rc-1">
<h3>Graylog 1.1.0-rc.1<a class="headerlink" href="#graylog-1-1-0-rc-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-05-27</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-v1-1-rc1-is-now-available/">https://www.graylog.org/graylog-v1-1-rc1-is-now-available/</a></p>
<ul class="simple">
<li>Unable to send email alerts. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1346">Graylog2/graylog2-web-interface#1346</a></li>
<li>“Show messages from this collector view” displays no messages. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1334">Graylog2/graylog2-web-interface#1334</a></li>
<li>Exception error in search page when using escaped characters. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1356">Graylog2/graylog2-web-interface#1356</a></li>
<li>Wrong timestamp on stream rule editor. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1328">Graylog2/graylog2-web-interface#1328</a></li>
<li>Quickvalue values are not linked to update search query. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1296">Graylog2/graylog2-web-interface#1296</a></li>
<li>Stream list has no loading spinner. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1309">Graylog2/graylog2-web-interface#1309</a></li>
<li>Collector list with only inactive collectors is confusing. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1302">Graylog2/graylog2-web-interface#1302</a></li>
<li>Update sockjs-client to 1.0.0. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1344">Graylog2/graylog2-web-interface#1344</a></li>
<li>Scroll to search bar when new query term is added. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1284">Graylog2/graylog2-web-interface#1284</a></li>
<li>Scroll to quick values if not visible. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1284">Graylog2/graylog2-web-interface#1284</a></li>
<li>Scroll to newly created field graphs. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1284">Graylog2/graylog2-web-interface#1284</a></li>
<li>Problems with websockets and even xhr streaming. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1344">Graylog2/graylog2-web-interface#1344</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1353">Graylog2/graylog2-web-interface#1353</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1338">Graylog2/graylog2-web-interface#1338</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1322">Graylog2/graylog2-web-interface#1322</a></li>
<li>Add to search bar not working on sources tab. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1350">Graylog2/graylog2-web-interface#1350</a></li>
<li>Make field graphs work with streams. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1352">Graylog2/graylog2-web-interface#1352</a></li>
<li>Improved page design on outputs page. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1236">Graylog2/graylog2-web-interface#1236</a></li>
<li>Set startpage button missing for dashboards. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1345">Graylog2/graylog2-web-interface#1345</a></li>
<li>Generating chart for http response code is broken. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1358">Graylog2/graylog2-web-interface#1358</a></li>
</ul>
</div>
<div class="section" id="graylog-1-1-0-beta-3">
<h3>Graylog 1.1.0-beta.3<a class="headerlink" href="#graylog-1-1-0-beta-3" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-05-27</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-1-1-beta-3-is-now-available/">https://www.graylog.org/graylog-1-1-beta-3-is-now-available/</a></p>
<ul class="simple">
<li>Kafka inputs now support syslog, GELF and raw messages <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/322">Graylog2/graylog2-server#322</a></li>
<li>Configurable timezone for the flexdate converter in extractors. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1166">Graylog2/graylog2-server#1166</a></li>
<li>Allow decimal values for greater/smaller stream rules. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1101">Graylog2/graylog2-server#1101</a></li>
<li>New configuration file option to control the default widget cache time. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1170">Graylog2/graylog2-server#1170</a></li>
<li>Expose heartbeat configuration for AMQP inputs. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1010">Graylog2/graylog2-server#1010</a></li>
<li>New alert condition to alert on field content. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/537">Graylog2/graylog2-server#537</a></li>
<li>Add &lt;code&gt;-Dwebsockets.enabled=false&lt;/code&gt; option for the web interface to disable websockets. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1322">Graylog2/graylog2-web-interface#1322</a></li>
<li>Clicking the Graylog logo redirects to the custom startpage now. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1315">Graylog2/graylog2-web-interface#1315</a></li>
<li>Improved reset and filter feature in sources tab. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1337">Graylog2/graylog2-web-interface#1337</a></li>
<li>Fixed issue with stopping Kafka based inputs. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1171">Graylog2/graylog2-server#1171</a></li>
<li>System throughput resource was always returning 0. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1313">Graylog2/graylog2-web-interface#1313</a></li>
<li>MongoDB configuration problem with replica sets. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1173">Graylog2/graylog2-server#1173</a></li>
<li>Syslog parser did not strip empty structured data fields. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1161">Graylog2/graylog2-server#1161</a></li>
<li>Input metrics did not update after input has been stopped and started again. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1187">Graylog2/graylog2-server#1187</a></li>
<li>NullPointerException with existing inputs in database fixed. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1312">Graylog2/graylog2-web-interface#1312</a></li>
<li>Improved browser input validation for several browsers. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1318">Graylog2/graylog2-web-interface#1318</a></li>
<li>Grok pattern upload did not work correctly. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1321">Graylog2/graylog2-web-interface#1321</a></li>
<li>Internet Explorer 9 fixes. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1319">Graylog2/graylog2-web-interface#1319</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1320">Graylog2/graylog2-web-interface#1320</a></li>
<li>Quick values feature did not work with reader users. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1169">Graylog2/graylog2-server#1169</a></li>
<li>Replay link for keyword widgets was broken. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1323">Graylog2/graylog2-web-interface#1323</a></li>
<li>Provide visual feedback when expanding message details. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1283">Graylog2/graylog2-web-interface#1283</a></li>
<li>Allow filtering of saved searches again. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1277">Graylog2/graylog2-web-interface#1277</a></li>
<li>Add back “Show details” link for global input metrics. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1168">Graylog2/graylog2-server#1168</a></li>
<li>Provide visual feedback when dashboard widgets are loading. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1324">Graylog2/graylog2-web-interface#1324</a></li>
<li>Restore preview for keyword time range selector. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1280">Graylog2/graylog2-web-interface#1280</a></li>
<li>Fixed issue where widgets loading data looked empty. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1324">Graylog2/graylog2-web-interface#1324</a></li>
</ul>
</div>
<div class="section" id="graylog-1-1-0-beta-2">
<h3>Graylog 1.1.0-beta.2<a class="headerlink" href="#graylog-1-1-0-beta-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-05-20</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-1-1-beta-is-now-available/">https://www.graylog.org/graylog-1-1-beta-is-now-available/</a></p>
<ul class="simple">
<li>CSV output streaming support including full text message</li>
<li>Simplified MongoDB configuration with URI support</li>
<li>Improved tokenizer for extractors</li>
<li>Configurable UDP buffer size for incoming messages</li>
<li>Enhanced Grok support with type conversions (integers, doubles and dates)</li>
<li>Elasticsearch 1.5.2 support</li>
<li>Added support for integrated Log Collector</li>
<li>Search auto-complete</li>
<li>Manual widget resize</li>
<li>Auto resize of widgets based on screen size</li>
<li>Faster search results</li>
<li>Moved search filter for usability</li>
<li>Updated several icons to text boxes for usability</li>
<li>Search highlight toggle</li>
<li>Pie charts (Stacked charts are coming too!)</li>
<li>Improved stream management</li>
<li>Output plugin and Alarm callback edit support</li>
<li>Dashboard widget search edit</li>
<li>Dashboard widget direct search button</li>
<li>Dashboard background update support for better performance</li>
<li>Log collector status UI</li>
</ul>
</div>
<div class="section" id="graylog-1-0-2">
<h3>Graylog 1.0.2<a class="headerlink" href="#graylog-1-0-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-04-28</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-v1-0-2-has-been-released/">https://www.graylog.org/graylog-v1-0-2-has-been-released/</a></p>
<ul class="simple">
<li>Regular expression and Grok test failed when example message is a JSON document or contains special characters (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1190">Graylog2/graylog2-web-interface#1190</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1195">Graylog2/graylog2-web-interface#1195</a>)</li>
<li>“Show message terms” was broken (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1168">Graylog2/graylog2-web-interface#1168</a>)</li>
<li>Showing message indices was broken (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1211">Graylog2/graylog2-web-interface#1211</a>)</li>
<li>Fixed typo in SetIndexReadOnlyJob (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1206">Graylog2/graylog2-web-interface#1206</a>)</li>
<li>Consistent error messages when trying to create graphs from non-numeric values (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1210">Graylog2/graylog2-web-interface#1210</a>)</li>
<li>Fix message about too few file descriptors for Elasticsearch when number of file descriptors is unlimited (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1220">Graylog2/graylog2-web-interface#1220</a>)</li>
<li>Deleting output globally which was assigned to multiple streams left stale references (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1113">Graylog2/graylog2-server#1113</a>)</li>
<li>Fixed problem with sending alert emails (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1086">Graylog2/graylog2-server#1086</a>)</li>
<li>TokenizerConverter can now handle mixed quoted and un-quoted k/v pairs (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1083">Graylog2/graylog2-server#1083</a>)</li>
</ul>
</div>
<div class="section" id="graylog-1-0-1">
<h3>Graylog 1.0.1<a class="headerlink" href="#graylog-1-0-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-03-16</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-v1-0-1-has-been-released/">https://www.graylog.org/graylog-v1-0-1-has-been-released/</a></p>
<ul class="simple">
<li>Properly log stack traces (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/970">Graylog2/graylog2-server#970</a>)</li>
<li>Update REST API browser to new Graylog logo</li>
<li>Avoid spamming the logs if the original input of a message in the disk journal can’t be loaded (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1005">Graylog2/graylog2-server#1005</a>)</li>
<li>Allows reader users to see the journal status (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1009">Graylog2/graylog2-server#1009</a>)</li>
<li>Compatibility with MongoDB 3.0 and Wired Tiger storage engine (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1024">Graylog2/graylog2-server#1024</a>)</li>
<li>Respect <code class="docutils literal notranslate"><span class="pre">rest_transport_uri</span></code> when generating entity URLs in REST API (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1020">Graylog2/graylog2-server#1020</a>)</li>
<li>Properly map <code class="docutils literal notranslate"><span class="pre">NodeNotFoundException</span></code> (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1137">Graylog2/graylog2-web-interface#1137</a>)</li>
<li>Allow replacing all existing Grok patterns on bulk import (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/pull/1150">Graylog2/graylog2-web-interface#1150</a>)</li>
<li>Configuration option for discarding messages on error in AMQP inputs (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1018">Graylog2/graylog2-server#1018</a>)</li>
<li>Configuration option of maximum HTTP chunk size for HTTP-based inputs (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1011">Graylog2/graylog2-server#1011</a>)</li>
<li>Clone alarm callbacks when cloning a stream (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/990">Graylog2/graylog2-server#990</a>)</li>
<li>Add <code class="docutils literal notranslate"><span class="pre">hasField()</span></code> and <code class="docutils literal notranslate"><span class="pre">getField()</span></code> methods to <code class="docutils literal notranslate"><span class="pre">MessageSummary</span></code> class (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/923">Graylog2/graylog2-server#923</a>)</li>
<li>Add per input parse time metrics (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1106">Graylog2/graylog2-web-interface#1106</a>)</li>
<li>Allow the use of <a class="reference external" href="https://logging.apache.org/log4j/extras/">https://logging.apache.org/log4j/extras/</a> log4j-extras classes in log4j configuration (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/1042">Graylog2/graylog2-server#1042</a>)</li>
<li>Fix updating of input statistics for Radio nodes (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1122">Graylog2/graylog2-web-interface#1022</a>)</li>
<li>Emit proper error message when a regular expression in an Extractor doesn’t match example message (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1157">Graylog2/graylog2-web-interface#1157</a>)</li>
<li>Add additional information to system jobs (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/920">Graylog2/graylog2-server#920</a>)</li>
<li>Fix false positive message on LDAP login test (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1138">Graylog2/graylog2-web-interface#1138</a>)</li>
<li>Calculate saved search resolution dynamically (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/943">Graylog2/graylog2-web-interface#943</a>)</li>
<li>Only enable LDAP test buttons when data is present (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1097">Graylog2/graylog2-web-interface#1097</a>)</li>
<li>Load more than 1 message on Extractor form (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1105">Graylog2/graylog2-web-interface#1105</a>)</li>
<li>Fix NPE when listing alarm callback using non-existent plugin (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1152">Graylog2/graylog2-web-interface#1152</a>)</li>
<li>Redirect to nodes overview when node is not found (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1137">Graylog2/graylog2-web-interface#1137</a>)</li>
<li>Fix documentation links to integrations and data sources (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1136">Graylog2/graylog2-web-interface#1136</a>)</li>
<li>Prevent accidental indexing of web interface by web crawlers (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1151">Graylog2/graylog2-web-interface#1151</a>)</li>
<li>Validate grok pattern name on the client to avoid duplicate names (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/937">Graylog2/graylog2-server#937</a>)</li>
<li>Add message journal usage to nodes overview page (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1083">Graylog2/graylog2-web-interface#1083</a>)</li>
<li>Properly format numbers according to locale (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1128">Graylog2/graylog2-web-interface#1128</a>,  <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1129">Graylog2/graylog2-web-interface#1129</a>)</li>
</ul>
</div>
<div class="section" id="graylog-1-0-0">
<h3>Graylog 1.0.0<a class="headerlink" href="#graylog-1-0-0" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-02-19</p>
<p><a class="reference external" href="https://www.graylog.org/announcing-graylog-v1-0-ga/">https://www.graylog.org/announcing-graylog-v1-0-ga/</a></p>
<ul class="simple">
<li>No changes since Graylog 1.0.0-rc.4</li>
</ul>
</div>
<div class="section" id="graylog-1-0-0-rc-4">
<h3>Graylog 1.0.0-rc.4<a class="headerlink" href="#graylog-1-0-0-rc-4" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-02-13</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-v1-0-rc-4-has-been-released/">https://www.graylog.org/graylog-v1-0-rc-4-has-been-released/</a></p>
<ul class="simple">
<li>Default configuration file locations have changed. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/950">Graylog2/graylog2-server#950</a></li>
<li>Improved error handling on search errors. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/954">Graylog2/graylog2-server#954</a></li>
<li>Dynamically update dashboard widgets with keyword range. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/956">Graylog2/graylog2-server#956</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/958">Graylog2/graylog2-web-interface#958</a></li>
<li>Prevent duplicate loading of plugins. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/948">Graylog2/graylog2-server#948</a></li>
<li>Fixed password handling when editing inputs. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1103">Graylog2/graylog2-web-interface#1103</a></li>
<li>Fixed issues getting Elasticsearch cluster health. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/953">Graylog2/graylog2-server#953</a></li>
<li>Better error handling for extractor imports. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/942">Graylog2/graylog2-server#942</a></li>
<li>Fixed structured syslog parsing of keys containing special characters. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/845">Graylog2/graylog2-server#845</a></li>
<li>Improved layout on Grok patterns page. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1109">Graylog2/graylog2-web-interface#1109</a></li>
<li>Improved formatting large numbers. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1111">Graylog2/graylog2-web-interface#1111</a></li>
<li>New Graylog logo.</li>
</ul>
</div>
<div class="section" id="graylog-1-0-0-rc-3">
<h3>Graylog 1.0.0-rc.3<a class="headerlink" href="#graylog-1-0-0-rc-3" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-02-05</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-v1-0-rc-3-has-been-released/">https://www.graylog.org/graylog-v1-0-rc-3-has-been-released/</a></p>
<ul class="simple">
<li>Fixed compatibility with MongoDB version 2.2. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/941">Graylog2/graylog2-server#941</a></li>
<li>Fixed performance regression in process buffer handling. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/944">Graylog2/graylog2-server#944</a></li>
<li>Fixed data type for the <code class="docutils literal notranslate"><span class="pre">max_size_per_index</span></code> config option value. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1100">Graylog2/graylog2-web-interface#1100</a></li>
<li>Fixed problem with indexer error page. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1102">Graylog2/graylog2-web-interface#1102</a></li>
</ul>
</div>
<div class="section" id="graylog-1-0-0-rc-2">
<h3>Graylog 1.0.0-rc.2<a class="headerlink" href="#graylog-1-0-0-rc-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-02-04</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-v1-0-rc-2-has-been-released/">https://www.graylog.org/graylog-v1-0-rc-2-has-been-released/</a></p>
<ul class="simple">
<li>Better Windows compatibility. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/930">Graylog2/graylog2-server#930</a></li>
<li>Added helper methods for the plugin API to simplify plugin development.</li>
<li>Fixed problem with input removal on radio nodes. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/932">Graylog2/graylog2-server#932</a></li>
<li>Improved buffer information for input, process and output buffers. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1096">Graylog2/graylog2-web-interface#1096</a></li>
<li>Fixed API return value incompatibility regarding node objects. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/933">Graylog2/graylog2-server#933</a></li>
<li>Fixed reloading of LDAP settings. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/934">Graylog2/graylog2-server#934</a></li>
<li>Fixed ordering of message input state labels. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1094">Graylog2/graylog2-web-interface#1094</a></li>
<li>Improved error messages for journal related errors. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/931">Graylog2/graylog2-server#931</a></li>
<li>Fixed browser compatibility for stream rules form. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1095">Graylog2/graylog2-web-interface#1095</a></li>
<li>Improved grok pattern management. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1099">Graylog2/graylog2-web-interface#1099</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1098">Graylog2/graylog2-web-interface#1098</a></li>
</ul>
</div>
<div class="section" id="graylog-1-0-0-rc-1">
<h3>Graylog 1.0.0-rc.1<a class="headerlink" href="#graylog-1-0-0-rc-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-01-28</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-v1-0-rc-1-has-been-released/">https://www.graylog.org/graylog-v1-0-rc-1-has-been-released/</a></p>
<ul class="simple">
<li>Cleaned up internal metrics when input is terminating. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/915">Graylog2/graylog2-server#915</a></li>
<li>Added Telemetry plugin options to example graylog.conf. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/914">Graylog2/graylog2-server#914</a></li>
<li>Fixed problems with user permissions on streams. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1058">Graylog2/graylog2-web-interface#1058</a></li>
<li>Added information about different rotation strategies to REST API. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/913">Graylog2/graylog2-server#913</a></li>
<li>Added better error messages for failing inputs. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1056">Graylog2/graylog2-web-interface#1056</a></li>
<li>Fixed problem with JVM options in <code class="docutils literal notranslate"><span class="pre">bin/radioctl</span></code> script. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/918">Graylog2/graylog2-server#918</a></li>
<li>Fixed issue with updating input configuration. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/919">Graylog2/graylog2-server#919</a></li>
<li>Fixed password updating for reader users by the admin. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1075">Graylog2/graylog2-web-interface#1075</a></li>
<li>Enabled the <code class="docutils literal notranslate"><span class="pre">message_journal_enabled</span></code> config option by default. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/924">Graylog2/graylog2-server#924</a></li>
<li>Add REST API endpoint to list reopened indices. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1072">Graylog2/graylog2-web-interface#1072</a></li>
<li>Fixed problem with GELF stream output. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/921">Graylog2/graylog2-server#921</a></li>
<li>Show an error message on the indices page if the Elasticsearch cluster is not available. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1070">Graylog2/graylog2-web-interface#1070</a></li>
<li>Fixed a problem with stopping inputs. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/926">Graylog2/graylog2-server#926</a></li>
<li>Changed output configuration display to mask passwords. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1066">Graylog2/graylog2-web-interface#1066</a></li>
<li>Disabled message journal on radio nodes. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/927">Graylog2/graylog2-server#927</a></li>
<li>Create new message representation format for search results in alarm callback messages. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/923">Graylog2/graylog2-server#923</a></li>
<li>Fixed stream router to update the stream engine if a stream has been changed. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/922">Graylog2/graylog2-server#922</a></li>
<li>Fixed focus problem in stream rule modal windows. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1063">Graylog2/graylog2-web-interface#1063</a></li>
<li>Do not show new dashboard link for reader users. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1057">Graylog2/graylog2-web-interface#1057</a></li>
<li>Do not show stream output menu for reader users. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1059">Graylog2/graylog2-web-interface#1059</a></li>
<li>Do not show user forms of other users for reader users. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1064">Graylog2/graylog2-web-interface#1064</a></li>
<li>Do not show permission settings in the user profile for reader users. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1055">Graylog2/graylog2-web-interface#1055</a></li>
<li>Fixed extractor edit form with no messages available. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1061">Graylog2/graylog2-web-interface#1061</a></li>
<li>Fixed problem with node details page and JVM locale settings. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1062">Graylog2/graylog2-web-interface#1062</a></li>
<li>Improved page layout for Grok patterns.</li>
<li>Improved layout for the message journal information. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1084">Graylog2/graylog2-web-interface#1084</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1085">Graylog2/graylog2-web-interface#1085</a></li>
<li>Fixed wording on radio inputs page. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1077">Graylog2/graylog2-web-interface#1077</a></li>
<li>Fixed formatting on indices page. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1086">Graylog2/graylog2-web-interface#1086</a></li>
<li>Improved error handling in stream rule form. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1076">Graylog2/graylog2-web-interface#1076</a></li>
<li>Fixed time range selection problem for the sources page. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1080">Graylog2/graylog2-web-interface#1080</a></li>
<li>Several improvements regarding permission checks for user creation. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1088">Graylog2/graylog2-web-interface#1088</a></li>
<li>Do not show stream alert test button for reader users. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1089">Graylog2/graylog2-web-interface#1089</a></li>
<li>Fixed node processing status not updating on the nodes page. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1090">Graylog2/graylog2-web-interface#1090</a></li>
<li>Fixed filename handling on Windows. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/928">Graylog2/graylog2-server#928</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/732">Graylog2/graylog2-server#732</a></li>
</ul>
</div>
<div class="section" id="graylog-1-0-0-beta-2">
<h3>Graylog 1.0.0-beta.2<a class="headerlink" href="#graylog-1-0-0-beta-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-01-21</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-v1-0-beta-3-has-been-released/">https://www.graylog.org/graylog-v1-0-beta-3-has-been-released/</a></p>
<ul class="simple">
<li>Fixed stream alert creation. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/891">Graylog2/graylog2-server#891</a></li>
<li>Suppress warning message when PID file doesn’t exist. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/889">Graylog2/graylog2-server#889</a></li>
<li>Fixed an error on outputs page with missing output plugin. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/894">Graylog2/graylog2-server#894</a></li>
<li>Change default heap and garbage collector settings in scripts.</li>
<li>Add extractor information to log message about failing extractor.</li>
<li>Fixed problem in SplitAndIndexExtractor. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/896">Graylog2/graylog2-server#896</a></li>
<li>Improved rendering time for indices page. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1060">Graylog2/graylog2-web-interface#1060</a></li>
<li>Allow user to edit its own preferences. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1049">Graylog2/graylog2-web-interface#1049</a></li>
<li>Fixed updating stream attributes. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/902">Graylog2/graylog2-server#902</a></li>
<li>Stream throughput now shows combined value over all nodes. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1047">Graylog2/graylog2-web-interface#1047</a></li>
<li>Fixed resource leak in JVM PermGen memory. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/907">Graylog2/graylog2-server#907</a></li>
<li>Update to gelfclient-1.1.0 to fix DNS resolving issue. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/882">Graylog2/graylog2-server#882</a></li>
<li>Allow arbitrary characters in user names (in fact in any resource url). <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1005">Graylog2/graylog2-web-interface#1005</a>, <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1006">Graylog2/graylog2-web-interface#1006</a></li>
<li>Fixed search result CSV export. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/901">Graylog2/graylog2-server#901</a></li>
<li>Skip GC collection notifications for parallel collector. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/899">Graylog2/graylog2-server#899</a></li>
<li>Shorter reconnect timeout for Radio AMQP connections. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/900">Graylog2/graylog2-server#900</a></li>
<li>Fixed random startup error in Radio. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/911">Graylog2/graylog2-server#911</a></li>
<li>Fixed updating an alert condition. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/912">Graylog2/graylog2-server#912</a></li>
<li>Add system notifications for journal related warnings. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/897">Graylog2/graylog2-server#897</a></li>
<li>Add system notifications for failing outputs. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/741">Graylog2/graylog2-server#741</a></li>
<li>Improve search result pagination. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/834">Graylog2/graylog2-web-interface#834</a></li>
<li>Improved regex error handling in extractor testing. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1044">Graylog2/graylog2-web-interface#1044</a></li>
<li>Wrap long names for node metrics. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1028">Graylog2/graylog2-web-interface#1028</a></li>
<li>Fixed node information progress bars. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1046">Graylog2/graylog2-web-interface#1046</a></li>
<li>Improve node buffer utilization readability. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1046">Graylog2/graylog2-web-interface#1046</a></li>
<li>Fixed username alert receiver form field. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/pull/1050">Graylog2/graylog2-web-interface#1050</a></li>
<li>Wrap long messages without break characters. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1052">Graylog2/graylog2-web-interface#1052</a></li>
<li>Hide list of node plugins if there aren’t any plugins installed.</li>
<li>Warn user before leaving page with unpinned graphs. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/808">Graylog2/graylog2-web-interface#808</a></li>
</ul>
</div>
<div class="section" id="id65">
<h3>Graylog 1.0.0-beta.2<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-01-16</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-v1-0-0-beta2/">https://www.graylog.org/graylog-v1-0-0-beta2/</a></p>
<ul class="simple">
<li>SIGAR native libraries are now found correctly (for getting system information)</li>
<li>plugins can now state if they want to run in server or radio</li>
<li>Fixed LDAP settings testing. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1026">Graylog2/graylog2-web-interface#1026</a></li>
<li>Improved RFC5425 syslog message parsing. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/845">Graylog2/graylog2-server#845</a></li>
<li>JVM arguments are now being logged on start. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/875">Graylog2/graylog2-server#875</a></li>
<li>Improvements to log messages when Elasticsearch connection fails during start.</li>
<li>Fixed an issue with AMQP transport shutdown. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/874">Graylog2/graylog2-server#874</a></li>
<li>After index cycling the System overview page could be broken. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/880">Graylog2/graylog2-server#880</a></li>
<li>Extractors can now be edited. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/549">Graylog2/graylog2-web-interface#549</a></li>
<li>Fixed saving user preferences. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1027">Graylog2/graylog2-web-interface#1027</a></li>
<li>Scripts now return proper exit codes. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/886">Graylog2/graylog2-server#886</a></li>
<li>Grok patterns can now be uploaded in bulk. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/377">Graylog2/graylog2-server#377</a></li>
<li>During extractor creation the test display could be offset. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/804">Graylog2/graylog2-server#804</a></li>
<li>Performance fix for the System/Indices page. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1035">Graylog2/graylog2-web-interface#1035</a></li>
<li>A create dashboard link was shown to reader users, leading to an error when followed. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1032">Graylog2/graylog2-web-interface#1032</a></li>
<li>Content pack section was shown to reader users, leading to an error when followed. <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1033">Graylog2/graylog2-web-interface#1033</a></li>
<li>Failing stream outputs were being restarted constantly. <a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/741">Graylog2/graylog2-server#741</a></li>
</ul>
</div>
<div class="section" id="graylog2-0-92-4">
<h3>Graylog2 0.92.4<a class="headerlink" href="#graylog2-0-92-4" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-01-14</p>
<p><a class="reference external" href="https://www.graylog.org/graylog2-v0-92-4/">https://www.graylog.org/graylog2-v0-92-4/</a></p>
<ul class="simple">
<li>[SERVER] Ensure that Radio inputs can only be started on server nodes (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/843">Graylog2/graylog2-server#843</a>)</li>
<li>[SERVER] Avoid division by zero when finding rotation anchor in the time-based rotation strategy (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/836">Graylog2/graylog2-server#836</a>)</li>
<li>[SERVER] Use username as fallback if display name in LDAP is empty (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/837">Graylog2/graylog2-server#837</a>)</li>
</ul>
</div>
<div class="section" id="graylog-1-0-0-beta-1">
<h3>Graylog 1.0.0-beta.1<a class="headerlink" href="#graylog-1-0-0-beta-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2015-01-12</p>
<p><a class="reference external" href="https://www.graylog.org/graylog-v1-0-0-beta1/">https://www.graylog.org/graylog-v1-0-0-beta1/</a></p>
<ul class="simple">
<li>Message Journaling</li>
<li>New Widgets</li>
<li>Grok Extractor Support</li>
<li>Overall stability and resource efficiency improvements</li>
<li>Single binary for <code class="docutils literal notranslate"><span class="pre">graylog2-server</span></code> and <code class="docutils literal notranslate"><span class="pre">graylog2-radio</span></code></li>
<li>Inputs are now editable</li>
<li>Order of field charts rendered inside the search results page is now maintained.</li>
<li>Improvements in focus and keyboard behaviour on modal windows and forms.</li>
<li>You can now define whether to disable expensive, frequent real-time updates of the UI in the settings of each user. (For example the updating of total messages in the system)</li>
<li>Experimental search query auto-completion that can be enabled in the user preferences.</li>
<li>The API browser now documents server response payloads in a better way so you know what to expect as an answer to your call.</li>
<li>Now using the standard Java ServiceLoader for plugins.</li>
</ul>
</div>
<div class="section" id="graylog2-0-92-3">
<h3>Graylog2 0.92.3<a class="headerlink" href="#graylog2-0-92-3" title="Permalink to this headline">¶</a></h3>
<p>Released: 2014-12-23</p>
<p><a class="reference external" href="https://www.graylog.org/graylog2-v0-92-3/">https://www.graylog.org/graylog2-v0-92-3/</a></p>
<ul class="simple">
<li>[SERVER] Removed unnecessary instrumentation in certain places to reduce GC pressure caused by many short living objects (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/800">Graylog2/graylog2-server#800</a>)</li>
<li>[SERVER] Limit Netty worker thread pool to 16 threads by default (see <code class="docutils literal notranslate"><span class="pre">rest_worker_threads_max_pool_size</span></code> in <a class="reference external" href="https://github.com/Graylog2/graylog2-server/blob/0.92.3/misc/graylog2.conf#L71-L72">graylog2.conf</a></li>
<li>[WEB] Fixed upload of content packs when a URI path prefix (<code class="docutils literal notranslate"><span class="pre">application.context</span></code> in <a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/blob/0.92.3/misc/graylog2-web-interface.conf.example#L25-L26">graylog2-web-interface.conf</a>) is being used (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/1009">Graylog2/graylog2-web-interface#1009</a>)</li>
<li>[WEB] Fixed display of metrics of type Counter (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/issues/795">Graylog2/graylog2-server#795</a>)</li>
</ul>
</div>
<div class="section" id="graylog2-0-92-1">
<h3>Graylog2 0.92.1<a class="headerlink" href="#graylog2-0-92-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2014-12-11</p>
<p><a class="reference external" href="https://www.graylog.org/graylog2-v0-92-1/">https://www.graylog.org/graylog2-v0-92-1/</a></p>
<ul class="simple">
<li>[SERVER] Fixed name resolution and overriding sources for network inputs.</li>
<li>[SERVER] Fixed wrong delimiter in GELF TCP input.</li>
<li>[SERVER] Disabled the output cache by default. The output cache is the source of all sorts of interesting problems. If you want to keep using it, please read the upgrade notes.</li>
<li>[SERVER] Fixed message timestamps in GELF output.</li>
<li>[SERVER] Fixed connection counter for network inputs.</li>
<li>[SERVER] Added warning message if the receive buffer size (SO_RECV) couldn’t be set for network inputs.</li>
<li>[WEB] Improved keyboard shortcuts with most modal dialogs (e. g. hitting Enter submits the form instead of just closing the dialogs).</li>
<li>[WEB] Upgraded to play2-graylog2 1.2.1 (compatible with Play 2.3.x and Java 7).</li>
</ul>
</div>
<div class="section" id="graylog2-0-92-0">
<h3>Graylog2 0.92.0<a class="headerlink" href="#graylog2-0-92-0" title="Permalink to this headline">¶</a></h3>
<p>Released: 2014-12-01</p>
<p><a class="reference external" href="https://www.graylog.org/graylog2-v0-92/">https://www.graylog.org/graylog2-v0-92/</a></p>
<ul class="simple">
<li>[SERVER] IMPORTANT SECURITY FIX: It was possible to perform LDAP logins with crafted wildcards. (A big thank you to Jose Tozo who discovered this issue and disclosed it very responsibly.)</li>
<li>[SERVER] Generate a system notification if garbage collection takes longer than a configurable threshold.</li>
<li>[SERVER] Added several JVM-related metrics.</li>
<li>[SERVER] Added support for Elasticsearch 1.4.x which brings a lot of stability and resilience features to Elasticsearch clusters.</li>
<li>[SERVER] Made version check of Elasticsearch version optional. Disabling this check is not recommended.</li>
<li>[SERVER] Added an option to disable optimizing Elasticsearch indices on index cycling.</li>
<li>[SERVER] Added an option to disable time-range calculation for indices on index cycling.</li>
<li>[SERVER] Lots of other performance enhancements for large setups (i.e. involving several Radio nodes and multiple Graylog2 Servers).</li>
<li>[SERVER] Support for Syslog Octet Counting, as used by syslog-ng for syslog via TCP (#743)</li>
<li>[SERVER] Improved support for structured syslog messages (#744)</li>
<li>[SERVER] Bug fixes regarding IPv6 literals in mongodb_replica_set and elasticsearch_discovery_zen_ping_unicast_hosts</li>
<li>[WEB] Added additional details to system notification about Elasticsearch max. open file descriptors.</li>
<li>[WEB] Fixed several bugs and inconsistencies regarding time zones.</li>
<li>[WEB] Improved graphs and diagrams</li>
<li>[WEB] Allow to update dashboards when browser window is not on focus (#738)</li>
<li>[WEB] Bug fixes regarding timezone handling</li>
<li>Numerous internal bug fixes</li>
</ul>
</div>
<div class="section" id="graylog2-0-92-0-rc-1">
<h3>Graylog2 0.92.0-rc.1<a class="headerlink" href="#graylog2-0-92-0-rc-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2014-11-21</p>
<p><a class="reference external" href="https://www.graylog.org/graylog2-v0-92-rc-1/">https://www.graylog.org/graylog2-v0-92-rc-1/</a></p>
<ul class="simple">
<li>[SERVER] Generate a system notification if garbage collection takes longer than a configurable threshold.</li>
<li>[SERVER] Added several JVM-related metrics.</li>
<li>[SERVER] Added support for Elasticsearch 1.4.x which brings a lot of stability and resilience features to Elasticsearch clusters.</li>
<li>[SERVER] Made version check of Elasticsearch version optional. Disabling this check is not recommended.</li>
<li>[SERVER] Added an option to disable optimizing Elasticsearch indices on index cycling.</li>
<li>[SERVER] Added an option to disable time-range calculation for indices on index cycling.</li>
<li>[SERVER] Lots of other performance enhancements for large setups (i. e. involving several Radio nodes and multiple Graylog2 Servers).</li>
<li>[WEB] Upgraded to Play 2.3.6.</li>
<li>[WEB] Added additional details to system notification about Elasticsearch max. open file descriptors.</li>
<li>[WEB] Fixed several bugs and inconsistencies regarding time zones.</li>
<li>Numerous internal bug fixes</li>
</ul>
</div>
<div class="section" id="graylog2-0-91-3">
<h3>Graylog2 0.91.3<a class="headerlink" href="#graylog2-0-91-3" title="Permalink to this headline">¶</a></h3>
<p>Released: 2014-11-05</p>
<p><a class="reference external" href="https://www.graylog.org/graylog2-v0-90-3-and-v0-91-3-has-been-released/">https://www.graylog.org/graylog2-v0-90-3-and-v0-91-3-has-been-released/</a></p>
<ul class="simple">
<li>Fixed date and time issues related to DST changes</li>
<li>Requires Elasticsearch 1.3.4; Elasticsearch 1.3.2 had a bug that can cause index corruptions.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">mongodb_replica_set</span></code> configuration variable now supports IPv6</li>
<li>Messages read from the on-disk caches could be stored with missing fields</li>
</ul>
</div>
<div class="section" id="id68">
<h3>Graylog2 0.91.3<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h3>
<p>Released: 2014-11-05</p>
<p><a class="reference external" href="https://www.graylog.org/graylog2-v0-90-3-and-v0-91-3-has-been-released/">https://www.graylog.org/graylog2-v0-90-3-and-v0-91-3-has-been-released/</a></p>
<ul class="simple">
<li>Fixed date and time issues related to DST changes</li>
<li>The <code class="docutils literal notranslate"><span class="pre">mongodb_replica_set</span></code> configuration variable now supports IPv6</li>
<li>Messages read from the on-disk caches could be stored with missing fields</li>
</ul>
</div>
<div class="section" id="graylog2-0-92-0-beta-1">
<h3>Graylog2 0.92.0-beta.1<a class="headerlink" href="#graylog2-0-92-0-beta-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2014-11-05</p>
<p><a class="reference external" href="https://www.graylog.org/graylog2-v0-92-beta-1/">https://www.graylog.org/graylog2-v0-92-beta-1/</a></p>
<ul class="simple">
<li>Content packs</li>
<li>[SERVER] SSL/TLS support for Graylog2 REST API</li>
<li>[SERVER] Support for time based retention cleaning of your messages. The old message count based approach is still the default.</li>
<li>[SERVER] Support for Syslog Octet Counting, as used by syslog-ng for syslog via TCP (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/743">Graylog2/graylog2-server#743</a>)</li>
<li>[SERVER] Improved support for structured syslog messages (<a class="reference external" href="https://github.com/Graylog2/graylog2-server/pull/744">Graylog2/graylog2-server#744</a>)</li>
<li>[SERVER] Bug fixes regarding IPv6 literals in <code class="docutils literal notranslate"><span class="pre">mongodb_replica_set</span></code> and <code class="docutils literal notranslate"><span class="pre">elasticsearch_discovery_zen_ping_unicast_hosts</span></code></li>
<li>[WEB] Revamped “Sources” page in the web interface</li>
<li>[WEB] Improved graphs and diagrams</li>
<li>[WEB] Allow to update dashboards when browser window is not on focus (<a class="reference external" href="https://github.com/Graylog2/graylog2-web-interface/issues/738">Graylog2/graylog2-web-interface#738</a>)</li>
<li>[WEB] Bug fixes regarding timezone handling</li>
<li>Numerous internal bug fixes</li>
</ul>
</div>
<div class="section" id="graylog2-0-91-1">
<h3>Graylog2 0.91.1<a class="headerlink" href="#graylog2-0-91-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2014-10-17</p>
<p><a class="reference external" href="https://www.graylog.org/two-new-graylog2-releases/">https://www.graylog.org/two-new-graylog2-releases/</a></p>
<ul class="simple">
<li>Messages written to the persisted master caches were written to the system with unreadable timestamps, leading to</li>
<li>errors when trying to open the message.</li>
<li>Extractors were only being deleted from running inputs but not from all inputs</li>
<li>Output plugins were not always properly loaded</li>
<li>You can now configure the <code class="docutils literal notranslate"><span class="pre">alert_check_interval</span></code> in your <code class="docutils literal notranslate"><span class="pre">graylog2.conf</span></code></li>
<li>Parsing of configured Elasticsearch unicast discovery addresses could break when including spaces</li>
</ul>
</div>
<div class="section" id="graylog2-0-90-1">
<h3>Graylog2 0.90.1<a class="headerlink" href="#graylog2-0-90-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2014-10-17</p>
<p><a class="reference external" href="https://www.graylog.org/two-new-graylog2-releases/">https://www.graylog.org/two-new-graylog2-releases/</a></p>
<ul class="simple">
<li>Messages written to the persisted master caches were written to the system with unreadable timestamps, leading to errors when trying to open the message.</li>
<li>Extractors were only being deleted from running inputs but not from all inputs</li>
<li>Output plugins were not always properly loaded</li>
<li>You can now configure the <code class="docutils literal notranslate"><span class="pre">alert_check_interval</span></code> in your <code class="docutils literal notranslate"><span class="pre">graylog2.conf</span></code></li>
<li>Parsing of configured Elasticsearch unicast discovery addresses could break when including spaces</li>
</ul>
</div>
<div class="section" id="graylog2-0-91-0-rc-1">
<h3>Graylog2 0.91.0-rc.1<a class="headerlink" href="#graylog2-0-91-0-rc-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2014-09-23</p>
<p><a class="reference external" href="https://www.graylog.org/graylog2-v0-90-has-been-released/">https://www.graylog.org/graylog2-v0-90-has-been-released/</a></p>
<ul class="simple">
<li>Optional ElasticSearch v1.3.2 support</li>
</ul>
</div>
<div class="section" id="graylog2-0-90-0">
<h3>Graylog2 0.90.0<a class="headerlink" href="#graylog2-0-90-0" title="Permalink to this headline">¶</a></h3>
<p>Released: 2014-09-23</p>
<p><a class="reference external" href="https://www.graylog.org/graylog2-v0-90-has-been-released/">https://www.graylog.org/graylog2-v0-90-has-been-released/</a></p>
<ul class="simple">
<li>Real-time data forwarding to Splunk or other systems</li>
<li>Alert callbacks for greater flexibility</li>
<li>New disk-based architecture for buffering in load spike situations</li>
<li>Improved graphing</li>
<li>Plugin API</li>
<li>Huge performance and stability improvements across the whole stack</li>
<li>Small possibility of losing messages in certain scenarios has been fixed</li>
<li>Improvements to internal logging from threads to avoid swallowing Graylog2 error messages</li>
<li>Paused streams are no longer checked for alerts</li>
<li>Several improvements to timezone handling</li>
<li>JavaScript performance fixes in the web interface and especially a fixed memory leak of charts on dashboards</li>
<li>The GELF HTTP input now supports CORS</li>
<li>Stream matching now has a configurable timeout to avoid stalling message processing in case of too complex rules or erroneous regular expressions</li>
<li>Stability improvements for Kafka and AMQP inputs</li>
<li>Inputs can now be paused and resumed</li>
<li>Dozens of bug fixes and other improvements</li>
</ul>
</div>
<div class="section" id="graylog2-0-20-3">
<h3>Graylog2 0.20.3<a class="headerlink" href="#graylog2-0-20-3" title="Permalink to this headline">¶</a></h3>
<p>Released: 2014-08-09</p>
<p><a class="reference external" href="https://www.graylog.org/graylog2-v0-20-3-has-been-released/">https://www.graylog.org/graylog2-v0-20-3-has-been-released/</a></p>
<ul class="simple">
<li>Bugfix: Storing saved searches was not accounting custom application contexts</li>
<li>Bugfix: Editing stream rules could have a wrong a pre-filled value</li>
<li>Bugfix: The create dashboard link was shown even if the user has no permission to so. This caused an ugly error page because of the missing permissions.</li>
<li>Bugfix: graylog2-radio could lose numeric fields when writing to the message broker</li>
<li>Better default batch size values for the Elasticsearch output</li>
<li>Improved <code class="docutils literal notranslate"><span class="pre">rest_transport_uri</span></code> default settings to avoid confusion with loopback interfaces</li>
<li>The deflector index is now also using the configured index prefix</li>
</ul>
</div>
<div class="section" id="graylog2-0-20-2">
<h3>Graylog2 0.20.2<a class="headerlink" href="#graylog2-0-20-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2014-05-24</p>
<p><a class="reference external" href="https://www.graylog.org/graylog2-v0-20-2-has-been-released/">https://www.graylog.org/graylog2-v0-20-2-has-been-released/</a></p>
<ul class="simple">
<li>Search result highlighting</li>
<li>Reintroduces AMQP support</li>
<li>Extractor improvements and sharing</li>
<li>Graceful shutdowns, Lifecycles, Load Balancer integration</li>
<li>Improved stream alert emails</li>
<li>Alert annotations</li>
<li>CSV exports via the REST API now support chunked transfers and avoid heap size problems with huge result sets</li>
<li>Login now redirects to page you visited before if there was one</li>
<li>More live updating information in node detail pages</li>
<li>Empty dashboards no longer show lock/unlock buttons</li>
<li>Global inputs now also show IO metrics</li>
<li>You can now easily copy message IDs into native clipboard with one click</li>
<li>Improved message field selection in the sidebar</li>
<li>Fixed display of floating point numbers in several places</li>
<li>Now supporting application contexts in the web interface like <code class="docutils literal notranslate"><span class="pre">http://example.org/graylog2</span></code></li>
<li>Several fixes for LDAP configuration form</li>
<li>Message fields in the search result sidebar now survive pagination</li>
<li>Only admin users are allowed to change the session timeout for reader users</li>
<li>New extractor: Copy whole input</li>
<li>New converters: uppercase/lowercase, flexdate (tries to parse any string as date)</li>
<li>New stream rule to check for presence or absence of fields</li>
<li>Message processing now supports trace logging</li>
<li>Better error message for ES discovery problems</li>
<li>Fixes to GELF HTTP input and it holding open connections</li>
<li>Some timezone fixes</li>
<li>CSV exports now only contain selected fields</li>
<li>Improvements for bin/graylog* control scripts</li>
<li>UDP inputs now allow for custom receive buffer sizes</li>
<li>Numeric extractor converter now supports floating point values</li>
<li>Bugfix: Several small fixes to system notifications and closing them</li>
<li>Bugfix: Carriage returns were not escaped properly in CSV exports</li>
<li>Bugfix: Some AJAX calls redirected to the startpage when they failed</li>
<li>Bugfix: Wrong sorting in sources table</li>
<li>Bugfix: Quickvalues widget was broken with very long values</li>
<li>Bugfix: Quickvalues modal was positioned wrong in some cases</li>
<li>Bugfix: Indexer failures list could break when you had a lot of failures</li>
<li>Custom application prefix was not working for field chart analytics</li>
<li>Bugfix: Memory leaks in the dashboards</li>
<li>Bugfix: NullPointerException when Elasticsearch discovery failed and unicast discovery was disabled</li>
<li>Message backlog in alert emails did not always include the correct number of messages</li>
<li>Improvements for message outputs: No longer only waiting for filled buffers but also flushing them regularly. This avoids problems that make Graylog2 look like it misses messages in cheap benchmark scenarios combined with only little throughput.</li>
</ul>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-pages/enterprise/intro"></span><div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p id="enterprise-features">Graylog Enterprise, built on top of the Graylog open source platform, offers
additional features that enable users to deploy Graylog at enterprise scale
and apply Graylog to processes and workflows across the whole organization.</p>
<p>Please see the <a class="reference external" href="https://www.graylog.org/enterprise">Graylog Enterprise Page</a> for details.</p>
</div>
<span id="document-pages/enterprise/setup"></span><div class="section" id="setup">
<span id="enterprise-setup"></span><h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>Graylog Enterprise comes as a Graylog server plugin which need to be installed
in addition to the Graylog open source setup.</p>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<p>The following list shows the minimum required Graylog versions for the Graylog Enterprise plugins.</p>
<table border="1" class="colwidths-given docutils" id="id1">
<caption><span class="caption-text">Enterprise Version Requirements</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Enterprise Version</th>
<th class="head">Required Graylog Version</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1.0.0</td>
<td>2.0.0, 2.0.1</td>
</tr>
<tr class="row-odd"><td>1.0.1</td>
<td>2.0.2, 2.0.3</td>
</tr>
<tr class="row-even"><td>1.2.0</td>
<td>2.1.0, 2.1.1, 2.1.2</td>
</tr>
<tr class="row-odd"><td>1.2.1</td>
<td>2.1.3</td>
</tr>
<tr class="row-even"><td>2.2.0</td>
<td>2.2.0</td>
</tr>
<tr class="row-odd"><td>2.2.1</td>
<td>2.2.1</td>
</tr>
<tr class="row-even"><td>2.3.0</td>
<td>2.3.0</td>
</tr>
<tr class="row-odd"><td>2.3.1</td>
<td>2.3.1</td>
</tr>
<tr class="row-even"><td>2.3.2</td>
<td>2.3.2</td>
</tr>
<tr class="row-odd"><td>2.4.0</td>
<td>2.4.0</td>
</tr>
<tr class="row-even"><td>2.4.1</td>
<td>2.4.1</td>
</tr>
<tr class="row-odd"><td>2.4.2</td>
<td>2.4.2</td>
</tr>
<tr class="row-even"><td>2.4.3</td>
<td>2.4.3</td>
</tr>
<tr class="row-odd"><td>2.4.4</td>
<td>2.4.4</td>
</tr>
<tr class="row-even"><td>2.4.5</td>
<td>2.4.5</td>
</tr>
<tr class="row-odd"><td>2.4.6</td>
<td>2.4.6</td>
</tr>
<tr class="row-even"><td>2.5.0</td>
<td>2.5.0</td>
</tr>
<tr class="row-odd"><td>2.5.1</td>
<td>2.5.1</td>
</tr>
<tr class="row-even"><td>3.0.0</td>
<td>3.0.0</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h3>
<p>Since Graylog 2.4 the Graylog Enterprise plugin can be installed the same way Graylog is installed. In most setups this will be done with the package tool provided by the distribution you are using and the online repository.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For previous versions of Graylog Enterprise please contact your Graylog account manager.</p>
</div>
<p>Once you installed the Graylog Enterprise plugin you need to obtain a license from <a class="reference external" href="https://www.graylog.org/enterprise/">the Graylog Enterprise web page</a>.</p>
<p>Should a simple <cite>apt-get install graylog-enterprise-plugins</cite> or <cite>yum install graylog-enterprise-plugins</cite> not work for you, the following information might help you.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">The Graylog Enterprise plugin need to be installed on all your Graylog nodes!</p>
</div>
<div class="section" id="deb-rpm-package">
<h4>DEB / RPM Package<a class="headerlink" href="#deb-rpm-package" title="Permalink to this headline">¶</a></h4>
<p>The default installation should be done with the system package tools. It includes the repository installation that is described in the <a class="reference internal" href="index.html#document-pages/installation/operating_system_packages"><span class="doc">Operating System Packages</span></a> installation guides.</p>
<p>When the usage of online repositories is not possible in your environment, you can download the Graylog Enterprise plugins at <a class="reference external" href="https://packages.graylog2.org">https://packages.graylog2.org</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These packages can <strong>only</strong> be used when you installed Graylog via the <a class="reference internal" href="index.html#document-pages/installation/operating_system_packages"><span class="doc">Operating System Packages</span></a>!</p>
</div>
<div class="section" id="deb">
<h5>DEB<a class="headerlink" href="#deb" title="Permalink to this headline">¶</a></h5>
<p>The installation on distributions like Debian or Ubuntu can be done with <em>apt-get</em> as installation tool from the previous installed online repository.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apt-get install graylog-enterprise-plugins
</pre></div>
</div>
</div>
<div class="section" id="rpm">
<h5>RPM<a class="headerlink" href="#rpm" title="Permalink to this headline">¶</a></h5>
<p>The installation on distributions like CentOS or RedHat can be done with <em>yum</em> as installation tool from the previous installed online repository.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo yum install graylog-enterprise-plugins
</pre></div>
</div>
</div>
</div>
<div class="section" id="tarball">
<h4>Tarball<a class="headerlink" href="#tarball" title="Permalink to this headline">¶</a></h4>
<p>If you have done a manual installation you can get the tarball from the download locations listed in the following table.</p>
<table border="1" class="docutils" id="id2">
<caption><span class="caption-text">Enterprise Plugins download</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Enterprise Version</th>
<th class="head">Download URL</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>3.0.2</td>
<td><a class="reference external" href="https://downloads.graylog.org/releases/graylog-enterprise/graylog-enterprise-plugins-3.0.2.tgz">https://downloads.graylog.org/releases/graylog-enterprise/graylog-enterprise-plugins-3.0.2.tgz</a></td>
</tr>
</tbody>
</table>
<p>The tarball includes the enterprise plugin JAR file and required binaries that need to be installed.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tar -tzf graylog-enterprise-plugins-3.0.2.tgz
  graylog-enterprise-plugins-3.0.2/LICENSE
  graylog-enterprise-plugins-3.0.2/plugin/graylog-plugin-enterprise-3.0.2.jar
  graylog-enterprise-plugins-3.0.2/bin/headless_shell
  graylog-enterprise-plugins-3.0.2/bin/chromedriver
  graylog-enterprise-plugins-3.0.2/bin/chromedriver_start.sh
</pre></div>
</div>
<p><strong>JAR file</strong></p>
<p>Depending on the Graylog setup method you have used, you have to install the plugin into different locations.</p>
<table border="1" class="colwidths-given docutils" id="id3">
<caption><span class="caption-text">Plugin Installation Locations</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Installation Method</th>
<th class="head">Directory</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="index.html#document-pages/installation/operating_system_packages"><span class="doc">Operating System Packages</span></a></td>
<td><code class="docutils literal notranslate"><span class="pre">/usr/share/graylog-server/plugin/</span></code></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="index.html#document-pages/installation/manual_setup"><span class="doc">Manual Setup</span></a></td>
<td><code class="docutils literal notranslate"><span class="pre">/&lt;extracted-graylog-tarball-path&gt;/plugin/</span></code></td>
</tr>
</tbody>
</table>
<p>Also check the <code class="docutils literal notranslate"><span class="pre">plugin_dir</span></code> config option in your Graylog server configuration file. The default might have been changed.</p>
<p>Make sure to install the enterprise plugin JAR files alongside the other Graylog plugins.
Your plugin directory should look similar to this after installing the enterprise plugins.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>plugin/
├── graylog-plugin-aws-3.0.0.jar
├── graylog-plugin-collector-3.0.0.jar
├── graylog-plugin-enterprise-3.0.0.jar
└── graylog-plugin-threatintel-3.0.0.jar
</pre></div>
</div>
<p><strong>Binary files</strong></p>
<p>Depending on the Graylog setup method you have used, you have to copy the binaries into different locations.</p>
<table border="1" class="colwidths-given docutils" id="id4">
<caption><span class="caption-text">Binaries Installation Locations</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Installation Method</th>
<th class="head">Directory</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="index.html#document-pages/installation/operating_system_packages"><span class="doc">Operating System Packages</span></a></td>
<td><code class="docutils literal notranslate"><span class="pre">/usr/share/graylog-server/bin/</span></code></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="index.html#document-pages/installation/manual_setup"><span class="doc">Manual Setup</span></a></td>
<td><code class="docutils literal notranslate"><span class="pre">/&lt;extracted-graylog-tarball-path&gt;/bin/</span></code></td>
</tr>
</tbody>
</table>
<p>Make sure to check the <code class="docutils literal notranslate"><span class="pre">bin_dir</span></code> configuration option set in your Graylog server configuration file, as the default may have changed.</p>
</div>
</div>
<div class="section" id="server-restart">
<h3>Server Restart<a class="headerlink" href="#server-restart" title="Permalink to this headline">¶</a></h3>
<p>After you installed the Graylog Enterprise plugins you have to restart each of your Graylog servers
to load the plugins.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We recommend restarting one server at a time!</p>
</div>
<p>You should see something like the following in your Graylog server logs. It indicates that the plugins have been successfully loaded.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2017</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">18</span><span class="n">T17</span><span class="p">:</span><span class="mi">39</span><span class="p">:</span><span class="mf">10.797</span><span class="o">+</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span> <span class="n">INFO</span>  <span class="p">[</span><span class="n">CmdLineTool</span><span class="p">]</span> <span class="n">Loaded</span> <span class="n">plugin</span><span class="p">:</span> <span class="n">AWS</span> <span class="n">plugins</span> <span class="mf">3.0</span><span class="o">.</span><span class="mi">0</span> <span class="p">[</span><span class="n">org</span><span class="o">.</span><span class="n">graylog</span><span class="o">.</span><span class="n">aws</span><span class="o">.</span><span class="n">plugin</span><span class="o">.</span><span class="n">AWSPlugin</span><span class="p">]</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">18</span><span class="n">T17</span><span class="p">:</span><span class="mi">39</span><span class="p">:</span><span class="mf">10.809</span><span class="o">+</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span> <span class="n">INFO</span>  <span class="p">[</span><span class="n">CmdLineTool</span><span class="p">]</span> <span class="n">Loaded</span> <span class="n">plugin</span><span class="p">:</span> <span class="n">Collector</span> <span class="mf">3.0</span><span class="o">.</span><span class="mi">0</span> <span class="p">[</span><span class="n">org</span><span class="o">.</span><span class="n">graylog</span><span class="o">.</span><span class="n">plugins</span><span class="o">.</span><span class="n">collector</span><span class="o">.</span><span class="n">CollectorPlugin</span><span class="p">]</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">18</span><span class="n">T17</span><span class="p">:</span><span class="mi">39</span><span class="p">:</span><span class="mf">10.811</span><span class="o">+</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span> <span class="n">INFO</span>  <span class="p">[</span><span class="n">CmdLineTool</span><span class="p">]</span> <span class="n">Loaded</span> <span class="n">plugin</span><span class="p">:</span> <span class="n">Enterprise</span> <span class="n">Integration</span> <span class="n">Plugin</span> <span class="mf">3.0</span><span class="o">.</span><span class="mi">0</span> <span class="p">[</span><span class="n">org</span><span class="o">.</span><span class="n">graylog</span><span class="o">.</span><span class="n">plugins</span><span class="o">.</span><span class="n">enterprise_integration</span><span class="o">.</span><span class="n">EnterpriseIntegrationPlugin</span><span class="p">]</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">18</span><span class="n">T17</span><span class="p">:</span><span class="mi">39</span><span class="p">:</span><span class="mf">10.805</span><span class="o">+</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span> <span class="n">INFO</span>  <span class="p">[</span><span class="n">CmdLineTool</span><span class="p">]</span> <span class="n">Loaded</span> <span class="n">plugin</span><span class="p">:</span> <span class="n">Graylog</span> <span class="n">Enterprise</span> <span class="mf">3.0</span><span class="o">.</span><span class="mi">0</span> <span class="p">[</span><span class="n">org</span><span class="o">.</span><span class="n">graylog</span><span class="o">.</span><span class="n">plugins</span><span class="o">.</span><span class="n">enterprise</span><span class="o">.</span><span class="n">EnterprisePlugin</span><span class="p">]</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">18</span><span class="n">T17</span><span class="p">:</span><span class="mi">39</span><span class="p">:</span><span class="mf">10.827</span><span class="o">+</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span> <span class="n">INFO</span>  <span class="p">[</span><span class="n">CmdLineTool</span><span class="p">]</span> <span class="n">Loaded</span> <span class="n">plugin</span><span class="p">:</span> <span class="n">Threat</span> <span class="n">Intelligence</span> <span class="n">Plugin</span> <span class="mf">3.0</span><span class="o">.</span><span class="mi">0</span> <span class="p">[</span><span class="n">org</span><span class="o">.</span><span class="n">graylog</span><span class="o">.</span><span class="n">plugins</span><span class="o">.</span><span class="n">threatintel</span><span class="o">.</span><span class="n">ThreatIntelPlugin</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="cluster-setup">
<h3>Cluster Setup<a class="headerlink" href="#cluster-setup" title="Permalink to this headline">¶</a></h3>
<p>If you run a Graylog cluster you need to add the enterprise plugins to every Graylog node. Additionally your load-balancer must route <code class="docutils literal notranslate"><span class="pre">/api/plugins/org.graylog.plugins.archive/</span></code> only to the Graylog master node. Future versions of Graylog will forward these requests automatically to the correct node.</p>
</div>
<div class="section" id="license-installation">
<h3>License Installation<a class="headerlink" href="#license-installation" title="Permalink to this headline">¶</a></h3>
<p>The Graylog Enterprise plugins require a valid license to use the additional features.</p>
<p>Once you have <a class="reference external" href="https://www.graylog.org/enterprise/">obtained a license</a>
you can import it into your Graylog setup by going through the following steps.</p>
<ol class="arabic simple">
<li>As an admin user, open the “Enterprise/License” page from the menu in the web interface.</li>
<li>Click the Import new license button in the top right hand corner.</li>
<li>Copy the license text from the confirmation email and paste it into the text field.</li>
<li>The license should be valid and a preview of your license details should appear below the text field.</li>
<li>Click Import to activate the license.</li>
</ol>
<p>The license automatically applies to all nodes in your cluster without the need to restart your server nodes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If there are errors, please check that you copied the entire license from the email without line breaks.
The same license is also attached as a text file in case it is wrongly formatted in the email.</p>
</div>
<img alt="_images/enterprise-license-1.png" src="http://res.fansdoc.com/graylog/_images/enterprise-license-1.png" />
</div>
<div class="section" id="license-verification">
<h3>License Verification<a class="headerlink" href="#license-verification" title="Permalink to this headline">¶</a></h3>
<p>Some Graylog licenses require to check their validity on a regular basis. This includes the free Graylog Enterprise license with a specific amount of traffic included.</p>
<p>If your network environment requires Graylog to use a proxy server in order to communicate with the external services via HTTPS, you’ll have to configure the proxy server in the <a class="reference internal" href="index.html#http-config"><span class="std std-ref">Graylog configuration file</span></a>.</p>
<p>The Graylog web interface shows all details about the license, but if you are still unclear about the requirements, please contact our <a class="reference external" href="https://www.graylog.org/contact-sales">sales team</a> with your questions.</p>
<div class="section" id="details-on-license-verification">
<h4>Details on License Verification<a class="headerlink" href="#details-on-license-verification" title="Permalink to this headline">¶</a></h4>
<p>Graylog Enterprise periodically sends the following information to
‘api.graylog.com’ via HTTPS on TCP port 443 for each installed
license:</p>
<ul class="simple">
<li>A nonce to avoid modified reports</li>
<li>The ID of the license</li>
<li>The ID of the Graylog cluster</li>
<li>A flag indicating if the license is violated</li>
<li>A flag indicating if the license has expired</li>
<li>A flag indicating if Graylog detected that the traffic measuring mechanisms have been modified</li>
<li>A list of how much traffic was received and written by Graylog in the recent days, in bytes</li>
</ul>
</div>
<div class="section" id="details-on-licensed-traffic">
<h4>Details on licensed traffic<a class="headerlink" href="#details-on-licensed-traffic" title="Permalink to this headline">¶</a></h4>
<p>Graylog has four counters, only the last is counted for the licensed traffic.</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">org.graylog2.traffic.input</span></code></dt>
<dd>the incoming message without any decoding, what is written to the journal before any processing.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">org.graylog2.traffic.decoded</span></code></dt>
<dd>the message after the codec of the input has parsed the message (for example syslog parser)</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">org.graylog2.traffic.system-output-traffic</span></code></dt>
<dd>currently, this is stored in memory only and includes the traffic from archive restores.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">org.graylog2.traffic.output</span></code></dt>
<dd>what is written to Elasticsearch after all processing is done.</dd>
</dl>
</li>
</ul>
<p>Only the Elasticsearch output is measured, all other outgoing traffic does not count.  The measurement happens when the message is serialized to elasticsearch. If a message is written to multiple indices the message will count for each index. It does not matter how many copies (replicas) the index has configured as this is done in elasticsearch.</p>
<p>Each of the counters follows these rules:</p>
<ul class="simple">
<li>count the length of the field name.</li>
<li>If the content of the field is a string, the length of the string is counted not the bytes of that string</li>
<li><dl class="first docutils">
<dt>for non-string content in the field, the byte length of that content is counted</dt>
<dd><ul class="first last">
<li>byte = 1 byte</li>
<li>char/short = 2 bytes</li>
<li>bool/int/floar = 4 bytes</li>
<li>long/double = 8 bytes</li>
<li>dates = 8 bytes</li>
</ul>
</dd>
</dl>
</li>
<li>all internal fields are not countent (those meta information that are created by Graylog)</li>
</ul>
</div>
</div>
</div>
<span id="document-pages/archiving"></span><div class="section" id="archiving">
<span id="archivetoc"></span><h2>Archiving<a class="headerlink" href="#archiving" title="Permalink to this headline">¶</a></h2>
<p>Graylog enables you to configure a retention period to automatically delete older messages - this is to help you
control the costs of storage in Elasticsearch. But we know it’s not ideal deciding between keeping less messages
in Graylog or paying more for hardware. Additionally, many of you are required to store data for long
periods of time due to compliance requirements like PCI or HIPAA.</p>
<p>The Archiving functionality allows you to archive log messages until you need to re-import them into Graylog for
analysis. You can instruct Graylog to automatically archive log messages to compressed flat files on the local
filesystem before retention cleaning kicks in and messages are deleted from Elasticsearch. Archiving also works
through a REST call or the web interface if you don’t want to wait until retention cleaning to happen.
We chose flat files for this because they are vendor agnostic so you will always be able to access your data.</p>
<p>You can then do whatever you want with the archived files: move them to cheap storage, write them on tape, or
even print them out if you need to! If you need to search through archived data in the future, you can move any
selection of archived messages back into the Graylog archive folder, and the web interface will enable
you to temporarily import the archive so you can analyze the messages again in Graylog.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Archiving is a commercial feature and part of <a class="reference external" href="https://www.graylog.org/enterprise">Graylog Enterprise</a>.</p>
</div>
<div class="toctree-wrapper compound">
<span id="document-pages/archiving/setup"></span><div class="section" id="setup">
<h3>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h3>
<p>Graylog Archive is a commercial feature that can be installed in addition to
the Graylog open source server.</p>
<div class="section" id="installation">
<h4>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h4>
<p>Archiving is part of the Graylog Enterprise plugin, please check the
<a class="reference internal" href="index.html#document-pages/enterprise/setup"><span class="doc">Graylog Enterprise setup page</span></a> for details on
how to install it.</p>
</div>
<div class="section" id="configuration">
<h4>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h4>
<p>Graylog Archive can be configured via the Graylog web interface and does
not need any changes in the Graylog server configuration file.</p>
<p>In the web interface menu navigate to “Enterprise/Archives” and click “Configuration”
to adjust the configuration.</p>
<img alt="_images/archiving-setup-config.png" src="http://res.fansdoc.com/graylog/_images/archiving-setup-config.png" />
<div class="section" id="archive-options">
<h5>Archive Options<a class="headerlink" href="#archive-options" title="Permalink to this headline">¶</a></h5>
<p>There are several configuration options to configure archiving.</p>
<table border="1" class="colwidths-given docutils" id="id1">
<caption><span class="caption-text">Configuration Options</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Backend</td>
<td>Backend on the <strong>master</strong> node where the archive files will be stored.</td>
</tr>
<tr class="row-odd"><td>Max Segment Size</td>
<td>Maximum size (in <em>bytes</em>) of archive segment files.</td>
</tr>
<tr class="row-even"><td>Compression Type</td>
<td>Compression type that will be used to compress the archives.</td>
</tr>
<tr class="row-odd"><td>Checksum Type</td>
<td>Checksum algorithm that is used to calculate the checksum for archives.</td>
</tr>
<tr class="row-even"><td>Restore index batch size</td>
<td>Elasticsearch batch size when restoring archive files.</td>
</tr>
<tr class="row-odd"><td>Streams to archive</td>
<td>Streams that should be included in the archive.</td>
</tr>
</tbody>
</table>
<div class="section" id="backend">
<span id="archive-config-option-backend"></span><h6>Backend<a class="headerlink" href="#backend" title="Permalink to this headline">¶</a></h6>
<p>The archived indices will be stored in a backend. A backend that stores the data in <code class="docutils literal notranslate"><span class="pre">/tmp/graylog-archive</span></code> is created
when the server starts for the first time but you can create a new backend if you want to store the data in a different
path.</p>
</div>
<div class="section" id="max-segment-size">
<h6>Max Segment Size<a class="headerlink" href="#max-segment-size" title="Permalink to this headline">¶</a></h6>
<p>When archiving an index, the archive job writes the data into segments.
The <em>Max Segment Size</em> setting sets the size limit for each of these data
segments.</p>
<p>This allows control over the file size of the segment files to make it
possible to process them with tools which have a size limit for files.</p>
<p>Once the size limit is reached, a new segment file will be started.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">archive</span><span class="o">/</span>
  <span class="n">graylog_201</span><span class="o">/</span>
    <span class="n">archive</span><span class="o">-</span><span class="n">metadata</span><span class="o">.</span><span class="n">json</span>
    <span class="n">archive</span><span class="o">-</span><span class="n">segment</span><span class="o">-</span><span class="mf">0.</span><span class="n">gz</span>
    <span class="n">archive</span><span class="o">-</span><span class="n">segment</span><span class="o">-</span><span class="mf">1.</span><span class="n">gz</span>
    <span class="n">archive</span><span class="o">-</span><span class="n">segment</span><span class="o">-</span><span class="mf">2.</span><span class="n">gz</span>
</pre></div>
</div>
</div>
<div class="section" id="compression-type">
<span id="archive-config-option-compression-type"></span><h6>Compression Type<a class="headerlink" href="#compression-type" title="Permalink to this headline">¶</a></h6>
<p>Archives will be compressed with gzip by default. This option can be changed to use a different compression type.</p>
<p>The selected compression type has a big impact on the time it takes to archive an index. Gzip for example is pretty
slow but has a great compression rate. Snappy and LZ4 are way faster but the archives will be bigger.</p>
<p>Here is a comparison between the available compression algorithms with test data.</p>
<table border="1" class="colwidths-given docutils" id="id2">
<caption><span class="caption-text">Compression Type Comparison</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="22%" />
<col width="16%" />
<col width="16%" />
<col width="47%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Index Size</th>
<th class="head">Archive Size</th>
<th class="head">Duration</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>gzip</td>
<td>1 GB</td>
<td>134 MB</td>
<td>15 minutes, 23 seconds</td>
</tr>
<tr class="row-odd"><td>Snappy</td>
<td>1 GB</td>
<td>291 MB</td>
<td>2 minutes, 31 seconds</td>
</tr>
<tr class="row-even"><td>LZ4</td>
<td>1 GB</td>
<td>266 MB</td>
<td>2 minutes, 25 seconds</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Results with your data may vary! Make sure to test the different compression types
to find the one that is best for your data.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The current implementation of LZ4 is not compatible with the LZ4 CLI tools, thus decompressing the LZ4 archives outside of Graylog is currently not possible.</p>
</div>
</div>
<div class="section" id="checksum-type">
<span id="archive-config-option-checksum-type"></span><h6>Checksum Type<a class="headerlink" href="#checksum-type" title="Permalink to this headline">¶</a></h6>
<p>When writing archives Graylog computes a CRC32 checksum over the files. This option can be changed to use a different checksum algorithm.</p>
<p>The type of checksum depends on the use case. CRC32 and MD5 are quick to compute and a reasonable choice to be able to detect damaged files, but neither is suitable as protection against malicious changes in the files.
Graylog also supports using SHA-1 or SHA-256 checksums which can be used to make sure the files were not modified, as they are cryptographic hashes.</p>
<p>The best choice of checksum types depends on whether the necessary system tools are installed to compute them later (not all systems come with a SHA-256 utility for example), speed of checksum calculation for larger files as well as the security considerations.</p>
</div>
<div class="section" id="restore-index-batch-size">
<span id="archive-config-option-restore-batch-size"></span><h6>Restore Index Batch Size<a class="headerlink" href="#restore-index-batch-size" title="Permalink to this headline">¶</a></h6>
<p>This setting controls the batch size for re-indexing archive data into
Elasticsearch. When set to <code class="docutils literal notranslate"><span class="pre">1000</span></code>, the restore job will re-index the
archived data in document batches of 1000.</p>
<p>You can use this setting to control the speed of the restore process and also
how much load it will generate on the Elasticsearch cluster. The <strong>higher</strong>
the batch size, the <strong>faster</strong> the restore will progress and the <strong>more</strong> load
will be put on your Elasticsearch cluster in addition to the normal message
processing.</p>
<p>Make sure to tune this <strong>carefully</strong> to avoid any negative impact on your
message indexing throughput and search speed!</p>
</div>
<div class="section" id="streams-to-archive">
<span id="archive-config-option-streams-to-archive"></span><h6>Streams To Archive<a class="headerlink" href="#streams-to-archive" title="Permalink to this headline">¶</a></h6>
<p>This option can be used to select which streams should be included in the
archive. With this you are able to archive only your important data instead
of archiving everything that is arriving in Graylog.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">New streams will be archived automatically. If you create a new stream
and don’t want it to be archived, you have to disable it in this
configuration dialog.</p>
</div>
</div>
</div>
<div class="section" id="backends">
<span id="archive-config-backends"></span><h5>Backends<a class="headerlink" href="#backends" title="Permalink to this headline">¶</a></h5>
<p>A backend can be used to store the archived data. For now, we only support a single file system backend type.</p>
<div class="section" id="file-system">
<h6>File System<a class="headerlink" href="#file-system" title="Permalink to this headline">¶</a></h6>
<p>The archived indices will be stored in the <em>Output base path</em> directory. This
directory <strong>needs to exist and be writable for the Graylog server process</strong> so the files
can be stored.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Only the <strong>master</strong> node needs access to the <em>Output base path</em> directory because the archiving process runs on the master node.</p>
</div>
<p>We recommend to put the <em>Output base path</em> directory onto a <strong>separate disk or partition</strong> to avoid
any negative impact on the message processing should the archiving fill up
the disk.</p>
<img alt="_images/archiving-setup-backend-new.png" src="http://res.fansdoc.com/graylog/_images/archiving-setup-backend-new.png" />
<table border="1" class="colwidths-given docutils" id="id3">
<caption><span class="caption-text">Configuration Options</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Title</td>
<td>A simple title to identify the backend.</td>
</tr>
<tr class="row-odd"><td>Description</td>
<td>Longer description for the backend.</td>
</tr>
<tr class="row-even"><td>Output base path</td>
<td>Directory path where the archive files should be stored.</td>
</tr>
</tbody>
</table>
<p><strong>Output base path</strong></p>
<p>The output base path can either be a simple directory path string or a template string to build dynamic paths.</p>
<p>You could use a template string to store the archive data in a directory tree that is based on the archival date.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Template
/data/graylog-archive/${year}/${month}/${day}

# Result
/data/graylog-archive/2017/04/01/graylog_0
</pre></div>
</div>
<table border="1" class="colwidths-given docutils" id="id4">
<caption><span class="caption-text">Available Template Variables</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">${year}</span></code></td>
<td>Archival date year. (e.g. “2017”)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">${month}</span></code></td>
<td>Archival date month. (e.g “04”)</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">${day}</span></code></td>
<td>Archival date day. (e.g. “01”)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">${hour}</span></code></td>
<td>Archival date hour. (e.g. “23”)</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">${minute}</span></code></td>
<td>Archival date minute. (e.g. “24”)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">${second}</span></code></td>
<td>Archival date second. (e.g. “59”)</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">${index-name}</span></code></td>
<td>Name of the archived index. (e.g. “graylog_0”)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="index-retention">
<span id="archive-config-index-retention"></span><h5>Index Retention<a class="headerlink" href="#index-retention" title="Permalink to this headline">¶</a></h5>
<p>Graylog is using configurable index retention strategies to delete old
indices. By default indices can be <em>closed</em> or <em>deleted</em> if you have more
than the configured limit.</p>
<p>Graylog Archive offers a new index retention strategy that you can configure to
automatically archive an index before closing or deleting it.</p>
<p>Index retention strategies can be configured in the system menu under
“System/Indices”. Select an index set and click “Edit” to change the index rotation
and retention strategies.</p>
<img alt="_images/archiving-setup-index-retention-config.png" src="http://res.fansdoc.com/graylog/_images/archiving-setup-index-retention-config.png" />
<p>As with the regular index retention strategies, you can configure a max
number of Elasticsearch indices. Once there are more indices than the
configured limit, the oldest ones will be archived into the backend and
then closed or deleted. You can also decide to not do anything (<em>NONE</em>) after
archiving an index. In that case <strong>no cleanup of old indices will happen</strong>
and you have to take care of that yourself!</p>
</div>
</div>
</div>
<span id="document-pages/archiving/usage"></span><div class="section" id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<div class="section" id="creating-archives">
<h4>Creating Archives<a class="headerlink" href="#creating-archives" title="Permalink to this headline">¶</a></h4>
<p>There are three ways to create archives from the Graylog Elasticsearch
indices.</p>
<ul class="simple">
<li><a class="reference internal" href="#archive-create-web-interface"><span class="std std-ref">Web Interface</span></a></li>
<li><a class="reference internal" href="#archive-create-index-retention"><span class="std std-ref">Index Retention</span></a></li>
<li><a class="reference internal" href="#archive-create-rest-api"><span class="std std-ref">REST API</span></a></li>
</ul>
<div class="section" id="web-interface">
<span id="archive-create-web-interface"></span><h5>Web Interface<a class="headerlink" href="#web-interface" title="Permalink to this headline">¶</a></h5>
<p>You can manually create an archive on the “Enterprise/Archives” page in the
web interface.</p>
<img alt="_images/archiving-usage-create-web.png" src="http://res.fansdoc.com/graylog/_images/archiving-usage-create-web.png" />
<p>On the “Create Archive for Index” section of the page is a form where you
can select an index and archive it by pressing “Archive Index”.</p>
<p>Using this will just archive the index to disk and does not close it or
delete it. This is a great way to test the archiving feature without
changing your <a class="reference internal" href="index.html#archive-config-index-retention"><span class="std std-ref">index retention configuration</span></a>.</p>
</div>
<div class="section" id="index-retention">
<span id="archive-create-index-retention"></span><h5>Index Retention<a class="headerlink" href="#index-retention" title="Permalink to this headline">¶</a></h5>
<p>Graylog Archive ships with an index retention strategy that can be used
to automatically create archives before closing or deleting Elasticsearch
indices.</p>
<p>This is the easiest way to automatically create archives without custom
scripting.</p>
<p>Please see the <a class="reference internal" href="index.html#archive-config-index-retention"><span class="std std-ref">Index Retention Configuration</span></a>
on how to configure it.</p>
</div>
<div class="section" id="rest-api">
<span id="archive-create-rest-api"></span><h5>REST API<a class="headerlink" href="#rest-api" title="Permalink to this headline">¶</a></h5>
<p>Graylog Archive also offers a REST API that you can use to automate archive
creation if you have some special requirements and need a more flexible way to
do this.</p>
<img alt="_images/archiving-usage-create-api.png" src="http://res.fansdoc.com/graylog/_images/archiving-usage-create-api.png" />
<p>An index can be archived with a simple curl command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -s -u admin -H &#39;X-Requested-By: cli&#39; -X POST http://127.0.0.1:9000/api/plugins/org.graylog.plugins.archive/archives/graylog_386
Enter host password for user &#39;admin&#39;: ***************
{
   &quot;archive_job_config&quot; : {
     &quot;archive_path&quot; : &quot;/tmp/graylog-archive&quot;,
     &quot;max_segment_size&quot; : 524288000,
     &quot;segment_filename_prefix&quot; : &quot;archive-segment&quot;,
     &quot;metadata_filename&quot; : &quot;archive-metadata.json&quot;,
     &quot;source_histogram_bucket_size&quot; : 86400000,
     &quot;restore_index_batch_size&quot; : 1001,
     &quot;segment_compression_type&quot;: &quot;SNAPPY&quot;
   },
   &quot;system_job&quot; : {
     &quot;id&quot; : &quot;cd7ebfa0-079b-11e6-9e1b-fa163e6e9b8a&quot;,
     &quot;description&quot; : &quot;Archives indices and deletes them&quot;,
     &quot;name&quot; : &quot;org.graylog.plugins.archive.job.ArchiveCreateSystemJob&quot;,
     &quot;info&quot; : &quot;Archiving documents in index: graylog_386&quot;,
     &quot;node_id&quot; : &quot;c5df7bff-cafd-4546-ac0a-5ccd2ba4c847&quot;,
     &quot;started_at&quot; : &quot;2016-04-21T08:34:03.034Z&quot;,
     &quot;percent_complete&quot; : 0,
     &quot;provides_progress&quot; : true,
     &quot;is_cancelable&quot; : true
   }
 }
</pre></div>
</div>
<p>That command started a system job in the Graylog server to create an archive
for index <code class="docutils literal notranslate"><span class="pre">graylog_386</span></code>. The <code class="docutils literal notranslate"><span class="pre">system_job.id</span></code> can be used to check the
progress of the job.</p>
<p>The REST API can be used to automate other archive related tasks as well, like
restoring and deleting archives or updating the archive config. See the
REST API browser on your Graylog server for details.</p>
</div>
</div>
<div class="section" id="restoring-archives">
<h4>Restoring Archives<a class="headerlink" href="#restoring-archives" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The restore process adds load to your Elasticsearch cluster because
all messages are basically <strong>re-indexed</strong>. Please make sure to keep
this in mind and test with smaller archives to see how your cluster
behaves. Also use the <a class="reference internal" href="index.html#archive-config-option-restore-batch-size"><span class="std std-ref">Restore Index Batch Size</span></a>
setting to control the Elasticsearch batch size on re-index.</p>
</div>
<p>Graylog Archive offers two ways to restore archived indices.</p>
<ul class="simple">
<li><a class="reference internal" href="#archive-restore-web-interface"><span class="std std-ref">Web Interface</span></a></li>
<li><a class="reference internal" href="#archive-restore-rest-api"><span class="std std-ref">REST API</span></a></li>
</ul>
<p>Graylog Archive restores all indices into the “Restored Archives” index set
to avoid conflicts with the original indices. (should those still exist)</p>
<img alt="_images/archiving-usage-restore-web-result.png" src="http://res.fansdoc.com/graylog/_images/archiving-usage-restore-web-result.png" />
<p>Restored indices are also marked as <code class="docutils literal notranslate"><span class="pre">reopened</span></code> so they are <strong>ignored</strong> by
index retention jobs and are not closed or deleted. That means you have to
manually delete any restored indices <strong>manually</strong> once you do not need them
anymore.</p>
<div class="section" id="archive-restore-web-interface">
<span id="id1"></span><h5>Web Interface<a class="headerlink" href="#archive-restore-web-interface" title="Permalink to this headline">¶</a></h5>
<p>In the web interface you can restore an archive on the “Enterprise/Archives” page
by selecting an archive from the list, open the archive details and clicking
the “Restore Index” button.</p>
<img alt="_images/archiving-usage-restore-web.png" src="http://res.fansdoc.com/graylog/_images/archiving-usage-restore-web.png" />
</div>
<div class="section" id="archive-restore-rest-api">
<span id="id2"></span><h5>REST API<a class="headerlink" href="#archive-restore-rest-api" title="Permalink to this headline">¶</a></h5>
<p>As with archive creation you can also use the REST API to restore an
archived index into the Elasticsearch cluster:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -s -u admin -H &#39;X-Requested-By: cli&#39; -X POST http://127.0.0.1:9000/api/plugins/org.graylog.plugins.archive/archives/graylog_386/restore
Enter host password for user &#39;admin&#39;: ***************
{
   &quot;archive_metadata&quot;: {
     &quot;archive_id&quot;: &quot;graylog_307&quot;,
     &quot;index_name&quot;: &quot;graylog_307&quot;,
     &quot;document_count&quot;: 491906,
     &quot;created_at&quot;: &quot;2016-04-14T14:31:50.787Z&quot;,
     &quot;creation_duration&quot;: 142663,
     &quot;timestamp_min&quot;: &quot;2016-04-14T14:00:01.008Z&quot;,
     &quot;timestamp_max&quot;: &quot;2016-04-14T14:29:27.639Z&quot;,
     &quot;id_mappings&quot;: {
       &quot;streams&quot;: {
         &quot;56fbafe0fb121a5309cef297&quot;: &quot;nginx requests&quot;
       },
       &quot;inputs&quot;: {
         &quot;56fbafe0fb121a5309cef290&quot;: &quot;nginx error_log&quot;,
         &quot;56fbafe0fb121a5309cef28d&quot;: &quot;nginx access_log&quot;
       },
       &quot;nodes&quot;: {
         &quot;c5df7bff-cafd-4546-ac0a-5ccd2ba4c847&quot;: &quot;graylog.example.org&quot;
       }
     },
     &quot;histogram_bucket_size&quot;: 86400000,
     &quot;source_histogram&quot;: {
       &quot;2016-04-14T00:00:00.000Z&quot;: {
         &quot;example.org&quot;: 227567
       }
     },
     &quot;segments&quot;: [
       {
         &quot;path&quot;: &quot;archive-segment-0.gz&quot;,
         &quot;size&quot;: 21653755,
         &quot;raw_size&quot;: 2359745839,
         &quot;compression_type&quot;: &quot;SNAPPY&quot;
         &quot;checksum&quot;: &quot;751e6e76&quot;,
         &quot;checksum_type&quot;: &quot;CRC32&quot;
       }
     ],
     &quot;index_size&quot;: 12509063,
     &quot;index_shard_count&quot;: 4
   },
   &quot;system_job&quot;: {
     &quot;id&quot;: &quot;e680dcc0-07a2-11e6-9e1b-fa163e6e9b8a&quot;,
     &quot;description&quot;: &quot;Restores an index from the archive&quot;,
     &quot;name&quot;: &quot;org.graylog.plugins.archive.job.ArchiveRestoreSystemJob&quot;,
     &quot;info&quot;: &quot;Restoring documents from archived index: graylog_307&quot;,
     &quot;node_id&quot;: &quot;c5df7bff-cafd-4546-ac0a-5ccd2ba4c847&quot;,
     &quot;started_at&quot;: &quot;2016-04-21T09:24:51.468Z&quot;,
     &quot;percent_complete&quot;: 0,
     &quot;provides_progress&quot;: true,
     &quot;is_cancelable&quot;: true
   }
 }
</pre></div>
</div>
<p>The returned JSON payload contains the archive metadata and the system job
description that runs the index restore process.</p>
</div>
<div class="section" id="restore-into-a-separate-cluster">
<h5>Restore into a separate cluster<a class="headerlink" href="#restore-into-a-separate-cluster" title="Permalink to this headline">¶</a></h5>
<p>As said earlier, restoring archived indices slow down your indexing speed
because of added load. If you want to completely avoid adding more load to
your Elasticsearch cluster, you can restore the archived indices on a
different cluster.</p>
<p>To do that, you only have to transfer the archived indices to a different
machine and put them into a configured <a class="reference internal" href="index.html#archive-config-option-backend"><span class="std std-ref">Backend</span></a>.</p>
<p>Each index archive is in a separate directory, so if you only want to transfer
one index to a different machine, you only have to copy the corresponding
directory into the backend.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tree /tmp/graylog-archive
  /tmp/graylog-archive
  ├── graylog_171
  │   ├── archive-metadata.json
  │   └── archive-segment-0.gz
  ├── graylog_201
  │   ├── archive-metadata.json
  │   └── archive-segment-0.gz
  ├── graylog_268
  │   ├── archive-metadata.json
  │   └── archive-segment-0.gz
  ├── graylog_293
  │   ├── archive-metadata.json
  │   └── archive-segment-0.gz
  ├── graylog_307
  │   ├── archive-metadata.json
  │   └── archive-segment-0.gz
  ├── graylog_386
  │   ├── archive-metadata.json
  │   └── archive-segment-0.gz
  └── graylog_81
      ├── archive-metadata.json
      └── archive-segment-0.gz
  7 directories, 14 files
</pre></div>
</div>
</div>
</div>
<div class="section" id="searching-in-restored-indices">
<h4>Searching in Restored Indices<a class="headerlink" href="#searching-in-restored-indices" title="Permalink to this headline">¶</a></h4>
<p>Once an index has been restored from an archive it will be used by search
queries automatically.</p>
<p>Every message that gets restored into an Elasticsearch index gets a special
<code class="docutils literal notranslate"><span class="pre">gl2_archive_restored</span></code> field with value <code class="docutils literal notranslate"><span class="pre">true</span></code>. This allows you to only
search in restored messages by using a query like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_exists_</span><span class="p">:</span><span class="n">gl2_archive_restored</span> <span class="n">AND</span> <span class="o">&lt;</span><span class="n">your</span> <span class="n">search</span> <span class="n">query</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Example:</p>
<img alt="_images/archiving-usage-search.png" src="http://res.fansdoc.com/graylog/_images/archiving-usage-search.png" />
<p>If you want to exclude all restored messages from you query you can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_missing_</span><span class="p">:</span><span class="n">gl2_archive_restored</span> <span class="n">AND</span> <span class="o">&lt;</span><span class="n">your</span> <span class="n">search</span> <span class="n">query</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<span id="document-pages/auditlog"></span><div class="section" id="audit-log">
<span id="auditlog-toc"></span><h2>Audit Log<a class="headerlink" href="#audit-log" title="Permalink to this headline">¶</a></h2>
<p>Audit Log keeps track of changes made by users to a Graylog system.</p>
<p>It records all state changes into the database and makes it possible to search,
filter and export all audit log entries.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Audit Log is a commercial feature and part of <a class="reference external" href="https://www.graylog.org/enterprise">Graylog Enterprise</a>.</p>
</div>
<div class="toctree-wrapper compound">
<span id="document-pages/auditlog/setup"></span><div class="section" id="setup">
<h3>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h3>
<p>Graylog Audit Log is a commercial feature that can be installed in
addition to the Graylog open source server.</p>
<div class="section" id="installation">
<h4>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h4>
<p>Audit Log functionality is part of the Graylog Enterprise plugin, please check
the <a class="reference internal" href="index.html#enterprise-setup"><span class="std std-ref">Graylog Enterprise setup page</span></a> for details on how
to install it.</p>
</div>
<div class="section" id="configuration">
<h4>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h4>
<p>Graylog Audit Log provides two ways of writing audit log entries:</p>
<ol class="arabic simple">
<li>Database</li>
<li>Log file via <a class="reference external" href="https://logging.apache.org/log4j/2.x/">log4j2</a> appender</li>
</ol>
<p>Logging to the database is always enabled and cannot be disabled.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All configuration needs to be done in the Graylog server configuration file
<strong>and</strong> in the logging configuration. (only if the log4j2 appender is enabled)
Check the <a class="reference internal" href="index.html#default-file-location"><span class="std std-ref">default file locations page</span></a> for details.</p>
</div>
<p>The web interface can show the current configuration.</p>
<img alt="_images/auditlog-setup-config.png" src="http://res.fansdoc.com/graylog/_images/auditlog-setup-config.png" />
<div class="section" id="database-configuration-options">
<h5>Database Configuration Options<a class="headerlink" href="#database-configuration-options" title="Permalink to this headline">¶</a></h5>
<p>The default MongoDB audit log has a few configuration options available.</p>
<table border="1" class="colwidths-given docutils" id="id1">
<caption><span class="caption-text">Configuration Options</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">auditlog_mongodb_keep_entries</span></code></td>
<td>delete audit log entries older that configured interval</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">auditlog_mongodb_cleanup_interval</span></code></td>
<td>interval of the audit log entry cleanup job</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">auditlog_mongodb_collection</span></code></td>
<td>the MongoDB collection to store the audit log entries in</td>
</tr>
</tbody>
</table>
<div class="section" id="auditlog-mongodb-keep-entries">
<span id="auditlog-config-option-mongodb-keep-entries"></span><h6>auditlog_mongodb_keep_entries<a class="headerlink" href="#auditlog-mongodb-keep-entries" title="Permalink to this headline">¶</a></h6>
<p>This configures the interval after which old audit log entries in the MongoDB
database will be deleted. You have to use values like <code class="docutils literal notranslate"><span class="pre">90d</span></code> (90 days) to
configure the interval.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Make sure to configure this to fit your needs. Deleted audit log entries are gone forever!</p>
</div>
<p>The default value for this is <code class="docutils literal notranslate"><span class="pre">365d</span></code>.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">auditlog_mongodb_keep_entries</span> <span class="o">=</span> <span class="mi">365</span><span class="n">d</span>
</pre></div>
</div>
</div>
<div class="section" id="auditlog-mongodb-cleanup-interval">
<span id="auditlog-config-option-mongodb-cleanup-interval"></span><h6>auditlog_mongodb_cleanup_interval<a class="headerlink" href="#auditlog-mongodb-cleanup-interval" title="Permalink to this headline">¶</a></h6>
<p>This configures the interval of the  background job that periodically deletes
old audit log entries from the MongoDB database. You have to use values like
<code class="docutils literal notranslate"><span class="pre">1h</span></code> (1 hour) to configure the interval.</p>
<p>The default value for this is <code class="docutils literal notranslate"><span class="pre">1h</span></code>.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">auditlog_mongodb_cleanup_interval</span> <span class="o">=</span> <span class="mi">1</span><span class="n">h</span>
</pre></div>
</div>
</div>
<div class="section" id="auditlog-mongodb-collection">
<span id="auditlog-config-option-mongodb-collection"></span><h6>auditlog_mongodb_collection<a class="headerlink" href="#auditlog-mongodb-collection" title="Permalink to this headline">¶</a></h6>
<p>This configures the name of the MongoDB collection where audit log entries will
be stored.</p>
<p>The default value for this is <code class="docutils literal notranslate"><span class="pre">audit_log</span></code>.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">auditlog_mongodb_collection</span> <span class="o">=</span> <span class="n">audit_log</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="log4j2-configuration-options">
<h5>Log4j2 Configuration Options<a class="headerlink" href="#log4j2-configuration-options" title="Permalink to this headline">¶</a></h5>
<p>The optional log4j2 audit log appender has a few configuration options available.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To configure the log4j2 appender you have to edit the Graylog server configuration file <strong>and</strong> the log4j2.xml file for your setup!</p>
</div>
<table border="1" class="colwidths-given docutils" id="id2">
<caption><span class="caption-text">Configuration Options</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">auditlog_log4j_enabled</span></code></td>
<td>whether the log4j2 appender is enabled or not</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">auditlog_log4j_logger_name</span></code></td>
<td>log4j2 logger name</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">auditlog_log4j_marker_name</span></code></td>
<td>log4j2 marker name</td>
</tr>
</tbody>
</table>
<div class="section" id="auditlog-log4j-enabled">
<span id="auditlog-config-option-log4j2-enabled"></span><h6>auditlog_log4j_enabled<a class="headerlink" href="#auditlog-log4j-enabled" title="Permalink to this headline">¶</a></h6>
<p>The log4j2 audit log appender is disabled by default and can be enabled by
setting this option to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<p>The default value for this is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">auditlog_log4j_enabled</span> <span class="o">=</span> <span class="n">true</span>
</pre></div>
</div>
</div>
<div class="section" id="auditlog-log4j-logger-name">
<span id="auditlog-config-option-log4j2-logger-name"></span><h6>auditlog_log4j_logger_name<a class="headerlink" href="#auditlog-log4j-logger-name" title="Permalink to this headline">¶</a></h6>
<p>This configures the log4j2 logger name of the audit log.</p>
<p>The default value for this is <code class="docutils literal notranslate"><span class="pre">gl-org.graylog.plugins.auditlog</span></code>.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">auditlog_log4j_logger_name</span> <span class="o">=</span> <span class="n">graylog</span><span class="o">-</span><span class="n">auditlog</span>
</pre></div>
</div>
</div>
<div class="section" id="auditlog-log4j-marker-name">
<span id="auditlog-config-option-log4j2-marker-name"></span><h6>auditlog_log4j_marker_name<a class="headerlink" href="#auditlog-log4j-marker-name" title="Permalink to this headline">¶</a></h6>
<p>This configures the <a class="reference external" href="https://logging.apache.org/log4j/2.0/manual/markers.html">log4j2 marker name</a>
for the audit log.</p>
<p>The default value for this is <code class="docutils literal notranslate"><span class="pre">AUDIT_LOG</span></code>.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">auditlog_log4j_marker_name</span> <span class="o">=</span> <span class="n">AUDIT_LOG</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="log4j2-appender-configuration">
<h5>Log4j2 Appender Configuration<a class="headerlink" href="#log4j2-appender-configuration" title="Permalink to this headline">¶</a></h5>
<p>To write audit log entries into a file you have to enable the log4j2 appender
in your Graylog configuration file <strong>and</strong> add some configuration to the
<code class="docutils literal notranslate"><span class="pre">log4j2.xml</span></code> file that is used by your server process.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">log4j2.xml</span></code> file location is dependent on your deployment method.
so please check the <a class="reference internal" href="index.html#default-file-location"><span class="std std-ref">default file locations page</span></a>.</p>
<p>An existing <code class="docutils literal notranslate"><span class="pre">log4j2.xml</span></code> config file needs another <code class="docutils literal notranslate"><span class="pre">&lt;Logger/&gt;</span></code> statement
in the <code class="docutils literal notranslate"><span class="pre">&lt;Loggers/&gt;</span></code> section and an additional appender in the <code class="docutils literal notranslate"><span class="pre">&lt;Appenders/&gt;</span></code>
section of the file.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The file on your system might look different than the following example. Make sure to only add the audit log related snippets to your config and do not remove anything else!</p>
</div>
<p>Example <code class="docutils literal notranslate"><span class="pre">log4j2.xml</span></code> file with audit log enabled:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration packages=&quot;org.graylog2.log4j&quot; shutdownHook=&quot;disable&quot;&gt;
    &lt;Appenders&gt;
        &lt;!-- Graylog server log file appender --&gt;
        &lt;RollingFile name=&quot;rolling-file&quot; fileName=&quot;/var/log/graylog-server/server.log&quot; filePattern=&quot;/var/log/graylog-server/server.log.%i.gz&quot;&gt;
            &lt;PatternLayout pattern=&quot;%d{yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSXXX} %-5p [%c{1}] %m%n&quot;/&gt;
            &lt;Policies&gt;
                &lt;SizeBasedTriggeringPolicy size=&quot;50MB&quot;/&gt;
            &lt;/Policies&gt;
            &lt;DefaultRolloverStrategy max=&quot;10&quot; fileIndex=&quot;min&quot;/&gt;
        &lt;/RollingFile&gt;

        &lt;!-- ##################################################### --&gt;
        &lt;!-- Rotate audit logs daily --&gt;
        &lt;RollingFile name=&quot;AUDITLOG&quot; fileName=&quot;/var/log/graylog-server/audit.log&quot; filePattern=&quot;/var/log/graylog-server/audit-%d{yyyy-MM-dd}.log.gz&quot;&gt;
            &lt;PatternLayout&gt;
                &lt;Pattern&gt;%d - %m - %X%n&lt;/Pattern&gt;
            &lt;/PatternLayout&gt;
            &lt;Policies&gt;
                &lt;TimeBasedTriggeringPolicy /&gt;
            &lt;/Policies&gt;
        &lt;/RollingFile&gt;
        &lt;!-- ##################################################### --&gt;
    &lt;/Appenders&gt;
    &lt;Loggers&gt;
        &lt;Logger name=&quot;org.graylog2&quot; level=&quot;info&quot;/&gt;

        &lt;!-- ##################################################### --&gt;
        &lt;!-- Graylog Audit Log.  The logger name has to match the &quot;auditlog_log4j_logger_name&quot; setting in the Graylog configuration file --&gt;
        &lt;Logger name=&quot;graylog-auditlog&quot; level=&quot;info&quot; additivity=&quot;false&quot;&gt;
            &lt;AppenderRef ref=&quot;AUDITLOG&quot;/&gt;
        &lt;/Logger&gt;
        &lt;!-- ##################################################### --&gt;

        &lt;Root level=&quot;warn&quot;&gt;
            &lt;AppenderRef ref=&quot;rolling-file&quot;/&gt;
        &lt;/Root&gt;
    &lt;/Loggers&gt;
&lt;/Configuration&gt;
</pre></div>
</div>
<p>The config snippets between the <code class="docutils literal notranslate"><span class="pre">&lt;!--</span> <span class="pre">#########</span> <span class="pre">--&gt;</span></code> tags have been added
to the existing <code class="docutils literal notranslate"><span class="pre">log4j2.xml</span></code> file.</p>
<p>Make sure that the <code class="docutils literal notranslate"><span class="pre">name</span></code> in the <code class="docutils literal notranslate"><span class="pre">&lt;Logger</span> <span class="pre">/&gt;</span></code> tag matches the configured
<code class="docutils literal notranslate"><span class="pre">auditlog_log4j_logger_name</span></code> in your Graylog server configuration. Otherwise
you will not see any log entries in the log file.</p>
<div class="section" id="caveats">
<h6>Caveats<a class="headerlink" href="#caveats" title="Permalink to this headline">¶</a></h6>
<p>You have to make sure that the log4j2 related settings in the Graylog server
config file and the <code class="docutils literal notranslate"><span class="pre">log4j2.xml</span></code> file are the same on <strong>every node in your cluster</strong>!</p>
<p>Since every Graylog server writes its own audit log entries when the Graylog
Enterprise plugin is installed, the log files configured in the <code class="docutils literal notranslate"><span class="pre">log4j2.xml</span></code>
file are written on every node. But <strong>only</strong> the entries from the local node
will show up in that file.</p>
<p>If you have more than one node, you have to search in all configured files
on all nodes to get a complete view of the audit trail.</p>
</div>
</div>
</div>
</div>
<span id="document-pages/auditlog/usage"></span><div class="section" id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<p>Once you installed the Graylog Enterprise plugin, Graylog will automatically write
audit log entries into the database.</p>
<div class="section" id="view-audit-log-entries">
<h4>View Audit Log Entries<a class="headerlink" href="#view-audit-log-entries" title="Permalink to this headline">¶</a></h4>
<p>Graylog Audit Log adds a new page to the web interface which can be reached via
“Enterprise/Audit Log”. You can view and export existing audit log entries in
the database.</p>
<p>It also provides a simple search form to search and filter for audit events
you are interested in.</p>
<img alt="_images/auditlog-view-entries-1.png" src="http://res.fansdoc.com/graylog/_images/auditlog-view-entries-1.png" />
</div>
<div class="section" id="expand-event-details">
<h4>Expand Event Details<a class="headerlink" href="#expand-event-details" title="Permalink to this headline">¶</a></h4>
<p>Every row in the audit event entry table is clickable. Once clicked it will
reveal the details of the audit event.</p>
<p>All audit events have static fields like <em>actor</em>, <em>object</em> and others. In
addition to that, every event has some event specific fields.</p>
<p>The fields on the left side in the details are the static fields every event
has and the fields on the right side are the event specific fields.</p>
<img alt="_images/auditlog-view-entries-2.png" src="http://res.fansdoc.com/graylog/_images/auditlog-view-entries-2.png" />
</div>
<div class="section" id="search-filter">
<h4>Search &amp; Filter<a class="headerlink" href="#search-filter" title="Permalink to this headline">¶</a></h4>
<p>To make it easier to get to the audit log entries you need, the audit log UI
provides a simple query language to search and filter the audit log entries.</p>
<p>You can either enter one or more words into the search field or choose to
look for some specific fields in the audit log entries.</p>
<table border="1" class="colwidths-given docutils" id="id1">
<caption><span class="caption-text">Available Fields</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">actor</span></code></td>
<td>the user that triggered the audit event</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">namespace</span></code></td>
<td>the namespace of the audit event; might be different in plugins</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">object</span></code></td>
<td>the object of the audit event; what has been changed</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">action</span></code></td>
<td>name of the action that has been executed on the object</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">success_status</span></code></td>
<td>if the action failed or succeeded</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">message</span></code></td>
<td>the actual audit event message</td>
</tr>
</tbody>
</table>
<div class="section" id="search-for-text-in-the-message">
<h5>Search for text in the message<a class="headerlink" href="#search-for-text-in-the-message" title="Permalink to this headline">¶</a></h5>
<p>If you just want to find some text in the audit event message, you can enter
the word you are looking for into the search bar</p>
<img alt="_images/auditlog-search-entries-1.png" src="http://res.fansdoc.com/graylog/_images/auditlog-search-entries-1.png" />
</div>
<div class="section" id="search-for-specific-fields">
<h5>Search for specific fields<a class="headerlink" href="#search-for-specific-fields" title="Permalink to this headline">¶</a></h5>
<p>You can also filter the entries for specific fields like the <code class="docutils literal notranslate"><span class="pre">actor</span></code>.</p>
<p>If you want to filter for all events triggered by the user <em>jane</em> you can
enter <code class="docutils literal notranslate"><span class="pre">actor:jane</span></code> into the search bar.</p>
<p>Maybe you want to filter for events for more than one actor. That can be done
by using either <code class="docutils literal notranslate"><span class="pre">actor:jane,john</span></code> or <code class="docutils literal notranslate"><span class="pre">actor:jane</span> <span class="pre">actor:john</span></code>.</p>
<p>Or you want to find all audit events which have <strong>not</strong> been triggered by a
user. Add a <code class="docutils literal notranslate"><span class="pre">-</span></code> in front of the field name to negate the condition.
To show all events <strong>except</strong> those created by user <em>jane</em> you can add
<code class="docutils literal notranslate"><span class="pre">-actor:jane</span></code> to the search field.</p>
<p>You can mix and match several field queries to find the entries you need. Here
are some more examples.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">actor:jane,john</span> <span class="pre">-namespace:server</span></code>
get all events by users <em>jane</em> and <em>john</em> which are not in the <em>server</em>
namespace</li>
<li><code class="docutils literal notranslate"><span class="pre">index</span> <span class="pre">action:create</span></code> get all events which have the word <em>index</em> in the
event message and where the action is <em>create</em></li>
<li><code class="docutils literal notranslate"><span class="pre">message:index</span> <span class="pre">action:create</span></code> same as above, just with an explicit field
selector for the message field</li>
</ul>
<img alt="_images/auditlog-view-entries-3.png" src="http://res.fansdoc.com/graylog/_images/auditlog-view-entries-3.png" />
</div>
</div>
<div class="section" id="export-entries">
<h4>Export Entries<a class="headerlink" href="#export-entries" title="Permalink to this headline">¶</a></h4>
<p>If the simple entry viewer is not enough, you can also export the result
of your query as JSON or CSV to further process it.</p>
<p>The “Export Results” button next to the search bar can be used to do that.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The export from the UI is currently limited to the newest 10,000
entries. Use the REST API if you need a bigger export.</p>
</div>
<div class="section" id="export-via-rest-api">
<h5>Export via REST API<a class="headerlink" href="#export-via-rest-api" title="Permalink to this headline">¶</a></h5>
<p>If you want to backup the audit log entries or make them available to another
system, you can use the REST API to export them.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Export 20,000 audit log entries in JSON format
curl -u admin:&lt;admin-password&gt; http://127.0.0.1:9000/api/plugins/org.graylog.plugins.auditlog/entries/export/json?limit=20000

# Export 5,000 audit log entries with actor &quot;jane&quot; in CSV format
curl -u admin:&lt;admin-password&gt; http://127.0.0.1:9000/api/plugins/org.graylog.plugins.auditlog/entries/export/csv?limit=5000&amp;query=actor:jane
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Make sure the <code class="docutils literal notranslate"><span class="pre">query</span></code> parameter is properly escaped if it contains whitespace.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<span id="document-pages/reporting"></span><div class="section" id="reporting">
<span id="reporting-toc"></span><h2>Reporting<a class="headerlink" href="#reporting" title="Permalink to this headline">¶</a></h2>
<p>The Reporting feature enables you to create and customize your own reports by
using dashboard widgets, schedule reports to be automatically delivered to
the people who require them, and manually send or download reports as PDF
files at any time.</p>
<p>Additionally we also offer you historic information of report delivery, so you
can verify that the scheduled reporting deliveries are working as expected.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Reporting is a commercial feature and part of <a class="reference external" href="https://www.graylog.org/enterprise">Graylog Enterprise</a>.</p>
</div>
<div class="toctree-wrapper compound">
<span id="document-pages/reporting/setup"></span><div class="section" id="setup">
<h3>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h3>
<p>Reporting is a commercial Graylog feature that can be installed in addition
to the Graylog open source server.</p>
<div class="section" id="installation">
<h4>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h4>
<p>Reporting is part of the Graylog Enterprise plugin, please check the <a class="reference internal" href="index.html#document-pages/enterprise/setup"><span class="doc">Graylog Enterprise setup page</span></a>
for details on how to install it.</p>
<p>The PDF generation needs the <code class="docutils literal notranslate"><span class="pre">fontconfig</span></code> package installed on the server it is running on.</p>
<p>On a Debian based system use <code class="docutils literal notranslate"><span class="pre">apt</span></code> to install it, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apt-get install fontconfig
</pre></div>
</div>
<p>Respectively on a RedHat based systems use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo yum install fontconfig
</pre></div>
</div>
</div>
<div class="section" id="configuration">
<h4>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h4>
<p>In most cases you can use the Reporting functionality without making any changes to
your Graylog configuration file (check the <a class="reference internal" href="index.html#default-file-location"><span class="std std-ref">default file locations page</span></a>
to see where you can find it). Below, you will find all available configuration
options in case you need to do some advanced configuration.</p>
<table border="1" class="colwidths-given docutils" id="id1">
<caption><span class="caption-text">Configuration Options</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">bin_dir</span></code></td>
<td>Directory with binaries needed for PDF generation.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">data_dir</span></code></td>
<td>Cache directory for PDF generation.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">report_disable_sandbox</span></code></td>
<td>Disables report generation sandbox.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">report_generation_timeout_seconds</span></code></td>
<td>Timeout in seconds to wait for a report generation.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">report_user</span></code></td>
<td>Internal user to generate reports.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">report_render_uri</span></code></td>
<td>URI to connect to Graylog Web Interface.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">report_render_engine_port</span></code></td>
<td>Port to communicate with background process.</td>
</tr>
</tbody>
</table>
<div class="section" id="bin-dir">
<h5>bin_dir<a class="headerlink" href="#bin-dir" title="Permalink to this headline">¶</a></h5>
<p>Default value: <code class="docutils literal notranslate"><span class="pre">bin</span></code> - relative to Graylog working directory</p>
<p>The default distribution comes with two binaries needed for PDF generation ‘headless_shell’ and ‘chromedriver’.
These binaries are usually located in <code class="docutils literal notranslate"><span class="pre">/usr/share/graylog-server/bin</span></code>.</p>
</div>
<div class="section" id="data-dir">
<h5>data_dir<a class="headerlink" href="#data-dir" title="Permalink to this headline">¶</a></h5>
<p>Default value: <code class="docutils literal notranslate"><span class="pre">data</span></code> - relative to Graylog working directory</p>
<p>The PDF generation happens on disk in the first place so Graylog needs a place to write out temporary files.
The system packages create <code class="docutils literal notranslate"><span class="pre">/var/lib/graylog-server</span></code> for this purpose. Make sure this directory is correctly configured
and read-, and writable for the Graylog Server user.</p>
</div>
<div class="section" id="report-disable-sandbox">
<h5>report_disable_sandbox<a class="headerlink" href="#report-disable-sandbox" title="Permalink to this headline">¶</a></h5>
<p>Default value: <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<p>To ensure the maximum security in your system, the reporting generation process
runs inside a sandbox, which provides a restricted environment for the
application. That sandbox can only be used when the process is executed as a
normal user, as the <code class="docutils literal notranslate"><span class="pre">root</span></code> user has special administrative privileges that
could grant a potential attacker full access to your system.</p>
<p>We recommend leaving this configuration option set to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<p>Unfortunately, there are two scenarios where the security features provided by
the sandbox cannot be used:</p>
<ul class="simple">
<li>Environments where you want or must use the <code class="docutils literal notranslate"><span class="pre">root</span></code> user to run reporting
generation.</li>
<li>Environments that provide limited kernel capabilities. On the one hand Docker containers
limit the kernel capabilities in a way that sandboxing doesn’t work. On the other hand
some RedHat/CentOS based systems come with older kernel versions which also lack the necessary
capabilities. Systems with a kernel version &gt;= 4.x should be fine for the default settings.</li>
</ul>
<p>In case your Graylog server runs in one of those scenarios, you may consider
disabling the sandbox.</p>
<p>Please note that this option only affects the reporting generation process, not
the Graylog server.</p>
</div>
<div class="section" id="report-generation-timeout-seconds">
<h5>report_generation_timeout_seconds<a class="headerlink" href="#report-generation-timeout-seconds" title="Permalink to this headline">¶</a></h5>
<p>Default value: <code class="docutils literal notranslate"><span class="pre">180</span></code>.</p>
<p>Time in seconds to wait for a report to load in the background.</p>
<p>To ensure all widgets in your report have time to fetch their data and load,
Graylog will wait up to the value set to this configuration option. When a
report takes longer than that to load, the report generation will fail and
Graylog will log the error in its logs.</p>
<p>In case reports in your Graylog setup are not being generated and the server
displays a timeout error, you may need to increase this value.</p>
</div>
<div class="section" id="report-user">
<h5>report_user<a class="headerlink" href="#report-user" title="Permalink to this headline">¶</a></h5>
<p>Default value: <code class="docutils literal notranslate"><span class="pre">graylog-report</span></code>.</p>
<p>Graylog user that will be used internally to generate reports in the background.
To ensure the user has access to all required information, this user must have
the <cite>Report System (Internal)</cite> role assigned.</p>
</div>
<div class="section" id="report-render-uri">
<h5>report_render_uri<a class="headerlink" href="#report-render-uri" title="Permalink to this headline">¶</a></h5>
<p>Default value: <code class="docutils literal notranslate"><span class="pre">$http_publish_uri</span></code>.</p>
<p>Customize the URI the background process uses to connect to the web interface.
By default it uses the value of the <a class="reference internal" href="index.html#web-rest-api-options"><span class="std std-ref">http_publish_uri</span></a>
option in your Graylog configuration file.</p>
</div>
<div class="section" id="report-render-engine-port">
<h5>report_render_engine_port<a class="headerlink" href="#report-render-engine-port" title="Permalink to this headline">¶</a></h5>
<p>Default value: <code class="docutils literal notranslate"><span class="pre">9515</span></code>.</p>
<p>Customize the port used to communicate with the background process.</p>
</div>
</div>
</div>
<span id="document-pages/reporting/usage"></span><div class="section" id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<p>Reports let you combine multiple Dashboard widgets to create a document that
can display certain information contained within a Graylog system in an organized format
for specific purposes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Reports are based on Dashboard widgets, so please ensure you understand
<a class="reference internal" href="index.html#document-pages/dashboards"><span class="doc">Dashboards</span></a> before you get started.</p>
</div>
<div class="section" id="creating-reports">
<h4>Creating Reports<a class="headerlink" href="#creating-reports" title="Permalink to this headline">¶</a></h4>
<p>You can create a report on the “Enterprise/Reports” page in the web interface.</p>
<img alt="_images/reporting-reports-page.png" src="http://res.fansdoc.com/graylog/_images/reporting-reports-page.png" />
<p>Click on the “Create Report” button to get started. That page contains two
different sections:</p>
<ul class="simple">
<li><strong>Contents</strong> You can use the form to configure the report’s cover page, a
short description, and select the widgets that will be part of the report.</li>
<li><strong>Summary</strong> This information will usually appear on your right and will follow
you as you scroll through the page. It displays a summary of the data included
in the report.</li>
</ul>
<img alt="_images/reporting-create-page.png" src="http://res.fansdoc.com/graylog/_images/reporting-create-page.png" />
<p>Once you are satisfied with the content that will make part of your report, click
on “Create report” to store that configuration in the database.</p>
<p>You can change the selected contents of a report any time by going to the
“Enterprise/Reports” page and clicking on the “Contents” button for the report
you wish to modify.</p>
</div>
<div class="section" id="configure-reports">
<h4>Configure Reports<a class="headerlink" href="#configure-reports" title="Permalink to this headline">¶</a></h4>
<p>The Report Configuration page provides options to schedule the report for
delivery and also to configure the layout of the report.</p>
<p>Go to the “Enterprise/Reports” page and click on “Configuration” to open the
Report Configuration page.</p>
<img alt="_images/reporting-configuration-page.png" src="http://res.fansdoc.com/graylog/_images/reporting-configuration-page.png" />
<div class="section" id="scheduling">
<h5>Scheduling<a class="headerlink" href="#scheduling" title="Permalink to this headline">¶</a></h5>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Please ensure the <a class="reference internal" href="index.html#email-config"><span class="std std-ref">email configuration</span></a> in
your Graylog configuration file is working before you enable report
scheduling.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Scheduling Reports will use resources in the background on both your
Graylog and ES cluster. To avoid performance issues, make sure to allocate
enough resources for your setup and also disable scheduling of Reports you
don’t need to be sent automatically.</p>
</div>
<p>In the Scheduling section you can configure how often the report will be sent. It
is possible to send reports on a daily, weekly or monthly basis.</p>
<p>Here you can also add a subject and body to the email that will contain the report
and select Graylog users or external email addresses that should receive the report
as email.</p>
<p>Once you update the information, make sure to click on “Update scheduling” to save
your changes.</p>
</div>
<div class="section" id="layout">
<h5>Layout<a class="headerlink" href="#layout" title="Permalink to this headline">¶</a></h5>
<p>Much like in a Dashboard, you can drag and drop widgets on the virtual sheet of
paper to select the orders the widgets should go in the report. Rearranging
widgets will save the change in the layout automatically.</p>
<p>Please note that the cover page will always be the first page of the report, and
the next page will start with the report description followed by all widgets in
the configured order.</p>
</div>
</div>
<div class="section" id="history">
<h4>History<a class="headerlink" href="#history" title="Permalink to this headline">¶</a></h4>
<p>As the background generation of reports may fail, the Report History page can help
you discover if there were any errors while generating and sending a report in
the background.</p>
<p>To open the Report history page for a report, click on the “More actions” button
for that report, and select “Report history”.</p>
<img alt="_images/reporting-history-page.png" src="http://res.fansdoc.com/graylog/_images/reporting-history-page.png" />
</div>
<div class="section" id="generating-report-on-demand">
<h4>Generating Report On Demand<a class="headerlink" href="#generating-report-on-demand" title="Permalink to this headline">¶</a></h4>
<div class="section" id="download-manually">
<h5>Download manually<a class="headerlink" href="#download-manually" title="Permalink to this headline">¶</a></h5>
<p>You can generate and download a report manually from the web interface. To do so,
go to the “Enterprise/Reports” page, click on the “More actions” button for the
report you want to download, and select “Download report now”.</p>
<p>Please take into account that the report generation may take a while.</p>
</div>
<div class="section" id="send-report-as-email-manually">
<h5>Send report as email manually<a class="headerlink" href="#send-report-as-email-manually" title="Permalink to this headline">¶</a></h5>
<p>In addition to downloading a report on demand, you may also generate and send
the report at any time by clicking on “More actions” and “Send report now” on
the “Enterprise/Reports” page.</p>
</div>
</div>
</div>
</div>
</div>
<span id="document-pages/enterprise/changelog"></span><div class="section" id="changelog">
<h2>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h2>
<div class="section" id="graylog-enterprise-3-0-2">
<h3>Graylog Enterprise 3.0.2<a class="headerlink" href="#graylog-enterprise-3-0-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2019-05-03</p>
<p><strong>Integrations Plugin</strong></p>
<ul class="simple">
<li>Improve Graylog Forwarder configuration defaults.</li>
<li>Improve Graylog Forwarder error handling.</li>
<li>Update Graylog Forwarder dependencies.</li>
</ul>
</div>
<div class="section" id="graylog-enterprise-3-0-1">
<h3>Graylog Enterprise 3.0.1<a class="headerlink" href="#graylog-enterprise-3-0-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2019-04-01</p>
<ul class="simple">
<li>Fix missing authorization checks in the license management.</li>
<li>Fix view sharing issue for regular users.</li>
<li>Fix memory leak in the reporting system.</li>
</ul>
<p><strong>Integrations Plugin</strong></p>
<ul class="simple">
<li>Add Graylog Forwarder feature.</li>
</ul>
</div>
<div class="section" id="graylog-enterprise-3-0-0">
<h3>Graylog Enterprise 3.0.0<a class="headerlink" href="#graylog-enterprise-3-0-0" title="Permalink to this headline">¶</a></h3>
<p>Released: 2019-02-14</p>
<ul class="simple">
<li>Announcement blog post: <a class="reference external" href="https://www.graylog.org/post/announcing-graylog-v3-0-ga">https://www.graylog.org/post/announcing-graylog-v3-0-ga</a></li>
<li>Upgrade notes: <a class="reference internal" href="index.html#document-pages/upgrade/graylog-3.0"><span class="doc">Upgrading to Graylog 3.0.x</span></a></li>
</ul>
<p>A detailed changelog is following soon!</p>
<p><strong>Integrations Plugin</strong></p>
<ul class="simple">
<li>Add Script Alert Notification</li>
</ul>
</div>
<div class="section" id="graylog-enterprise-2-5-2">
<h3>Graylog Enterprise 2.5.2<a class="headerlink" href="#graylog-enterprise-2-5-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2019-03-15</p>
<div class="section" id="plugin-license">
<h4>Plugin: License<a class="headerlink" href="#plugin-license" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Add missing permissions to license HTTP API resources.</li>
<li>Only show upcoming license expiration warning to admin users.</li>
</ul>
</div>
</div>
<div class="section" id="graylog-enterprise-2-5-1">
<h3>Graylog Enterprise 2.5.1<a class="headerlink" href="#graylog-enterprise-2-5-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2018-12-19</p>
<p>No changes since 2.5.0.</p>
</div>
<div class="section" id="graylog-enterprise-2-5-0">
<h3>Graylog Enterprise 2.5.0<a class="headerlink" href="#graylog-enterprise-2-5-0" title="Permalink to this headline">¶</a></h3>
<p>Released: 2018-11-30</p>
<p>No changes since 2.4.6.</p>
</div>
<div class="section" id="graylog-enterprise-2-4-7">
<h3>Graylog Enterprise 2.4.7<a class="headerlink" href="#graylog-enterprise-2-4-7" title="Permalink to this headline">¶</a></h3>
<p>Released: 2019-03-01</p>
<div class="section" id="id1">
<h4>Plugin: License<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Add missing authorization checks to license resources.</li>
</ul>
</div>
</div>
<div class="section" id="graylog-enterprise-2-4-6">
<h3>Graylog Enterprise 2.4.6<a class="headerlink" href="#graylog-enterprise-2-4-6" title="Permalink to this headline">¶</a></h3>
<p>Released: 2018-07-16</p>
<p>No changes since 2.4.5.</p>
</div>
<div class="section" id="graylog-enterprise-2-4-5">
<h3>Graylog Enterprise 2.4.5<a class="headerlink" href="#graylog-enterprise-2-4-5" title="Permalink to this headline">¶</a></h3>
<p>Released: 2018-05-28</p>
<p>No changes since 2.4.4.</p>
</div>
<div class="section" id="graylog-enterprise-2-4-4">
<h3>Graylog Enterprise 2.4.4<a class="headerlink" href="#graylog-enterprise-2-4-4" title="Permalink to this headline">¶</a></h3>
<p>Released: 2018-05-02</p>
<p>No changes since 2.4.3.</p>
</div>
<div class="section" id="graylog-enterprise-2-4-3">
<h3>Graylog Enterprise 2.4.3<a class="headerlink" href="#graylog-enterprise-2-4-3" title="Permalink to this headline">¶</a></h3>
<p>Released: 2018-01-24</p>
<p>No changes since 2.4.2.</p>
</div>
<div class="section" id="graylog-enterprise-2-4-2">
<h3>Graylog Enterprise 2.4.2<a class="headerlink" href="#graylog-enterprise-2-4-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2018-01-24</p>
<p>No changes since 2.4.1.</p>
</div>
<div class="section" id="graylog-enterprise-2-4-1">
<h3>Graylog Enterprise 2.4.1<a class="headerlink" href="#graylog-enterprise-2-4-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2018-01-19</p>
<p>No changes since 2.4.0.</p>
</div>
<div class="section" id="graylog-enterprise-2-4-0">
<h3>Graylog Enterprise 2.4.0<a class="headerlink" href="#graylog-enterprise-2-4-0" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-12-22</p>
<p>No changes since 2.4.0-rc.2.</p>
</div>
<div class="section" id="graylog-enterprise-2-4-0-rc-2">
<h3>Graylog Enterprise 2.4.0-rc.2<a class="headerlink" href="#graylog-enterprise-2-4-0-rc-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-12-20</p>
<p>No changes since 2.4.0-rc.1.</p>
</div>
<div class="section" id="graylog-enterprise-2-4-0-rc-1">
<h3>Graylog Enterprise 2.4.0-rc.1<a class="headerlink" href="#graylog-enterprise-2-4-0-rc-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-12-19</p>
<p>No changes since 2.4.0-beta.4.</p>
</div>
<div class="section" id="graylog-enterprise-2-4-0-beta-4">
<h3>Graylog Enterprise 2.4.0-beta.4<a class="headerlink" href="#graylog-enterprise-2-4-0-beta-4" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-12-15</p>
<div class="section" id="id2">
<h4>Plugin: License<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The license page now shows more details about the installed licenses.</li>
</ul>
</div>
</div>
<div class="section" id="graylog-enterprise-2-4-0-beta-3">
<h3>Graylog Enterprise 2.4.0-beta.3<a class="headerlink" href="#graylog-enterprise-2-4-0-beta-3" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-12-04</p>
<p>No changes since 2.4.0-beta.2.</p>
</div>
<div class="section" id="graylog-enterprise-2-4-0-beta-2">
<h3>Graylog Enterprise 2.4.0-beta.2<a class="headerlink" href="#graylog-enterprise-2-4-0-beta-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-11-07</p>
<p>No changes since 2.4.0-beta.1.</p>
</div>
<div class="section" id="graylog-enterprise-2-4-0-beta-1">
<h3>Graylog Enterprise 2.4.0-beta.1<a class="headerlink" href="#graylog-enterprise-2-4-0-beta-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-10-20</p>
<div class="section" id="plugin-archive">
<h4>Plugin: Archive<a class="headerlink" href="#plugin-archive" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Add support for Zstandard compression codec.</li>
</ul>
</div>
</div>
<div class="section" id="graylog-enterprise-2-3-2">
<h3>Graylog Enterprise 2.3.2<a class="headerlink" href="#graylog-enterprise-2-3-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-10-19</p>
<div class="section" id="id3">
<h4>Plugin: Archive<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Fix archive creation for indices with lots of shards.</li>
</ul>
</div>
</div>
<div class="section" id="graylog-enterprise-2-3-1">
<h3>Graylog Enterprise 2.3.1<a class="headerlink" href="#graylog-enterprise-2-3-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-08-25</p>
<div class="section" id="id4">
<h4>Plugin: Archive<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Lots of performance improvements (up to 7 times faster)</li>
<li>Do not delete an index if not all of its documents have been archived</li>
</ul>
</div>
</div>
<div class="section" id="graylog-enterprise-2-3-0">
<h3>Graylog Enterprise 2.3.0<a class="headerlink" href="#graylog-enterprise-2-3-0" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-07-26</p>
<div class="section" id="id5">
<h4>Plugin: Archive<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Record checksums for archive segment files</li>
<li>Add two archive permission roles “admin” and “viewer”</li>
<li>Allow export of filenames from catalog search</li>
</ul>
</div>
</div>
<div class="section" id="graylog-enterprise-2-2-3">
<h3>Graylog Enterprise 2.2.3<a class="headerlink" href="#graylog-enterprise-2-2-3" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-04-04</p>
<div class="section" id="id6">
<h4>Plugin: Archive<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Metadata is now stored in MongoDB</li>
<li>Preparation for storage backend support</li>
</ul>
</div>
</div>
<div class="section" id="graylog-enterprise-2-2-2">
<h3>Graylog Enterprise 2.2.2<a class="headerlink" href="#graylog-enterprise-2-2-2" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-03-02</p>
<div class="section" id="plugin-audit-log">
<h4>Plugin: Audit Log<a class="headerlink" href="#plugin-audit-log" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Extend integration with the Archive plugin</li>
</ul>
</div>
</div>
<div class="section" id="graylog-enterprise-2-2-1">
<h3>Graylog Enterprise 2.2.1<a class="headerlink" href="#graylog-enterprise-2-2-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-02-20</p>
<div class="section" id="id7">
<h4>Plugin: Archive<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Improve stability and smaller UI fixes</li>
</ul>
</div>
</div>
<div class="section" id="graylog-enterprise-2-2-0">
<h3>Graylog Enterprise 2.2.0<a class="headerlink" href="#graylog-enterprise-2-2-0" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-02-09</p>
<div class="section" id="id8">
<h4>Plugin: Archive<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Improve index set support</li>
</ul>
</div>
</div>
<div class="section" id="graylog-enterprise-1-2-1">
<h3>Graylog Enterprise 1.2.1<a class="headerlink" href="#graylog-enterprise-1-2-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2017-01-26</p>
<div class="section" id="id9">
<h4>Plugin: Archive<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Prepare the plugin to be compatible with the new default stream.</li>
</ul>
</div>
<div class="section" id="id10">
<h4>Plugin: Audit Log<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Add support for index sets and fix potential NPEs.</li>
<li>Smaller UI improvements.</li>
</ul>
</div>
</div>
<div class="section" id="graylog-enterprise-1-2-0">
<h3>Graylog Enterprise 1.2.0<a class="headerlink" href="#graylog-enterprise-1-2-0" title="Permalink to this headline">¶</a></h3>
<p>Released: 2016-09-14</p>
<p><a class="reference external" href="https://www.graylog.org/blog/70-announcing-graylog-enterprise-v1-2">https://www.graylog.org/blog/70-announcing-graylog-enterprise-v1-2</a></p>
<div class="section" id="id11">
<h4>Plugin: Archive<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Add support for selecting which streams should be included in your archives.</li>
</ul>
</div>
<div class="section" id="id12">
<h4>Plugin: Audit Log<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<p>New plugin to keep track of changes made by users to a Graylog system by automatically saving them in MongoDB.</p>
</div>
</div>
<div class="section" id="graylog-enterprise-1-1">
<h3>Graylog Enterprise 1.1<a class="headerlink" href="#graylog-enterprise-1-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2016-09-01</p>
<ul class="simple">
<li>Added support for Graylog 2.1.0.</li>
</ul>
</div>
<div class="section" id="graylog-enterprise-1-0-1">
<h3>Graylog Enterprise 1.0.1<a class="headerlink" href="#graylog-enterprise-1-0-1" title="Permalink to this headline">¶</a></h3>
<p>Released: 2016-06-08</p>
<p>Bugfix release for the archive plugin.</p>
<div class="section" id="id13">
<h4>Plugin: Archive<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h4>
<div class="section" id="fixed-problem-when-writing-multiple-archive-segments">
<h5>Fixed problem when writing multiple archive segments<a class="headerlink" href="#fixed-problem-when-writing-multiple-archive-segments" title="Permalink to this headline">¶</a></h5>
<p>There was a problem when exceeding the max segment size so that multiple archive
segments are written. The problem has been fixed and wrongly written segments
can be read again.</p>
</div>
</div>
</div>
<div class="section" id="graylog-enterprise-1-0-0">
<h3>Graylog Enterprise 1.0.0<a class="headerlink" href="#graylog-enterprise-1-0-0" title="Permalink to this headline">¶</a></h3>
<p>Released: 2016-05-27</p>
<p>Initial Release including the Archive plugin.</p>
<div class="section" id="id14">
<h4>Plugin: Archive<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h4>
<p>New features since the last beta plugin:</p>
<ul class="simple">
<li>Support for multiple compression strategies. (Snappy, LZ4, Gzip, None)</li>
</ul>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2018 Graylog, Inc.
      
        <span class="commit">
          Revision <code>0d5e24a6</code>.
        </span><BR>
      <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

<span id="busuanzi_container_site_uv">
  本站访客数<span id="busuanzi_value_site_uv"></span>人次。
</span>
维护：<a class="reference external" href="https://www.fansdoc.com">FansDoc.com</a>
    </p>
	
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: 3.0
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="/en/latest/">latest</a></dd>
        
          <dd><a href="/en/stable/">stable</a></dd>
        
          <dd><a href="/en/3.0/">3.0</a></dd>
        
          <dd><a href="/en/2.5/">2.5</a></dd>
        
          <dd><a href="/en/2.4/">2.4</a></dd>
        
          <dd><a href="/en/2.3/">2.3</a></dd>
        
          <dd><a href="/en/2.2/">2.2</a></dd>
        
          <dd><a href="/en/2.1/">2.1</a></dd>
        
          <dd><a href="/en/2.0/">2.0</a></dd>
        
          <dd><a href="/en/1.3/">1.3</a></dd>
        
          <dd><a href="/en/1.2/">1.2</a></dd>
        
          <dd><a href="/en/1.1/">1.1</a></dd>
        
          <dd><a href="/en/1.0/">1.0</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="//readthedocs.org/projects/graylog2-docs/downloads/pdf/3.0/">pdf</a></dd>
        
          <dd><a href="//readthedocs.org/projects/graylog2-docs/downloads/htmlzip/3.0/">html</a></dd>
        
          <dd><a href="//readthedocs.org/projects/graylog2-docs/downloads/epub/3.0/">epub</a></dd>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="//readthedocs.org/projects/graylog2-docs/?fromdocs=graylog2-docs">Project Home</a>
          </dd>
          <dd>
            <a href="//readthedocs.org/builds/graylog2-docs/?fromdocs=graylog2-docs">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.

    </div>
  </div>



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   

</body>
</html>